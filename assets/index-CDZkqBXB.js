var i1=Object.defineProperty;var a1=(t,e,s)=>e in t?i1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var _e=(t,e,s)=>a1(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vu(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const pt={},vr=[],bo=()=>{},Ug=()=>!1,dc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Hu=t=>t.startsWith("onUpdate:"),Ht=Object.assign,qu=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},l1=Object.prototype.hasOwnProperty,ct=(t,e)=>l1.call(t,e),Be=Array.isArray,yr=t=>ea(t)==="[object Map]",Nr=t=>ea(t)==="[object Set]",Mp=t=>ea(t)==="[object Date]",He=t=>typeof t=="function",kt=t=>typeof t=="string",Zs=t=>typeof t=="symbol",ht=t=>t!==null&&typeof t=="object",zg=t=>(ht(t)||He(t))&&He(t.then)&&He(t.catch),Vg=Object.prototype.toString,ea=t=>Vg.call(t),c1=t=>ea(t).slice(8,-1),Hg=t=>ea(t)==="[object Object]",Wu=t=>kt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mi=Vu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uc=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},d1=/-\w/g,qs=uc(t=>t.replace(d1,e=>e.slice(1).toUpperCase())),u1=/\B([A-Z])/g,_n=uc(t=>t.replace(u1,"-$1").toLowerCase()),fc=uc(t=>t.charAt(0).toUpperCase()+t.slice(1)),sd=uc(t=>t?`on${fc(t)}`:""),pn=(t,e)=>!Object.is(t,e),el=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},qg=(t,e,s,o=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:o,value:s})},Al=t=>{const e=parseFloat(t);return isNaN(e)?t:e},f1=t=>{const e=kt(t)?Number(t):NaN;return isNaN(e)?t:e};let Rp;const pc=()=>Rp||(Rp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yo(t){if(Be(t)){const e={};for(let s=0;s<t.length;s++){const o=t[s],n=kt(o)?m1(o):yo(o);if(n)for(const i in n)e[i]=n[i]}return e}else if(kt(t)||ht(t))return t}const p1=/;(?![^(]*\))/g,h1=/:([^]+)/,g1=/\/\*[^]*?\*\//g;function m1(t){const e={};return t.replace(g1,"").split(p1).forEach(s=>{if(s){const o=s.split(h1);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function de(t){let e="";if(kt(t))e=t;else if(Be(t))for(let s=0;s<t.length;s++){const o=de(t[s]);o&&(e+=o+" ")}else if(ht(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const b1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",v1=Vu(b1);function Wg(t){return!!t||t===""}function y1(t,e){if(t.length!==e.length)return!1;let s=!0;for(let o=0;s&&o<t.length;o++)s=Yn(t[o],e[o]);return s}function Yn(t,e){if(t===e)return!0;let s=Mp(t),o=Mp(e);if(s||o)return s&&o?t.getTime()===e.getTime():!1;if(s=Zs(t),o=Zs(e),s||o)return t===e;if(s=Be(t),o=Be(e),s||o)return s&&o?y1(t,e):!1;if(s=ht(t),o=ht(e),s||o){if(!s||!o)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const a in t){const l=t.hasOwnProperty(a),c=e.hasOwnProperty(a);if(l&&!c||!l&&c||!Yn(t[a],e[a]))return!1}}return String(t)===String(e)}function Gu(t,e){return t.findIndex(s=>Yn(s,e))}const Gg=t=>!!(t&&t.__v_isRef===!0),w=t=>kt(t)?t:t==null?"":Be(t)||ht(t)&&(t.toString===Vg||!He(t.toString))?Gg(t)?w(t.value):JSON.stringify(t,Kg,2):String(t),Kg=(t,e)=>Gg(e)?Kg(t,e.value):yr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[o,n],i)=>(s[od(o,i)+" =>"]=n,s),{})}:Nr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>od(s))}:Zs(e)?od(e):ht(e)&&!Be(e)&&!Hg(e)?String(e):e,od=(t,e="")=>{var s;return Zs(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ts;class Yg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ts,!e&&ts&&(this.index=(ts.scopes||(ts.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ts;try{return ts=this,e()}finally{ts=s}}}on(){++this._on===1&&(this.prevScope=ts,ts=this)}off(){this._on>0&&--this._on===0&&(ts=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,o;for(s=0,o=this.effects.length;s<o;s++)this.effects[s].stop();for(this.effects.length=0,s=0,o=this.cleanups.length;s<o;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Jg(t){return new Yg(t)}function Xg(){return ts}function x1(t,e=!1){ts&&ts.cleanups.push(t)}let gt;const nd=new WeakSet;class Qg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ts&&ts.active&&ts.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,nd.has(this)&&(nd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||em(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Dp(this),tm(this);const e=gt,s=Xs;gt=this,Xs=!0;try{return this.fn()}finally{sm(this),gt=e,Xs=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ju(e);this.deps=this.depsTail=void 0,Dp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?nd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zd(this)&&this.run()}get dirty(){return zd(this)}}let Zg=0,bi,vi;function em(t,e=!1){if(t.flags|=8,e){t.next=vi,vi=t;return}t.next=bi,bi=t}function Ku(){Zg++}function Yu(){if(--Zg>0)return;if(vi){let e=vi;for(vi=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;bi;){let e=bi;for(bi=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(o){t||(t=o)}e=s}}if(t)throw t}function tm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sm(t){let e,s=t.depsTail,o=s;for(;o;){const n=o.prevDep;o.version===-1?(o===s&&(s=n),Ju(o),w1(o)):e=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=n}t.deps=e,t.depsTail=s}function zd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(om(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function om(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Oi)||(t.globalVersion=Oi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!zd(t))))return;t.flags|=2;const e=t.dep,s=gt,o=Xs;gt=t,Xs=!0;try{tm(t);const n=t.fn(t._value);(e.version===0||pn(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{gt=s,Xs=o,sm(t),t.flags&=-3}}function Ju(t,e=!1){const{dep:s,prevSub:o,nextSub:n}=t;if(o&&(o.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=o,t.nextSub=void 0),s.subs===t&&(s.subs=o,!o&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)Ju(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function w1(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Xs=!0;const nm=[];function Ho(){nm.push(Xs),Xs=!1}function qo(){const t=nm.pop();Xs=t===void 0?!0:t}function Dp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=gt;gt=void 0;try{e()}finally{gt=s}}}let Oi=0;class _1{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Xu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!gt||!Xs||gt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==gt)s=this.activeLink=new _1(gt,this),gt.deps?(s.prevDep=gt.depsTail,gt.depsTail.nextDep=s,gt.depsTail=s):gt.deps=gt.depsTail=s,rm(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const o=s.nextDep;o.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=o),s.prevDep=gt.depsTail,s.nextDep=void 0,gt.depsTail.nextDep=s,gt.depsTail=s,gt.deps===s&&(gt.deps=o)}return s}trigger(e){this.version++,Oi++,this.notify(e)}notify(e){Ku();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Yu()}}}function rm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let o=e.deps;o;o=o.nextDep)rm(o)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Tl=new WeakMap,Un=Symbol(""),Vd=Symbol(""),Ii=Symbol("");function os(t,e,s){if(Xs&&gt){let o=Tl.get(t);o||Tl.set(t,o=new Map);let n=o.get(s);n||(o.set(s,n=new Xu),n.map=o,n.key=s),n.track()}}function Bo(t,e,s,o,n,i){const a=Tl.get(t);if(!a){Oi++;return}const l=c=>{c&&c.trigger()};if(Ku(),e==="clear")a.forEach(l);else{const c=Be(t),d=c&&Wu(s);if(c&&s==="length"){const u=Number(o);a.forEach((f,p)=>{(p==="length"||p===Ii||!Zs(p)&&p>=u)&&l(f)})}else switch((s!==void 0||a.has(void 0))&&l(a.get(s)),d&&l(a.get(Ii)),e){case"add":c?d&&l(a.get("length")):(l(a.get(Un)),yr(t)&&l(a.get(Vd)));break;case"delete":c||(l(a.get(Un)),yr(t)&&l(a.get(Vd)));break;case"set":yr(t)&&l(a.get(Un));break}}Yu()}function k1(t,e){const s=Tl.get(t);return s&&s.get(e)}function dr(t){const e=ze(t);return e===t?e:(os(e,"iterate",Ii),zs(t)?e:e.map(Kt))}function hc(t){return os(t=ze(t),"iterate",Ii),t}const C1={__proto__:null,[Symbol.iterator](){return rd(this,Symbol.iterator,Kt)},concat(...t){return dr(this).concat(...t.map(e=>Be(e)?dr(e):e))},entries(){return rd(this,"entries",t=>(t[1]=Kt(t[1]),t))},every(t,e){return $o(this,"every",t,e,void 0,arguments)},filter(t,e){return $o(this,"filter",t,e,s=>s.map(Kt),arguments)},find(t,e){return $o(this,"find",t,e,Kt,arguments)},findIndex(t,e){return $o(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return $o(this,"findLast",t,e,Kt,arguments)},findLastIndex(t,e){return $o(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return $o(this,"forEach",t,e,void 0,arguments)},includes(...t){return id(this,"includes",t)},indexOf(...t){return id(this,"indexOf",t)},join(t){return dr(this).join(t)},lastIndexOf(...t){return id(this,"lastIndexOf",t)},map(t,e){return $o(this,"map",t,e,void 0,arguments)},pop(){return Qr(this,"pop")},push(...t){return Qr(this,"push",t)},reduce(t,...e){return Op(this,"reduce",t,e)},reduceRight(t,...e){return Op(this,"reduceRight",t,e)},shift(){return Qr(this,"shift")},some(t,e){return $o(this,"some",t,e,void 0,arguments)},splice(...t){return Qr(this,"splice",t)},toReversed(){return dr(this).toReversed()},toSorted(t){return dr(this).toSorted(t)},toSpliced(...t){return dr(this).toSpliced(...t)},unshift(...t){return Qr(this,"unshift",t)},values(){return rd(this,"values",Kt)}};function rd(t,e,s){const o=hc(t),n=o[e]();return o!==t&&!zs(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const $1=Array.prototype;function $o(t,e,s,o,n,i){const a=hc(t),l=a!==t&&!zs(t),c=a[e];if(c!==$1[e]){const f=c.apply(t,i);return l?Kt(f):f}let d=s;a!==t&&(l?d=function(f,p){return s.call(this,Kt(f),p,t)}:s.length>2&&(d=function(f,p){return s.call(this,f,p,t)}));const u=c.call(a,d,o);return l&&n?n(u):u}function Op(t,e,s,o){const n=hc(t);let i=s;return n!==t&&(zs(t)?s.length>3&&(i=function(a,l,c){return s.call(this,a,l,c,t)}):i=function(a,l,c){return s.call(this,a,Kt(l),c,t)}),n[e](i,...o)}function id(t,e,s){const o=ze(t);os(o,"iterate",Ii);const n=o[e](...s);return(n===-1||n===!1)&&ef(s[0])?(s[0]=ze(s[0]),o[e](...s)):n}function Qr(t,e,s=[]){Ho(),Ku();const o=ze(t)[e].apply(t,s);return Yu(),qo(),o}const E1=Vu("__proto__,__v_isRef,__isVue"),im=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zs));function S1(t){Zs(t)||(t=String(t));const e=ze(this);return os(e,"has",t),e.hasOwnProperty(t)}class am{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,o){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return o===(n?i?B1:um:i?dm:cm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(o)?e:void 0;const a=Be(e);if(!n){let c;if(a&&(c=C1[s]))return c;if(s==="hasOwnProperty")return S1}const l=Reflect.get(e,s,Mt(e)?e:o);return(Zs(s)?im.has(s):E1(s))||(n||os(e,"get",s),i)?l:Mt(l)?a&&Wu(s)?l:l.value:ht(l)?n?pm(l):Ft(l):l}}class lm extends am{constructor(e=!1){super(!1,e)}set(e,s,o,n){let i=e[s];if(!this._isShallow){const c=vn(i);if(!zs(o)&&!vn(o)&&(i=ze(i),o=ze(o)),!Be(e)&&Mt(i)&&!Mt(o))return c||(i.value=o),!0}const a=Be(e)&&Wu(s)?Number(s)<e.length:ct(e,s),l=Reflect.set(e,s,o,Mt(e)?e:n);return e===ze(n)&&(a?pn(o,i)&&Bo(e,"set",s,o):Bo(e,"add",s,o)),l}deleteProperty(e,s){const o=ct(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&o&&Bo(e,"delete",s,void 0),n}has(e,s){const o=Reflect.has(e,s);return(!Zs(s)||!im.has(s))&&os(e,"has",s),o}ownKeys(e){return os(e,"iterate",Be(e)?"length":Un),Reflect.ownKeys(e)}}class A1 extends am{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const T1=new lm,P1=new A1,M1=new lm(!0);const Hd=t=>t,Ta=t=>Reflect.getPrototypeOf(t);function R1(t,e,s){return function(...o){const n=this.__v_raw,i=ze(n),a=yr(i),l=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,d=n[t](...o),u=s?Hd:e?Pl:Kt;return!e&&os(i,"iterate",c?Vd:Un),{next(){const{value:f,done:p}=d.next();return p?{value:f,done:p}:{value:l?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Pa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function D1(t,e){const s={get(n){const i=this.__v_raw,a=ze(i),l=ze(n);t||(pn(n,l)&&os(a,"get",n),os(a,"get",l));const{has:c}=Ta(a),d=e?Hd:t?Pl:Kt;if(c.call(a,n))return d(i.get(n));if(c.call(a,l))return d(i.get(l));i!==a&&i.get(n)},get size(){const n=this.__v_raw;return!t&&os(ze(n),"iterate",Un),n.size},has(n){const i=this.__v_raw,a=ze(i),l=ze(n);return t||(pn(n,l)&&os(a,"has",n),os(a,"has",l)),n===l?i.has(n):i.has(n)||i.has(l)},forEach(n,i){const a=this,l=a.__v_raw,c=ze(l),d=e?Hd:t?Pl:Kt;return!t&&os(c,"iterate",Un),l.forEach((u,f)=>n.call(i,d(u),d(f),a))}};return Ht(s,t?{add:Pa("add"),set:Pa("set"),delete:Pa("delete"),clear:Pa("clear")}:{add(n){!e&&!zs(n)&&!vn(n)&&(n=ze(n));const i=ze(this);return Ta(i).has.call(i,n)||(i.add(n),Bo(i,"add",n,n)),this},set(n,i){!e&&!zs(i)&&!vn(i)&&(i=ze(i));const a=ze(this),{has:l,get:c}=Ta(a);let d=l.call(a,n);d||(n=ze(n),d=l.call(a,n));const u=c.call(a,n);return a.set(n,i),d?pn(i,u)&&Bo(a,"set",n,i):Bo(a,"add",n,i),this},delete(n){const i=ze(this),{has:a,get:l}=Ta(i);let c=a.call(i,n);c||(n=ze(n),c=a.call(i,n)),l&&l.call(i,n);const d=i.delete(n);return c&&Bo(i,"delete",n,void 0),d},clear(){const n=ze(this),i=n.size!==0,a=n.clear();return i&&Bo(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=R1(n,t,e)}),s}function Qu(t,e){const s=D1(t,e);return(o,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?o:Reflect.get(ct(s,n)&&n in o?s:o,n,i)}const O1={get:Qu(!1,!1)},I1={get:Qu(!1,!0)},L1={get:Qu(!0,!1)};const cm=new WeakMap,dm=new WeakMap,um=new WeakMap,B1=new WeakMap;function N1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function j1(t){return t.__v_skip||!Object.isExtensible(t)?0:N1(c1(t))}function Ft(t){return vn(t)?t:Zu(t,!1,T1,O1,cm)}function fm(t){return Zu(t,!1,M1,I1,dm)}function pm(t){return Zu(t,!0,P1,L1,um)}function Zu(t,e,s,o,n){if(!ht(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=j1(t);if(i===0)return t;const a=n.get(t);if(a)return a;const l=new Proxy(t,i===2?o:s);return n.set(t,l),l}function hn(t){return vn(t)?hn(t.__v_raw):!!(t&&t.__v_isReactive)}function vn(t){return!!(t&&t.__v_isReadonly)}function zs(t){return!!(t&&t.__v_isShallow)}function ef(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function tf(t){return!ct(t,"__v_skip")&&Object.isExtensible(t)&&qg(t,"__v_skip",!0),t}const Kt=t=>ht(t)?Ft(t):t,Pl=t=>ht(t)?pm(t):t;function Mt(t){return t?t.__v_isRef===!0:!1}function I(t){return hm(t,!1)}function F1(t){return hm(t,!0)}function hm(t,e){return Mt(t)?t:new U1(t,e)}class U1{constructor(e,s){this.dep=new Xu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:ze(e),this._value=s?e:Kt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,o=this.__v_isShallow||zs(e)||vn(e);e=o?e:ze(e),pn(e,s)&&(this._rawValue=e,this._value=o?e:Kt(e),this.dep.trigger())}}function ye(t){return Mt(t)?t.value:t}const z1={get:(t,e,s)=>e==="__v_raw"?t:ye(Reflect.get(t,e,s)),set:(t,e,s,o)=>{const n=t[e];return Mt(n)&&!Mt(s)?(n.value=s,!0):Reflect.set(t,e,s,o)}};function gm(t){return hn(t)?t:new Proxy(t,z1)}function V1(t){const e=Be(t)?new Array(t.length):{};for(const s in t)e[s]=q1(t,s);return e}class H1{constructor(e,s,o){this._object=e,this._key=s,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return k1(ze(this._object),this._key)}}function q1(t,e,s){const o=t[e];return Mt(o)?o:new H1(t,e,s)}class W1{constructor(e,s,o){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Xu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Oi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&gt!==this)return em(this,!0),!0}get value(){const e=this.dep.track();return om(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function G1(t,e,s=!1){let o,n;return He(t)?o=t:(o=t.get,n=t.set),new W1(o,n,s)}const Ma={},Ml=new WeakMap;let In;function K1(t,e=!1,s=In){if(s){let o=Ml.get(s);o||Ml.set(s,o=[]),o.push(t)}}function Y1(t,e,s=pt){const{immediate:o,deep:n,once:i,scheduler:a,augmentJob:l,call:c}=s,d=P=>n?P:zs(P)||n===!1||n===0?No(P,1):No(P);let u,f,p,g,m=!1,v=!1;if(Mt(t)?(f=()=>t.value,m=zs(t)):hn(t)?(f=()=>d(t),m=!0):Be(t)?(v=!0,m=t.some(P=>hn(P)||zs(P)),f=()=>t.map(P=>{if(Mt(P))return P.value;if(hn(P))return d(P);if(He(P))return c?c(P,2):P()})):He(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){Ho();try{p()}finally{qo()}}const P=In;In=u;try{return c?c(t,3,[g]):t(g)}finally{In=P}}:f=bo,e&&n){const P=f,$=n===!0?1/0:n;f=()=>No(P(),$)}const x=Xg(),_=()=>{u.stop(),x&&x.active&&qu(x.effects,u)};if(i&&e){const P=e;e=(...$)=>{P(...$),_()}}let k=v?new Array(t.length).fill(Ma):Ma;const C=P=>{if(!(!(u.flags&1)||!u.dirty&&!P))if(e){const $=u.run();if(n||m||(v?$.some((R,V)=>pn(R,k[V])):pn($,k))){p&&p();const R=In;In=u;try{const V=[$,k===Ma?void 0:v&&k[0]===Ma?[]:k,g];k=$,c?c(e,3,V):e(...V)}finally{In=R}}}else u.run()};return l&&l(C),u=new Qg(f),u.scheduler=a?()=>a(C,!1):C,g=P=>K1(P,!1,u),p=u.onStop=()=>{const P=Ml.get(u);if(P){if(c)c(P,4);else for(const $ of P)$();Ml.delete(u)}},e?o?C(!0):k=u.run():a?a(C.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function No(t,e=1/0,s){if(e<=0||!ht(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Mt(t))No(t.value,e,s);else if(Be(t))for(let o=0;o<t.length;o++)No(t[o],e,s);else if(Nr(t)||yr(t))t.forEach(o=>{No(o,e,s)});else if(Hg(t)){for(const o in t)No(t[o],e,s);for(const o of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,o)&&No(t[o],e,s)}return t}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ta(t,e,s,o){try{return o?t(...o):t()}catch(n){gc(n,e,s)}}function eo(t,e,s,o){if(He(t)){const n=ta(t,e,s,o);return n&&zg(n)&&n.catch(i=>{gc(i,e,s)}),n}if(Be(t)){const n=[];for(let i=0;i<t.length;i++)n.push(eo(t[i],e,s,o));return n}}function gc(t,e,s,o=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||pt;if(e){let l=e.parent;const c=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,c,d)===!1)return}l=l.parent}if(i){Ho(),ta(i,null,10,[t,c,d]),qo();return}}J1(t,s,n,o,a)}function J1(t,e,s,o=!0,n=!1){if(n)throw t;console.error(t)}const ps=[];let lo=-1;const xr=[];let on=null,gr=0;const mm=Promise.resolve();let Rl=null;function _s(t){const e=Rl||mm;return t?e.then(this?t.bind(this):t):e}function X1(t){let e=lo+1,s=ps.length;for(;e<s;){const o=e+s>>>1,n=ps[o],i=Li(n);i<t||i===t&&n.flags&2?e=o+1:s=o}return e}function sf(t){if(!(t.flags&1)){const e=Li(t),s=ps[ps.length-1];!s||!(t.flags&2)&&e>=Li(s)?ps.push(t):ps.splice(X1(e),0,t),t.flags|=1,bm()}}function bm(){Rl||(Rl=mm.then(ym))}function Q1(t){Be(t)?xr.push(...t):on&&t.id===-1?on.splice(gr+1,0,t):t.flags&1||(xr.push(t),t.flags|=1),bm()}function Ip(t,e,s=lo+1){for(;s<ps.length;s++){const o=ps[s];if(o&&o.flags&2){if(t&&o.id!==t.uid)continue;ps.splice(s,1),s--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function vm(t){if(xr.length){const e=[...new Set(xr)].sort((s,o)=>Li(s)-Li(o));if(xr.length=0,on){on.push(...e);return}for(on=e,gr=0;gr<on.length;gr++){const s=on[gr];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}on=null,gr=0}}const Li=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ym(t){try{for(lo=0;lo<ps.length;lo++){const e=ps[lo];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ta(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;lo<ps.length;lo++){const e=ps[lo];e&&(e.flags&=-2)}lo=-1,ps.length=0,vm(),Rl=null,(ps.length||xr.length)&&ym()}}let Yt=null,xm=null;function Dl(t){const e=Yt;return Yt=t,xm=t&&t.type.__scopeId||null,e}function tt(t,e=Yt,s){if(!e||t._n)return t;const o=(...n)=>{o._d&&Ll(-1);const i=Dl(e);let a;try{a=t(...n)}finally{Dl(i),o._d&&Ll(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function ie(t,e){if(Yt===null)return t;const s=wc(Yt),o=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,a,l,c=pt]=e[n];i&&(He(i)&&(i={mounted:i,updated:i}),i.deep&&No(a),o.push({dir:i,instance:s,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function En(t,e,s,o){const n=t.dirs,i=e&&e.dirs;for(let a=0;a<n.length;a++){const l=n[a];i&&(l.oldValue=i[a].value);let c=l.dir[o];c&&(Ho(),eo(c,s,8,[t.el,l,t,e]),qo())}}const wm=Symbol("_vte"),_m=t=>t.__isTeleport,yi=t=>t&&(t.disabled||t.disabled===""),Lp=t=>t&&(t.defer||t.defer===""),Bp=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Np=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,qd=(t,e)=>{const s=t&&t.to;return kt(s)?e?e(s):null:s},km={name:"Teleport",__isTeleport:!0,process(t,e,s,o,n,i,a,l,c,d){const{mc:u,pc:f,pbc:p,o:{insert:g,querySelector:m,createText:v,createComment:x}}=d,_=yi(e.props);let{shapeFlag:k,children:C,dynamicChildren:P}=e;if(t==null){const $=e.el=v(""),R=e.anchor=v("");g($,s,o),g(R,s,o);const V=(E,S)=>{k&16&&(n&&n.isCE&&(n.ce._teleportTarget=E),u(C,E,S,n,i,a,l,c))},B=()=>{const E=e.target=qd(e.props,m),S=Cm(E,e,v,g);E&&(a!=="svg"&&Bp(E)?a="svg":a!=="mathml"&&Np(E)&&(a="mathml"),_||(V(E,S),tl(e,!1)))};_&&(V(s,R),tl(e,!0)),Lp(e.props)?(e.el.__isMounted=!1,fs(()=>{B(),delete e.el.__isMounted},i)):B()}else{if(Lp(e.props)&&t.el.__isMounted===!1){fs(()=>{km.process(t,e,s,o,n,i,a,l,c,d)},i);return}e.el=t.el,e.targetStart=t.targetStart;const $=e.anchor=t.anchor,R=e.target=t.target,V=e.targetAnchor=t.targetAnchor,B=yi(t.props),E=B?s:R,S=B?$:V;if(a==="svg"||Bp(R)?a="svg":(a==="mathml"||Np(R))&&(a="mathml"),P?(p(t.dynamicChildren,P,E,n,i,a,l),af(t,e,!0)):c||f(t,e,E,S,n,i,a,l,!1),_)B?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ra(e,s,$,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const O=e.target=qd(e.props,m);O&&Ra(e,O,null,d,0)}else B&&Ra(e,R,V,d,1);tl(e,_)}},remove(t,e,s,{um:o,o:{remove:n}},i){const{shapeFlag:a,children:l,anchor:c,targetStart:d,targetAnchor:u,target:f,props:p}=t;if(f&&(n(d),n(u)),i&&n(c),a&16){const g=i||!yi(p);for(let m=0;m<l.length;m++){const v=l[m];o(v,e,s,g,!!v.dynamicChildren)}}},move:Ra,hydrate:Z1};function Ra(t,e,s,{o:{insert:o},m:n},i=2){i===0&&o(t.targetAnchor,e,s);const{el:a,anchor:l,shapeFlag:c,children:d,props:u}=t,f=i===2;if(f&&o(a,e,s),(!f||yi(u))&&c&16)for(let p=0;p<d.length;p++)n(d[p],e,s,2);f&&o(l,e,s)}function Z1(t,e,s,o,n,i,{o:{nextSibling:a,parentNode:l,querySelector:c,insert:d,createText:u}},f){function p(v,x,_,k){x.anchor=f(a(v),x,l(v),s,o,n,i),x.targetStart=_,x.targetAnchor=k}const g=e.target=qd(e.props,c),m=yi(e.props);if(g){const v=g._lpa||g.firstChild;if(e.shapeFlag&16)if(m)p(t,e,v,v&&a(v));else{e.anchor=a(t);let x=v;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")e.targetStart=x;else if(x.data==="teleport anchor"){e.targetAnchor=x,g._lpa=e.targetAnchor&&a(e.targetAnchor);break}}x=a(x)}e.targetAnchor||Cm(g,e,u,d),f(v&&a(v),e,g,s,o,n,i)}tl(e,m)}else m&&e.shapeFlag&16&&p(t,e,t,a(t));return e.anchor&&a(e.anchor)}const Mo=km;function tl(t,e){const s=t.ctx;if(s&&s.ut){let o,n;for(e?(o=t.el,n=t.anchor):(o=t.targetStart,n=t.targetAnchor);o&&o!==n;)o.nodeType===1&&o.setAttribute("data-v-owner",s.uid),o=o.nextSibling;s.ut()}}function Cm(t,e,s,o){const n=e.targetStart=s(""),i=e.targetAnchor=s("");return n[wm]=i,t&&(o(n,t),o(i,t)),i}const Io=Symbol("_leaveCb"),Da=Symbol("_enterCb");function ew(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return nt(()=>{t.isMounted=!0}),Rm(()=>{t.isUnmounting=!0}),t}const Ns=[Function,Array],$m={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ns,onEnter:Ns,onAfterEnter:Ns,onEnterCancelled:Ns,onBeforeLeave:Ns,onLeave:Ns,onAfterLeave:Ns,onLeaveCancelled:Ns,onBeforeAppear:Ns,onAppear:Ns,onAfterAppear:Ns,onAppearCancelled:Ns},Em=t=>{const e=t.subTree;return e.component?Em(e.component):e},tw={name:"BaseTransition",props:$m,setup(t,{slots:e}){const s=df(),o=ew();return()=>{const n=e.default&&Tm(e.default(),!0);if(!n||!n.length)return;const i=Sm(n),a=ze(t),{mode:l}=a;if(o.isLeaving)return ad(i);const c=jp(i);if(!c)return ad(i);let d=Wd(c,a,o,s,f=>d=f);c.type!==ns&&Bi(c,d);let u=s.subTree&&jp(s.subTree);if(u&&u.type!==ns&&!Nn(u,c)&&Em(s).type!==ns){let f=Wd(u,a,o,s);if(Bi(u,f),l==="out-in"&&c.type!==ns)return o.isLeaving=!0,f.afterLeave=()=>{o.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},ad(i);l==="in-out"&&c.type!==ns?f.delayLeave=(p,g,m)=>{const v=Am(o,u);v[String(u.key)]=u,p[Io]=()=>{g(),p[Io]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{m(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function Sm(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==ns){e=s;break}}return e}const sw=tw;function Am(t,e){const{leavingVNodes:s}=t;let o=s.get(e.type);return o||(o=Object.create(null),s.set(e.type,o)),o}function Wd(t,e,s,o,n){const{appear:i,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:x,onAppear:_,onAfterAppear:k,onAppearCancelled:C}=e,P=String(t.key),$=Am(s,t),R=(E,S)=>{E&&eo(E,o,9,S)},V=(E,S)=>{const O=S[1];R(E,S),Be(E)?E.every(T=>T.length<=1)&&O():E.length<=1&&O()},B={mode:a,persisted:l,beforeEnter(E){let S=c;if(!s.isMounted)if(i)S=x||c;else return;E[Io]&&E[Io](!0);const O=$[P];O&&Nn(t,O)&&O.el[Io]&&O.el[Io](),R(S,[E])},enter(E){let S=d,O=u,T=f;if(!s.isMounted)if(i)S=_||d,O=k||u,T=C||f;else return;let L=!1;const K=E[Da]=z=>{L||(L=!0,z?R(T,[E]):R(O,[E]),B.delayedLeave&&B.delayedLeave(),E[Da]=void 0)};S?V(S,[E,K]):K()},leave(E,S){const O=String(t.key);if(E[Da]&&E[Da](!0),s.isUnmounting)return S();R(p,[E]);let T=!1;const L=E[Io]=K=>{T||(T=!0,S(),K?R(v,[E]):R(m,[E]),E[Io]=void 0,$[O]===t&&delete $[O])};$[O]=t,g?V(g,[E,L]):L()},clone(E){const S=Wd(E,e,s,o,n);return n&&n(S),S}};return B}function ad(t){if(mc(t))return t=Go(t),t.children=null,t}function jp(t){if(!mc(t))return _m(t.type)&&t.children?Sm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&He(s.default))return s.default()}}function Bi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Bi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Tm(t,e=!1,s){let o=[],n=0;for(let i=0;i<t.length;i++){let a=t[i];const l=s==null?a.key:String(s)+String(a.key!=null?a.key:i);a.type===ge?(a.patchFlag&128&&n++,o=o.concat(Tm(a.children,e,l))):(e||a.type!==ns)&&o.push(l!=null?Go(a,{key:l}):a)}if(n>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}function Le(t,e){return He(t)?Ht({name:t.name},e,{setup:t}):t}function Pm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ol=new WeakMap;function xi(t,e,s,o,n=!1){if(Be(t)){t.forEach((m,v)=>xi(m,e&&(Be(e)?e[v]:e),s,o,n));return}if(wr(o)&&!n){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&xi(t,e,s,o.component.subTree);return}const i=o.shapeFlag&4?wc(o.component):o.el,a=n?null:i,{i:l,r:c}=t,d=e&&e.r,u=l.refs===pt?l.refs={}:l.refs,f=l.setupState,p=ze(f),g=f===pt?Ug:m=>ct(p,m);if(d!=null&&d!==c){if(Fp(e),kt(d))u[d]=null,g(d)&&(f[d]=null);else if(Mt(d)){d.value=null;const m=e;m.k&&(u[m.k]=null)}}if(He(c))ta(c,l,12,[a,u]);else{const m=kt(c),v=Mt(c);if(m||v){const x=()=>{if(t.f){const _=m?g(c)?f[c]:u[c]:c.value;if(n)Be(_)&&qu(_,i);else if(Be(_))_.includes(i)||_.push(i);else if(m)u[c]=[i],g(c)&&(f[c]=u[c]);else{const k=[i];c.value=k,t.k&&(u[t.k]=k)}}else m?(u[c]=a,g(c)&&(f[c]=a)):v&&(c.value=a,t.k&&(u[t.k]=a))};if(a){const _=()=>{x(),Ol.delete(t)};_.id=-1,Ol.set(t,_),fs(_,s)}else Fp(t),x()}}}function Fp(t){const e=Ol.get(t);e&&(e.flags|=8,Ol.delete(t))}pc().requestIdleCallback;pc().cancelIdleCallback;const wr=t=>!!t.type.__asyncLoader,mc=t=>t.type.__isKeepAlive;function ow(t,e){Mm(t,"a",e)}function nw(t,e){Mm(t,"da",e)}function Mm(t,e,s=rs){const o=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(bc(e,o,s),s){let n=s.parent;for(;n&&n.parent;)mc(n.parent.vnode)&&rw(o,e,s,n),n=n.parent}}function rw(t,e,s,o){const n=bc(e,t,o,!0);sr(()=>{qu(o[e],n)},s)}function bc(t,e,s=rs,o=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Ho();const l=sa(s),c=eo(e,s,t,a);return l(),qo(),c});return o?n.unshift(i):n.push(i),i}}const Ko=t=>(e,s=rs)=>{(!ji||t==="sp")&&bc(t,(...o)=>e(...o),s)},iw=Ko("bm"),nt=Ko("m"),aw=Ko("bu"),of=Ko("u"),Rm=Ko("bum"),sr=Ko("um"),lw=Ko("sp"),cw=Ko("rtg"),dw=Ko("rtc");function uw(t,e=rs){bc("ec",t,e)}const Dm="components";function Wo(t,e){return Im(Dm,t,!0,e)||t}const Om=Symbol.for("v-ndc");function vc(t){return kt(t)?Im(Dm,t,!1)||t:t||Om}function Im(t,e,s=!0,o=!1){const n=Yt||rs;if(n){const i=n.type;{const l=Zw(i,!1);if(l&&(l===e||l===qs(e)||l===fc(qs(e))))return i}const a=Up(n[t]||i[t],e)||Up(n.appContext[t],e);return!a&&o?i:a}}function Up(t,e){return t&&(t[e]||t[qs(e)]||t[fc(qs(e))])}function xe(t,e,s,o){let n;const i=s,a=Be(t);if(a||kt(t)){const l=a&&hn(t);let c=!1,d=!1;l&&(c=!zs(t),d=vn(t),t=hc(t)),n=new Array(t.length);for(let u=0,f=t.length;u<f;u++)n[u]=e(c?d?Pl(Kt(t[u])):Kt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,i)}else if(ht(t))if(t[Symbol.iterator])n=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);n=new Array(l.length);for(let c=0,d=l.length;c<d;c++){const u=l[c];n[c]=e(t[u],u,c,i)}}else n=[];return n}function fw(t,e,s={},o,n){if(Yt.ce||Yt.parent&&wr(Yt.parent)&&Yt.parent.ce)return b(),Ue(ge,null,[fe("slot",s,o)],64);let i=t[e];i&&i._c&&(i._d=!1),b();const a=i&&Lm(i(s)),l=s.key||a&&a.key,c=Ue(ge,{key:(l&&!Zs(l)?l:`_${e}`)+(!a&&o?"_fb":"")},a||[],a&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Lm(t){return t.some(e=>Jn(e)?!(e.type===ns||e.type===ge&&!Lm(e.children)):!0)?t:null}const Gd=t=>t?eb(t)?wc(t):Gd(t.parent):null,wi=Ht(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gd(t.parent),$root:t=>Gd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Nm(t),$forceUpdate:t=>t.f||(t.f=()=>{sf(t.update)}),$nextTick:t=>t.n||(t.n=_s.bind(t.proxy)),$watch:t=>Ow.bind(t)}),ld=(t,e)=>t!==pt&&!t.__isScriptSetup&&ct(t,e),pw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:o,data:n,props:i,accessCache:a,type:l,appContext:c}=t;let d;if(e[0]!=="$"){const g=a[e];if(g!==void 0)switch(g){case 1:return o[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(ld(o,e))return a[e]=1,o[e];if(n!==pt&&ct(n,e))return a[e]=2,n[e];if((d=t.propsOptions[0])&&ct(d,e))return a[e]=3,i[e];if(s!==pt&&ct(s,e))return a[e]=4,s[e];Kd&&(a[e]=0)}}const u=wi[e];let f,p;if(u)return e==="$attrs"&&os(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==pt&&ct(s,e))return a[e]=4,s[e];if(p=c.config.globalProperties,ct(p,e))return p[e]},set({_:t},e,s){const{data:o,setupState:n,ctx:i}=t;return ld(n,e)?(n[e]=s,!0):o!==pt&&ct(o,e)?(o[e]=s,!0):ct(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:o,appContext:n,propsOptions:i,type:a}},l){let c,d;return!!(s[l]||t!==pt&&l[0]!=="$"&&ct(t,l)||ld(e,l)||(c=i[0])&&ct(c,l)||ct(o,l)||ct(wi,l)||ct(n.config.globalProperties,l)||(d=a.__cssModules)&&d[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ct(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function zp(t){return Be(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Kd=!0;function hw(t){const e=Nm(t),s=t.proxy,o=t.ctx;Kd=!1,e.beforeCreate&&Vp(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:a,watch:l,provide:c,inject:d,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:m,activated:v,deactivated:x,beforeDestroy:_,beforeUnmount:k,destroyed:C,unmounted:P,render:$,renderTracked:R,renderTriggered:V,errorCaptured:B,serverPrefetch:E,expose:S,inheritAttrs:O,components:T,directives:L,filters:K}=e;if(d&&gw(d,o,null),a)for(const W in a){const Z=a[W];He(Z)&&(o[W]=Z.bind(s))}if(n){const W=n.call(s,s);ht(W)&&(t.data=Ft(W))}if(Kd=!0,i)for(const W in i){const Z=i[W],le=He(Z)?Z.bind(s,s):He(Z.get)?Z.get.bind(s,s):bo,J=!He(Z)&&He(Z.set)?Z.set.bind(s):bo,Pe=re({get:le,set:J});Object.defineProperty(o,W,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:me=>Pe.value=me})}if(l)for(const W in l)Bm(l[W],o,s,W);if(c){const W=He(c)?c.call(s):c;Reflect.ownKeys(W).forEach(Z=>{sl(Z,W[Z])})}u&&Vp(u,t,"c");function F(W,Z){Be(Z)?Z.forEach(le=>W(le.bind(s))):Z&&W(Z.bind(s))}if(F(iw,f),F(nt,p),F(aw,g),F(of,m),F(ow,v),F(nw,x),F(uw,B),F(dw,R),F(cw,V),F(Rm,k),F(sr,P),F(lw,E),Be(S))if(S.length){const W=t.exposed||(t.exposed={});S.forEach(Z=>{Object.defineProperty(W,Z,{get:()=>s[Z],set:le=>s[Z]=le,enumerable:!0})})}else t.exposed||(t.exposed={});$&&t.render===bo&&(t.render=$),O!=null&&(t.inheritAttrs=O),T&&(t.components=T),L&&(t.directives=L),E&&Pm(t)}function gw(t,e,s=bo){Be(t)&&(t=Yd(t));for(const o in t){const n=t[o];let i;ht(n)?"default"in n?i=Vs(n.from||o,n.default,!0):i=Vs(n.from||o):i=Vs(n),Mt(i)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[o]=i}}function Vp(t,e,s){eo(Be(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,s)}function Bm(t,e,s,o){let n=o.includes(".")?Ym(s,o):()=>s[o];if(kt(t)){const i=e[t];He(i)&&Rt(n,i)}else if(He(t))Rt(n,t.bind(s));else if(ht(t))if(Be(t))t.forEach(i=>Bm(i,e,s,o));else{const i=He(t.handler)?t.handler.bind(s):e[t.handler];He(i)&&Rt(n,i,t)}}function Nm(t){const e=t.type,{mixins:s,extends:o}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,l=i.get(e);let c;return l?c=l:!n.length&&!s&&!o?c=e:(c={},n.length&&n.forEach(d=>Il(c,d,a,!0)),Il(c,e,a)),ht(e)&&i.set(e,c),c}function Il(t,e,s,o=!1){const{mixins:n,extends:i}=e;i&&Il(t,i,s,!0),n&&n.forEach(a=>Il(t,a,s,!0));for(const a in e)if(!(o&&a==="expose")){const l=mw[a]||s&&s[a];t[a]=l?l(t[a],e[a]):e[a]}return t}const mw={data:Hp,props:qp,emits:qp,methods:li,computed:li,beforeCreate:us,created:us,beforeMount:us,mounted:us,beforeUpdate:us,updated:us,beforeDestroy:us,beforeUnmount:us,destroyed:us,unmounted:us,activated:us,deactivated:us,errorCaptured:us,serverPrefetch:us,components:li,directives:li,watch:vw,provide:Hp,inject:bw};function Hp(t,e){return e?t?function(){return Ht(He(t)?t.call(this,this):t,He(e)?e.call(this,this):e)}:e:t}function bw(t,e){return li(Yd(t),Yd(e))}function Yd(t){if(Be(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function us(t,e){return t?[...new Set([].concat(t,e))]:e}function li(t,e){return t?Ht(Object.create(null),t,e):e}function qp(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:Ht(Object.create(null),zp(t),zp(e??{})):e}function vw(t,e){if(!t)return e;if(!e)return t;const s=Ht(Object.create(null),t);for(const o in e)s[o]=us(t[o],e[o]);return s}function jm(){return{app:null,config:{isNativeTag:Ug,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yw=0;function xw(t,e){return function(o,n=null){He(o)||(o=Ht({},o)),n!=null&&!ht(n)&&(n=null);const i=jm(),a=new WeakSet,l=[];let c=!1;const d=i.app={_uid:yw++,_component:o,_props:n,_container:null,_context:i,_instance:null,version:t2,get config(){return i.config},set config(u){},use(u,...f){return a.has(u)||(u&&He(u.install)?(a.add(u),u.install(d,...f)):He(u)&&(a.add(u),u(d,...f))),d},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),d},component(u,f){return f?(i.components[u]=f,d):i.components[u]},directive(u,f){return f?(i.directives[u]=f,d):i.directives[u]},mount(u,f,p){if(!c){const g=d._ceVNode||fe(o,n);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(g,u,p),c=!0,d._container=u,u.__vue_app__=d,wc(g.component)}},onUnmount(u){l.push(u)},unmount(){c&&(eo(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,f){return i.provides[u]=f,d},runWithContext(u){const f=zn;zn=d;try{return u()}finally{zn=f}}};return d}}let zn=null;function sl(t,e){if(rs){let s=rs.provides;const o=rs.parent&&rs.parent.provides;o===s&&(s=rs.provides=Object.create(o)),s[t]=e}}function Vs(t,e,s=!1){const o=df();if(o||zn){let n=zn?zn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&He(e)?e.call(o&&o.proxy):e}}function ww(){return!!(df()||zn)}const Fm={},Um=()=>Object.create(Fm),zm=t=>Object.getPrototypeOf(t)===Fm;function _w(t,e,s,o=!1){const n={},i=Um();t.propsDefaults=Object.create(null),Vm(t,e,n,i);for(const a in t.propsOptions[0])a in n||(n[a]=void 0);s?t.props=o?n:fm(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function kw(t,e,s,o){const{props:n,attrs:i,vnode:{patchFlag:a}}=t,l=ze(n),[c]=t.propsOptions;let d=!1;if((o||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(yc(t.emitsOptions,p))continue;const g=e[p];if(c)if(ct(i,p))g!==i[p]&&(i[p]=g,d=!0);else{const m=qs(p);n[m]=Jd(c,l,m,g,t,!1)}else g!==i[p]&&(i[p]=g,d=!0)}}}else{Vm(t,e,n,i)&&(d=!0);let u;for(const f in l)(!e||!ct(e,f)&&((u=_n(f))===f||!ct(e,u)))&&(c?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=Jd(c,l,f,void 0,t,!0)):delete n[f]);if(i!==l)for(const f in i)(!e||!ct(e,f))&&(delete i[f],d=!0)}d&&Bo(t.attrs,"set","")}function Vm(t,e,s,o){const[n,i]=t.propsOptions;let a=!1,l;if(e)for(let c in e){if(mi(c))continue;const d=e[c];let u;n&&ct(n,u=qs(c))?!i||!i.includes(u)?s[u]=d:(l||(l={}))[u]=d:yc(t.emitsOptions,c)||(!(c in o)||d!==o[c])&&(o[c]=d,a=!0)}if(i){const c=ze(s),d=l||pt;for(let u=0;u<i.length;u++){const f=i[u];s[f]=Jd(n,c,f,d[f],t,!ct(d,f))}}return a}function Jd(t,e,s,o,n,i){const a=t[s];if(a!=null){const l=ct(a,"default");if(l&&o===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&He(c)){const{propsDefaults:d}=n;if(s in d)o=d[s];else{const u=sa(n);o=d[s]=c.call(null,e),u()}}else o=c;n.ce&&n.ce._setProp(s,o)}a[0]&&(i&&!l?o=!1:a[1]&&(o===""||o===_n(s))&&(o=!0))}return o}const Cw=new WeakMap;function Hm(t,e,s=!1){const o=s?Cw:e.propsCache,n=o.get(t);if(n)return n;const i=t.props,a={},l=[];let c=!1;if(!He(t)){const u=f=>{c=!0;const[p,g]=Hm(f,e,!0);Ht(a,p),g&&l.push(...g)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return ht(t)&&o.set(t,vr),vr;if(Be(i))for(let u=0;u<i.length;u++){const f=qs(i[u]);Wp(f)&&(a[f]=pt)}else if(i)for(const u in i){const f=qs(u);if(Wp(f)){const p=i[u],g=a[f]=Be(p)||He(p)?{type:p}:Ht({},p),m=g.type;let v=!1,x=!0;if(Be(m))for(let _=0;_<m.length;++_){const k=m[_],C=He(k)&&k.name;if(C==="Boolean"){v=!0;break}else C==="String"&&(x=!1)}else v=He(m)&&m.name==="Boolean";g[0]=v,g[1]=x,(v||ct(g,"default"))&&l.push(f)}}const d=[a,l];return ht(t)&&o.set(t,d),d}function Wp(t){return t[0]!=="$"&&!mi(t)}const nf=t=>t==="_"||t==="_ctx"||t==="$stable",rf=t=>Be(t)?t.map(ho):[ho(t)],$w=(t,e,s)=>{if(e._n)return e;const o=tt((...n)=>rf(e(...n)),s);return o._c=!1,o},qm=(t,e,s)=>{const o=t._ctx;for(const n in t){if(nf(n))continue;const i=t[n];if(He(i))e[n]=$w(n,i,o);else if(i!=null){const a=rf(i);e[n]=()=>a}}},Wm=(t,e)=>{const s=rf(e);t.slots.default=()=>s},Gm=(t,e,s)=>{for(const o in e)(s||!nf(o))&&(t[o]=e[o])},Ew=(t,e,s)=>{const o=t.slots=Um();if(t.vnode.shapeFlag&32){const n=e._;n?(Gm(o,e,s),s&&qg(o,"_",n,!0)):qm(e,o)}else e&&Wm(t,e)},Sw=(t,e,s)=>{const{vnode:o,slots:n}=t;let i=!0,a=pt;if(o.shapeFlag&32){const l=e._;l?s&&l===1?i=!1:Gm(n,e,s):(i=!e.$stable,qm(e,n)),a=e}else e&&(Wm(t,e),a={default:1});if(i)for(const l in n)!nf(l)&&a[l]==null&&delete n[l]},fs=zw;function Aw(t){return Tw(t)}function Tw(t,e){const s=pc();s.__VUE__=!0;const{insert:o,remove:n,patchProp:i,createElement:a,createText:l,createComment:c,setText:d,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=bo,insertStaticContent:m}=t,v=(N,G,te,X=null,U=null,ae=null,$e=void 0,Ce=null,oe=!!G.dynamicChildren)=>{if(N===G)return;N&&!Nn(N,G)&&(X=D(N),me(N,U,ae,!0),N=null),G.patchFlag===-2&&(oe=!1,G.dynamicChildren=null);const{type:be,ref:Re,shapeFlag:Ee}=G;switch(be){case xc:x(N,G,te,X);break;case ns:_(N,G,te,X);break;case ol:N==null&&k(G,te,X,$e);break;case ge:T(N,G,te,X,U,ae,$e,Ce,oe);break;default:Ee&1?$(N,G,te,X,U,ae,$e,Ce,oe):Ee&6?L(N,G,te,X,U,ae,$e,Ce,oe):(Ee&64||Ee&128)&&be.process(N,G,te,X,U,ae,$e,Ce,oe,he)}Re!=null&&U?xi(Re,N&&N.ref,ae,G||N,!G):Re==null&&N&&N.ref!=null&&xi(N.ref,null,ae,N,!0)},x=(N,G,te,X)=>{if(N==null)o(G.el=l(G.children),te,X);else{const U=G.el=N.el;G.children!==N.children&&d(U,G.children)}},_=(N,G,te,X)=>{N==null?o(G.el=c(G.children||""),te,X):G.el=N.el},k=(N,G,te,X)=>{[N.el,N.anchor]=m(N.children,G,te,X,N.el,N.anchor)},C=({el:N,anchor:G},te,X)=>{let U;for(;N&&N!==G;)U=p(N),o(N,te,X),N=U;o(G,te,X)},P=({el:N,anchor:G})=>{let te;for(;N&&N!==G;)te=p(N),n(N),N=te;n(G)},$=(N,G,te,X,U,ae,$e,Ce,oe)=>{G.type==="svg"?$e="svg":G.type==="math"&&($e="mathml"),N==null?R(G,te,X,U,ae,$e,Ce,oe):E(N,G,U,ae,$e,Ce,oe)},R=(N,G,te,X,U,ae,$e,Ce)=>{let oe,be;const{props:Re,shapeFlag:Ee,transition:Ie,dirs:je}=N;if(oe=N.el=a(N.type,ae,Re&&Re.is,Re),Ee&8?u(oe,N.children):Ee&16&&B(N.children,oe,null,X,U,cd(N,ae),$e,Ce),je&&En(N,null,X,"created"),V(oe,N,N.scopeId,$e,X),Re){for(const ut in Re)ut!=="value"&&!mi(ut)&&i(oe,ut,null,Re[ut],ae,X);"value"in Re&&i(oe,"value",null,Re.value,ae),(be=Re.onVnodeBeforeMount)&&ro(be,X,N)}je&&En(N,null,X,"beforeMount");const We=Pw(U,Ie);We&&Ie.beforeEnter(oe),o(oe,G,te),((be=Re&&Re.onVnodeMounted)||We||je)&&fs(()=>{be&&ro(be,X,N),We&&Ie.enter(oe),je&&En(N,null,X,"mounted")},U)},V=(N,G,te,X,U)=>{if(te&&g(N,te),X)for(let ae=0;ae<X.length;ae++)g(N,X[ae]);if(U){let ae=U.subTree;if(G===ae||Xm(ae.type)&&(ae.ssContent===G||ae.ssFallback===G)){const $e=U.vnode;V(N,$e,$e.scopeId,$e.slotScopeIds,U.parent)}}},B=(N,G,te,X,U,ae,$e,Ce,oe=0)=>{for(let be=oe;be<N.length;be++){const Re=N[be]=Ce?nn(N[be]):ho(N[be]);v(null,Re,G,te,X,U,ae,$e,Ce)}},E=(N,G,te,X,U,ae,$e)=>{const Ce=G.el=N.el;let{patchFlag:oe,dynamicChildren:be,dirs:Re}=G;oe|=N.patchFlag&16;const Ee=N.props||pt,Ie=G.props||pt;let je;if(te&&Sn(te,!1),(je=Ie.onVnodeBeforeUpdate)&&ro(je,te,G,N),Re&&En(G,N,te,"beforeUpdate"),te&&Sn(te,!0),(Ee.innerHTML&&Ie.innerHTML==null||Ee.textContent&&Ie.textContent==null)&&u(Ce,""),be?S(N.dynamicChildren,be,Ce,te,X,cd(G,U),ae):$e||Z(N,G,Ce,null,te,X,cd(G,U),ae,!1),oe>0){if(oe&16)O(Ce,Ee,Ie,te,U);else if(oe&2&&Ee.class!==Ie.class&&i(Ce,"class",null,Ie.class,U),oe&4&&i(Ce,"style",Ee.style,Ie.style,U),oe&8){const We=G.dynamicProps;for(let ut=0;ut<We.length;ut++){const rt=We[ut],Jt=Ee[rt],Xt=Ie[rt];(Xt!==Jt||rt==="value")&&i(Ce,rt,Jt,Xt,U,te)}}oe&1&&N.children!==G.children&&u(Ce,G.children)}else!$e&&be==null&&O(Ce,Ee,Ie,te,U);((je=Ie.onVnodeUpdated)||Re)&&fs(()=>{je&&ro(je,te,G,N),Re&&En(G,N,te,"updated")},X)},S=(N,G,te,X,U,ae,$e)=>{for(let Ce=0;Ce<G.length;Ce++){const oe=N[Ce],be=G[Ce],Re=oe.el&&(oe.type===ge||!Nn(oe,be)||oe.shapeFlag&198)?f(oe.el):te;v(oe,be,Re,null,X,U,ae,$e,!0)}},O=(N,G,te,X,U)=>{if(G!==te){if(G!==pt)for(const ae in G)!mi(ae)&&!(ae in te)&&i(N,ae,G[ae],null,U,X);for(const ae in te){if(mi(ae))continue;const $e=te[ae],Ce=G[ae];$e!==Ce&&ae!=="value"&&i(N,ae,Ce,$e,U,X)}"value"in te&&i(N,"value",G.value,te.value,U)}},T=(N,G,te,X,U,ae,$e,Ce,oe)=>{const be=G.el=N?N.el:l(""),Re=G.anchor=N?N.anchor:l("");let{patchFlag:Ee,dynamicChildren:Ie,slotScopeIds:je}=G;je&&(Ce=Ce?Ce.concat(je):je),N==null?(o(be,te,X),o(Re,te,X),B(G.children||[],te,Re,U,ae,$e,Ce,oe)):Ee>0&&Ee&64&&Ie&&N.dynamicChildren?(S(N.dynamicChildren,Ie,te,U,ae,$e,Ce),(G.key!=null||U&&G===U.subTree)&&af(N,G,!0)):Z(N,G,te,Re,U,ae,$e,Ce,oe)},L=(N,G,te,X,U,ae,$e,Ce,oe)=>{G.slotScopeIds=Ce,N==null?G.shapeFlag&512?U.ctx.activate(G,te,X,$e,oe):K(G,te,X,U,ae,$e,oe):z(N,G,oe)},K=(N,G,te,X,U,ae,$e)=>{const Ce=N.component=Kw(N,X,U);if(mc(N)&&(Ce.ctx.renderer=he),Yw(Ce,!1,$e),Ce.asyncDep){if(U&&U.registerDep(Ce,F,$e),!N.el){const oe=Ce.subTree=fe(ns);_(null,oe,G,te),N.placeholder=oe.el}}else F(Ce,N,G,te,U,ae,$e)},z=(N,G,te)=>{const X=G.component=N.component;if(Fw(N,G,te))if(X.asyncDep&&!X.asyncResolved){W(X,G,te);return}else X.next=G,X.update();else G.el=N.el,X.vnode=G},F=(N,G,te,X,U,ae,$e)=>{const Ce=()=>{if(N.isMounted){let{next:Ee,bu:Ie,u:je,parent:We,vnode:ut}=N;{const Ss=Km(N);if(Ss){Ee&&(Ee.el=ut.el,W(N,Ee,$e)),Ss.asyncDep.then(()=>{N.isUnmounted||Ce()});return}}let rt=Ee,Jt;Sn(N,!1),Ee?(Ee.el=ut.el,W(N,Ee,$e)):Ee=ut,Ie&&el(Ie),(Jt=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&ro(Jt,We,Ee,ut),Sn(N,!0);const Xt=Kp(N),Ls=N.subTree;N.subTree=Xt,v(Ls,Xt,f(Ls.el),D(Ls),N,U,ae),Ee.el=Xt.el,rt===null&&Uw(N,Xt.el),je&&fs(je,U),(Jt=Ee.props&&Ee.props.onVnodeUpdated)&&fs(()=>ro(Jt,We,Ee,ut),U)}else{let Ee;const{el:Ie,props:je}=G,{bm:We,m:ut,parent:rt,root:Jt,type:Xt}=N,Ls=wr(G);Sn(N,!1),We&&el(We),!Ls&&(Ee=je&&je.onVnodeBeforeMount)&&ro(Ee,rt,G),Sn(N,!0);{Jt.ce&&Jt.ce._def.shadowRoot!==!1&&Jt.ce._injectChildStyle(Xt);const Ss=N.subTree=Kp(N);v(null,Ss,te,X,N,U,ae),G.el=Ss.el}if(ut&&fs(ut,U),!Ls&&(Ee=je&&je.onVnodeMounted)){const Ss=G;fs(()=>ro(Ee,rt,Ss),U)}(G.shapeFlag&256||rt&&wr(rt.vnode)&&rt.vnode.shapeFlag&256)&&N.a&&fs(N.a,U),N.isMounted=!0,G=te=X=null}};N.scope.on();const oe=N.effect=new Qg(Ce);N.scope.off();const be=N.update=oe.run.bind(oe),Re=N.job=oe.runIfDirty.bind(oe);Re.i=N,Re.id=N.uid,oe.scheduler=()=>sf(Re),Sn(N,!0),be()},W=(N,G,te)=>{G.component=N;const X=N.vnode.props;N.vnode=G,N.next=null,kw(N,G.props,X,te),Sw(N,G.children,te),Ho(),Ip(N),qo()},Z=(N,G,te,X,U,ae,$e,Ce,oe=!1)=>{const be=N&&N.children,Re=N?N.shapeFlag:0,Ee=G.children,{patchFlag:Ie,shapeFlag:je}=G;if(Ie>0){if(Ie&128){J(be,Ee,te,X,U,ae,$e,Ce,oe);return}else if(Ie&256){le(be,Ee,te,X,U,ae,$e,Ce,oe);return}}je&8?(Re&16&&se(be,U,ae),Ee!==be&&u(te,Ee)):Re&16?je&16?J(be,Ee,te,X,U,ae,$e,Ce,oe):se(be,U,ae,!0):(Re&8&&u(te,""),je&16&&B(Ee,te,X,U,ae,$e,Ce,oe))},le=(N,G,te,X,U,ae,$e,Ce,oe)=>{N=N||vr,G=G||vr;const be=N.length,Re=G.length,Ee=Math.min(be,Re);let Ie;for(Ie=0;Ie<Ee;Ie++){const je=G[Ie]=oe?nn(G[Ie]):ho(G[Ie]);v(N[Ie],je,te,null,U,ae,$e,Ce,oe)}be>Re?se(N,U,ae,!0,!1,Ee):B(G,te,X,U,ae,$e,Ce,oe,Ee)},J=(N,G,te,X,U,ae,$e,Ce,oe)=>{let be=0;const Re=G.length;let Ee=N.length-1,Ie=Re-1;for(;be<=Ee&&be<=Ie;){const je=N[be],We=G[be]=oe?nn(G[be]):ho(G[be]);if(Nn(je,We))v(je,We,te,null,U,ae,$e,Ce,oe);else break;be++}for(;be<=Ee&&be<=Ie;){const je=N[Ee],We=G[Ie]=oe?nn(G[Ie]):ho(G[Ie]);if(Nn(je,We))v(je,We,te,null,U,ae,$e,Ce,oe);else break;Ee--,Ie--}if(be>Ee){if(be<=Ie){const je=Ie+1,We=je<Re?G[je].el:X;for(;be<=Ie;)v(null,G[be]=oe?nn(G[be]):ho(G[be]),te,We,U,ae,$e,Ce,oe),be++}}else if(be>Ie)for(;be<=Ee;)me(N[be],U,ae,!0),be++;else{const je=be,We=be,ut=new Map;for(be=We;be<=Ie;be++){const Wt=G[be]=oe?nn(G[be]):ho(G[be]);Wt.key!=null&&ut.set(Wt.key,be)}let rt,Jt=0;const Xt=Ie-We+1;let Ls=!1,Ss=0;const oo=new Array(Xt);for(be=0;be<Xt;be++)oo[be]=0;for(be=je;be<=Ee;be++){const Wt=N[be];if(Jt>=Xt){me(Wt,U,ae,!0);continue}let As;if(Wt.key!=null)As=ut.get(Wt.key);else for(rt=We;rt<=Ie;rt++)if(oo[rt-We]===0&&Nn(Wt,G[rt])){As=rt;break}As===void 0?me(Wt,U,ae,!0):(oo[As-We]=be+1,As>=Ss?Ss=As:Ls=!0,v(Wt,G[As],te,null,U,ae,$e,Ce,oe),Jt++)}const Xo=Ls?Mw(oo):vr;for(rt=Xo.length-1,be=Xt-1;be>=0;be--){const Wt=We+be,As=G[Wt],ma=G[Wt+1],ba=Wt+1<Re?ma.el||ma.placeholder:X;oo[be]===0?v(null,As,te,ba,U,ae,$e,Ce,oe):Ls&&(rt<0||be!==Xo[rt]?Pe(As,te,ba,2):rt--)}}},Pe=(N,G,te,X,U=null)=>{const{el:ae,type:$e,transition:Ce,children:oe,shapeFlag:be}=N;if(be&6){Pe(N.component.subTree,G,te,X);return}if(be&128){N.suspense.move(G,te,X);return}if(be&64){$e.move(N,G,te,he);return}if($e===ge){o(ae,G,te);for(let Ee=0;Ee<oe.length;Ee++)Pe(oe[Ee],G,te,X);o(N.anchor,G,te);return}if($e===ol){C(N,G,te);return}if(X!==2&&be&1&&Ce)if(X===0)Ce.beforeEnter(ae),o(ae,G,te),fs(()=>Ce.enter(ae),U);else{const{leave:Ee,delayLeave:Ie,afterLeave:je}=Ce,We=()=>{N.ctx.isUnmounted?n(ae):o(ae,G,te)},ut=()=>{ae._isLeaving&&ae[Io](!0),Ee(ae,()=>{We(),je&&je()})};Ie?Ie(ae,We,ut):ut()}else o(ae,G,te)},me=(N,G,te,X=!1,U=!1)=>{const{type:ae,props:$e,ref:Ce,children:oe,dynamicChildren:be,shapeFlag:Re,patchFlag:Ee,dirs:Ie,cacheIndex:je}=N;if(Ee===-2&&(U=!1),Ce!=null&&(Ho(),xi(Ce,null,te,N,!0),qo()),je!=null&&(G.renderCache[je]=void 0),Re&256){G.ctx.deactivate(N);return}const We=Re&1&&Ie,ut=!wr(N);let rt;if(ut&&(rt=$e&&$e.onVnodeBeforeUnmount)&&ro(rt,G,N),Re&6)Q(N.component,te,X);else{if(Re&128){N.suspense.unmount(te,X);return}We&&En(N,null,G,"beforeUnmount"),Re&64?N.type.remove(N,G,te,he,X):be&&!be.hasOnce&&(ae!==ge||Ee>0&&Ee&64)?se(be,G,te,!1,!0):(ae===ge&&Ee&384||!U&&Re&16)&&se(oe,G,te),X&&Y(N)}(ut&&(rt=$e&&$e.onVnodeUnmounted)||We)&&fs(()=>{rt&&ro(rt,G,N),We&&En(N,null,G,"unmounted")},te)},Y=N=>{const{type:G,el:te,anchor:X,transition:U}=N;if(G===ge){j(te,X);return}if(G===ol){P(N);return}const ae=()=>{n(te),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(N.shapeFlag&1&&U&&!U.persisted){const{leave:$e,delayLeave:Ce}=U,oe=()=>$e(te,ae);Ce?Ce(N.el,ae,oe):oe()}else ae()},j=(N,G)=>{let te;for(;N!==G;)te=p(N),n(N),N=te;n(G)},Q=(N,G,te)=>{const{bum:X,scope:U,job:ae,subTree:$e,um:Ce,m:oe,a:be}=N;Gp(oe),Gp(be),X&&el(X),U.stop(),ae&&(ae.flags|=8,me($e,N,G,te)),Ce&&fs(Ce,G),fs(()=>{N.isUnmounted=!0},G)},se=(N,G,te,X=!1,U=!1,ae=0)=>{for(let $e=ae;$e<N.length;$e++)me(N[$e],G,te,X,U)},D=N=>{if(N.shapeFlag&6)return D(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const G=p(N.anchor||N.el),te=G&&G[wm];return te?p(te):G};let H=!1;const ee=(N,G,te)=>{N==null?G._vnode&&me(G._vnode,null,null,!0):v(G._vnode||null,N,G,null,null,null,te),G._vnode=N,H||(H=!0,Ip(),vm(),H=!1)},he={p:v,um:me,m:Pe,r:Y,mt:K,mc:B,pc:Z,pbc:S,n:D,o:t};return{render:ee,hydrate:void 0,createApp:xw(ee)}}function cd({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Sn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Pw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function af(t,e,s=!1){const o=t.children,n=e.children;if(Be(o)&&Be(n))for(let i=0;i<o.length;i++){const a=o[i];let l=n[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[i]=nn(n[i]),l.el=a.el),!s&&l.patchFlag!==-2&&af(a,l)),l.type===xc&&l.patchFlag!==-1&&(l.el=a.el),l.type===ns&&!l.el&&(l.el=a.el)}}function Mw(t){const e=t.slice(),s=[0];let o,n,i,a,l;const c=t.length;for(o=0;o<c;o++){const d=t[o];if(d!==0){if(n=s[s.length-1],t[n]<d){e[o]=n,s.push(o);continue}for(i=0,a=s.length-1;i<a;)l=i+a>>1,t[s[l]]<d?i=l+1:a=l;d<t[s[i]]&&(i>0&&(e[o]=s[i-1]),s[i]=o)}}for(i=s.length,a=s[i-1];i-- >0;)s[i]=a,a=e[a];return s}function Km(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Km(e)}function Gp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Rw=Symbol.for("v-scx"),Dw=()=>Vs(Rw);function _i(t,e){return lf(t,null,e)}function Rt(t,e,s){return lf(t,e,s)}function lf(t,e,s=pt){const{immediate:o,deep:n,flush:i,once:a}=s,l=Ht({},s),c=e&&o||!e&&i!=="post";let d;if(ji){if(i==="sync"){const g=Dw();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=bo,g.resume=bo,g.pause=bo,g}}const u=rs;l.call=(g,m,v)=>eo(g,u,m,v);let f=!1;i==="post"?l.scheduler=g=>{fs(g,u&&u.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(g,m)=>{m?g():sf(g)}),l.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=Y1(t,e,l);return ji&&(d?d.push(p):c&&p()),p}function Ow(t,e,s){const o=this.proxy,n=kt(t)?t.includes(".")?Ym(o,t):()=>o[t]:t.bind(o,o);let i;He(e)?i=e:(i=e.handler,s=e);const a=sa(this),l=lf(n,i.bind(o),s);return a(),l}function Ym(t,e){const s=e.split(".");return()=>{let o=t;for(let n=0;n<s.length&&o;n++)o=o[s[n]];return o}}const Iw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${qs(e)}Modifiers`]||t[`${_n(e)}Modifiers`];function Lw(t,e,...s){if(t.isUnmounted)return;const o=t.vnode.props||pt;let n=s;const i=e.startsWith("update:"),a=i&&Iw(o,e.slice(7));a&&(a.trim&&(n=s.map(u=>kt(u)?u.trim():u)),a.number&&(n=s.map(Al)));let l,c=o[l=sd(e)]||o[l=sd(qs(e))];!c&&i&&(c=o[l=sd(_n(e))]),c&&eo(c,t,6,n);const d=o[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,eo(d,t,6,n)}}const Bw=new WeakMap;function Jm(t,e,s=!1){const o=s?Bw:e.emitsCache,n=o.get(t);if(n!==void 0)return n;const i=t.emits;let a={},l=!1;if(!He(t)){const c=d=>{const u=Jm(d,e,!0);u&&(l=!0,Ht(a,u))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(ht(t)&&o.set(t,null),null):(Be(i)?i.forEach(c=>a[c]=null):Ht(a,i),ht(t)&&o.set(t,a),a)}function yc(t,e){return!t||!dc(e)?!1:(e=e.slice(2).replace(/Once$/,""),ct(t,e[0].toLowerCase()+e.slice(1))||ct(t,_n(e))||ct(t,e))}function Kp(t){const{type:e,vnode:s,proxy:o,withProxy:n,propsOptions:[i],slots:a,attrs:l,emit:c,render:d,renderCache:u,props:f,data:p,setupState:g,ctx:m,inheritAttrs:v}=t,x=Dl(t);let _,k;try{if(s.shapeFlag&4){const P=n||o,$=P;_=ho(d.call($,P,u,f,g,p,m)),k=l}else{const P=e;_=ho(P.length>1?P(f,{attrs:l,slots:a,emit:c}):P(f,null)),k=e.props?l:Nw(l)}}catch(P){ki.length=0,gc(P,t,1),_=fe(ns)}let C=_;if(k&&v!==!1){const P=Object.keys(k),{shapeFlag:$}=C;P.length&&$&7&&(i&&P.some(Hu)&&(k=jw(k,i)),C=Go(C,k,!1,!0))}return s.dirs&&(C=Go(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(s.dirs):s.dirs),s.transition&&Bi(C,s.transition),_=C,Dl(x),_}const Nw=t=>{let e;for(const s in t)(s==="class"||s==="style"||dc(s))&&((e||(e={}))[s]=t[s]);return e},jw=(t,e)=>{const s={};for(const o in t)(!Hu(o)||!(o.slice(9)in e))&&(s[o]=t[o]);return s};function Fw(t,e,s){const{props:o,children:n,component:i}=t,{props:a,children:l,patchFlag:c}=e,d=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return o?Yp(o,a,d):!!a;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(a[p]!==o[p]&&!yc(d,p))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:o===a?!1:o?a?Yp(o,a,d):!0:!!a;return!1}function Yp(t,e,s){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let n=0;n<o.length;n++){const i=o[n];if(e[i]!==t[i]&&!yc(s,i))return!0}return!1}function Uw({vnode:t,parent:e},s){for(;e;){const o=e.subTree;if(o.suspense&&o.suspense.activeBranch===t&&(o.el=t.el),o===t)(t=e.vnode).el=s,e=e.parent;else break}}const Xm=t=>t.__isSuspense;function zw(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):Q1(t)}const ge=Symbol.for("v-fgt"),xc=Symbol.for("v-txt"),ns=Symbol.for("v-cmt"),ol=Symbol.for("v-stc"),ki=[];let Rs=null;function b(t=!1){ki.push(Rs=t?null:[])}function Vw(){ki.pop(),Rs=ki[ki.length-1]||null}let Ni=1;function Ll(t,e=!1){Ni+=t,t<0&&Rs&&e&&(Rs.hasOnce=!0)}function Qm(t){return t.dynamicChildren=Ni>0?Rs||vr:null,Vw(),Ni>0&&Rs&&Rs.push(t),t}function y(t,e,s,o,n,i){return Qm(r(t,e,s,o,n,i,!0))}function Ue(t,e,s,o,n){return Qm(fe(t,e,s,o,n,!0))}function Jn(t){return t?t.__v_isVNode===!0:!1}function Nn(t,e){return t.type===e.type&&t.key===e.key}const Zm=({key:t})=>t??null,nl=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?kt(t)||Mt(t)||He(t)?{i:Yt,r:t,k:e,f:!!s}:t:null);function r(t,e=null,s=null,o=0,n=null,i=t===ge?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Zm(e),ref:e&&nl(e),scopeId:xm,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Yt};return l?(cf(c,s),i&128&&t.normalize(c)):s&&(c.shapeFlag|=kt(s)?8:16),Ni>0&&!a&&Rs&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Rs.push(c),c}const fe=Hw;function Hw(t,e=null,s=null,o=0,n=null,i=!1){if((!t||t===Om)&&(t=ns),Jn(t)){const l=Go(t,e,!0);return s&&cf(l,s),Ni>0&&!i&&Rs&&(l.shapeFlag&6?Rs[Rs.indexOf(t)]=l:Rs.push(l)),l.patchFlag=-2,l}if(e2(t)&&(t=t.__vccOpts),e){e=qw(e);let{class:l,style:c}=e;l&&!kt(l)&&(e.class=de(l)),ht(c)&&(ef(c)&&!Be(c)&&(c=Ht({},c)),e.style=yo(c))}const a=kt(t)?1:Xm(t)?128:_m(t)?64:ht(t)?4:He(t)?2:0;return r(t,e,s,o,n,a,i,!0)}function qw(t){return t?ef(t)||zm(t)?Ht({},t):t:null}function Go(t,e,s=!1,o=!1){const{props:n,ref:i,patchFlag:a,children:l,transition:c}=t,d=e?Yo(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Zm(d),ref:e&&e.ref?s&&i?Be(i)?i.concat(nl(e)):[i,nl(e)]:nl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ge?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Go(t.ssContent),ssFallback:t.ssFallback&&Go(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&o&&Bi(u,c.clone(u)),u}function ne(t=" ",e=0){return fe(xc,null,t,e)}function Es(t,e){const s=fe(ol,null,t);return s.staticCount=e,s}function q(t="",e=!1){return e?(b(),Ue(ns,null,t)):fe(ns,null,t)}function ho(t){return t==null||typeof t=="boolean"?fe(ns):Be(t)?fe(ge,null,t.slice()):Jn(t)?nn(t):fe(xc,null,String(t))}function nn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Go(t)}function cf(t,e){let s=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(Be(e))s=16;else if(typeof e=="object")if(o&65){const n=e.default;n&&(n._c&&(n._d=!1),cf(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!zm(e)?e._ctx=Yt:n===3&&Yt&&(Yt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else He(e)?(e={default:e,_ctx:Yt},s=32):(e=String(e),o&64?(s=16,e=[ne(e)]):s=8);t.children=e,t.shapeFlag|=s}function Yo(...t){const e={};for(let s=0;s<t.length;s++){const o=t[s];for(const n in o)if(n==="class")e.class!==o.class&&(e.class=de([e.class,o.class]));else if(n==="style")e.style=yo([e.style,o.style]);else if(dc(n)){const i=e[n],a=o[n];a&&i!==a&&!(Be(i)&&i.includes(a))&&(e[n]=i?[].concat(i,a):a)}else n!==""&&(e[n]=o[n])}return e}function ro(t,e,s,o=null){eo(t,e,7,[s,o])}const Ww=jm();let Gw=0;function Kw(t,e,s){const o=t.type,n=(e?e.appContext:t.appContext)||Ww,i={uid:Gw++,vnode:t,type:o,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Yg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hm(o,n),emitsOptions:Jm(o,n),emit:null,emitted:null,propsDefaults:pt,inheritAttrs:o.inheritAttrs,ctx:pt,data:pt,props:pt,attrs:pt,slots:pt,refs:pt,setupState:pt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Lw.bind(null,i),t.ce&&t.ce(i),i}let rs=null;const df=()=>rs||Yt;let Bl,Xd;{const t=pc(),e=(s,o)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(o),i=>{n.length>1?n.forEach(a=>a(i)):n[0](i)}};Bl=e("__VUE_INSTANCE_SETTERS__",s=>rs=s),Xd=e("__VUE_SSR_SETTERS__",s=>ji=s)}const sa=t=>{const e=rs;return Bl(t),t.scope.on(),()=>{t.scope.off(),Bl(e)}},Jp=()=>{rs&&rs.scope.off(),Bl(null)};function eb(t){return t.vnode.shapeFlag&4}let ji=!1;function Yw(t,e=!1,s=!1){e&&Xd(e);const{props:o,children:n}=t.vnode,i=eb(t);_w(t,o,i,e),Ew(t,n,s||e);const a=i?Jw(t,e):void 0;return e&&Xd(!1),a}function Jw(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,pw);const{setup:o}=s;if(o){Ho();const n=t.setupContext=o.length>1?Qw(t):null,i=sa(t),a=ta(o,t,0,[t.props,n]),l=zg(a);if(qo(),i(),(l||t.sp)&&!wr(t)&&Pm(t),l){if(a.then(Jp,Jp),e)return a.then(c=>{Xp(t,c)}).catch(c=>{gc(c,t,0)});t.asyncDep=a}else Xp(t,a)}else tb(t)}function Xp(t,e,s){He(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ht(e)&&(t.setupState=gm(e)),tb(t)}function tb(t,e,s){const o=t.type;t.render||(t.render=o.render||bo);{const n=sa(t);Ho();try{hw(t)}finally{qo(),n()}}}const Xw={get(t,e){return os(t,"get",""),t[e]}};function Qw(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Xw),slots:t.slots,emit:t.emit,expose:e}}function wc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(gm(tf(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in wi)return wi[s](t)},has(e,s){return s in e||s in wi}})):t.proxy}function Zw(t,e=!0){return He(t)?t.displayName||t.name:t.name||e&&t.__name}function e2(t){return He(t)&&"__vccOpts"in t}const re=(t,e)=>G1(t,e,ji);function Nt(t,e,s){const o=(i,a,l)=>{Ll(-1);try{return fe(i,a,l)}finally{Ll(1)}},n=arguments.length;return n===2?ht(e)&&!Be(e)?Jn(e)?o(t,null,[e]):o(t,e):o(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Jn(s)&&(s=[s]),o(t,e,s))}const t2="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qd;const Qp=typeof window<"u"&&window.trustedTypes;if(Qp)try{Qd=Qp.createPolicy("vue",{createHTML:t=>t})}catch{}const sb=Qd?t=>Qd.createHTML(t):t=>t,s2="http://www.w3.org/2000/svg",o2="http://www.w3.org/1998/Math/MathML",Oo=typeof document<"u"?document:null,Zp=Oo&&Oo.createElement("template"),n2={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,o)=>{const n=e==="svg"?Oo.createElementNS(s2,t):e==="mathml"?Oo.createElementNS(o2,t):s?Oo.createElement(t,{is:s}):Oo.createElement(t);return t==="select"&&o&&o.multiple!=null&&n.setAttribute("multiple",o.multiple),n},createText:t=>Oo.createTextNode(t),createComment:t=>Oo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Oo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,o,n,i){const a=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{Zp.innerHTML=sb(o==="svg"?`<svg>${t}</svg>`:o==="mathml"?`<math>${t}</math>`:t);const l=Zp.content;if(o==="svg"||o==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,s)}return[a?a.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Zo="transition",Zr="animation",Fi=Symbol("_vtc"),ob={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},r2=Ht({},$m,ob),i2=t=>(t.displayName="Transition",t.props=r2,t),a2=i2((t,{slots:e})=>Nt(sw,l2(t),e)),An=(t,e=[])=>{Be(t)?t.forEach(s=>s(...e)):t&&t(...e)},eh=t=>t?Be(t)?t.some(e=>e.length>1):t.length>1:!1;function l2(t){const e={};for(const T in t)T in ob||(e[T]=t[T]);if(t.css===!1)return e;const{name:s="v",type:o,duration:n,enterFromClass:i=`${s}-enter-from`,enterActiveClass:a=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:c=i,appearActiveClass:d=a,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:p=`${s}-leave-active`,leaveToClass:g=`${s}-leave-to`}=t,m=c2(n),v=m&&m[0],x=m&&m[1],{onBeforeEnter:_,onEnter:k,onEnterCancelled:C,onLeave:P,onLeaveCancelled:$,onBeforeAppear:R=_,onAppear:V=k,onAppearCancelled:B=C}=e,E=(T,L,K,z)=>{T._enterCancelled=z,Tn(T,L?u:l),Tn(T,L?d:a),K&&K()},S=(T,L)=>{T._isLeaving=!1,Tn(T,f),Tn(T,g),Tn(T,p),L&&L()},O=T=>(L,K)=>{const z=T?V:k,F=()=>E(L,T,K);An(z,[L,F]),th(()=>{Tn(L,T?c:i),Eo(L,T?u:l),eh(z)||sh(L,o,v,F)})};return Ht(e,{onBeforeEnter(T){An(_,[T]),Eo(T,i),Eo(T,a)},onBeforeAppear(T){An(R,[T]),Eo(T,c),Eo(T,d)},onEnter:O(!1),onAppear:O(!0),onLeave(T,L){T._isLeaving=!0;const K=()=>S(T,L);Eo(T,f),T._enterCancelled?(Eo(T,p),rh()):(rh(),Eo(T,p)),th(()=>{T._isLeaving&&(Tn(T,f),Eo(T,g),eh(P)||sh(T,o,x,K))}),An(P,[T,K])},onEnterCancelled(T){E(T,!1,void 0,!0),An(C,[T])},onAppearCancelled(T){E(T,!0,void 0,!0),An(B,[T])},onLeaveCancelled(T){S(T),An($,[T])}})}function c2(t){if(t==null)return null;if(ht(t))return[dd(t.enter),dd(t.leave)];{const e=dd(t);return[e,e]}}function dd(t){return f1(t)}function Eo(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[Fi]||(t[Fi]=new Set)).add(e)}function Tn(t,e){e.split(/\s+/).forEach(o=>o&&t.classList.remove(o));const s=t[Fi];s&&(s.delete(e),s.size||(t[Fi]=void 0))}function th(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let d2=0;function sh(t,e,s,o){const n=t._endId=++d2,i=()=>{n===t._endId&&o()};if(s!=null)return setTimeout(i,s);const{type:a,timeout:l,propCount:c}=u2(t,e);if(!a)return o();const d=a+"end";let u=0;const f=()=>{t.removeEventListener(d,p),i()},p=g=>{g.target===t&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},l+1),t.addEventListener(d,p)}function u2(t,e){const s=window.getComputedStyle(t),o=m=>(s[m]||"").split(", "),n=o(`${Zo}Delay`),i=o(`${Zo}Duration`),a=oh(n,i),l=o(`${Zr}Delay`),c=o(`${Zr}Duration`),d=oh(l,c);let u=null,f=0,p=0;e===Zo?a>0&&(u=Zo,f=a,p=i.length):e===Zr?d>0&&(u=Zr,f=d,p=c.length):(f=Math.max(a,d),u=f>0?a>d?Zo:Zr:null,p=u?u===Zo?i.length:c.length:0);const g=u===Zo&&/\b(?:transform|all)(?:,|$)/.test(o(`${Zo}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:g}}function oh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,o)=>nh(s)+nh(t[o])))}function nh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function rh(){return document.body.offsetHeight}function f2(t,e,s){const o=t[Fi];o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const ih=Symbol("_vod"),p2=Symbol("_vsh"),h2=Symbol(""),g2=/(?:^|;)\s*display\s*:/;function m2(t,e,s){const o=t.style,n=kt(s);let i=!1;if(s&&!n){if(e)if(kt(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();s[l]==null&&rl(o,l,"")}else for(const a in e)s[a]==null&&rl(o,a,"");for(const a in s)a==="display"&&(i=!0),rl(o,a,s[a])}else if(n){if(e!==s){const a=o[h2];a&&(s+=";"+a),o.cssText=s,i=g2.test(s)}}else e&&t.removeAttribute("style");ih in t&&(t[ih]=i?o.display:"",t[p2]&&(o.display="none"))}const ah=/\s*!important$/;function rl(t,e,s){if(Be(s))s.forEach(o=>rl(t,e,o));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const o=b2(t,e);ah.test(s)?t.setProperty(_n(o),s.replace(ah,""),"important"):t[o]=s}}const lh=["Webkit","Moz","ms"],ud={};function b2(t,e){const s=ud[e];if(s)return s;let o=qs(e);if(o!=="filter"&&o in t)return ud[e]=o;o=fc(o);for(let n=0;n<lh.length;n++){const i=lh[n]+o;if(i in t)return ud[e]=i}return e}const ch="http://www.w3.org/1999/xlink";function dh(t,e,s,o,n,i=v1(e)){o&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(ch,e.slice(6,e.length)):t.setAttributeNS(ch,e,s):s==null||i&&!Wg(s)?t.removeAttribute(e):t.setAttribute(e,i?"":Zs(s)?String(s):s)}function uh(t,e,s,o,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?sb(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let a=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=Wg(s):s==null&&l==="string"?(s="",a=!0):l==="number"&&(s=0,a=!0)}try{t[e]=s}catch{}a&&t.removeAttribute(n||e)}function jo(t,e,s,o){t.addEventListener(e,s,o)}function v2(t,e,s,o){t.removeEventListener(e,s,o)}const fh=Symbol("_vei");function y2(t,e,s,o,n=null){const i=t[fh]||(t[fh]={}),a=i[e];if(o&&a)a.value=o;else{const[l,c]=x2(e);if(o){const d=i[e]=k2(o,n);jo(t,l,d,c)}else a&&(v2(t,l,a,c),i[e]=void 0)}}const ph=/(?:Once|Passive|Capture)$/;function x2(t){let e;if(ph.test(t)){e={};let o;for(;o=t.match(ph);)t=t.slice(0,t.length-o[0].length),e[o[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_n(t.slice(2)),e]}let fd=0;const w2=Promise.resolve(),_2=()=>fd||(w2.then(()=>fd=0),fd=Date.now());function k2(t,e){const s=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=s.attached)return;eo(C2(o,s.value),e,5,[o])};return s.value=t,s.attached=_2(),s}function C2(t,e){if(Be(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(o=>n=>!n._stopped&&o&&o(n))}else return e}const hh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,$2=(t,e,s,o,n,i)=>{const a=n==="svg";e==="class"?f2(t,o,a):e==="style"?m2(t,s,o):dc(e)?Hu(e)||y2(t,e,s,o,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):E2(t,e,o,a))?(uh(t,e,o),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&dh(t,e,o,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!kt(o))?uh(t,qs(e),o,i,e):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),dh(t,e,o,a))};function E2(t,e,s,o){if(o)return!!(e==="innerHTML"||e==="textContent"||e in t&&hh(e)&&He(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return hh(e)&&kt(s)?!1:e in t}const yn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?s=>el(e,s):e};function S2(t){t.target.composing=!0}function gh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Hs=Symbol("_assign"),ke={created(t,{modifiers:{lazy:e,trim:s,number:o}},n){t[Hs]=yn(n);const i=o||n.props&&n.props.type==="number";jo(t,e?"change":"input",a=>{if(a.target.composing)return;let l=t.value;s&&(l=l.trim()),i&&(l=Al(l)),t[Hs](l)}),s&&jo(t,"change",()=>{t.value=t.value.trim()}),e||(jo(t,"compositionstart",S2),jo(t,"compositionend",gh),jo(t,"change",gh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:o,trim:n,number:i}},a){if(t[Hs]=yn(a),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Al(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(o&&e===s||n&&t.value.trim()===c)||(t.value=c))}},_c={deep:!0,created(t,e,s){t[Hs]=yn(s),jo(t,"change",()=>{const o=t._modelValue,n=Ar(t),i=t.checked,a=t[Hs];if(Be(o)){const l=Gu(o,n),c=l!==-1;if(i&&!c)a(o.concat(n));else if(!i&&c){const d=[...o];d.splice(l,1),a(d)}}else if(Nr(o)){const l=new Set(o);i?l.add(n):l.delete(n),a(l)}else a(nb(t,i))})},mounted:mh,beforeUpdate(t,e,s){t[Hs]=yn(s),mh(t,e,s)}};function mh(t,{value:e,oldValue:s},o){t._modelValue=e;let n;if(Be(e))n=Gu(e,o.props.value)>-1;else if(Nr(e))n=e.has(o.props.value);else{if(e===s)return;n=Yn(e,nb(t,!0))}t.checked!==n&&(t.checked=n)}const Ui={created(t,{value:e},s){t.checked=Yn(e,s.props.value),t[Hs]=yn(s),jo(t,"change",()=>{t[Hs](Ar(t))})},beforeUpdate(t,{value:e,oldValue:s},o){t[Hs]=yn(o),e!==s&&(t.checked=Yn(e,o.props.value))}},De={deep:!0,created(t,{value:e,modifiers:{number:s}},o){const n=Nr(e);jo(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>s?Al(Ar(a)):Ar(a));t[Hs](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,_s(()=>{t._assigning=!1})}),t[Hs]=yn(o)},mounted(t,{value:e}){bh(t,e)},beforeUpdate(t,e,s){t[Hs]=yn(s)},updated(t,{value:e}){t._assigning||bh(t,e)}};function bh(t,e){const s=t.multiple,o=Be(e);if(!(s&&!o&&!Nr(e))){for(let n=0,i=t.options.length;n<i;n++){const a=t.options[n],l=Ar(a);if(s)if(o){const c=typeof l;c==="string"||c==="number"?a.selected=e.some(d=>String(d)===String(l)):a.selected=Gu(e,l)>-1}else a.selected=e.has(l);else if(Yn(Ar(a),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ar(t){return"_value"in t?t._value:t.value}function nb(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const A2={created(t,e,s){Oa(t,e,s,null,"created")},mounted(t,e,s){Oa(t,e,s,null,"mounted")},beforeUpdate(t,e,s,o){Oa(t,e,s,o,"beforeUpdate")},updated(t,e,s,o){Oa(t,e,s,o,"updated")}};function T2(t,e){switch(t){case"SELECT":return De;case"TEXTAREA":return ke;default:switch(e){case"checkbox":return _c;case"radio":return Ui;default:return ke}}}function Oa(t,e,s,o,n){const a=T2(t.tagName,s.props&&s.props.type)[n];a&&a(t,e,s,o)}const P2=["ctrl","shift","alt","meta"],M2={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>P2.some(s=>t[`${s}Key`]&&!e.includes(s))},Fe=(t,e)=>{const s=t._withMods||(t._withMods={}),o=e.join(".");return s[o]||(s[o]=(n,...i)=>{for(let a=0;a<e.length;a++){const l=M2[e[a]];if(l&&l(n,e))return}return t(n,...i)})},R2={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Vn=(t,e)=>{const s=t._withKeys||(t._withKeys={}),o=e.join(".");return s[o]||(s[o]=n=>{if(!("key"in n))return;const i=_n(n.key);if(e.some(a=>a===i||R2[a]===i))return t(n)})},D2=Ht({patchProp:$2},n2);let vh;function O2(){return vh||(vh=Aw(D2))}const rb=(...t)=>{const e=O2().createApp(...t),{mount:s}=e;return e.mount=o=>{const n=L2(o);if(!n)return;const i=e._component;!He(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=s(n,!1,I2(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},e};function I2(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function L2(t){return kt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ib;const kc=t=>ib=t,ab=Symbol();function Zd(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ci;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ci||(Ci={}));function B2(){const t=Jg(!0),e=t.run(()=>I({}));let s=[],o=[];const n=tf({install(i){kc(n),n._a=i,i.provide(ab,n),i.config.globalProperties.$pinia=n,o.forEach(a=>s.push(a)),o=[]},use(i){return this._a?s.push(i):o.push(i),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return n}const lb=()=>{};function yh(t,e,s,o=lb){t.push(e);const n=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),o())};return!s&&Xg()&&x1(n),n}function ur(t,...e){t.slice().forEach(s=>{s(...e)})}const N2=t=>t(),xh=Symbol(),pd=Symbol();function eu(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,o)=>t.set(o,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const o=e[s],n=t[s];Zd(n)&&Zd(o)&&t.hasOwnProperty(s)&&!Mt(o)&&!hn(o)?t[s]=eu(n,o):t[s]=o}return t}const j2=Symbol();function F2(t){return!Zd(t)||!Object.prototype.hasOwnProperty.call(t,j2)}const{assign:sn}=Object;function U2(t){return!!(Mt(t)&&t.effect)}function z2(t,e,s,o){const{state:n,actions:i,getters:a}=e,l=s.state.value[t];let c;function d(){l||(s.state.value[t]=n?n():{});const u=V1(s.state.value[t]);return sn(u,i,Object.keys(a||{}).reduce((f,p)=>(f[p]=tf(re(()=>{kc(s);const g=s._s.get(t);return a[p].call(g,g)})),f),{}))}return c=cb(t,d,e,s,o,!0),c}function cb(t,e,s={},o,n,i){let a;const l=sn({actions:{}},s),c={deep:!0};let d,u,f=[],p=[],g;const m=o.state.value[t];!i&&!m&&(o.state.value[t]={}),I({});let v;function x(B){let E;d=u=!1,typeof B=="function"?(B(o.state.value[t]),E={type:Ci.patchFunction,storeId:t,events:g}):(eu(o.state.value[t],B),E={type:Ci.patchObject,payload:B,storeId:t,events:g});const S=v=Symbol();_s().then(()=>{v===S&&(d=!0)}),u=!0,ur(f,E,o.state.value[t])}const _=i?function(){const{state:E}=s,S=E?E():{};this.$patch(O=>{sn(O,S)})}:lb;function k(){a.stop(),f=[],p=[],o._s.delete(t)}const C=(B,E="")=>{if(xh in B)return B[pd]=E,B;const S=function(){kc(o);const O=Array.from(arguments),T=[],L=[];function K(W){T.push(W)}function z(W){L.push(W)}ur(p,{args:O,name:S[pd],store:$,after:K,onError:z});let F;try{F=B.apply(this&&this.$id===t?this:$,O)}catch(W){throw ur(L,W),W}return F instanceof Promise?F.then(W=>(ur(T,W),W)).catch(W=>(ur(L,W),Promise.reject(W))):(ur(T,F),F)};return S[xh]=!0,S[pd]=E,S},P={_p:o,$id:t,$onAction:yh.bind(null,p),$patch:x,$reset:_,$subscribe(B,E={}){const S=yh(f,B,E.detached,()=>O()),O=a.run(()=>Rt(()=>o.state.value[t],T=>{(E.flush==="sync"?u:d)&&B({storeId:t,type:Ci.direct,events:g},T)},sn({},c,E)));return S},$dispose:k},$=Ft(P);o._s.set(t,$);const V=(o._a&&o._a.runWithContext||N2)(()=>o._e.run(()=>(a=Jg()).run(()=>e({action:C}))));for(const B in V){const E=V[B];if(Mt(E)&&!U2(E)||hn(E))i||(m&&F2(E)&&(Mt(E)?E.value=m[B]:eu(E,m[B])),o.state.value[t][B]=E);else if(typeof E=="function"){const S=C(E,B);V[B]=S,l.actions[B]=E}}return sn($,V),sn(ze($),V),Object.defineProperty($,"$state",{get:()=>o.state.value[t],set:B=>{x(E=>{sn(E,B)})}}),o._p.forEach(B=>{sn($,a.run(()=>B({store:$,app:o._a,pinia:o,options:l})))}),m&&i&&s.hydrate&&s.hydrate($.$state,m),d=!0,u=!0,$}/*! #__NO_SIDE_EFFECTS__ */function Gs(t,e,s){let o;const n=typeof e=="function";o=n?s:e;function i(a,l){const c=ww();return a=a||(c?Vs(ab,null):null),a&&kc(a),a=ib,a._s.has(t)||(n?cb(t,e,o,a):z2(t,o,a)),a._s.get(t)}return i.$id=t,i}const tu="/assets/logo-CcbRmpk1.webp";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const mr=typeof document<"u";function db(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function V2(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&db(t.default)}const lt=Object.assign;function hd(t,e){const s={};for(const o in e){const n=e[o];s[o]=to(n)?n.map(t):t(n)}return s}const $i=()=>{},to=Array.isArray,ub=/#/g,H2=/&/g,q2=/\//g,W2=/=/g,G2=/\?/g,fb=/\+/g,K2=/%5B/g,Y2=/%5D/g,pb=/%5E/g,J2=/%60/g,hb=/%7B/g,X2=/%7C/g,gb=/%7D/g,Q2=/%20/g;function uf(t){return encodeURI(""+t).replace(X2,"|").replace(K2,"[").replace(Y2,"]")}function Z2(t){return uf(t).replace(hb,"{").replace(gb,"}").replace(pb,"^")}function su(t){return uf(t).replace(fb,"%2B").replace(Q2,"+").replace(ub,"%23").replace(H2,"%26").replace(J2,"`").replace(hb,"{").replace(gb,"}").replace(pb,"^")}function e_(t){return su(t).replace(W2,"%3D")}function t_(t){return uf(t).replace(ub,"%23").replace(G2,"%3F")}function s_(t){return t==null?"":t_(t).replace(q2,"%2F")}function zi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const o_=/\/$/,n_=t=>t.replace(o_,"");function gd(t,e,s="/"){let o,n={},i="",a="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(o=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),n=t(i)),l>-1&&(o=o||e.slice(0,l),a=e.slice(l,e.length)),o=l_(o??e,s),{fullPath:o+(i&&"?")+i+a,path:o,query:n,hash:zi(a)}}function r_(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function wh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function i_(t,e,s){const o=e.matched.length-1,n=s.matched.length-1;return o>-1&&o===n&&Tr(e.matched[o],s.matched[n])&&mb(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Tr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function mb(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!a_(t[s],e[s]))return!1;return!0}function a_(t,e){return to(t)?_h(t,e):to(e)?_h(e,t):t===e}function _h(t,e){return to(e)?t.length===e.length&&t.every((s,o)=>s===e[o]):t.length===1&&t[0]===e}function l_(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),o=t.split("/"),n=o[o.length-1];(n===".."||n===".")&&o.push("");let i=s.length-1,a,l;for(a=0;a<o.length;a++)if(l=o[a],l!==".")if(l==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+o.slice(a).join("/")}const en={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Vi;(function(t){t.pop="pop",t.push="push"})(Vi||(Vi={}));var Ei;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ei||(Ei={}));function c_(t){if(!t)if(mr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),n_(t)}const d_=/^[^#]+#/;function u_(t,e){return t.replace(d_,"#")+e}function f_(t,e){const s=document.documentElement.getBoundingClientRect(),o=t.getBoundingClientRect();return{behavior:e.behavior,left:o.left-s.left-(e.left||0),top:o.top-s.top-(e.top||0)}}const Cc=()=>({left:window.scrollX,top:window.scrollY});function p_(t){let e;if("el"in t){const s=t.el,o=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?o?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=f_(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function kh(t,e){return(history.state?history.state.position-e:-1)+t}const ou=new Map;function h_(t,e){ou.set(t,e)}function g_(t){const e=ou.get(t);return ou.delete(t),e}let m_=()=>location.protocol+"//"+location.host;function bb(t,e){const{pathname:s,search:o,hash:n}=e,i=t.indexOf("#");if(i>-1){let l=n.includes(t.slice(i))?t.slice(i).length:1,c=n.slice(l);return c[0]!=="/"&&(c="/"+c),wh(c,"")}return wh(s,t)+o+n}function b_(t,e,s,o){let n=[],i=[],a=null;const l=({state:p})=>{const g=bb(t,location),m=s.value,v=e.value;let x=0;if(p){if(s.value=g,e.value=p,a&&a===m){a=null;return}x=v?p.position-v.position:0}else o(g);n.forEach(_=>{_(s.value,m,{delta:x,type:Vi.pop,direction:x?x>0?Ei.forward:Ei.back:Ei.unknown})})};function c(){a=s.value}function d(p){n.push(p);const g=()=>{const m=n.indexOf(p);m>-1&&n.splice(m,1)};return i.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(lt({},p.state,{scroll:Cc()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:d,destroy:f}}function Ch(t,e,s,o=!1,n=!1){return{back:t,current:e,forward:s,replaced:o,position:window.history.length,scroll:n?Cc():null}}function v_(t){const{history:e,location:s}=window,o={value:bb(t,s)},n={value:e.state};n.value||i(o.value,{back:null,current:o.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,d,u){const f=t.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+c:m_()+t+c;try{e[u?"replaceState":"pushState"](d,"",p),n.value=d}catch(g){console.error(g),s[u?"replace":"assign"](p)}}function a(c,d){const u=lt({},e.state,Ch(n.value.back,c,n.value.forward,!0),d,{position:n.value.position});i(c,u,!0),o.value=c}function l(c,d){const u=lt({},n.value,e.state,{forward:c,scroll:Cc()});i(u.current,u,!0);const f=lt({},Ch(o.value,c,null),{position:u.position+1},d);i(c,f,!1),o.value=c}return{location:o,state:n,push:l,replace:a}}function y_(t){t=c_(t);const e=v_(t),s=b_(t,e.state,e.location,e.replace);function o(i,a=!0){a||s.pauseListeners(),history.go(i)}const n=lt({location:"",base:t,go:o,createHref:u_.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function x_(t){return typeof t=="string"||t&&typeof t=="object"}function vb(t){return typeof t=="string"||typeof t=="symbol"}const yb=Symbol("");var $h;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})($h||($h={}));function Pr(t,e){return lt(new Error,{type:t,[yb]:!0},e)}function So(t,e){return t instanceof Error&&yb in t&&(e==null||!!(t.type&e))}const Eh="[^/]+?",w_={sensitive:!1,strict:!1,start:!0,end:!0},__=/[.+*?^${}()[\]/\\]/g;function k_(t,e){const s=lt({},w_,e),o=[];let n=s.start?"^":"";const i=[];for(const d of t){const u=d.length?[]:[90];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const p=d[f];let g=40+(s.sensitive?.25:0);if(p.type===0)f||(n+="/"),n+=p.value.replace(__,"\\$&"),g+=40;else if(p.type===1){const{value:m,repeatable:v,optional:x,regexp:_}=p;i.push({name:m,repeatable:v,optional:x});const k=_||Eh;if(k!==Eh){g+=10;try{new RegExp(`(${k})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${m}" (${k}): `+P.message)}}let C=v?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;f||(C=x&&d.length<2?`(?:/${C})`:"/"+C),x&&(C+="?"),n+=C,g+=20,x&&(g+=-8),v&&(g+=-20),k===".*"&&(g+=-50)}u.push(g)}o.push(u)}if(s.strict&&s.end){const d=o.length-1;o[d][o[d].length-1]+=.7000000000000001}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const a=new RegExp(n,s.sensitive?"":"i");function l(d){const u=d.match(a),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",m=i[p-1];f[m.name]=g&&m.repeatable?g.split("/"):g}return f}function c(d){let u="",f=!1;for(const p of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:m,repeatable:v,optional:x}=g,_=m in d?d[m]:"";if(to(_)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const k=to(_)?_.join("/"):_;if(!k)if(x)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);u+=k}}return u||"/"}return{re:a,score:o,keys:i,parse:l,stringify:c}}function C_(t,e){let s=0;for(;s<t.length&&s<e.length;){const o=e[s]-t[s];if(o)return o;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function xb(t,e){let s=0;const o=t.score,n=e.score;for(;s<o.length&&s<n.length;){const i=C_(o[s],n[s]);if(i)return i;s++}if(Math.abs(n.length-o.length)===1){if(Sh(o))return 1;if(Sh(n))return-1}return n.length-o.length}function Sh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const $_={type:0,value:""},E_=/[a-zA-Z0-9_]/;function S_(t){if(!t)return[[]];if(t==="/")return[[$_]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${s})/"${d}": ${g}`)}let s=0,o=s;const n=[];let i;function a(){i&&n.push(i),i=[]}let l=0,c,d="",u="";function f(){d&&(s===0?i.push({type:0,value:d}):s===1||s===2||s===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:d,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),d="")}function p(){d+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&s!==2){o=s,s=4;continue}switch(s){case 0:c==="/"?(d&&f(),a()):c===":"?(f(),s=1):p();break;case 4:p(),s=o;break;case 1:c==="("?s=2:E_.test(c)?p():(f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:s=3:u+=c;break;case 3:f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,u="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${d}"`),f(),a(),n}function A_(t,e,s){const o=k_(S_(t.path),s),n=lt(o,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function T_(t,e){const s=[],o=new Map;e=Mh({strict:!1,end:!0,sensitive:!1},e);function n(f){return o.get(f)}function i(f,p,g){const m=!g,v=Th(f);v.aliasOf=g&&g.record;const x=Mh(e,f),_=[v];if("alias"in f){const P=typeof f.alias=="string"?[f.alias]:f.alias;for(const $ of P)_.push(Th(lt({},v,{components:g?g.record.components:v.components,path:$,aliasOf:g?g.record:v})))}let k,C;for(const P of _){const{path:$}=P;if(p&&$[0]!=="/"){const R=p.record.path,V=R[R.length-1]==="/"?"":"/";P.path=p.record.path+($&&V+$)}if(k=A_(P,p,x),g?g.alias.push(k):(C=C||k,C!==k&&C.alias.push(k),m&&f.name&&!Ph(k)&&a(f.name)),wb(k)&&c(k),v.children){const R=v.children;for(let V=0;V<R.length;V++)i(R[V],k,g&&g.children[V])}g=g||k}return C?()=>{a(C)}:$i}function a(f){if(vb(f)){const p=o.get(f);p&&(o.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&o.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function l(){return s}function c(f){const p=R_(f,s);s.splice(p,0,f),f.record.name&&!Ph(f)&&o.set(f.record.name,f)}function d(f,p){let g,m={},v,x;if("name"in f&&f.name){if(g=o.get(f.name),!g)throw Pr(1,{location:f});x=g.record.name,m=lt(Ah(p.params,g.keys.filter(C=>!C.optional).concat(g.parent?g.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),f.params&&Ah(f.params,g.keys.map(C=>C.name))),v=g.stringify(m)}else if(f.path!=null)v=f.path,g=s.find(C=>C.re.test(v)),g&&(m=g.parse(v),x=g.record.name);else{if(g=p.name?o.get(p.name):s.find(C=>C.re.test(p.path)),!g)throw Pr(1,{location:f,currentLocation:p});x=g.record.name,m=lt({},p.params,f.params),v=g.stringify(m)}const _=[];let k=g;for(;k;)_.unshift(k.record),k=k.parent;return{name:x,path:v,params:m,matched:_,meta:M_(_)}}t.forEach(f=>i(f));function u(){s.length=0,o.clear()}return{addRoute:i,resolve:d,removeRoute:a,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function Ah(t,e){const s={};for(const o of e)o in t&&(s[o]=t[o]);return s}function Th(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:P_(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function P_(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const o in t.components)e[o]=typeof s=="object"?s[o]:s;return e}function Ph(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function M_(t){return t.reduce((e,s)=>lt(e,s.meta),{})}function Mh(t,e){const s={};for(const o in t)s[o]=o in e?e[o]:t[o];return s}function R_(t,e){let s=0,o=e.length;for(;s!==o;){const i=s+o>>1;xb(t,e[i])<0?o=i:s=i+1}const n=D_(t);return n&&(o=e.lastIndexOf(n,o-1)),o}function D_(t){let e=t;for(;e=e.parent;)if(wb(e)&&xb(t,e)===0)return e}function wb({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function O_(t){const e={};if(t===""||t==="?")return e;const o=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<o.length;++n){const i=o[n].replace(fb," "),a=i.indexOf("="),l=zi(a<0?i:i.slice(0,a)),c=a<0?null:zi(i.slice(a+1));if(l in e){let d=e[l];to(d)||(d=e[l]=[d]),d.push(c)}else e[l]=c}return e}function Rh(t){let e="";for(let s in t){const o=t[s];if(s=e_(s),o==null){o!==void 0&&(e+=(e.length?"&":"")+s);continue}(to(o)?o.map(i=>i&&su(i)):[o&&su(o)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+s,i!=null&&(e+="="+i))})}return e}function I_(t){const e={};for(const s in t){const o=t[s];o!==void 0&&(e[s]=to(o)?o.map(n=>n==null?null:""+n):o==null?o:""+o)}return e}const L_=Symbol(""),Dh=Symbol(""),$c=Symbol(""),ff=Symbol(""),nu=Symbol("");function ei(){let t=[];function e(o){return t.push(o),()=>{const n=t.indexOf(o);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function rn(t,e,s,o,n,i=a=>a()){const a=o&&(o.enterCallbacks[n]=o.enterCallbacks[n]||[]);return()=>new Promise((l,c)=>{const d=p=>{p===!1?c(Pr(4,{from:s,to:e})):p instanceof Error?c(p):x_(p)?c(Pr(2,{from:e,to:p})):(a&&o.enterCallbacks[n]===a&&typeof p=="function"&&a.push(p),l())},u=i(()=>t.call(o&&o.instances[n],e,s,d));let f=Promise.resolve(u);t.length<3&&(f=f.then(d)),f.catch(p=>c(p))})}function md(t,e,s,o,n=i=>i()){const i=[];for(const a of t)for(const l in a.components){let c=a.components[l];if(!(e!=="beforeRouteEnter"&&!a.instances[l]))if(db(c)){const u=(c.__vccOpts||c)[e];u&&i.push(rn(u,s,o,a,l,n))}else{let d=c();i.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const f=V2(u)?u.default:u;a.mods[l]=u,a.components[l]=f;const g=(f.__vccOpts||f)[e];return g&&rn(g,s,o,a,l,n)()}))}}return i}function Oh(t){const e=Vs($c),s=Vs(ff),o=re(()=>{const c=ye(t.to);return e.resolve(c)}),n=re(()=>{const{matched:c}=o.value,{length:d}=c,u=c[d-1],f=s.matched;if(!u||!f.length)return-1;const p=f.findIndex(Tr.bind(null,u));if(p>-1)return p;const g=Ih(c[d-2]);return d>1&&Ih(u)===g&&f[f.length-1].path!==g?f.findIndex(Tr.bind(null,c[d-2])):p}),i=re(()=>n.value>-1&&U_(s.params,o.value.params)),a=re(()=>n.value>-1&&n.value===s.matched.length-1&&mb(s.params,o.value.params));function l(c={}){if(F_(c)){const d=e[ye(t.replace)?"replace":"push"](ye(t.to)).catch($i);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:o,href:re(()=>o.value.href),isActive:i,isExactActive:a,navigate:l}}function B_(t){return t.length===1?t[0]:t}const N_=Le({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Oh,setup(t,{slots:e}){const s=Ft(Oh(t)),{options:o}=Vs($c),n=re(()=>({[Lh(t.activeClass,o.linkActiveClass,"router-link-active")]:s.isActive,[Lh(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&B_(e.default(s));return t.custom?i:Nt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},i)}}}),j_=N_;function F_(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function U_(t,e){for(const s in e){const o=e[s],n=t[s];if(typeof o=="string"){if(o!==n)return!1}else if(!to(n)||n.length!==o.length||o.some((i,a)=>i!==n[a]))return!1}return!0}function Ih(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Lh=(t,e,s)=>t??e??s,z_=Le({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const o=Vs(nu),n=re(()=>t.route||o.value),i=Vs(Dh,0),a=re(()=>{let d=ye(i);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=re(()=>n.value.matched[a.value]);sl(Dh,re(()=>a.value+1)),sl(L_,l),sl(nu,n);const c=I();return Rt(()=>[c.value,l.value,t.name],([d,u,f],[p,g,m])=>{u&&(u.instances[f]=d,g&&g!==u&&d&&d===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),d&&u&&(!g||!Tr(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(v=>v(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,f=l.value,p=f&&f.components[u];if(!p)return Bh(s.default,{Component:p,route:d});const g=f.props[u],m=g?g===!0?d.params:typeof g=="function"?g(d):g:null,x=Nt(p,lt({},m,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return Bh(s.default,{Component:x,route:d})||x}}});function Bh(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const V_=z_;function H_(t){const e=T_(t.routes,t),s=t.parseQuery||O_,o=t.stringifyQuery||Rh,n=t.history,i=ei(),a=ei(),l=ei(),c=F1(en);let d=en;mr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=hd.bind(null,D=>""+D),f=hd.bind(null,s_),p=hd.bind(null,zi);function g(D,H){let ee,he;return vb(D)?(ee=e.getRecordMatcher(D),he=H):he=D,e.addRoute(he,ee)}function m(D){const H=e.getRecordMatcher(D);H&&e.removeRoute(H)}function v(){return e.getRoutes().map(D=>D.record)}function x(D){return!!e.getRecordMatcher(D)}function _(D,H){if(H=lt({},H||c.value),typeof D=="string"){const te=gd(s,D,H.path),X=e.resolve({path:te.path},H),U=n.createHref(te.fullPath);return lt(te,X,{params:p(X.params),hash:zi(te.hash),redirectedFrom:void 0,href:U})}let ee;if(D.path!=null)ee=lt({},D,{path:gd(s,D.path,H.path).path});else{const te=lt({},D.params);for(const X in te)te[X]==null&&delete te[X];ee=lt({},D,{params:f(te)}),H.params=f(H.params)}const he=e.resolve(ee,H),Oe=D.hash||"";he.params=u(p(he.params));const N=r_(o,lt({},D,{hash:Z2(Oe),path:he.path})),G=n.createHref(N);return lt({fullPath:N,hash:Oe,query:o===Rh?I_(D.query):D.query||{}},he,{redirectedFrom:void 0,href:G})}function k(D){return typeof D=="string"?gd(s,D,c.value.path):lt({},D)}function C(D,H){if(d!==D)return Pr(8,{from:H,to:D})}function P(D){return V(D)}function $(D){return P(lt(k(D),{replace:!0}))}function R(D){const H=D.matched[D.matched.length-1];if(H&&H.redirect){const{redirect:ee}=H;let he=typeof ee=="function"?ee(D):ee;return typeof he=="string"&&(he=he.includes("?")||he.includes("#")?he=k(he):{path:he},he.params={}),lt({query:D.query,hash:D.hash,params:he.path!=null?{}:D.params},he)}}function V(D,H){const ee=d=_(D),he=c.value,Oe=D.state,N=D.force,G=D.replace===!0,te=R(ee);if(te)return V(lt(k(te),{state:typeof te=="object"?lt({},Oe,te.state):Oe,force:N,replace:G}),H||ee);const X=ee;X.redirectedFrom=H;let U;return!N&&i_(o,he,ee)&&(U=Pr(16,{to:X,from:he}),Pe(he,he,!0,!1)),(U?Promise.resolve(U):S(X,he)).catch(ae=>So(ae)?So(ae,2)?ae:J(ae):Z(ae,X,he)).then(ae=>{if(ae){if(So(ae,2))return V(lt({replace:G},k(ae.to),{state:typeof ae.to=="object"?lt({},Oe,ae.to.state):Oe,force:N}),H||X)}else ae=T(X,he,!0,G,Oe);return O(X,he,ae),ae})}function B(D,H){const ee=C(D,H);return ee?Promise.reject(ee):Promise.resolve()}function E(D){const H=j.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(D):D()}function S(D,H){let ee;const[he,Oe,N]=q_(D,H);ee=md(he.reverse(),"beforeRouteLeave",D,H);for(const te of he)te.leaveGuards.forEach(X=>{ee.push(rn(X,D,H))});const G=B.bind(null,D,H);return ee.push(G),se(ee).then(()=>{ee=[];for(const te of i.list())ee.push(rn(te,D,H));return ee.push(G),se(ee)}).then(()=>{ee=md(Oe,"beforeRouteUpdate",D,H);for(const te of Oe)te.updateGuards.forEach(X=>{ee.push(rn(X,D,H))});return ee.push(G),se(ee)}).then(()=>{ee=[];for(const te of N)if(te.beforeEnter)if(to(te.beforeEnter))for(const X of te.beforeEnter)ee.push(rn(X,D,H));else ee.push(rn(te.beforeEnter,D,H));return ee.push(G),se(ee)}).then(()=>(D.matched.forEach(te=>te.enterCallbacks={}),ee=md(N,"beforeRouteEnter",D,H,E),ee.push(G),se(ee))).then(()=>{ee=[];for(const te of a.list())ee.push(rn(te,D,H));return ee.push(G),se(ee)}).catch(te=>So(te,8)?te:Promise.reject(te))}function O(D,H,ee){l.list().forEach(he=>E(()=>he(D,H,ee)))}function T(D,H,ee,he,Oe){const N=C(D,H);if(N)return N;const G=H===en,te=mr?history.state:{};ee&&(he||G?n.replace(D.fullPath,lt({scroll:G&&te&&te.scroll},Oe)):n.push(D.fullPath,Oe)),c.value=D,Pe(D,H,ee,G),J()}let L;function K(){L||(L=n.listen((D,H,ee)=>{if(!Q.listening)return;const he=_(D),Oe=R(he);if(Oe){V(lt(Oe,{replace:!0,force:!0}),he).catch($i);return}d=he;const N=c.value;mr&&h_(kh(N.fullPath,ee.delta),Cc()),S(he,N).catch(G=>So(G,12)?G:So(G,2)?(V(lt(k(G.to),{force:!0}),he).then(te=>{So(te,20)&&!ee.delta&&ee.type===Vi.pop&&n.go(-1,!1)}).catch($i),Promise.reject()):(ee.delta&&n.go(-ee.delta,!1),Z(G,he,N))).then(G=>{G=G||T(he,N,!1),G&&(ee.delta&&!So(G,8)?n.go(-ee.delta,!1):ee.type===Vi.pop&&So(G,20)&&n.go(-1,!1)),O(he,N,G)}).catch($i)}))}let z=ei(),F=ei(),W;function Z(D,H,ee){J(D);const he=F.list();return he.length?he.forEach(Oe=>Oe(D,H,ee)):console.error(D),Promise.reject(D)}function le(){return W&&c.value!==en?Promise.resolve():new Promise((D,H)=>{z.add([D,H])})}function J(D){return W||(W=!D,K(),z.list().forEach(([H,ee])=>D?ee(D):H()),z.reset()),D}function Pe(D,H,ee,he){const{scrollBehavior:Oe}=t;if(!mr||!Oe)return Promise.resolve();const N=!ee&&g_(kh(D.fullPath,0))||(he||!ee)&&history.state&&history.state.scroll||null;return _s().then(()=>Oe(D,H,N)).then(G=>G&&p_(G)).catch(G=>Z(G,D,H))}const me=D=>n.go(D);let Y;const j=new Set,Q={currentRoute:c,listening:!0,addRoute:g,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:v,resolve:_,options:t,push:P,replace:$,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:F.add,isReady:le,install(D){const H=this;D.component("RouterLink",j_),D.component("RouterView",V_),D.config.globalProperties.$router=H,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>ye(c)}),mr&&!Y&&c.value===en&&(Y=!0,P(n.location).catch(Oe=>{}));const ee={};for(const Oe in en)Object.defineProperty(ee,Oe,{get:()=>c.value[Oe],enumerable:!0});D.provide($c,H),D.provide(ff,fm(ee)),D.provide(nu,c);const he=D.unmount;j.add(D),D.unmount=function(){j.delete(D),j.size<1&&(d=en,L&&L(),L=null,c.value=en,Y=!1,W=!1),he()}}};function se(D){return D.reduce((H,ee)=>H.then(()=>E(ee)),Promise.resolve())}return Q}function q_(t,e){const s=[],o=[],n=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const l=e.matched[a];l&&(t.matched.find(d=>Tr(d,l))?o.push(l):s.push(l));const c=t.matched[a];c&&(e.matched.find(d=>Tr(d,c))||n.push(c))}return[s,o,n]}function Ec(){return Vs($c)}function pf(t){return Vs(ff)}function _b(t,e){return function(){return t.apply(e,arguments)}}const{toString:W_}=Object.prototype,{getPrototypeOf:hf}=Object,{iterator:Sc,toStringTag:kb}=Symbol,Ac=(t=>e=>{const s=W_.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),so=t=>(t=t.toLowerCase(),e=>Ac(e)===t),Tc=t=>e=>typeof e===t,{isArray:jr}=Array,Hi=Tc("undefined");function oa(t){return t!==null&&!Hi(t)&&t.constructor!==null&&!Hi(t.constructor)&&ks(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Cb=so("ArrayBuffer");function G_(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Cb(t.buffer),e}const K_=Tc("string"),ks=Tc("function"),$b=Tc("number"),na=t=>t!==null&&typeof t=="object",Y_=t=>t===!0||t===!1,il=t=>{if(Ac(t)!=="object")return!1;const e=hf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(kb in t)&&!(Sc in t)},J_=t=>{if(!na(t)||oa(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},X_=so("Date"),Q_=so("File"),Z_=so("Blob"),ek=so("FileList"),tk=t=>na(t)&&ks(t.pipe),sk=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ks(t.append)&&((e=Ac(t))==="formdata"||e==="object"&&ks(t.toString)&&t.toString()==="[object FormData]"))},ok=so("URLSearchParams"),[nk,rk,ik,ak]=["ReadableStream","Request","Response","Headers"].map(so),lk=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ra(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let o,n;if(typeof t!="object"&&(t=[t]),jr(t))for(o=0,n=t.length;o<n;o++)e.call(null,t[o],o,t);else{if(oa(t))return;const i=s?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let l;for(o=0;o<a;o++)l=i[o],e.call(null,t[l],l,t)}}function Eb(t,e){if(oa(t))return null;e=e.toLowerCase();const s=Object.keys(t);let o=s.length,n;for(;o-- >0;)if(n=s[o],e===n.toLowerCase())return n;return null}const jn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sb=t=>!Hi(t)&&t!==jn;function ru(){const{caseless:t}=Sb(this)&&this||{},e={},s=(o,n)=>{const i=t&&Eb(e,n)||n;il(e[i])&&il(o)?e[i]=ru(e[i],o):il(o)?e[i]=ru({},o):jr(o)?e[i]=o.slice():e[i]=o};for(let o=0,n=arguments.length;o<n;o++)arguments[o]&&ra(arguments[o],s);return e}const ck=(t,e,s,{allOwnKeys:o}={})=>(ra(e,(n,i)=>{s&&ks(n)?t[i]=_b(n,s):t[i]=n},{allOwnKeys:o}),t),dk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uk=(t,e,s,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},fk=(t,e,s,o)=>{let n,i,a;const l={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)a=n[i],(!o||o(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=s!==!1&&hf(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},pk=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const o=t.indexOf(e,s);return o!==-1&&o===s},hk=t=>{if(!t)return null;if(jr(t))return t;let e=t.length;if(!$b(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},gk=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&hf(Uint8Array)),mk=(t,e)=>{const o=(t&&t[Sc]).call(t);let n;for(;(n=o.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},bk=(t,e)=>{let s;const o=[];for(;(s=t.exec(e))!==null;)o.push(s);return o},vk=so("HTMLFormElement"),yk=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,o,n){return o.toUpperCase()+n}),Nh=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),xk=so("RegExp"),Ab=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),o={};ra(s,(n,i)=>{let a;(a=e(n,i,t))!==!1&&(o[i]=a||n)}),Object.defineProperties(t,o)},wk=t=>{Ab(t,(e,s)=>{if(ks(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const o=t[s];if(ks(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},_k=(t,e)=>{const s={},o=n=>{n.forEach(i=>{s[i]=!0})};return jr(t)?o(t):o(String(t).split(e)),s},kk=()=>{},Ck=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function $k(t){return!!(t&&ks(t.append)&&t[kb]==="FormData"&&t[Sc])}const Ek=t=>{const e=new Array(10),s=(o,n)=>{if(na(o)){if(e.indexOf(o)>=0)return;if(oa(o))return o;if(!("toJSON"in o)){e[n]=o;const i=jr(o)?[]:{};return ra(o,(a,l)=>{const c=s(a,n+1);!Hi(c)&&(i[l]=c)}),e[n]=void 0,i}}return o};return s(t,0)},Sk=so("AsyncFunction"),Ak=t=>t&&(na(t)||ks(t))&&ks(t.then)&&ks(t.catch),Tb=((t,e)=>t?setImmediate:e?((s,o)=>(jn.addEventListener("message",({source:n,data:i})=>{n===jn&&i===s&&o.length&&o.shift()()},!1),n=>{o.push(n),jn.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ks(jn.postMessage)),Tk=typeof queueMicrotask<"u"?queueMicrotask.bind(jn):typeof process<"u"&&process.nextTick||Tb,Pk=t=>t!=null&&ks(t[Sc]),ue={isArray:jr,isArrayBuffer:Cb,isBuffer:oa,isFormData:sk,isArrayBufferView:G_,isString:K_,isNumber:$b,isBoolean:Y_,isObject:na,isPlainObject:il,isEmptyObject:J_,isReadableStream:nk,isRequest:rk,isResponse:ik,isHeaders:ak,isUndefined:Hi,isDate:X_,isFile:Q_,isBlob:Z_,isRegExp:xk,isFunction:ks,isStream:tk,isURLSearchParams:ok,isTypedArray:gk,isFileList:ek,forEach:ra,merge:ru,extend:ck,trim:lk,stripBOM:dk,inherits:uk,toFlatObject:fk,kindOf:Ac,kindOfTest:so,endsWith:pk,toArray:hk,forEachEntry:mk,matchAll:bk,isHTMLForm:vk,hasOwnProperty:Nh,hasOwnProp:Nh,reduceDescriptors:Ab,freezeMethods:wk,toObjectSet:_k,toCamelCase:yk,noop:kk,toFiniteNumber:Ck,findKey:Eb,global:jn,isContextDefined:Sb,isSpecCompliantForm:$k,toJSONObject:Ek,isAsyncFn:Sk,isThenable:Ak,setImmediate:Tb,asap:Tk,isIterable:Pk};function qe(t,e,s,o,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),o&&(this.request=o),n&&(this.response=n,this.status=n.status?n.status:null)}ue.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const Pb=qe.prototype,Mb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Mb[t]={value:t}});Object.defineProperties(qe,Mb);Object.defineProperty(Pb,"isAxiosError",{value:!0});qe.from=(t,e,s,o,n,i)=>{const a=Object.create(Pb);return ue.toFlatObject(t,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),qe.call(a,t.message,e,s,o,n),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const Mk=null;function iu(t){return ue.isPlainObject(t)||ue.isArray(t)}function Rb(t){return ue.endsWith(t,"[]")?t.slice(0,-2):t}function jh(t,e,s){return t?t.concat(e).map(function(n,i){return n=Rb(n),!s&&i?"["+n+"]":n}).join(s?".":""):e}function Rk(t){return ue.isArray(t)&&!t.some(iu)}const Dk=ue.toFlatObject(ue,{},null,function(e){return/^is[A-Z]/.test(e)});function Pc(t,e,s){if(!ue.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=ue.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!ue.isUndefined(x[v])});const o=s.metaTokens,n=s.visitor||u,i=s.dots,a=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(e);if(!ue.isFunction(n))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(ue.isDate(m))return m.toISOString();if(ue.isBoolean(m))return m.toString();if(!c&&ue.isBlob(m))throw new qe("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(m)||ue.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,v,x){let _=m;if(m&&!x&&typeof m=="object"){if(ue.endsWith(v,"{}"))v=o?v:v.slice(0,-2),m=JSON.stringify(m);else if(ue.isArray(m)&&Rk(m)||(ue.isFileList(m)||ue.endsWith(v,"[]"))&&(_=ue.toArray(m)))return v=Rb(v),_.forEach(function(C,P){!(ue.isUndefined(C)||C===null)&&e.append(a===!0?jh([v],P,i):a===null?v:v+"[]",d(C))}),!1}return iu(m)?!0:(e.append(jh(x,v,i),d(m)),!1)}const f=[],p=Object.assign(Dk,{defaultVisitor:u,convertValue:d,isVisitable:iu});function g(m,v){if(!ue.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(m),ue.forEach(m,function(_,k){(!(ue.isUndefined(_)||_===null)&&n.call(e,_,ue.isString(k)?k.trim():k,v,p))===!0&&g(_,v?v.concat(k):[k])}),f.pop()}}if(!ue.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Fh(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function gf(t,e){this._pairs=[],t&&Pc(t,this,e)}const Db=gf.prototype;Db.append=function(e,s){this._pairs.push([e,s])};Db.toString=function(e){const s=e?function(o){return e.call(this,o,Fh)}:Fh;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function Ok(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ob(t,e,s){if(!e)return t;const o=s&&s.encode||Ok;ue.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let i;if(n?i=n(e,s):i=ue.isURLSearchParams(e)?e.toString():new gf(e,s).toString(o),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Uh{constructor(){this.handlers=[]}use(e,s,o){return this.handlers.push({fulfilled:e,rejected:s,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ue.forEach(this.handlers,function(o){o!==null&&e(o)})}}const Ib={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ik=typeof URLSearchParams<"u"?URLSearchParams:gf,Lk=typeof FormData<"u"?FormData:null,Bk=typeof Blob<"u"?Blob:null,Nk={isBrowser:!0,classes:{URLSearchParams:Ik,FormData:Lk,Blob:Bk},protocols:["http","https","file","blob","url","data"]},mf=typeof window<"u"&&typeof document<"u",au=typeof navigator=="object"&&navigator||void 0,jk=mf&&(!au||["ReactNative","NativeScript","NS"].indexOf(au.product)<0),Fk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Uk=mf&&window.location.href||"http://localhost",zk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mf,hasStandardBrowserEnv:jk,hasStandardBrowserWebWorkerEnv:Fk,navigator:au,origin:Uk},Symbol.toStringTag,{value:"Module"})),is={...zk,...Nk};function Vk(t,e){return Pc(t,new is.classes.URLSearchParams,{visitor:function(s,o,n,i){return is.isNode&&ue.isBuffer(s)?(this.append(o,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Hk(t){return ue.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function qk(t){const e={},s=Object.keys(t);let o;const n=s.length;let i;for(o=0;o<n;o++)i=s[o],e[i]=t[i];return e}function Lb(t){function e(s,o,n,i){let a=s[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=s.length;return a=!a&&ue.isArray(n)?n.length:a,c?(ue.hasOwnProp(n,a)?n[a]=[n[a],o]:n[a]=o,!l):((!n[a]||!ue.isObject(n[a]))&&(n[a]=[]),e(s,o,n[a],i)&&ue.isArray(n[a])&&(n[a]=qk(n[a])),!l)}if(ue.isFormData(t)&&ue.isFunction(t.entries)){const s={};return ue.forEachEntry(t,(o,n)=>{e(Hk(o),n,s,0)}),s}return null}function Wk(t,e,s){if(ue.isString(t))try{return(e||JSON.parse)(t),ue.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(s||JSON.stringify)(t)}const ia={transitional:Ib,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const o=s.getContentType()||"",n=o.indexOf("application/json")>-1,i=ue.isObject(e);if(i&&ue.isHTMLForm(e)&&(e=new FormData(e)),ue.isFormData(e))return n?JSON.stringify(Lb(e)):e;if(ue.isArrayBuffer(e)||ue.isBuffer(e)||ue.isStream(e)||ue.isFile(e)||ue.isBlob(e)||ue.isReadableStream(e))return e;if(ue.isArrayBufferView(e))return e.buffer;if(ue.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Vk(e,this.formSerializer).toString();if((l=ue.isFileList(e))||o.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Pc(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||n?(s.setContentType("application/json",!1),Wk(e)):e}],transformResponse:[function(e){const s=this.transitional||ia.transitional,o=s&&s.forcedJSONParsing,n=this.responseType==="json";if(ue.isResponse(e)||ue.isReadableStream(e))return e;if(e&&ue.isString(e)&&(o&&!this.responseType||n)){const a=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?qe.from(l,qe.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:is.classes.FormData,Blob:is.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],t=>{ia.headers[t]={}});const Gk=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kk=t=>{const e={};let s,o,n;return t&&t.split(`
`).forEach(function(a){n=a.indexOf(":"),s=a.substring(0,n).trim().toLowerCase(),o=a.substring(n+1).trim(),!(!s||e[s]&&Gk[s])&&(s==="set-cookie"?e[s]?e[s].push(o):e[s]=[o]:e[s]=e[s]?e[s]+", "+o:o)}),e},zh=Symbol("internals");function ti(t){return t&&String(t).trim().toLowerCase()}function al(t){return t===!1||t==null?t:ue.isArray(t)?t.map(al):String(t)}function Yk(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=s.exec(t);)e[o[1]]=o[2];return e}const Jk=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function bd(t,e,s,o,n){if(ue.isFunction(o))return o.call(this,e,s);if(n&&(e=s),!!ue.isString(e)){if(ue.isString(o))return e.indexOf(o)!==-1;if(ue.isRegExp(o))return o.test(e)}}function Xk(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,o)=>s.toUpperCase()+o)}function Qk(t,e){const s=ue.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+s,{value:function(n,i,a){return this[o].call(this,e,n,i,a)},configurable:!0})})}let Cs=class{constructor(e){e&&this.set(e)}set(e,s,o){const n=this;function i(l,c,d){const u=ti(c);if(!u)throw new Error("header name must be a non-empty string");const f=ue.findKey(n,u);(!f||n[f]===void 0||d===!0||d===void 0&&n[f]!==!1)&&(n[f||c]=al(l))}const a=(l,c)=>ue.forEach(l,(d,u)=>i(d,u,c));if(ue.isPlainObject(e)||e instanceof this.constructor)a(e,s);else if(ue.isString(e)&&(e=e.trim())&&!Jk(e))a(Kk(e),s);else if(ue.isObject(e)&&ue.isIterable(e)){let l={},c,d;for(const u of e){if(!ue.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?ue.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(l,s)}else e!=null&&i(s,e,o);return this}get(e,s){if(e=ti(e),e){const o=ue.findKey(this,e);if(o){const n=this[o];if(!s)return n;if(s===!0)return Yk(n);if(ue.isFunction(s))return s.call(this,n,o);if(ue.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=ti(e),e){const o=ue.findKey(this,e);return!!(o&&this[o]!==void 0&&(!s||bd(this,this[o],o,s)))}return!1}delete(e,s){const o=this;let n=!1;function i(a){if(a=ti(a),a){const l=ue.findKey(o,a);l&&(!s||bd(o,o[l],l,s))&&(delete o[l],n=!0)}}return ue.isArray(e)?e.forEach(i):i(e),n}clear(e){const s=Object.keys(this);let o=s.length,n=!1;for(;o--;){const i=s[o];(!e||bd(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const s=this,o={};return ue.forEach(this,(n,i)=>{const a=ue.findKey(o,i);if(a){s[a]=al(n),delete s[i];return}const l=e?Xk(i):String(i).trim();l!==i&&delete s[i],s[l]=al(n),o[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return ue.forEach(this,(o,n)=>{o!=null&&o!==!1&&(s[n]=e&&ue.isArray(o)?o.join(", "):o)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const o=new this(e);return s.forEach(n=>o.set(n)),o}static accessor(e){const o=(this[zh]=this[zh]={accessors:{}}).accessors,n=this.prototype;function i(a){const l=ti(a);o[l]||(Qk(n,a),o[l]=!0)}return ue.isArray(e)?e.forEach(i):i(e),this}};Cs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(Cs.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[s]=o}}});ue.freezeMethods(Cs);function vd(t,e){const s=this||ia,o=e||s,n=Cs.from(o.headers);let i=o.data;return ue.forEach(t,function(l){i=l.call(s,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function Bb(t){return!!(t&&t.__CANCEL__)}function Fr(t,e,s){qe.call(this,t??"canceled",qe.ERR_CANCELED,e,s),this.name="CanceledError"}ue.inherits(Fr,qe,{__CANCEL__:!0});function Nb(t,e,s){const o=s.config.validateStatus;!s.status||!o||o(s.status)?t(s):e(new qe("Request failed with status code "+s.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Zk(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function e5(t,e){t=t||10;const s=new Array(t),o=new Array(t);let n=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),u=o[i];a||(a=d),s[n]=c,o[n]=d;let f=i,p=0;for(;f!==n;)p+=s[f++],f=f%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),d-a<e)return;const g=u&&d-u;return g?Math.round(p*1e3/g):void 0}}function t5(t,e){let s=0,o=1e3/e,n,i;const a=(d,u=Date.now())=>{s=u,n=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const u=Date.now(),f=u-s;f>=o?a(d,u):(n=d,i||(i=setTimeout(()=>{i=null,a(n)},o-f)))},()=>n&&a(n)]}const Nl=(t,e,s=3)=>{let o=0;const n=e5(50,250);return t5(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-o,d=n(c),u=a<=l;o=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-a)/d:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},s)},Vh=(t,e)=>{const s=t!=null;return[o=>e[0]({lengthComputable:s,total:t,loaded:o}),e[1]]},Hh=t=>(...e)=>ue.asap(()=>t(...e)),s5=is.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,is.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(is.origin),is.navigator&&/(msie|trident)/i.test(is.navigator.userAgent)):()=>!0,o5=is.hasStandardBrowserEnv?{write(t,e,s,o,n,i){const a=[t+"="+encodeURIComponent(e)];ue.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),ue.isString(o)&&a.push("path="+o),ue.isString(n)&&a.push("domain="+n),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function n5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function r5(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function jb(t,e,s){let o=!n5(e);return t&&(o||s==!1)?r5(t,e):e}const qh=t=>t instanceof Cs?{...t}:t;function Xn(t,e){e=e||{};const s={};function o(d,u,f,p){return ue.isPlainObject(d)&&ue.isPlainObject(u)?ue.merge.call({caseless:p},d,u):ue.isPlainObject(u)?ue.merge({},u):ue.isArray(u)?u.slice():u}function n(d,u,f,p){if(ue.isUndefined(u)){if(!ue.isUndefined(d))return o(void 0,d,f,p)}else return o(d,u,f,p)}function i(d,u){if(!ue.isUndefined(u))return o(void 0,u)}function a(d,u){if(ue.isUndefined(u)){if(!ue.isUndefined(d))return o(void 0,d)}else return o(void 0,u)}function l(d,u,f){if(f in e)return o(d,u);if(f in t)return o(void 0,d)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(d,u,f)=>n(qh(d),qh(u),f,!0)};return ue.forEach(Object.keys({...t,...e}),function(u){const f=c[u]||n,p=f(t[u],e[u],u);ue.isUndefined(p)&&f!==l||(s[u]=p)}),s}const Fb=t=>{const e=Xn({},t);let{data:s,withXSRFToken:o,xsrfHeaderName:n,xsrfCookieName:i,headers:a,auth:l}=e;e.headers=a=Cs.from(a),e.url=Ob(jb(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(ue.isFormData(s)){if(is.hasStandardBrowserEnv||is.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[d,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([d||"multipart/form-data",...u].join("; "))}}if(is.hasStandardBrowserEnv&&(o&&ue.isFunction(o)&&(o=o(e)),o||o!==!1&&s5(e.url))){const d=n&&i&&o5.read(i);d&&a.set(n,d)}return e},i5=typeof XMLHttpRequest<"u",a5=i5&&function(t){return new Promise(function(s,o){const n=Fb(t);let i=n.data;const a=Cs.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=n,u,f,p,g,m;function v(){g&&g(),m&&m(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout;function _(){if(!x)return;const C=Cs.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),$={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:C,config:t,request:x};Nb(function(V){s(V),v()},function(V){o(V),v()},$),x=null}"onloadend"in x?x.onloadend=_:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(_)},x.onabort=function(){x&&(o(new qe("Request aborted",qe.ECONNABORTED,t,x)),x=null)},x.onerror=function(){o(new qe("Network Error",qe.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let P=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const $=n.transitional||Ib;n.timeoutErrorMessage&&(P=n.timeoutErrorMessage),o(new qe(P,$.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,t,x)),x=null},i===void 0&&a.setContentType(null),"setRequestHeader"in x&&ue.forEach(a.toJSON(),function(P,$){x.setRequestHeader($,P)}),ue.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),l&&l!=="json"&&(x.responseType=n.responseType),d&&([p,m]=Nl(d,!0),x.addEventListener("progress",p)),c&&x.upload&&([f,g]=Nl(c),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(u=C=>{x&&(o(!C||C.type?new Fr(null,t,x):C),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const k=Zk(n.url);if(k&&is.protocols.indexOf(k)===-1){o(new qe("Unsupported protocol "+k+":",qe.ERR_BAD_REQUEST,t));return}x.send(i||null)})},l5=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let o=new AbortController,n;const i=function(d){if(!n){n=!0,l();const u=d instanceof Error?d:this.reason;o.abort(u instanceof qe?u:new Fr(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,i(new qe(`timeout ${e} of ms exceeded`,qe.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=o;return c.unsubscribe=()=>ue.asap(l),c}},c5=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let o=0,n;for(;o<s;)n=o+e,yield t.slice(o,n),o=n},d5=async function*(t,e){for await(const s of u5(t))yield*c5(s,e)},u5=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:o}=await e.read();if(s)break;yield o}}finally{await e.cancel()}},Wh=(t,e,s,o)=>{const n=d5(t,e);let i=0,a,l=c=>{a||(a=!0,o&&o(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){l(),c.close();return}let f=u.byteLength;if(s){let p=i+=f;s(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},Mc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ub=Mc&&typeof ReadableStream=="function",f5=Mc&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),zb=(t,...e)=>{try{return!!t(...e)}catch{return!1}},p5=Ub&&zb(()=>{let t=!1;const e=new Request(is.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Gh=64*1024,lu=Ub&&zb(()=>ue.isReadableStream(new Response("").body)),jl={stream:lu&&(t=>t.body)};Mc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!jl[e]&&(jl[e]=ue.isFunction(t[e])?s=>s[e]():(s,o)=>{throw new qe(`Response type '${e}' is not supported`,qe.ERR_NOT_SUPPORT,o)})})})(new Response);const h5=async t=>{if(t==null)return 0;if(ue.isBlob(t))return t.size;if(ue.isSpecCompliantForm(t))return(await new Request(is.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(t)||ue.isArrayBuffer(t))return t.byteLength;if(ue.isURLSearchParams(t)&&(t=t+""),ue.isString(t))return(await f5(t)).byteLength},g5=async(t,e)=>{const s=ue.toFiniteNumber(t.getContentLength());return s??h5(e)},m5=Mc&&(async t=>{let{url:e,method:s,data:o,signal:n,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:f="same-origin",fetchOptions:p}=Fb(t);d=d?(d+"").toLowerCase():"text";let g=l5([n,i&&i.toAbortSignal()],a),m;const v=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let x;try{if(c&&p5&&s!=="get"&&s!=="head"&&(x=await g5(u,o))!==0){let $=new Request(e,{method:"POST",body:o,duplex:"half"}),R;if(ue.isFormData(o)&&(R=$.headers.get("content-type"))&&u.setContentType(R),$.body){const[V,B]=Vh(x,Nl(Hh(c)));o=Wh($.body,Gh,V,B)}}ue.isString(f)||(f=f?"include":"omit");const _="credentials"in Request.prototype;m=new Request(e,{...p,signal:g,method:s.toUpperCase(),headers:u.normalize().toJSON(),body:o,duplex:"half",credentials:_?f:void 0});let k=await fetch(m,p);const C=lu&&(d==="stream"||d==="response");if(lu&&(l||C&&v)){const $={};["status","statusText","headers"].forEach(E=>{$[E]=k[E]});const R=ue.toFiniteNumber(k.headers.get("content-length")),[V,B]=l&&Vh(R,Nl(Hh(l),!0))||[];k=new Response(Wh(k.body,Gh,V,()=>{B&&B(),v&&v()}),$)}d=d||"text";let P=await jl[ue.findKey(jl,d)||"text"](k,t);return!C&&v&&v(),await new Promise(($,R)=>{Nb($,R,{data:P,headers:Cs.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:m})})}catch(_){throw v&&v(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new qe("Network Error",qe.ERR_NETWORK,t,m),{cause:_.cause||_}):qe.from(_,_&&_.code,t,m)}}),cu={http:Mk,xhr:a5,fetch:m5};ue.forEach(cu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Kh=t=>`- ${t}`,b5=t=>ue.isFunction(t)||t===null||t===!1,Vb={getAdapter:t=>{t=ue.isArray(t)?t:[t];const{length:e}=t;let s,o;const n={};for(let i=0;i<e;i++){s=t[i];let a;if(o=s,!b5(s)&&(o=cu[(a=String(s)).toLowerCase()],o===void 0))throw new qe(`Unknown adapter '${a}'`);if(o)break;n[a||"#"+i]=o}if(!o){const i=Object.entries(n).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(Kh).join(`
`):" "+Kh(i[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return o},adapters:cu};function yd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fr(null,t)}function Yh(t){return yd(t),t.headers=Cs.from(t.headers),t.data=vd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Vb.getAdapter(t.adapter||ia.adapter)(t).then(function(o){return yd(t),o.data=vd.call(t,t.transformResponse,o),o.headers=Cs.from(o.headers),o},function(o){return Bb(o)||(yd(t),o&&o.response&&(o.response.data=vd.call(t,t.transformResponse,o.response),o.response.headers=Cs.from(o.response.headers))),Promise.reject(o)})}const Hb="1.11.0",Rc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Rc[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const Jh={};Rc.transitional=function(e,s,o){function n(i,a){return"[Axios v"+Hb+"] Transitional option '"+i+"'"+a+(o?". "+o:"")}return(i,a,l)=>{if(e===!1)throw new qe(n(a," has been removed"+(s?" in "+s:"")),qe.ERR_DEPRECATED);return s&&!Jh[a]&&(Jh[a]=!0,console.warn(n(a," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,a,l):!0}};Rc.spelling=function(e){return(s,o)=>(console.warn(`${o} is likely a misspelling of ${e}`),!0)};function v5(t,e,s){if(typeof t!="object")throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let n=o.length;for(;n-- >0;){const i=o[n],a=e[i];if(a){const l=t[i],c=l===void 0||a(l,i,t);if(c!==!0)throw new qe("option "+i+" must be "+c,qe.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new qe("Unknown option "+i,qe.ERR_BAD_OPTION)}}const ll={assertOptions:v5,validators:Rc},io=ll.validators;let Hn=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Uh,response:new Uh}}async request(e,s){try{return await this._request(e,s)}catch(o){if(o instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Xn(this.defaults,s);const{transitional:o,paramsSerializer:n,headers:i}=s;o!==void 0&&ll.assertOptions(o,{silentJSONParsing:io.transitional(io.boolean),forcedJSONParsing:io.transitional(io.boolean),clarifyTimeoutError:io.transitional(io.boolean)},!1),n!=null&&(ue.isFunction(n)?s.paramsSerializer={serialize:n}:ll.assertOptions(n,{encode:io.function,serialize:io.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ll.assertOptions(s,{baseUrl:io.spelling("baseURL"),withXsrfToken:io.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a=i&&ue.merge(i.common,i[s.method]);i&&ue.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),s.headers=Cs.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(s)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let u,f=0,p;if(!c){const m=[Yh.bind(this),void 0];for(m.unshift(...l),m.push(...d),p=m.length,u=Promise.resolve(s);f<p;)u=u.then(m[f++],m[f++]);return u}p=l.length;let g=s;for(f=0;f<p;){const m=l[f++],v=l[f++];try{g=m(g)}catch(x){v.call(this,x);break}}try{u=Yh.call(this,g)}catch(m){return Promise.reject(m)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(e){e=Xn(this.defaults,e);const s=jb(e.baseURL,e.url,e.allowAbsoluteUrls);return Ob(s,e.params,e.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(e){Hn.prototype[e]=function(s,o){return this.request(Xn(o||{},{method:e,url:s,data:(o||{}).data}))}});ue.forEach(["post","put","patch"],function(e){function s(o){return function(i,a,l){return this.request(Xn(l||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Hn.prototype[e]=s(),Hn.prototype[e+"Form"]=s(!0)});let y5=class qb{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const o=this;this.promise.then(n=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](n);o._listeners=null}),this.promise.then=n=>{let i;const a=new Promise(l=>{o.subscribe(l),i=l}).then(n);return a.cancel=function(){o.unsubscribe(i)},a},e(function(i,a,l){o.reason||(o.reason=new Fr(i,a,l),s(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=o=>{e.abort(o)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new qb(function(n){e=n}),cancel:e}}};function x5(t){return function(s){return t.apply(null,s)}}function w5(t){return ue.isObject(t)&&t.isAxiosError===!0}const du={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(du).forEach(([t,e])=>{du[e]=t});function Wb(t){const e=new Hn(t),s=_b(Hn.prototype.request,e);return ue.extend(s,Hn.prototype,e,{allOwnKeys:!0}),ue.extend(s,e,null,{allOwnKeys:!0}),s.create=function(n){return Wb(Xn(t,n))},s}const Ae=Wb(ia);Ae.Axios=Hn;Ae.CanceledError=Fr;Ae.CancelToken=y5;Ae.isCancel=Bb;Ae.VERSION=Hb;Ae.toFormData=Pc;Ae.AxiosError=qe;Ae.Cancel=Ae.CanceledError;Ae.all=function(e){return Promise.all(e)};Ae.spread=x5;Ae.isAxiosError=w5;Ae.mergeConfig=Xn;Ae.AxiosHeaders=Cs;Ae.formToJSON=t=>Lb(ue.isHTMLForm(t)?new FormData(t):t);Ae.getAdapter=Vb.getAdapter;Ae.HttpStatusCode=du;Ae.default=Ae;const{Axios:hoe,AxiosError:goe,CanceledError:moe,isCancel:boe,CancelToken:voe,VERSION:yoe,all:xoe,Cancel:woe,isAxiosError:_oe,spread:koe,toFormData:Coe,AxiosHeaders:$oe,HttpStatusCode:Eoe,formToJSON:Soe,getAdapter:Aoe,mergeConfig:Toe}=Ae,_5=()=>{const t="https://gems-crm-backend.onrender.com/api",e="https://gems-crm-backend.onrender.com/api";return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?t:e},k5=()=>1e4,et={BASE_URL:_5(),TIMEOUT:k5(),HEADERS:{"Content-Type":"application/json"}},C5={TEAM:"/team"},$5=et.BASE_URL,co=Ae.create({baseURL:$5,timeout:1e4,headers:{"Content-Type":"application/json"}});co.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});co.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)});const Ia={async login(t){var e,s,o,n;try{console.log(" Making login request to:",`${co.defaults.baseURL}/auth/login`),console.log(" Credentials:",t);const i=await co.post("/auth/login",t);return console.log(" Backend response:",i.data),console.log(" Response status:",i.status),i.data.success?(console.log(" Login successful, processing data:",i.data.data),{success:!0,user:i.data.data.user,token:i.data.data.token}):(console.log(" Login failed from backend:",i.data),{success:!1,message:i.data.message||"Credenciales invlidas"})}catch(i){return console.error(" Login error details:",i),console.error(" Error response:",i.response),console.error(" Error data:",(e=i.response)==null?void 0:e.data),console.error(" Error status:",(s=i.response)==null?void 0:s.status),(n=(o=i.response)==null?void 0:o.data)!=null&&n.message?{success:!1,message:i.response.data.message}:{success:!1,message:"Error de conexin. Verifique que el servidor est funcionando."}}},async logout(){try{await co.post("/auth/logout")}catch(t){console.error("Logout error:",t)}},async verifyToken(){try{const t=await co.post("/auth/verify-token");return{success:t.data.success,user:t.data.user}}catch{return{success:!1}}},async updateProfile(t){var e,s;try{const o=await co.put("/auth/profile",t);return{success:o.data.success,user:o.data.user,message:o.data.message}}catch(o){return{success:!1,message:((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Error al actualizar perfil"}}},async changePassword(t,e){var s,o;try{const n=await co.put("/auth/change-password",{oldPassword:t,newPassword:e});return{success:n.data.success,message:n.data.message}}catch(n){return{success:!1,message:((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"Error al cambiar contrasea"}}},async requestPasswordReset(t){var e,s;try{const o=await co.post("/auth/forgot-password",{email:t});return{success:o.data.success,message:o.data.message}}catch(o){return{success:!1,message:((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Error al solicitar restablecimiento"}}},async resetPassword(t,e){var s,o;try{const n=await co.post("/auth/reset-password",{token:t,newPassword:e});return{success:n.data.success,message:n.data.message}}catch(n){return{success:!1,message:((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"Error al restablecer contrasea"}}}},xt=Gs("auth",()=>{const t=I(null),e=I(localStorage.getItem("token")),s=I(!1),o=I(null),n=re(()=>!!t.value&&!!e.value),i=re(()=>{var j;return((j=t.value)==null?void 0:j.role)||null}),a=re(()=>{var j;return((j=t.value)==null?void 0:j.role)==="admin"}),l=re(()=>{var j,Q;return((j=t.value)==null?void 0:j.role)==="manager"||((Q=t.value)==null?void 0:Q.role)==="admin"}),c=(j,Q)=>{var H;const se=(H=t.value)==null?void 0:H.permissions;if(!se)return!1;const D=se[j];return!D||typeof D=="boolean"?!1:D[Q]||!1},d=j=>{var Q,se;return((se=(Q=t.value)==null?void 0:Q.permissions)==null?void 0:se[j])||!1},u=re(()=>d("dashboard")||!!t.value),f=re(()=>{var j,Q;return((j=t.value)==null?void 0:j.role)==="employee"?!1:c("clients","view")||["admin","manager"].includes(((Q=t.value)==null?void 0:Q.role)||"")}),p=re(()=>c("activities","view")||!!t.value),g=re(()=>{var j;return c("reports","view")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),m=re(()=>{var j;return c("accounting","view")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),v=re(()=>{var j;return c("cases","view")||["admin","manager","employee"].includes(((j=t.value)==null?void 0:j.role)||"")}),x=re(()=>{var j;return c("team","view")||["admin","manager","employee"].includes(((j=t.value)==null?void 0:j.role)||"")}),_=re(()=>{var j;return c("clients","create")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),k=re(()=>{var j;return c("clients","edit")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),C=re(()=>{var j;return c("clients","delete")||["admin"].includes(((j=t.value)==null?void 0:j.role)||"")}),P=re(()=>{var j;return c("activities","create")||["admin","manager","employee"].includes(((j=t.value)==null?void 0:j.role)||"")}),$=re(()=>{var j;return c("activities","edit")||["admin","manager","employee"].includes(((j=t.value)==null?void 0:j.role)||"")}),R=re(()=>{var j;return c("activities","delete")||["admin","manager","employee"].includes(((j=t.value)==null?void 0:j.role)||"")}),V=re(()=>{var j;return c("cases","create")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),B=re(()=>{var j;return c("cases","edit")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),E=re(()=>{var j;return c("cases","delete")||["admin"].includes(((j=t.value)==null?void 0:j.role)||"")}),S=re(()=>{var j;return c("team","create")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),O=re(()=>{var j;return c("team","edit")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),T=re(()=>{var j;return c("team","delete")||["admin"].includes(((j=t.value)==null?void 0:j.role)||"")}),L=re(()=>S.value||O.value||T.value),K=re(()=>{var j;return c("accounting","create")||c("accounting","edit")||["admin","manager"].includes(((j=t.value)==null?void 0:j.role)||"")}),z=re(()=>t.value?t.value.role==="admin"||t.value.role==="manager"&&t.value.department==="Marketing"||t.value.department==="Marketing":!1),F=re(()=>t.value?t.value.role==="admin"||t.value.role==="manager"&&t.value.department==="Ventas"||t.value.department==="Ventas":!1),W=async j=>{var Q,se;try{s.value=!0,o.value=null,console.log(" Attempting login with:",j.email);const D=await Ia.login(j);return D.success&&D.user&&D.token?(t.value=D.user,e.value=D.token,localStorage.setItem("token",D.token),localStorage.setItem("user",JSON.stringify(t.value)),console.log(" Login successful!"),console.log(" User:",(Q=D.user)==null?void 0:Q.name,"- Role:",(se=D.user)==null?void 0:se.role),{success:!0}):(console.log(" Login failed:",D.message),o.value=D.message||"Error al iniciar sesin",{success:!1,message:o.value})}catch(D){return console.log(" Login error:",D),o.value=D.message||"Error de conexin",{success:!1,message:o.value}}finally{s.value=!1}},Z=async()=>{try{e.value&&await Ia.logout()}catch(j){console.error("Error during logout:",j)}finally{t.value=null,e.value=null,localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}},le=async()=>{var se,D;console.log(" Checking auth...");const j=localStorage.getItem("token"),Q=localStorage.getItem("user");if(console.log(" Stored token:",!!j),console.log(" Stored user:",!!Q),!j||!Q)return console.log(" No stored credentials found"),!1;try{return e.value=j,t.value=JSON.parse(Q),console.log(" Auth restored from localStorage"),console.log(" User:",(se=t.value)==null?void 0:se.name,"- Role:",(D=t.value)==null?void 0:D.role),(await Ia.verifyToken()).success?(console.log(" Token verified successfully"),!0):(console.log(" Token verification failed"),await Z(),!1)}catch(H){return console.log(" Error restoring auth:",H),await Z(),!1}},J=async j=>{try{s.value=!0,o.value=null;const Q=await Ia.updateProfile(j);return Q.success&&t.value?(t.value={...t.value,...Q.user},localStorage.setItem("user",JSON.stringify(t.value)),{success:!0}):(o.value=Q.message||"Error al actualizar perfil",{success:!1,message:o.value})}catch(Q){return o.value=Q.message||"Error de conexin",{success:!1,message:o.value}}finally{s.value=!1}},Pe=re(()=>{if(!t.value)return[];const j=[{id:"dashboard",name:"Dashboard",icon:"fas fa-tachometer-alt",path:"/",canAccess:u.value}];return f.value&&j.push({id:"clients",name:"Clientes",icon:"fas fa-users",path:"/clients",canAccess:!0}),p.value&&j.push({id:"activities",name:"Actividades",icon:"fas fa-tasks",path:"/activities",canAccess:!0}),g.value&&j.push({id:"reports",name:"Reportes",icon:"fas fa-chart-bar",path:"/reports",canAccess:!0}),m.value&&j.push({id:"accounting",name:"Contabilidad",icon:"fas fa-calculator",path:"/accounting",canAccess:!0}),v.value&&j.push({id:"cases",name:"Casos",icon:"fas fa-folder",path:"/cases",canAccess:!0}),x.value&&j.push({id:"team",name:"Equipo",icon:"fas fa-users-cog",path:"/team",canAccess:!0}),j.filter(Q=>Q.canAccess)});return{user:t,token:e,isLoading:s,error:o,isAuthenticated:n,userRole:i,isAdmin:a,isManager:l,canViewDashboard:u,canViewClients:f,canViewActivities:p,canViewReports:g,canViewAccounting:m,canViewCases:v,canViewTeam:x,canCreateClients:_,canEditClients:k,canDeleteClients:C,canCreateActivities:P,canEditActivities:$,canDeleteActivities:R,canCreateCases:V,canEditCases:B,canDeleteCases:E,canCreateTeam:S,canEditTeam:O,canDeleteTeam:T,canManageTeam:L,canManageAccounting:K,canViewMarketingSection:z,canViewSalesSection:F,login:W,logout:Z,checkAuth:le,updateProfile:J,updateUserAvatar:j=>{t.value&&(t.value.avatar=j,localStorage.setItem("user",JSON.stringify(t.value)))},updateUserProfile:j=>{t.value&&(t.value={...t.value,...j},localStorage.setItem("user",JSON.stringify(t.value)))},getAvailableModules:Pe}}),xo=Object.create(null);xo.open="0";xo.close="1";xo.ping="2";xo.pong="3";xo.message="4";xo.upgrade="5";xo.noop="6";const cl=Object.create(null);Object.keys(xo).forEach(t=>{cl[xo[t]]=t});const uu={type:"error",data:"parser error"},Gb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Kb=typeof ArrayBuffer=="function",Yb=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,bf=({type:t,data:e},s,o)=>Gb&&e instanceof Blob?s?o(e):Xh(e,o):Kb&&(e instanceof ArrayBuffer||Yb(e))?s?o(e):Xh(new Blob([e]),o):o(xo[t]+(e||"")),Xh=(t,e)=>{const s=new FileReader;return s.onload=function(){const o=s.result.split(",")[1];e("b"+(o||""))},s.readAsDataURL(t)};function Qh(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let xd;function E5(t,e){if(Gb&&t.data instanceof Blob)return t.data.arrayBuffer().then(Qh).then(e);if(Kb&&(t.data instanceof ArrayBuffer||Yb(t.data)))return e(Qh(t.data));bf(t,!1,s=>{xd||(xd=new TextEncoder),e(xd.encode(s))})}const Zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ci=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Zh.length;t++)ci[Zh.charCodeAt(t)]=t;const S5=t=>{let e=t.length*.75,s=t.length,o,n=0,i,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),u=new Uint8Array(d);for(o=0;o<s;o+=4)i=ci[t.charCodeAt(o)],a=ci[t.charCodeAt(o+1)],l=ci[t.charCodeAt(o+2)],c=ci[t.charCodeAt(o+3)],u[n++]=i<<2|a>>4,u[n++]=(a&15)<<4|l>>2,u[n++]=(l&3)<<6|c&63;return d},A5=typeof ArrayBuffer=="function",vf=(t,e)=>{if(typeof t!="string")return{type:"message",data:Jb(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:T5(t.substring(1),e)}:cl[s]?t.length>1?{type:cl[s],data:t.substring(1)}:{type:cl[s]}:uu},T5=(t,e)=>{if(A5){const s=S5(t);return Jb(s,e)}else return{base64:!0,data:t}},Jb=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Xb="",P5=(t,e)=>{const s=t.length,o=new Array(s);let n=0;t.forEach((i,a)=>{bf(i,!1,l=>{o[a]=l,++n===s&&e(o.join(Xb))})})},M5=(t,e)=>{const s=t.split(Xb),o=[];for(let n=0;n<s.length;n++){const i=vf(s[n],e);if(o.push(i),i.type==="error")break}return o};function R5(){return new TransformStream({transform(t,e){E5(t,s=>{const o=s.length;let n;if(o<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,o);else if(o<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,o)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(o))}t.data&&typeof t.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(s)})}})}let wd;function La(t){return t.reduce((e,s)=>e+s.length,0)}function Ba(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let o=0;for(let n=0;n<e;n++)s[n]=t[0][o++],o===t[0].length&&(t.shift(),o=0);return t.length&&o<t[0].length&&(t[0]=t[0].slice(o)),s}function D5(t,e){wd||(wd=new TextDecoder);const s=[];let o=0,n=-1,i=!1;return new TransformStream({transform(a,l){for(s.push(a);;){if(o===0){if(La(s)<1)break;const c=Ba(s,1);i=(c[0]&128)===128,n=c[0]&127,n<126?o=3:n===126?o=1:o=2}else if(o===1){if(La(s)<2)break;const c=Ba(s,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),o=3}else if(o===2){if(La(s)<8)break;const c=Ba(s,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(uu);break}n=u*Math.pow(2,32)+d.getUint32(4),o=3}else{if(La(s)<n)break;const c=Ba(s,n);l.enqueue(vf(i?c:wd.decode(c),e)),o=0}if(n===0||n>t){l.enqueue(uu);break}}}})}const Qb=4;function It(t){if(t)return O5(t)}function O5(t){for(var e in It.prototype)t[e]=It.prototype[e];return t}It.prototype.on=It.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};It.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};It.prototype.off=It.prototype.removeListener=It.prototype.removeAllListeners=It.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,n=0;n<s.length;n++)if(o=s[n],o===e||o.fn===e){s.splice(n,1);break}return s.length===0&&delete this._callbacks["$"+t],this};It.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,n=s.length;o<n;++o)s[o].apply(this,e)}return this};It.prototype.emitReserved=It.prototype.emit;It.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};It.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Dc=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),Fs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),I5="arraybuffer";function Zb(t,...e){return e.reduce((s,o)=>(t.hasOwnProperty(o)&&(s[o]=t[o]),s),{})}const L5=Fs.setTimeout,B5=Fs.clearTimeout;function Oc(t,e){e.useNativeTimers?(t.setTimeoutFn=L5.bind(Fs),t.clearTimeoutFn=B5.bind(Fs)):(t.setTimeoutFn=Fs.setTimeout.bind(Fs),t.clearTimeoutFn=Fs.clearTimeout.bind(Fs))}const N5=1.33;function j5(t){return typeof t=="string"?F5(t):Math.ceil((t.byteLength||t.size)*N5)}function F5(t){let e=0,s=0;for(let o=0,n=t.length;o<n;o++)e=t.charCodeAt(o),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(o++,s+=4);return s}function ev(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function U5(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function z5(t){let e={},s=t.split("&");for(let o=0,n=s.length;o<n;o++){let i=s[o].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class V5 extends Error{constructor(e,s,o){super(e),this.description=s,this.context=o,this.type="TransportError"}}class yf extends It{constructor(e){super(),this.writable=!1,Oc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,o){return super.emitReserved("error",new V5(e,s,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=vf(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=U5(e);return s.length?"?"+s:""}}class H5 extends yf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||s()})),this.writable||(o++,this.once("drain",function(){--o||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};M5(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,P5(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=ev()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let tv=!1;try{tv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const q5=tv;function W5(){}class G5 extends H5{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let o=location.port;o||(o=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||o!==e.port}}doWrite(e,s){const o=this.request({method:"POST",data:e});o.on("success",s),o.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,o)=>{this.onError("xhr poll error",s,o)}),this.pollXhr=e}}let _r=class dl extends It{constructor(e,s,o){super(),this.createRequest=e,Oc(this,o),this._opts=o,this._method=o.method||"GET",this._uri=s,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var e;const s=Zb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(s);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&o.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var n;o.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=dl.requestsCount++,dl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=W5,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};_r.requestsCount=0;_r.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",e0);else if(typeof addEventListener=="function"){const t="onpagehide"in Fs?"pagehide":"unload";addEventListener(t,e0,!1)}}function e0(){for(let t in _r.requests)_r.requests.hasOwnProperty(t)&&_r.requests[t].abort()}const K5=function(){const t=sv({xdomain:!1});return t&&t.responseType!==null}();class Y5 extends G5{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=K5&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new _r(sv,this.uri(),e)}}function sv(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||q5))return new XMLHttpRequest}catch{}if(!e)try{return new Fs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ov=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class J5 extends yf{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,o=ov?{}:Zb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,o)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const o=e[s],n=s===e.length-1;bf(o,this.supportsBinary,i=>{try{this.doWrite(o,i)}catch{}n&&Dc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=ev()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const _d=Fs.WebSocket||Fs.MozWebSocket;class X5 extends J5{createSocket(e,s,o){return ov?new _d(e,s,o):s?new _d(e,s):new _d(e)}doWrite(e,s){this.ws.send(s)}}class Q5 extends yf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=D5(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=e.readable.pipeThrough(s).getReader(),n=R5();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const i=()=>{o.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const o=e[s],n=s===e.length-1;this._writer.write(o).then(()=>{n&&Dc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Z5={websocket:X5,webtransport:Q5,polling:Y5},e4=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function fu(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),o=t.indexOf("]");s!=-1&&o!=-1&&(t=t.substring(0,s)+t.substring(s,o).replace(/:/g,";")+t.substring(o,t.length));let n=e4.exec(t||""),i={},a=14;for(;a--;)i[t4[a]]=n[a]||"";return s!=-1&&o!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=s4(i,i.path),i.queryKey=o4(i,i.query),i}function s4(t,e){const s=/\/{2,9}/g,o=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&o.splice(0,1),e.slice(-1)=="/"&&o.splice(o.length-1,1),o}function o4(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,n,i){n&&(s[n]=i)}),s}const pu=typeof addEventListener=="function"&&typeof removeEventListener=="function",ul=[];pu&&addEventListener("offline",()=>{ul.forEach(t=>t())},!1);class gn extends It{constructor(e,s){if(super(),this.binaryType=I5,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const o=fu(e);s.hostname=o.host,s.secure=o.protocol==="https"||o.protocol==="wss",s.port=o.port,o.query&&(s.query=o.query)}else s.host&&(s.hostname=fu(s.host).host);Oc(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(o=>{const n=o.prototype.name;this.transports.push(n),this._transportsByName[n]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=z5(this.opts.query)),pu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ul.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=Qb,s.transport=e,this.id&&(s.sid=this.id);const o=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&gn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",gn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let o=0;o<this.writeBuffer.length;o++){const n=this.writeBuffer[o].data;if(n&&(s+=j5(n)),o>0&&s>this._maxPayload)return this.writeBuffer.slice(0,o);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Dc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,o){return this._sendPacket("message",e,s,o),this}send(e,s,o){return this._sendPacket("message",e,s,o),this}_sendPacket(e,s,o,n){if(typeof s=="function"&&(n=s,s=void 0),typeof o=="function"&&(n=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const i={type:e,data:s,options:o};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},o=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():e()}):this.upgrading?o():e()),this}_onError(e){if(gn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),pu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=ul.indexOf(this._offlineEventListener);o!==-1&&ul.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}gn.protocol=Qb;class n4 extends gn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),o=!1;gn.priorWebsocketSuccess=!1;const n=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",f=>{if(!o)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;gn.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(u(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=s.name,this.emitReserved("upgradeError",p)}}))};function i(){o||(o=!0,u(),s.close(),s=null)}const a=f=>{const p=new Error("probe error: "+f);p.transport=s.name,i(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function c(){a("socket closed")}function d(f){s&&f.name!==s.name&&i()}const u=()=>{s.removeListener("open",n),s.removeListener("error",a),s.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};s.once("open",n),s.once("error",a),s.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{o||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let o=0;o<e.length;o++)~this.transports.indexOf(e[o])&&s.push(e[o]);return s}}let r4=class extends n4{constructor(e,s={}){const o=typeof e=="object"?e:s;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(n=>Z5[n]).filter(n=>!!n)),super(e,o)}};function i4(t,e="",s){let o=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),o=fu(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const i=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+i+":"+o.port+e,o.href=o.protocol+"://"+i+(s&&s.port===o.port?"":":"+o.port),o}const a4=typeof ArrayBuffer=="function",l4=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,nv=Object.prototype.toString,c4=typeof Blob=="function"||typeof Blob<"u"&&nv.call(Blob)==="[object BlobConstructor]",d4=typeof File=="function"||typeof File<"u"&&nv.call(File)==="[object FileConstructor]";function xf(t){return a4&&(t instanceof ArrayBuffer||l4(t))||c4&&t instanceof Blob||d4&&t instanceof File}function fl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,o=t.length;s<o;s++)if(fl(t[s]))return!0;return!1}if(xf(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return fl(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&fl(t[s]))return!0;return!1}function u4(t){const e=[],s=t.data,o=t;return o.data=hu(s,e),o.attachments=e.length,{packet:o,buffers:e}}function hu(t,e){if(!t)return t;if(xf(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=hu(t[o],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=hu(t[o],e));return s}return t}function f4(t,e){return t.data=gu(t.data,e),delete t.attachments,t}function gu(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=gu(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=gu(t[s],e));return t}const p4=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],h4=5;var Ze;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ze||(Ze={}));class g4{constructor(e){this.replacer=e}encode(e){return(e.type===Ze.EVENT||e.type===Ze.ACK)&&fl(e)?this.encodeAsBinary({type:e.type===Ze.EVENT?Ze.BINARY_EVENT:Ze.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===Ze.BINARY_EVENT||e.type===Ze.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=u4(e),o=this.encodeAsString(s.packet),n=s.buffers;return n.unshift(o),n}}function t0(t){return Object.prototype.toString.call(t)==="[object Object]"}class wf extends It{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const o=s.type===Ze.BINARY_EVENT;o||s.type===Ze.BINARY_ACK?(s.type=o?Ze.EVENT:Ze.ACK,this.reconstructor=new m4(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(xf(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const o={type:Number(e.charAt(0))};if(Ze[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===Ze.BINARY_EVENT||o.type===Ze.BINARY_ACK){const i=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const a=e.substring(i,s);if(a!=Number(a)||e.charAt(s)!=="-")throw new Error("Illegal attachments");o.attachments=Number(a)}if(e.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););o.nsp=e.substring(i,s)}else o.nsp="/";const n=e.charAt(s+1);if(n!==""&&Number(n)==n){const i=s+1;for(;++s;){const a=e.charAt(s);if(a==null||Number(a)!=a){--s;break}if(s===e.length)break}o.id=Number(e.substring(i,s+1))}if(e.charAt(++s)){const i=this.tryParse(e.substr(s));if(wf.isPayloadValid(o.type,i))o.data=i;else throw new Error("invalid payload")}return o}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case Ze.CONNECT:return t0(s);case Ze.DISCONNECT:return s===void 0;case Ze.CONNECT_ERROR:return typeof s=="string"||t0(s);case Ze.EVENT:case Ze.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&p4.indexOf(s[0])===-1);case Ze.ACK:case Ze.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class m4{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=f4(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const b4=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wf,Encoder:g4,get PacketType(){return Ze},protocol:h4},Symbol.toStringTag,{value:"Module"}));function Ys(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const v4=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class rv extends It{constructor(e,s,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ys(e,"open",this.onopen.bind(this)),Ys(e,"packet",this.onpacket.bind(this)),Ys(e,"error",this.onerror.bind(this)),Ys(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var o,n,i;if(v4.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const a={type:Ze.EVENT,data:s};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const u=this.ids++,f=s.pop();this._registerAckCallback(u,f),a.id=u}const l=(n=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,s){var o;const n=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(n===void 0){this.acks[e]=s;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);s.call(this,new Error("operation has timed out"))},n),a=(...l)=>{this.io.clearTimeoutFn(i),s.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...s){return new Promise((o,n)=>{const i=(a,l)=>a?n(a):o(l);i.withError=!0,s.push(i),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...i)=>o!==this._queue[0]?void 0:(n!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(n)):(this._queue.shift(),s&&s(null,...i)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ze.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(o=>String(o.id)===e)){const o=this.acks[e];delete this.acks[e],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ze.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ze.EVENT:case Ze.BINARY_EVENT:this.onevent(e);break;case Ze.ACK:case Ze.BINARY_ACK:this.onack(e);break;case Ze.DISCONNECT:this.ondisconnect();break;case Ze.CONNECT_ERROR:this.destroy();const o=new Error(e.data.message);o.data=e.data.data,this.emitReserved("connect_error",o);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const o of s)o.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let o=!1;return function(...n){o||(o=!0,s.packet({type:Ze.ACK,id:e,data:n}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ze.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let o=0;o<s.length;o++)if(e===s[o])return s.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let o=0;o<s.length;o++)if(e===s[o])return s.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const o of s)o.apply(this,e.data)}}}function Ur(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ur.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+s:t-s}return Math.min(t,this.max)|0};Ur.prototype.reset=function(){this.attempts=0};Ur.prototype.setMin=function(t){this.ms=t};Ur.prototype.setMax=function(t){this.max=t};Ur.prototype.setJitter=function(t){this.jitter=t};class mu extends It{constructor(e,s){var o;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Oc(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((o=s.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new Ur({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const n=s.parser||b4;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new r4(this.uri,this.opts);const s=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const n=Ys(s,"open",function(){o.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=Ys(s,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),s.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ys(e,"ping",this.onping.bind(this)),Ys(e,"data",this.ondata.bind(this)),Ys(e,"error",this.onerror.bind(this)),Ys(e,"close",this.onclose.bind(this)),Ys(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){Dc(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let o=this.nsps[e];return o?this._autoConnect&&!o.active&&o.connect():(o=new rv(this,e,s),this.nsps[e]=o),o}_destroy(e){const s=Object.keys(this.nsps);for(const o of s)if(this.nsps[o].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let o=0;o<s.length;o++)this.engine.write(s[o],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},s);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const si={};function pl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=i4(t,e.path||"/socket.io"),o=s.source,n=s.id,i=s.path,a=si[n]&&i in si[n].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return l?c=new mu(o,e):(si[n]||(si[n]=new mu(o,e)),c=si[n]),s.query&&!e.query&&(e.query=s.queryKey),c.socket(s.path,e)}Object.assign(pl,{Manager:mu,Socket:rv,io:pl,connect:pl});class y4{constructor(){_e(this,"socket",null);_e(this,"baseUrl",et.BASE_URL)}connect(e,s){this.socket&&this.socket.disconnect();const o=this.baseUrl.replace("/api","");return this.socket=pl(o,{auth:{token:e},transports:["websocket","polling"]}),this.socket.on("connect",()=>{var n;console.log("Connected to chat server"),(n=this.socket)==null||n.emit("join_user_room",s)}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}async getChatRooms(){try{const e=localStorage.getItem("token"),s=await fetch(`${this.baseUrl}/chat/rooms`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Error al obtener salas de chat");return await s.json()}catch(e){throw console.error("Error getting chat rooms:",e),e}}async createChatRoom(e){try{const s=localStorage.getItem("token"),o=await fetch(`${this.baseUrl}/chat/rooms`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw new Error("Error al crear sala de chat");return await o.json()}catch(s){throw console.error("Error creating chat room:",s),s}}async getMessages(e,s=1,o=50){try{const n=localStorage.getItem("token"),i=await fetch(`${this.baseUrl}/chat/rooms/${e}/messages?page=${s}&limit=${o}`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Error al obtener mensajes");return await i.json()}catch(n){throw console.error("Error getting messages:",n),n}}async sendMessage(e,s,o){try{const n=localStorage.getItem("token"),i=new FormData;i.append("content",s.content),i.append("type",s.type||"text"),s.replyTo&&i.append("replyTo",s.replyTo),o&&o.forEach(l=>{i.append("files",l)});const a=await fetch(`${this.baseUrl}/chat/rooms/${e}/messages`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:i});if(!a.ok)throw new Error("Error al enviar mensaje");return await a.json()}catch(n){throw console.error("Error sending message:",n),n}}async markMessageAsRead(e){try{const s=localStorage.getItem("token");await fetch(`${this.baseUrl}/chat/messages/${e}/read`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})}catch(s){console.error("Error marking message as read:",s)}}async getUsers(){try{const e=localStorage.getItem("token"),s=await fetch(`${this.baseUrl}/chat/users`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Error al obtener usuarios");return await s.json()}catch(e){throw console.error("Error getting users:",e),e}}async deleteChatRoom(e){try{const s=localStorage.getItem("token");await fetch(`${this.baseUrl}/chat/rooms/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})}catch(s){throw console.error("Error deleting chat room:",s),s}}async editMessage(e,s){try{const o=localStorage.getItem("token"),n=await fetch(`${this.baseUrl}/chat/messages/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({content:s})});if(!n.ok)throw new Error("Error al editar mensaje");return await n.json()}catch(o){throw console.error("Error editing message:",o),o}}onNewMessage(e){this.socket&&this.socket.on("new_message",e)}onRoomCreated(e){this.socket&&this.socket.on("room_created",e)}onRoomDeleted(e){this.socket&&this.socket.on("room_deleted",e)}onMessageEdited(e){this.socket&&this.socket.on("message_edited",e)}onUserTyping(e){this.socket&&this.socket.on("user_typing",e)}onUserStopTyping(e){this.socket&&this.socket.on("user_stop_typing",e)}onPresenceUpdate(e){this.socket&&this.socket.on("presence_update",e)}joinRoom(e){this.socket&&this.socket.emit("join_room",e)}leaveRoom(e){this.socket&&this.socket.emit("leave_room",e)}startTyping(e,s,o){this.socket&&this.socket.emit("typing_start",{roomId:e,userId:s,userName:o})}stopTyping(e,s){this.socket&&this.socket.emit("typing_stop",{roomId:e,userId:s})}}const Ct=new y4,Ic=Gs("chat",()=>{const t=I([]),e=I({}),s=I(null),o=I([]),n=I({}),i=I(!1),a=I(!1),l=I(null),c=I(null),d=I(null),u=I([]),f=I({}),p=re(()=>s.value?e.value[s.value._id]||[]:[]),g=re(()=>{var Z;return((Z=xt().user)==null?void 0:Z._id)?Object.values(f.value).reduce((le,J)=>le+J,0):0}),m=re(()=>F=>n.value[F]||[]),v=async()=>{var le;const F=xt(),W=localStorage.getItem("token"),Z=(le=F.user)==null?void 0:le._id;if(!(!W||!Z))try{const J=Ct.connect(W,Z);J.on("connect",()=>{i.value=!0}),J.on("disconnect",()=>{i.value=!1}),x(),await Promise.all([_(),C()])}catch(J){console.error("Error initializing chat:",J)}},x=()=>{Ct.onNewMessage(F=>{var Pe,me;V(F);const Z=(Pe=xt().user)==null?void 0:Pe._id,le=F.sender._id===Z,J=((me=s.value)==null?void 0:me._id)===F.chatRoom;le||(J?Ct.markMessageAsRead(F._id):(f.value[F.chatRoom]=(f.value[F.chatRoom]||0)+1,K(),z(F)))}),Ct.onRoomCreated(F=>{t.value.push(F)}),Ct.onRoomDeleted(F=>{var W;t.value=t.value.filter(Z=>Z._id!==F),((W=s.value)==null?void 0:W._id)===F&&(s.value=null)}),Ct.onMessageEdited(F=>{const W=e.value[F.chatRoom];if(W){const Z=W.findIndex(le=>le._id===F._id);Z!==-1&&(W[Z]=F)}}),Ct.onUserTyping(F=>{const{userName:W,roomId:Z}=F;n.value[Z]||(n.value[Z]=[]),n.value[Z].includes(W)||n.value[Z].push(W)}),Ct.onUserStopTyping(F=>{var J;const{roomId:W}=F,le=(J=xt().user)==null?void 0:J.name;n.value[W]&&le&&(n.value[W]=n.value[W].filter(Pe=>Pe!==le))}),Ct.onPresenceUpdate(F=>{u.value=F})},_=async()=>{try{a.value=!0;const F=await Ct.getChatRooms();t.value=F,await Promise.all(F.map(W=>k(W._id)))}catch(F){console.error("Error loading chat rooms:",F)}finally{a.value=!1}},k=async(F,W=1)=>{try{const Z=await Ct.getMessages(F,W);e.value[F]||(e.value[F]=[]),W===1?e.value[F]=Z:e.value[F]=[...Z,...e.value[F]],L(F)}catch(Z){console.error("Error loading messages:",Z)}},C=async()=>{try{const F=await Ct.getUsers();o.value=F}catch(F){console.error("Error loading users:",F)}},P=async F=>{try{const W=await Ct.createChatRoom(F);return t.value.push(W),W}catch(W){throw console.error("Error creating chat room:",W),W}},$=async F=>{var le,J;s.value&&Ct.leaveRoom(s.value._id),s.value=F,Ct.joinRoom(F._id),e.value[F._id]||await k(F._id);const Z=(le=xt().user)==null?void 0:le._id;if(Z){const Pe=((J=e.value[F._id])==null?void 0:J.filter(me=>me.sender._id!==Z&&!me.readBy.some(Y=>Y.user===Z)))||[];for(const me of Pe)await Ct.markMessageAsRead(me._id);f.value[F._id]=0}},R=async(F,W,Z)=>{if(!(!s.value||!F.trim()))try{return await Ct.sendMessage(s.value._id,{content:F.trim(),replyTo:Z},W)}catch(le){throw console.error("Error sending message:",le),le}},V=F=>{var Pe,me;e.value[F.chatRoom]||(e.value[F.chatRoom]=[]),e.value[F.chatRoom].some(Y=>Y._id===F._id)||e.value[F.chatRoom].push(F);const Z=t.value.find(Y=>Y._id===F.chatRoom);Z&&(Z.lastActivity=F.createdAt,t.value=t.value.sort((Y,j)=>new Date(j.lastActivity).getTime()-new Date(Y.lastActivity).getTime()));const J=(Pe=xt().user)==null?void 0:Pe._id;F.sender._id!==J&&(l.value=Date.now(),c.value=F.chatRoom,d.value=F),F.sender._id!==J&&((me=s.value)==null?void 0:me._id)!==F.chatRoom&&(f.value[F.chatRoom]=(f.value[F.chatRoom]||0)+1)},B=async(F,W)=>{if(W.trim())try{const Z=await Ct.editMessage(F,W.trim());if(s.value){const le=e.value[s.value._id];if(le){const J=le.findIndex(Pe=>Pe._id===F);J!==-1&&(le[J]=Z)}}return Z}catch(Z){throw console.error("Error editing message:",Z),Z}},E=async F=>{var W;try{await Ct.deleteChatRoom(F),t.value=t.value.filter(Z=>Z._id!==F),((W=s.value)==null?void 0:W._id)===F&&(s.value=null)}catch(Z){throw console.error("Error deleting chat room:",Z),Z}},S=()=>{var F,W;if(s.value){const Z=xt(),le=(F=Z.user)==null?void 0:F._id,J=(W=Z.user)==null?void 0:W.name;le&&J&&Ct.startTyping(s.value._id,le,J)}},O=()=>{var F;if(s.value){const Z=(F=xt().user)==null?void 0:F._id;Z&&Ct.stopTyping(s.value._id,Z)}},T=()=>{Ct.disconnect(),i.value=!1},L=F=>{var Pe;const Z=(Pe=xt().user)==null?void 0:Pe._id;if(!Z)return;const J=(e.value[F]||[]).filter(me=>{var Y;return!me.sender||!me.sender._id?!1:me.sender._id!==Z&&!((Y=me.readBy)!=null&&Y.some(j=>j.user===Z))}).length;f.value[F]=J},K=()=>{try{const F=new(window.AudioContext||window.webkitAudioContext),W=F.createOscillator(),Z=F.createGain();W.type="sine",W.frequency.value=520,Z.gain.value=.05,W.connect(Z),Z.connect(F.destination);const le=F.currentTime;W.start(le),Z.gain.exponentialRampToValueAtTime(1e-4,le+.18),W.stop(le+.2)}catch{}},z=F=>{try{if(document.hasFocus()||!("Notification"in window))return;const W="Nuevo mensaje en chat",Z=`${F.sender.name}: ${F.content}`,le=()=>new Notification(W,{body:Z});Notification.permission==="granted"?le():Notification.permission!=="denied"&&Notification.requestPermission().then(J=>{J==="granted"&&le()})}catch{}};return{chatRooms:t,messages:e,currentRoom:s,users:o,typingUsers:n,isConnected:i,isLoading:a,lastIncomingAt:l,lastIncomingRoomId:c,lastIncomingMessage:d,onlineUsers:u,unreadByRoom:f,getCurrentMessages:p,getUnreadCount:g,getTypingInRoom:m,initializeChat:v,loadChatRooms:_,loadMessages:k,loadUsers:C,createChatRoom:P,selectRoom:$,sendMessage:R,editMessage:B,deleteChatRoom:E,startTyping:S,stopTyping:O,disconnect:T}}),s0=(t,e)=>{const s=t.replace(/\/?$/,""),o=e.replace(/^\.\//,"").replace(/^\//,"");return`${s}/${o}`},x4=t=>{if(!t)return"";const e=String(t).trim();if(/^(https?:)?\/\//i.test(e)||e.startsWith("data:"))return e;const s=String(et.BASE_URL).replace(/\/api\/?$/i,"");return/^[^\/]+\.(png|jpe?g|gif|webp|bmp|svg)$/i.test(e)?s0(s,`uploads/profiles/${e}`):s0(s,e)},_f=[{id:"ruby",name:"Rub",path:"/src/assets/avatars/ruby.svg",color:"#FF6B6B"},{id:"emerald",name:"Esmeralda",path:"/src/assets/avatars/emerald.svg",color:"#50C878"},{id:"sapphire",name:"Zafiro",path:"/src/assets/avatars/sapphire.svg",color:"#87CEEB"},{id:"diamond",name:"Diamante",path:"/src/assets/avatars/diamond.svg",color:"#E6E6FA"},{id:"amethyst",name:"Amatista",path:"/src/assets/avatars/amethyst.svg",color:"#DDA0DD"},{id:"topaz",name:"Topacio",path:"/src/assets/avatars/topaz.svg",color:"#FFD700"}],Lc=t=>_f.find(e=>e.id===t),Fl=()=>_f[0],w4=["title"],_4=["src","alt"],k4=["src","alt"],C4={key:4,class:"absolute inset-0 bg-black/50 flex items-center justify-center"},Si=Le({__name:"UserAvatar",props:{name:{},photo:{},avatar:{},size:{default:"md"},bordered:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},showStatus:{type:Boolean,default:!1},status:{default:"offline"},showOverlay:{type:Boolean,default:!1},bgGradient:{default:""},className:{default:""}},emits:["click"],setup(t,{emit:e}){const s=t,o=e,n=I(!1),i={xs:"w-6 h-6 rounded",sm:"w-8 h-8 rounded-lg",md:"w-10 h-10 rounded-lg",lg:"w-12 h-12 rounded-xl",xl:"w-16 h-16 rounded-xl","2xl":"w-20 h-20 rounded-2xl"},a={xs:"text-xs",sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg","2xl":"text-xl"},l={xs:"w-2 h-2",sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-3.5 h-3.5",xl:"w-4 h-4","2xl":"w-5 h-5"},c={online:"bg-green-500 border-gray-800",offline:"bg-gray-500 border-gray-800",busy:"bg-red-500 border-gray-800",away:"bg-yellow-500 border-gray-800"},d=I(!1),u=re(()=>{if(!s.name)return"?";const _=s.name.trim().split(" ");return _.length===1?_[0].substring(0,2).toUpperCase():_.slice(0,2).map(k=>k.charAt(0).toUpperCase()).join("")}),f=re(()=>!s.photo||d.value?"":x4(s.photo)),p=re(()=>s.avatar?Lc(s.avatar)||Fl():null),g=_=>{s.clickable&&o("click",_)},m=()=>{d.value=!0};Rt(()=>s.photo,()=>{d.value=!1});const v=_=>{const k=["from-purple-600 to-pink-600","from-blue-600 to-indigo-600","from-green-600 to-teal-600","from-yellow-600 to-orange-600","from-red-600 to-pink-600","from-indigo-600 to-purple-600","from-teal-600 to-cyan-600","from-orange-600 to-red-600"];let C=0;for(let $=0;$<_.length;$++)C=_.charCodeAt($)+((C<<5)-C);const P=Math.abs(C)%k.length;return`bg-gradient-to-br ${k[P]}`},x=re(()=>s.bgGradient||v(s.name));return(_,k)=>(b(),y("div",{class:de(["relative overflow-hidden flex items-center justify-center text-white font-semibold",i[_.size],_.bordered?"ring-2 ring-purple-500/50":"",_.clickable?"cursor-pointer hover:opacity-80 transition-opacity":"",_.className]),title:_.name,onClick:g},[p.value?(b(),y("img",{key:0,src:p.value.path,alt:p.value.name,class:"w-full h-full object-cover"},null,8,_4)):f.value?(b(),y("img",{key:1,src:f.value,alt:_.name,class:"w-full h-full object-cover",onError:m},null,40,k4)):(b(),y("div",{key:2,class:de(["w-full h-full flex items-center justify-center",_.bgGradient||x.value,a[_.size]])},w(u.value),3)),_.showStatus?(b(),y("div",{key:3,class:de(["absolute bottom-0 right-0 rounded-full border-2",c[_.status],l[_.size]])},null,2)):q("",!0),_.showOverlay&&n.value?(b(),y("div",C4,[...k[0]||(k[0]=[r("i",{class:"fas fa-camera text-white"},null,-1)])])):q("",!0)],10,w4))}});function $4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})])}function E4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function o0(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function iv(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})])}function S4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function kf(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function A4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function T4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function P4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function M4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})])}function bu(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function R4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function av(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function D4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}function O4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"})])}function Ul(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function I4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function L4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function zl(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function B4(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}function vu(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function qn(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function lv(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}function hl(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function mn(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function kr(t,e){return b(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const N4={key:0,class:"fixed bottom-4 right-4 z-50 max-w-[18rem] bg-dark-900/95 backdrop-blur-xl border border-white/10 rounded-lg shadow-xl overflow-hidden",role:"status","aria-live":"polite"},j4={class:"flex items-start gap-2.5"},F4={class:"relative w-8 h-8 rounded-md bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-white text-sm font-semibold"},U4={class:"min-w-0 flex-1"},z4={class:"flex items-center gap-1.5 mb-0.5"},V4=["title"],H4={class:"ml-auto text-[10px] text-gray-400 whitespace-nowrap"},q4={class:"text-[12px] text-purple-200 truncate"},W4={class:"mt-0.5 flex items-center gap-1.5 text-[12px] text-gray-200 min-w-0"},G4={class:"line-clamp-1 truncate"},K4=Le({__name:"NewMessageToast",setup(t){const e=Ic(),s=xt(),o=Ec(),n=I(!1),i=I(null),a=re(()=>e.lastIncomingMessage),l=re(()=>a.value&&e.chatRooms.find(m=>m._id===a.value.chatRoom)||null),c=re(()=>{var v;const m=l.value;if(!m)return"Chat";if(m.type==="direct"){const x=(v=s.user)==null?void 0:v._id,_=m.participants.find(k=>k._id!==x);return(_==null?void 0:_.name)||m.name||"Directo"}return m.name||"Chat"}),d=re(()=>{if(!a.value)return"text";const m=(a.value.attachments||[]).some(x=>{var _;return(_=x.mimetype)==null?void 0:_.startsWith("image/")}),v=(a.value.attachments||[]).length>0&&!m;return m?"image":v?"file":"text"}),u=re(()=>{if(!a.value)return"";const m=(a.value.content||"").trim(),v=a.value.attachments||[];return d.value==="image"?v.length>1?`Imgenes (${v.length})`:"Imagen":d.value==="file"?v.length>1?`Archivos adjuntos (${v.length})`:"Archivo adjunto":m||"Nuevo mensaje"}),f=re(()=>new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})),p=()=>{a.value&&(l.value&&e.selectRoom(l.value),o.push("/chat"),n.value=!1)},g=()=>{n.value=!1};return Rt(()=>e.lastIncomingAt,m=>{var _;if(!m||!a.value)return;location.pathname.includes("/chat")&&((_=e.currentRoom)==null?void 0:_._id)===a.value.chatRoom||(n.value=!0,i.value&&window.clearTimeout(i.value),i.value=window.setTimeout(()=>{n.value=!1},5e3))},{immediate:!0}),sr(()=>{i.value&&window.clearTimeout(i.value)}),(m,v)=>(b(),Ue(a2,{name:"slide-up"},{default:tt(()=>{var x,_;return[n.value&&a.value?(b(),y("div",N4,[r("button",{class:"absolute top-1.5 right-1.5 p-1 text-gray-400 hover:text-white",onClick:g,"aria-label":"Cerrar"},[fe(ye(kr),{class:"w-4 h-4"})]),r("div",{class:"p-3 cursor-pointer",onClick:p},[r("div",j4,[r("div",F4,[ne(w((((x=a.value.sender)==null?void 0:x.name)||"?").charAt(0).toUpperCase())+" ",1),v[0]||(v[0]=r("span",{class:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-pink-500 border-2 border-dark-900"},null,-1))]),r("div",U4,[r("div",z4,[fe(ye(iv),{class:"w-3.5 h-3.5 text-purple-300"}),r("p",{class:"text-[13px] text-white font-medium truncate",title:c.value},w(c.value),9,V4),r("span",H4,w(f.value),1)]),r("p",q4,"de "+w((_=a.value.sender)==null?void 0:_.name),1),r("div",W4,[d.value==="image"?(b(),Ue(ye(I4),{key:0,class:"w-4 h-4 text-gray-300 flex-shrink-0"})):d.value==="file"?(b(),Ue(ye(O4),{key:1,class:"w-4 h-4 text-gray-300 flex-shrink-0"})):q("",!0),r("span",G4,w(u.value),1)])])])])])):q("",!0)]}),_:1}))}}),Et=(t,e)=>{const s=t.__vccOpts||t;for(const[o,n]of e)s[o]=n;return s},Y4=Et(K4,[["__scopeId","data-v-d7b512c8"]]),J4={id:"app"},X4={key:1,class:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900"},Q4={class:"flex items-center justify-between h-16 px-4 border-b border-purple-500/20"},Z4={class:"flex items-center"},e3=["src"],t3={class:"px-4 py-4 border-b border-purple-500/20"},s3={class:"flex items-center"},o3={class:"ml-3"},n3={class:"text-white text-sm font-medium"},r3={class:"text-gray-400 text-xs"},i3={class:"mt-4 flex-1"},a3={class:"px-4 space-y-2"},l3={class:"lg:hidden fixed top-4 left-4 z-50"},c3={class:"lg:ml-64"},d3={class:"bg-gray-900/50 backdrop-blur-sm border-b border-purple-500/20 sticky top-0 z-40"},u3={class:"flex items-center justify-between px-6 py-4"},f3={class:"text-2xl font-bold text-white"},p3={class:"text-gray-400 text-sm"},h3={class:"flex items-center space-x-4"},g3={class:"relative"},m3={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] rounded-full w-5 h-5 flex items-center justify-center font-bold"},b3={class:"relative"},v3={key:0,class:"absolute right-0 top-full mt-2 w-72 sm:w-80 max-w-[calc(100vw-16px)] bg-gray-900/95 backdrop-blur-xl border border-purple-500/20 rounded-xl shadow-2xl z-50 overflow-hidden"},y3={class:"px-4 py-2 border-b border-gray-700"},x3=["title"],w3={class:"p-6"},_3=Le({__name:"App",setup(t){const e=pf(),s=Ec(),o=xt(),n=Ic(),i=I(!0),a=I(!1),l=I(!0),c=re(()=>o.getAvailableModules),d=re(()=>{const _=c.value.find(k=>k.path===e.path);return(_==null?void 0:_.id)||"dashboard"}),u=()=>{var _;return((_=c.value.find(k=>k.path===e.path))==null?void 0:_.name)||"Dashboard"},f=()=>({dashboard:"Resumen general del CRM",clients:"Gestin de clientes y contactos",activities:"Actividades y tareas del equipo",reports:"Estadsticas y anlisis de rendimiento",accounting:"Transacciones, pagos y gastos fijos",cases:"Documentos, incidencias y seguimientos",team:"Gestin de usuarios y equipo",profile:"Configuracin de perfil de usuario"})[d.value]||"Panel de control principal",p=_=>({admin:"Administrador",manager:"Gerente",employee:"Empleado",viewer:"Visualizador"})[_||""]||_,g=()=>{a.value=!1,s.push("/profile")},m=async()=>{a.value=!1,await o.logout()},v=()=>{l.value=window.innerWidth>=1024,l.value?i.value=!0:i.value=!1},x=_=>{a.value&&!_.target.closest(".relative")&&(a.value=!1)};return nt(async()=>{if(await o.checkAuth(),v(),window.addEventListener("resize",v),document.addEventListener("click",x),o.isAuthenticated)try{await n.initializeChat()}catch{}}),(_,k)=>{var $,R,V,B,E,S,O,T;const C=Wo("router-view"),P=Wo("router-link");return b(),y("div",J4,[!ye(o).isAuthenticated||_.$route.path==="/login"?(b(),Ue(C,{key:0})):(b(),y("div",X4,[r("div",{class:de(["fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-900/90 backdrop-blur-sm border-r border-purple-500/20 transform transition-transform duration-300 ease-in-out lg:translate-x-0",{"-translate-x-full":!i.value&&!l.value}])},[r("div",Q4,[r("div",Z4,[r("img",{src:ye(tu),alt:"GEMS Logo",class:"w-8 h-8 mr-3 rounded-lg shadow-lg",style:{"box-shadow":"0 4px 6px rgba(0, 0, 0, 0.1)"}},null,8,e3),k[4]||(k[4]=r("h1",{class:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"}," GEMS CRM ",-1))])]),r("div",t3,[r("div",s3,[fe(Si,{name:(($=ye(o).user)==null?void 0:$.name)||"Usuario",avatar:(R=ye(o).user)==null?void 0:R.avatar,size:"md",clickable:!0,onClick:k[0]||(k[0]=L=>ye(s).push("/profile"))},null,8,["name","avatar"]),r("div",o3,[r("p",n3,w((V=ye(o).user)==null?void 0:V.name),1),r("p",r3,w(p((B=ye(o).user)==null?void 0:B.role)),1)])])]),r("nav",i3,[r("div",a3,[(b(!0),y(ge,null,xe(c.value,L=>(b(),Ue(P,{key:L.id,to:L.path,class:de(["w-full flex items-center px-4 py-3 text-left rounded-lg transition-all duration-200 transform hover:scale-105",_.$route.path===L.path?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg shadow-purple-500/25":"text-gray-300 hover:bg-gray-800/50 hover:text-white"])},{default:tt(()=>[r("i",{class:de([L.icon,"w-5 h-5 mr-3"])},null,2),ne(" "+w(L.name),1)]),_:2},1032,["to","class"]))),128))])]),r("div",{class:"absolute bottom-0 left-0 right-0 p-2 border-t border-purple-500/20 flex justify-center"},[r("button",{onClick:m,class:"w-10 h-10 flex items-center justify-center text-gray-300 hover:bg-red-600/20 hover:text-red-400 rounded-lg transition-all duration-200"},[...k[5]||(k[5]=[r("i",{class:"fas fa-sign-out-alt w-4 h-4"},null,-1)])])])],2),r("div",l3,[r("button",{onClick:k[1]||(k[1]=L=>i.value=!i.value),class:"p-2 rounded-lg bg-gray-900/90 backdrop-blur-sm text-white border border-purple-500/20"},[...k[6]||(k[6]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])]),r("div",c3,[r("header",d3,[r("div",u3,[r("div",null,[r("h2",f3,w(u()),1),r("p",p3,w(f()),1)]),r("div",h3,[r("div",g3,[fe(P,{to:"/chat",class:"relative inline-flex items-center gap-2 px-3 py-2 rounded-lg text-purple-300 hover:text-white hover:bg-purple-600/20 transition-colors",title:"Ir al chat"},{default:tt(()=>[k[7]||(k[7]=r("i",{class:"fas fa-comments"},null,-1)),ye(n).getUnreadCount>0?(b(),y("span",m3,w(ye(n).getUnreadCount>99?"99+":ye(n).getUnreadCount),1)):q("",!0)]),_:1})]),r("div",b3,[r("button",{onClick:k[2]||(k[2]=L=>a.value=!a.value),class:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-800/50 transition-colors"},[fe(Si,{name:((E=ye(o).user)==null?void 0:E.name)||"Usuario",avatar:(S=ye(o).user)==null?void 0:S.avatar,size:"sm"},null,8,["name","avatar"]),k[8]||(k[8]=r("i",{class:"fas fa-chevron-down text-gray-400 text-sm"},null,-1))]),a.value?(b(),y("div",v3,[r("div",y3,[r("span",{class:"block text-sm text-gray-300 truncate",title:((O=ye(o).user)==null?void 0:O.email)||""},w((T=ye(o).user)==null?void 0:T.email),9,x3)]),r("div",{class:"py-1"},[r("button",{onClick:g,class:"w-full text-left px-4 py-2 text-gray-300 hover:bg-gray-800/60 transition-colors text-sm flex items-center"},[...k[9]||(k[9]=[r("i",{class:"fas fa-user mr-2"},null,-1),ne(" Mi Perfil ",-1)])]),k[11]||(k[11]=r("button",{class:"w-full text-left px-4 py-2 text-gray-300 hover:bg-gray-800/60 transition-colors text-sm flex items-center"},[r("i",{class:"fas fa-cog mr-2"}),ne(" Configuracin ")],-1)),k[12]||(k[12]=r("div",{class:"border-t border-gray-700 my-1"},null,-1)),r("button",{onClick:m,class:"w-full text-left px-4 py-2 text-red-400 hover:bg-red-900/20 transition-colors text-sm flex items-center"},[...k[10]||(k[10]=[r("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),ne(" Cerrar Sesin ",-1)])])])])):q("",!0)])])])]),r("main",w3,[fe(C)])]),i.value?(b(),y("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black/50",onClick:k[3]||(k[3]=L=>i.value=!1)})):q("",!0),fe(Y4)]))])}}});/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 *  2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var mo=function(){return mo=Object.assign||function(e){for(var s,o=1,n=arguments.length;o<n;o++){s=arguments[o];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},mo.apply(this,arguments)};var Qn;(function(t){var e=function(){function a(l,c,d,u){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<a.MIN_VERSION||l>a.MAX_VERSION)throw new RangeError("Version value out of range");if(u<-1||u>7)throw new RangeError("Mask value out of range");this.size=l*4+17;for(var f=[],p=0;p<this.size;p++)f.push(!1);for(var p=0;p<this.size;p++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();var g=this.addEccAndInterleave(d);if(this.drawCodewords(g),u==-1)for(var m=1e9,p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);var v=this.getPenaltyScore();v<m&&(u=p,m=v),this.applyMask(p)}n(0<=u&&u<=7),this.mask=u,this.applyMask(u),this.drawFormatBits(u),this.isFunction=[]}return a.encodeText=function(l,c){var d=t.QrSegment.makeSegments(l);return a.encodeSegments(d,c)},a.encodeBinary=function(l,c){var d=t.QrSegment.makeBytes(l);return a.encodeSegments([d],c)},a.encodeSegments=function(l,c,d,u,f,p){if(d===void 0&&(d=1),u===void 0&&(u=40),f===void 0&&(f=-1),p===void 0&&(p=!0),!(a.MIN_VERSION<=d&&d<=u&&u<=a.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");var g,m;for(g=d;;g++){var v=a.getNumDataCodewords(g,c)*8,x=i.getTotalBits(l,g);if(x<=v){m=x;break}if(g>=u)throw new RangeError("Data too long")}for(var _=0,k=[a.Ecc.MEDIUM,a.Ecc.QUARTILE,a.Ecc.HIGH];_<k.length;_++){var C=k[_];p&&m<=a.getNumDataCodewords(g,C)*8&&(c=C)}for(var P=[],$=0,R=l;$<R.length;$++){var V=R[$];s(V.mode.modeBits,4,P),s(V.numChars,V.mode.numCharCountBits(g),P);for(var B=0,E=V.getData();B<E.length;B++){var S=E[B];P.push(S)}}n(P.length==m);var O=a.getNumDataCodewords(g,c)*8;n(P.length<=O),s(0,Math.min(4,O-P.length),P),s(0,(8-P.length%8)%8,P),n(P.length%8==0);for(var T=236;P.length<O;T^=253)s(T,8,P);for(var L=[];L.length*8<P.length;)L.push(0);return P.forEach(function(K,z){return L[z>>>3]|=K<<7-(z&7)}),new a(g,c,L,f)},a.prototype.getModule=function(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]},a.prototype.getModules=function(){return this.modules},a.prototype.drawFunctionPatterns=function(){for(var l=0;l<this.size;l++)this.setFunctionModule(6,l,l%2==0),this.setFunctionModule(l,6,l%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var c=this.getAlignmentPatternPositions(),d=c.length,l=0;l<d;l++)for(var u=0;u<d;u++)l==0&&u==0||l==0&&u==d-1||l==d-1&&u==0||this.drawAlignmentPattern(c[l],c[u]);this.drawFormatBits(0),this.drawVersion()},a.prototype.drawFormatBits=function(l){for(var c=this.errorCorrectionLevel.formatBits<<3|l,d=c,u=0;u<10;u++)d=d<<1^(d>>>9)*1335;var f=(c<<10|d)^21522;n(f>>>15==0);for(var u=0;u<=5;u++)this.setFunctionModule(8,u,o(f,u));this.setFunctionModule(8,7,o(f,6)),this.setFunctionModule(8,8,o(f,7)),this.setFunctionModule(7,8,o(f,8));for(var u=9;u<15;u++)this.setFunctionModule(14-u,8,o(f,u));for(var u=0;u<8;u++)this.setFunctionModule(this.size-1-u,8,o(f,u));for(var u=8;u<15;u++)this.setFunctionModule(8,this.size-15+u,o(f,u));this.setFunctionModule(8,this.size-8,!0)},a.prototype.drawVersion=function(){if(!(this.version<7)){for(var l=this.version,c=0;c<12;c++)l=l<<1^(l>>>11)*7973;var d=this.version<<12|l;n(d>>>18==0);for(var c=0;c<18;c++){var u=o(d,c),f=this.size-11+c%3,p=Math.floor(c/3);this.setFunctionModule(f,p,u),this.setFunctionModule(p,f,u)}}},a.prototype.drawFinderPattern=function(l,c){for(var d=-4;d<=4;d++)for(var u=-4;u<=4;u++){var f=Math.max(Math.abs(u),Math.abs(d)),p=l+u,g=c+d;0<=p&&p<this.size&&0<=g&&g<this.size&&this.setFunctionModule(p,g,f!=2&&f!=4)}},a.prototype.drawAlignmentPattern=function(l,c){for(var d=-2;d<=2;d++)for(var u=-2;u<=2;u++)this.setFunctionModule(l+u,c+d,Math.max(Math.abs(u),Math.abs(d))!=1)},a.prototype.setFunctionModule=function(l,c,d){this.modules[c][l]=d,this.isFunction[c][l]=!0},a.prototype.addEccAndInterleave=function(l){var c=this.version,d=this.errorCorrectionLevel;if(l.length!=a.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");for(var u=a.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=a.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],p=Math.floor(a.getNumRawDataModules(c)/8),g=u-p%u,m=Math.floor(p/u),v=[],x=a.reedSolomonComputeDivisor(f),_=0,k=0;_<u;_++){var C=l.slice(k,k+m-f+(_<g?0:1));k+=C.length;var P=a.reedSolomonComputeRemainder(C,x);_<g&&C.push(0),v.push(C.concat(P))}for(var $=[],R=function(V){v.forEach(function(B,E){(V!=m-f||E>=g)&&$.push(B[V])})},_=0;_<v[0].length;_++)R(_);return n($.length==p),$},a.prototype.drawCodewords=function(l){if(l.length!=Math.floor(a.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var c=0,d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(var u=0;u<this.size;u++)for(var f=0;f<2;f++){var p=d-f,g=(d+1&2)==0,m=g?this.size-1-u:u;!this.isFunction[m][p]&&c<l.length*8&&(this.modules[m][p]=o(l[c>>>3],7-(c&7)),c++)}}n(c==l.length*8)},a.prototype.applyMask=function(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(var c=0;c<this.size;c++)for(var d=0;d<this.size;d++){var u=void 0;switch(l){case 0:u=(d+c)%2==0;break;case 1:u=c%2==0;break;case 2:u=d%3==0;break;case 3:u=(d+c)%3==0;break;case 4:u=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:u=d*c%2+d*c%3==0;break;case 6:u=(d*c%2+d*c%3)%2==0;break;case 7:u=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&u&&(this.modules[c][d]=!this.modules[c][d])}},a.prototype.getPenaltyScore=function(){for(var l=0,c=0;c<this.size;c++){for(var d=!1,u=0,f=[0,0,0,0,0,0,0],p=0;p<this.size;p++)this.modules[c][p]==d?(u++,u==5?l+=a.PENALTY_N1:u>5&&l++):(this.finderPenaltyAddHistory(u,f),d||(l+=this.finderPenaltyCountPatterns(f)*a.PENALTY_N3),d=this.modules[c][p],u=1);l+=this.finderPenaltyTerminateAndCount(d,u,f)*a.PENALTY_N3}for(var p=0;p<this.size;p++){for(var d=!1,g=0,f=[0,0,0,0,0,0,0],c=0;c<this.size;c++)this.modules[c][p]==d?(g++,g==5?l+=a.PENALTY_N1:g>5&&l++):(this.finderPenaltyAddHistory(g,f),d||(l+=this.finderPenaltyCountPatterns(f)*a.PENALTY_N3),d=this.modules[c][p],g=1);l+=this.finderPenaltyTerminateAndCount(d,g,f)*a.PENALTY_N3}for(var c=0;c<this.size-1;c++)for(var p=0;p<this.size-1;p++){var m=this.modules[c][p];m==this.modules[c][p+1]&&m==this.modules[c+1][p]&&m==this.modules[c+1][p+1]&&(l+=a.PENALTY_N2)}for(var v=0,x=0,_=this.modules;x<_.length;x++){var k=_[x];v=k.reduce(function($,R){return $+(R?1:0)},v)}var C=this.size*this.size,P=Math.ceil(Math.abs(v*20-C*10)/C)-1;return n(0<=P&&P<=9),l+=P*a.PENALTY_N4,n(0<=l&&l<=2568888),l},a.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var l=Math.floor(this.version/7)+2,c=Math.floor((this.version*8+l*3+5)/(l*4-4))*2,d=[6],u=this.size-7;d.length<l;u-=c)d.splice(1,0,u);return d},a.getNumRawDataModules=function(l){if(l<a.MIN_VERSION||l>a.MAX_VERSION)throw new RangeError("Version number out of range");var c=(16*l+128)*l+64;if(l>=2){var d=Math.floor(l/7)+2;c-=(25*d-10)*d-55,l>=7&&(c-=36)}return n(208<=c&&c<=29648),c},a.getNumDataCodewords=function(l,c){return Math.floor(a.getNumRawDataModules(l)/8)-a.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*a.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]},a.reedSolomonComputeDivisor=function(l){if(l<1||l>255)throw new RangeError("Degree out of range");for(var c=[],d=0;d<l-1;d++)c.push(0);c.push(1);for(var u=1,d=0;d<l;d++){for(var f=0;f<c.length;f++)c[f]=a.reedSolomonMultiply(c[f],u),f+1<c.length&&(c[f]^=c[f+1]);u=a.reedSolomonMultiply(u,2)}return c},a.reedSolomonComputeRemainder=function(l,c){for(var d=c.map(function(m){return 0}),u=function(m){var v=m^d.shift();d.push(0),c.forEach(function(x,_){return d[_]^=a.reedSolomonMultiply(x,v)})},f=0,p=l;f<p.length;f++){var g=p[f];u(g)}return d},a.reedSolomonMultiply=function(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");for(var d=0,u=7;u>=0;u--)d=d<<1^(d>>>7)*285,d^=(c>>>u&1)*l;return n(d>>>8==0),d},a.prototype.finderPenaltyCountPatterns=function(l){var c=l[1];n(c<=this.size*3);var d=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(d&&l[0]>=c*4&&l[6]>=c?1:0)+(d&&l[6]>=c*4&&l[0]>=c?1:0)},a.prototype.finderPenaltyTerminateAndCount=function(l,c,d){return l&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)},a.prototype.finderPenaltyAddHistory=function(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)},a.MIN_VERSION=1,a.MAX_VERSION=40,a.PENALTY_N1=3,a.PENALTY_N2=3,a.PENALTY_N3=40,a.PENALTY_N4=10,a.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],a.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a}();t.QrCode=e;function s(a,l,c){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(var d=l-1;d>=0;d--)c.push(a>>>d&1)}function o(a,l){return(a>>>l&1)!=0}function n(a){if(!a)throw new Error("Assertion error")}var i=function(){function a(l,c,d){if(this.mode=l,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}return a.makeBytes=function(l){for(var c=[],d=0,u=l;d<u.length;d++){var f=u[d];s(f,8,c)}return new a(a.Mode.BYTE,l.length,c)},a.makeNumeric=function(l){if(!a.isNumeric(l))throw new RangeError("String contains non-numeric characters");for(var c=[],d=0;d<l.length;){var u=Math.min(l.length-d,3);s(parseInt(l.substring(d,d+u),10),u*3+1,c),d+=u}return new a(a.Mode.NUMERIC,l.length,c)},a.makeAlphanumeric=function(l){if(!a.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");var c=[],d;for(d=0;d+2<=l.length;d+=2){var u=a.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d))*45;u+=a.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d+1)),s(u,11,c)}return d<l.length&&s(a.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d)),6,c),new a(a.Mode.ALPHANUMERIC,l.length,c)},a.makeSegments=function(l){return l==""?[]:a.isNumeric(l)?[a.makeNumeric(l)]:a.isAlphanumeric(l)?[a.makeAlphanumeric(l)]:[a.makeBytes(a.toUtf8ByteArray(l))]},a.makeEci=function(l){var c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)s(l,8,c);else if(l<16384)s(2,2,c),s(l,14,c);else if(l<1e6)s(6,3,c),s(l,21,c);else throw new RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,c)},a.isNumeric=function(l){return a.NUMERIC_REGEX.test(l)},a.isAlphanumeric=function(l){return a.ALPHANUMERIC_REGEX.test(l)},a.prototype.getData=function(){return this.bitData.slice()},a.getTotalBits=function(l,c){for(var d=0,u=0,f=l;u<f.length;u++){var p=f[u],g=p.mode.numCharCountBits(c);if(p.numChars>=1<<g)return 1/0;d+=4+g+p.bitData.length}return d},a.toUtf8ByteArray=function(l){l=encodeURI(l);for(var c=[],d=0;d<l.length;d++)l.charAt(d)!="%"?c.push(l.charCodeAt(d)):(c.push(parseInt(l.substring(d+1,d+3),16)),d+=2);return c},a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",a}();t.QrSegment=i})(Qn||(Qn={}));(function(t){(function(e){var s=function(){function o(n,i){this.ordinal=n,this.formatBits=i}return o.LOW=new o(0,1),o.MEDIUM=new o(1,0),o.QUARTILE=new o(2,3),o.HIGH=new o(3,2),o}();e.Ecc=s})(t.QrCode||(t.QrCode={}))})(Qn||(Qn={}));(function(t){(function(e){var s=function(){function o(n,i){this.modeBits=n,this.numBitsCharCount=i}return o.prototype.numCharCountBits=function(n){return this.numBitsCharCount[Math.floor((n+7)/17)]},o.NUMERIC=new o(1,[10,12,14]),o.ALPHANUMERIC=new o(2,[9,11,13]),o.BYTE=new o(4,[8,16,16]),o.KANJI=new o(8,[8,10,12]),o.ECI=new o(7,[0,0,0]),o}();e.Mode=s})(t.QrSegment||(t.QrSegment={}))})(Qn||(Qn={}));var br=Qn,Cf="L",$f={L:br.QrCode.Ecc.LOW,M:br.QrCode.Ecc.MEDIUM,Q:br.QrCode.Ecc.QUARTILE,H:br.QrCode.Ecc.HIGH},k3=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Ef(t){return t in $f}function cv(t,e){e===void 0&&(e=0);var s=[];return t.forEach(function(o,n){var i=null;o.forEach(function(a,l){if(!a&&i!==null){s.push("M".concat(i+e," ").concat(n+e,"h").concat(l-i,"v1H").concat(i+e,"z")),i=null;return}if(l===o.length-1){if(!a)return;i===null?s.push("M".concat(l+e,",").concat(n+e," h1v1H").concat(l+e,"z")):s.push("M".concat(i+e,",").concat(n+e," h").concat(l+1-i,"v1H").concat(i+e,"z"));return}a&&i===null&&(i=l)})}),s.join("")}function dv(t,e,s,o){var n=o.width,i=o.height,a=o.x,l=o.y,c=t.length+s*2,d=Math.floor(e*.1),u=c/e,f=(n||d)*u,p=(i||d)*u,g=a==null?t.length/2-f/2:a*u,m=l==null?t.length/2-p/2:l*u,v=null;if(o.excavate){var x=Math.floor(g),_=Math.floor(m),k=Math.ceil(f+g-x),C=Math.ceil(p+m-_);v={x,y:_,w:k,h:C}}return{x:g,y:m,h:p,w:f,excavation:v}}function uv(t,e){return t.slice().map(function(s,o){return o<e.y||o>=e.y+e.h?s:s.map(function(n,i){return i<e.x||i>=e.x+e.w?n:!1})})}var Sf={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:Cf,validator:function(t){return Ef(t)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(t){return["linear","radial"].indexOf(t)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},C3=mo(mo({},Sf),{renderAs:{type:String,required:!1,default:"canvas",validator:function(t){return["canvas","svg"].indexOf(t)>-1}}}),$3=Le({name:"QRCodeSvg",props:Sf,setup:function(t){var e=I(0),s=I(""),o,n=function(){var a=t.value,l=t.level,c=t.margin,d=c>>>0,u=Ef(l)?l:Cf,f=br.QrCode.encodeText(a,$f[u]).getModules();if(e.value=f.length+d*2,t.imageSettings.src){var p=dv(f,t.size,d,t.imageSettings);o={x:p.x+d,y:p.y+d,width:p.w,height:p.h},p.excavation&&(f=uv(f,p.excavation))}s.value=cv(f,d)},i=function(){if(!t.gradient)return null;var a=t.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return Nt(t.gradientType==="linear"?"linearGradient":"radialGradient",mo({id:"qr-gradient"},a),[Nt("stop",{offset:"0%",style:{stopColor:t.gradientStartColor}}),Nt("stop",{offset:"100%",style:{stopColor:t.gradientEndColor}})])};return n(),of(n),function(){return Nt("svg",{width:t.size,height:t.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(e.value," ").concat(e.value)},[Nt("defs",{},[i()]),Nt("rect",{width:"100%",height:"100%",fill:t.background}),Nt("path",{fill:t.gradient?"url(#qr-gradient)":t.foreground,d:s.value}),t.imageSettings.src&&Nt("image",mo({href:t.imageSettings.src},o))])}}}),E3=Le({name:"QRCodeCanvas",props:Sf,setup:function(t,e){var s=I(null),o=I(null),n=function(){var a=t.value,l=t.level,c=t.size,d=t.margin,u=t.background,f=t.foreground,p=t.gradient,g=t.gradientType,m=t.gradientStartColor,v=t.gradientEndColor,x=d>>>0,_=Ef(l)?l:Cf,k=s.value;if(k){var C=k.getContext("2d");if(C){var P=br.QrCode.encodeText(a,$f[_]).getModules(),$=P.length+x*2,R=o.value,V={x:0,y:0,width:0,height:0},B=t.imageSettings.src&&R!=null&&R.naturalWidth!==0&&R.naturalHeight!==0;if(B){var E=dv(P,t.size,x,t.imageSettings);V={x:E.x+x,y:E.y+x,width:E.w,height:E.h},E.excavation&&(P=uv(P,E.excavation))}var S=window.devicePixelRatio||1,O=c/$*S;if(k.height=k.width=c*S,C.scale(O,O),C.fillStyle=u,C.fillRect(0,0,$,$),p){var T=void 0;g==="linear"?T=C.createLinearGradient(0,0,$,$):T=C.createRadialGradient($/2,$/2,0,$/2,$/2,$/2),T.addColorStop(0,m),T.addColorStop(1,v),C.fillStyle=T}else C.fillStyle=f;k3?C.fill(new Path2D(cv(P,x))):P.forEach(function(L,K){L.forEach(function(z,F){z&&C.fillRect(F+x,K+x,1,1)})}),B&&C.drawImage(R,V.x,V.y,V.width,V.height)}}};nt(n),of(n);var i=e.attrs.style;return function(){return Nt(ge,[Nt("canvas",mo(mo({},e.attrs),{ref:s,style:mo(mo({},i),{width:"".concat(t.size,"px"),height:"".concat(t.size,"px")})})),t.imageSettings.src&&Nt("img",{ref:o,src:t.imageSettings.src,style:{display:"none"},onLoad:n})])}}}),S3=Le({name:"Qrcode",render:function(){var t=this.$props,e=t.renderAs,s=t.value,o=t.size,n=t.margin,i=t.level,a=t.background,l=t.foreground,c=t.imageSettings,d=t.gradient,u=t.gradientType,f=t.gradientStartColor,p=t.gradientEndColor;return Nt(e==="svg"?$3:E3,{value:s,size:o,margin:n,level:i,background:a,foreground:l,imageSettings:c,gradient:d,gradientType:u,gradientStartColor:f,gradientEndColor:p})},props:C3});const A3={name:"WppVinculacion",components:{QrcodeVue:S3},data(){return{qr:null,ready:!1,loading:!0,errorMsg:""}},methods:{async fetchQR(){this.loading=!0,this.qr=null,this.ready=!1,this.errorMsg="";try{const e=await(await fetch("https://gems-crm-backend.onrender.com/api/wpp-qr")).json();e.qr?(this.qr=e.qr,this.ready=!1):e.status==="ready"?(this.qr=null,this.ready=!0):(this.qr=null,this.ready=!1,this.errorMsg=e.error||"No se pudo obtener el QR.")}catch(t){this.qr=null,this.ready=!1,this.errorMsg=t.message||"Error de conexin."}this.loading=!1},async resetSession(){this.loading=!0,this.errorMsg="";try{const e=await(await fetch("https://gems-crm-backend.onrender.com/api/wpp-reset",{method:"POST"})).json();e.reset?(this.qr=null,this.ready=!1,await this.fetchQR()):e.error&&(this.errorMsg=e.error)}catch(t){this.errorMsg=t.message||"Error al resetear sesin."}this.loading=!1},async pollStatus(){try{const e=await(await fetch("https://gems-crm-backend.onrender.com/api/wpp-status")).json();this.ready=!!e.ready,e.ready||await this.fetchQR()}catch{}}},mounted(){this.fetchQR(),this.statusInterval=setInterval(this.pollStatus,1e4)},beforeDestroy(){this.statusInterval&&clearInterval(this.statusInterval)}},T3={class:"wpp-vinculacion"},P3={key:0,class:"estado"},M3={key:1},R3={key:1,class:"estado estado-error",style:{"margin-top":"16px"}},D3={key:2,class:"estado estado-listo"},O3={key:0,class:"estado estado-error",style:{"margin-top":"16px"}},I3={key:3,class:"estado estado-error"},L3={key:0,class:"estado estado-error",style:{"margin-top":"16px"}};function B3(t,e,s,o,n,i){const a=Wo("qrcode-vue");return b(),y("div",T3,[e[11]||(e[11]=r("h2",null,"Vincular WhatsApp Business",-1)),n.loading?(b(),y("div",P3,"Cargando QR...")):n.qr?(b(),y("div",M3,[e[5]||(e[5]=r("p",null,"Escanea este cdigo QR con tu WhatsApp Business para vincular el dispositivo:",-1)),n.qr?(b(),Ue(a,{key:0,value:n.qr,size:300,class:"qr-img",style:{display:"block",margin:"auto"}},null,8,["value"])):q("",!0),r("button",{onClick:e[0]||(e[0]=(...l)=>i.fetchQR&&i.fetchQR(...l)),class:"btn"},"Refrescar QR"),r("button",{onClick:e[1]||(e[1]=(...l)=>i.resetSession&&i.resetSession(...l)),class:"btn",style:{background:"#e74c3c","margin-left":"8px"}},"Resetear sesin"),n.errorMsg?(b(),y("div",R3,w(n.errorMsg),1)):q("",!0)])):n.ready?(b(),y("div",D3,[e[6]||(e[6]=r("span",{class:"icon-check"},"",-1)),e[7]||(e[7]=ne(" Dispositivo vinculado y listo para enviar notificaciones.",-1)),e[8]||(e[8]=r("br",null,null,-1)),r("button",{onClick:e[2]||(e[2]=(...l)=>i.resetSession&&i.resetSession(...l)),class:"btn",style:{background:"#e74c3c","margin-top":"16px"}},"Resetear sesin"),n.errorMsg?(b(),y("div",O3,w(n.errorMsg),1)):q("",!0)])):(b(),y("div",I3,[e[9]||(e[9]=r("span",{class:"icon-error"},"",-1)),e[10]||(e[10]=ne(" No se pudo obtener el QR. Intenta de nuevo. ",-1)),r("button",{onClick:e[3]||(e[3]=(...l)=>i.fetchQR&&i.fetchQR(...l)),class:"btn"},"Reintentar"),r("button",{onClick:e[4]||(e[4]=(...l)=>i.resetSession&&i.resetSession(...l)),class:"btn",style:{background:"#e74c3c","margin-left":"8px"}},"Resetear sesin"),n.errorMsg?(b(),y("div",L3,w(n.errorMsg),1)):q("",!0)]))])}const N3=Et(A3,[["render",B3],["__scopeId","data-v-cada2654"]]),zt=et.BASE_URL,fv=Gs("clients",{state:()=>({clients:[],loading:!1,error:null}),actions:{async fetchClients(){this.loading=!0;try{const t=await Ae.get(`${zt}/clients`);this.clients=t.data,this.error=null}catch(t){this.error=t.message||"Error fetching clients"}finally{this.loading=!1}},async createClient(t){this.loading=!0;try{const e=await Ae.post(`${zt}/clients`,t);return this.clients.push(e.data),this.error=null,e.data}catch(e){throw this.error=e.message||"Error creating client",e}finally{this.loading=!1}}}}),pv=Gs("activities",{state:()=>({activities:[],loading:!1,error:null}),actions:{async fetchActivities(){this.loading=!0;try{const t=await Ae.get(`${zt}/activities`);this.activities=t.data.map(e=>({_id:e._id,title:e.title,description:e.description,date:e.date,status:e.status,clientId:e.clientId,createdAt:e.createdAt})),this.error=null}catch(t){this.error=t.message||"Error fetching activities"}finally{this.loading=!1}},async createActivity(t){this.loading=!0;try{const e=await Ae.post(`${zt}/activities`,t);return this.activities.push(e.data),this.error=null,e.data}catch(e){throw this.error=e.message||"Error creating activity",e}finally{this.loading=!1}}}}),hv=Gs("payments",{state:()=>({payments:[],summary:{ingresos:0,egresos:0,balance:0,gastos_fijos_mensuales:0},loading:!1,error:null}),getters:{totalRevenue:t=>t.summary.ingresos,totalExpenses:t=>t.summary.egresos,cashFlow:t=>t.summary.balance,fixedExpenses:t=>t.summary.gastos_fijos_mensuales,pendingPayments:t=>t.payments.filter(e=>e.status==="pending")},actions:{async fetchPayments(){this.loading=!0;try{const t=await Ae.get(`${zt}/accounting/transactions`);this.payments=t.data.map(e=>({_id:e._id,amount:e.monto,dueDate:e.proximo_pago||e.fecha,status:e.estado_pago==="pendiente"?"pending":e.estado_pago==="pagado"?"paid":"overdue",concepto:e.concepto,tipo:e.tipo,fecha:e.fecha,metodo:e.metodo})),this.error=null}catch(t){this.error=t.message||"Error fetching payments"}finally{this.loading=!1}},async fetchSummary(){this.loading=!0;try{const t=await Ae.get(`${zt}/accounting/summary`);this.summary=t.data,this.error=null}catch(t){this.error=t.message||"Error fetching summary"}finally{this.loading=!1}},async createPayment(t){this.loading=!0;try{const e=await Ae.post(`${zt}/accounting/transactions`,t);return this.payments.push(e.data),this.error=null,e.data}catch(e){throw this.error=e.message||"Error creating payment",e}finally{this.loading=!1}}}}),gv=Gs("issues",{state:()=>({issues:[],loading:!1,error:null}),actions:{async fetchIssues(){var t;this.loading=!0;try{const e=await Ae.get(`${zt}/cases`);this.issues=((t=e.data.cases)==null?void 0:t.map(s=>({_id:s._id,title:s.titulo,description:s.descripcion,status:s.estado==="abierto"?"open":s.estado==="en_progreso"?"in_progress":s.estado==="resuelto"?"resolved":"closed",priority:s.prioridad,type:s.tipo,createdAt:s.createdAt,updatedAt:s.updatedAt})))||[],this.error=null}catch(e){this.error=e.message||"Error fetching issues"}finally{this.loading=!1}},async createIssue(t){this.loading=!0;try{const e=await Ae.post(`${zt}/issues`,t);return this.issues.push(e.data),this.error=null,e.data}catch(e){throw this.error=e.message||"Error creating issue",e}finally{this.loading=!1}},async updateIssue(t,e){this.loading=!0;try{const s=await Ae.put(`${zt}/issues/${t}`,e),o=this.issues.findIndex(n=>n._id===t);return o!==-1&&(this.issues[o]=s.data),this.error=null,s.data}catch(s){throw this.error=s.message||"Error updating issue",s}finally{this.loading=!1}},async deleteIssue(t){this.loading=!0;try{await Ae.delete(`${zt}/issues/${t}`),this.issues=this.issues.filter(e=>e._id!==t),this.error=null}catch(e){throw this.error=e.message||"Error deleting issue",e}finally{this.loading=!1}}}}),Af=Gs("team",{state:()=>({members:[],loading:!1,error:null}),actions:{async fetchTeam(){var t,e;this.loading=!0;try{console.log(" Fetching team data..."),console.log(" Token:",localStorage.getItem("token")?"Present":"Missing");const s=await Ae.get(`${zt}/team`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(" Team response:",s.data),this.members=s.data.success?s.data.data:[],this.error=null}catch(s){console.error(" Error fetching team:",s.response||s),this.error=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Error fetching team",console.error("Error fetching team:",s)}finally{this.loading=!1}},async createMember(t){var e,s;this.loading=!0;try{const o=await Ae.post(`${zt}/team`,t,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.data.success)return this.members.push(o.data.data),this.error=null,o.data.data;throw new Error(o.data.message||"Error creating team member")}catch(o){throw this.error=((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||o.message||"Error creating team member",console.error("Error creating team member:",o),o}finally{this.loading=!1}},async updateMember(t,e){var s,o;this.loading=!0;try{const n=await Ae.put(`${zt}/team/${t}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(n.data.success){const i=this.members.findIndex(a=>a._id===t);return i!==-1&&(this.members[i]=n.data.data),this.error=null,n.data.data}else throw new Error(n.data.message||"Error updating team member")}catch(n){throw this.error=((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||n.message||"Error updating team member",console.error("Error updating team member:",n),n}finally{this.loading=!1}},async deleteMember(t){var e,s;this.loading=!0;try{const o=await Ae.delete(`${zt}/team/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.data.success){const n=this.members.findIndex(i=>i._id===t);n!==-1&&(this.members[n]={...this.members[n],isActive:!1}),this.error=null}else throw new Error(o.data.message||"Error deleting team member")}catch(o){throw this.error=((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||o.message||"Error deleting team member",console.error("Error deleting team member:",o),o}finally{this.loading=!1}},async activateMember(t){var e,s;this.loading=!0;try{const o=await Ae.put(`${zt}/team/${t}/activate`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.data.success){const n=this.members.findIndex(i=>i._id===t);return n!==-1&&(this.members[n]={...this.members[n],isActive:!0}),this.error=null,o.data.data}else throw new Error(o.data.message||"Error activating team member")}catch(o){throw this.error=((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||o.message||"Error activating team member",console.error("Error activating team member:",o),o}finally{this.loading=!1}}}}),j3=Gs("orgchart",{state:()=>({chart:{nodes:[]},loading:!1,error:null}),actions:{async fetchChart(){var t,e;this.loading=!0;try{const s=await Ae.get(`${zt}/team/orgchart`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s.data.success&&(this.chart=s.data.data),this.error=null}catch(s){this.error=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||s.message}finally{this.loading=!1}},async saveChart(t){var e,s;this.loading=!0;try{const o=await Ae.put(`${zt}/team/orgchart`,t,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});return o.data.success&&(this.chart=o.data.data),this.error=null,o.data}catch(o){throw this.error=((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||o.message,o}finally{this.loading=!1}}}}),F3={key:0},U3={key:1,class:"flex items-center justify-center min-h-[200px]"},z3={class:"text-center"},Ut=Le({__name:"PermissionGuard",props:{roles:{default:()=>[]},permissions:{default:()=>[]},requireAll:{type:Boolean,default:!1},fallback:{type:Boolean,default:!0}},setup(t){const e=t,s=xt(),o=re(()=>{if(!s.isAuthenticated||!s.user)return!1;const n=s.user.role;if(e.roles&&e.roles.length>0&&!e.roles.includes(n))return!1;if(e.permissions&&Array.isArray(e.permissions)&&e.permissions.length>0){const i=e.permissions.map(a=>{switch(a){case"view-dashboard":return s.canViewDashboard;case"view-clients":return s.canViewClients;case"view-activities":return s.canViewActivities;case"view-reports":return s.canViewReports;case"view-accounting":return s.canViewAccounting;case"view-cases":return s.canViewCases;case"view-team":return s.canViewTeam;case"create-clients":return s.canCreateClients;case"edit-clients":return s.canEditClients;case"delete-clients":return s.canDeleteClients;case"create-activities":return s.canCreateActivities;case"edit-activities":return s.canEditActivities;case"delete-activities":return s.canDeleteActivities;case"create-cases":return s.canCreateCases;case"edit-cases":return s.canEditCases;case"delete-cases":return s.canDeleteCases;case"create-team":return s.canCreateTeam;case"edit-team":return s.canEditTeam;case"delete-team":return s.canDeleteTeam;case"manage-team":return s.canManageTeam;case"manage-accounting":return s.canManageAccounting;case"view-marketing":return s.canViewMarketingSection;case"view-sales":return s.canViewSalesSection;default:return!1}});return e.requireAll?i.every(Boolean):i.some(Boolean)}return!0});return(n,i)=>{const a=Wo("router-link");return o.value?(b(),y("div",F3,[fw(n.$slots,"default")])):n.fallback?(b(),y("div",U3,[r("div",z3,[i[1]||(i[1]=r("div",{class:"w-12 h-12 mx-auto mb-4 bg-red-100/20 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-ban text-xl text-red-400"})],-1)),i[2]||(i[2]=r("h3",{class:"text-lg font-semibold text-white mb-2"},"Acceso Denegado",-1)),i[3]||(i[3]=r("p",{class:"text-gray-400 text-sm mb-4"},"No tienes permisos para acceder a esta seccin.",-1)),fe(a,{to:"/",class:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200"},{default:tt(()=>[...i[0]||(i[0]=[r("i",{class:"fas fa-home mr-1 text-sm"},null,-1),ne(" Volver al Dashboard ",-1)])]),_:1})])])):q("",!0)}}}),V3={class:"bg-gray-900/40 backdrop-blur-xl rounded-2xl shadow-2xl p-6 border border-purple-500/20 animate-fade-in animation-delay-1800"},H3={class:"flex items-center justify-between mb-4"},q3=["disabled","title"],W3={key:0,class:"flex items-center justify-center py-8"},G3={key:1,class:"space-y-4"},K3={class:"bg-gradient-to-r from-purple-500/10 to-blue-500/10 rounded-lg p-4 border border-purple-500/20"},Y3={class:"flex items-start gap-3"},J3={class:"text-gray-300 text-sm leading-relaxed"},X3={class:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-lg p-4 border border-green-500/20"},Q3={class:"flex items-start gap-3"},Z3={key:0},eC={class:"space-y-1"},tC={key:1,class:"text-gray-400 text-sm italic"},sC={class:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 rounded-lg p-4 border border-blue-500/20"},oC={class:"flex items-start gap-3"},nC={key:0},rC={class:"space-y-1"},iC={key:1,class:"text-gray-400 text-sm italic"},aC={key:2,class:"text-center py-8"},lC={class:"text-red-400 text-sm"},cC={key:3,class:"text-center py-8 text-gray-400"},n0="crm_ai_insights_cache",dC=4*60*60*1e3,uC=Le({__name:"AIInsightsWidget",setup(t){fv(),pv(),hv(),gv(),Af();const e=I(!1),s=I(null),o=I(""),n={summary:"Tu negocio est en constante evolucin, transformando oportunidades en resultados tangibles.",recommendations:["Optimiza el seguimiento de actividades pendientes para aumentar la productividad del equipo","Implementa estrategias de retencin basadas en el anlisis de clientes recurrentes","Explora oportunidades de cross-selling con tus clientes ms valiosos"],trends:["Crecimiento sostenido en la adquisicin de nuevos clientes","Mejora en la resolucin eficiente de casos e incidencias","Tendencia positiva en la colaboracin y comunicacin del equipo"]},i=()=>{try{const l=localStorage.getItem(n0);if(l){const c=JSON.parse(l);if(Date.now()-c.timestamp<dC)return c.data;localStorage.removeItem(n0)}}catch(l){console.warn("Error reading insights cache:",l)}return null},a=async(l=!1)=>{l||(e.value=!0),o.value="";{o.value="API key de OpenAI no configurada",console.error("OpenAI API key not found in environment variables"),l||(e.value=!1);return}};return nt(()=>{const l=i();l?s.value=l:s.value=n,a(!0)}),(l,c)=>(b(),y("div",V3,[r("div",H3,[c[2]||(c[2]=r("h3",{class:"text-xl font-semibold text-white flex items-center"},[r("i",{class:"fas fa-brain text-purple-400 mr-2"}),ne(" Insights IA "),r("span",{class:"ml-2 text-xs bg-purple-500/20 text-purple-300 px-2 py-1 rounded-full border border-purple-500/30"}," Creativo ")],-1)),r("button",{onClick:c[0]||(c[0]=d=>a(!1)),disabled:e.value,class:"p-2 bg-purple-500/20 hover:bg-purple-500/30 rounded-lg transition-colors duration-200 disabled:opacity-50",title:e.value?"Generando insights...":"Actualizar insights"},[r("i",{class:de([e.value?"fas fa-spinner fa-spin":"fas fa-sync-alt","text-purple-400"])},null,2)],8,q3)]),e.value?(b(),y("div",W3,[...c[3]||(c[3]=[Es('<div class="text-center" data-v-9990b558><div class="relative mb-4" data-v-9990b558><i class="fas fa-brain text-purple-400 text-4xl animate-bounce" data-v-9990b558></i><div class="absolute inset-0 bg-purple-400/20 rounded-full blur-lg animate-pulse" data-v-9990b558></div></div><p class="text-gray-400 mb-2" data-v-9990b558>Analizando datos con IA creativa...</p><div class="flex justify-center space-x-1" data-v-9990b558><div class="w-2 h-2 bg-purple-400 rounded-full animate-pulse" data-v-9990b558></div><div class="w-2 h-2 bg-purple-400 rounded-full animate-pulse animation-delay-300" data-v-9990b558></div><div class="w-2 h-2 bg-purple-400 rounded-full animate-pulse animation-delay-600" data-v-9990b558></div></div></div>',1)])])):s.value?(b(),y("div",G3,[r("div",K3,[r("div",Y3,[c[5]||(c[5]=r("i",{class:"fas fa-lightbulb text-yellow-400 mt-1"},null,-1)),r("div",null,[c[4]||(c[4]=r("h4",{class:"text-white font-medium mb-1"},"Visin Creativa",-1)),r("p",J3,w(s.value.summary),1)])])]),r("div",X3,[r("div",Q3,[c[8]||(c[8]=r("i",{class:"fas fa-bullseye text-green-400 mt-1"},null,-1)),r("div",null,[c[7]||(c[7]=r("h4",{class:"text-white font-medium mb-2"},"Recomendaciones Innovadoras",-1)),s.value.recommendations&&s.value.recommendations.length>0?(b(),y("div",Z3,[r("ul",eC,[(b(!0),y(ge,null,xe(s.value.recommendations,d=>(b(),y("li",{key:d,class:"text-gray-300 text-sm flex items-start"},[c[6]||(c[6]=r("span",{class:"text-green-400 mr-2"},"",-1)),ne(" "+w(d),1)]))),128))])])):(b(),y("div",tC," Generando recomendaciones personalizadas... "))])])]),r("div",sC,[r("div",oC,[c[11]||(c[11]=r("i",{class:"fas fa-chart-line text-blue-400 mt-1"},null,-1)),r("div",null,[c[10]||(c[10]=r("h4",{class:"text-white font-medium mb-2"},"Tendencias Clave",-1)),s.value.trends&&s.value.trends.length>0?(b(),y("div",nC,[r("ul",rC,[(b(!0),y(ge,null,xe(s.value.trends,d=>(b(),y("li",{key:d,class:"text-gray-300 text-sm flex items-start"},[c[9]||(c[9]=r("span",{class:"text-blue-400 mr-2"},"",-1)),ne(" "+w(d),1)]))),128))])])):(b(),y("div",iC," Analizando patrones de uso del sistema... "))])])])])):o.value?(b(),y("div",aC,[c[12]||(c[12]=r("i",{class:"fas fa-exclamation-triangle text-red-400 text-3xl mb-2"},null,-1)),c[13]||(c[13]=r("p",{class:"text-gray-400 mb-2"},"Error al generar insights",-1)),r("p",lC,w(o.value),1),r("button",{onClick:c[1]||(c[1]=d=>a(!1)),class:"mt-4 px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 rounded-lg text-purple-400 transition-colors duration-200"}," Reintentar ")])):(b(),y("div",cC,[...c[14]||(c[14]=[r("i",{class:"fas fa-brain text-3xl mb-2 block"},null,-1),r("p",null,"Haz clic en el botn para generar insights con IA",-1)])]))]))}}),fC=Et(uC,[["__scopeId","data-v-9990b558"]]),pC={class:"bg-gradient-to-br from-purple-900/20 to-indigo-900/20 backdrop-blur-xl rounded-xl shadow-lg p-3 border border-purple-500/20 animate-fade-in animation-delay-2000"},hC={class:"text-center"},gC={class:"bg-white/5 rounded-lg p-2 border border-white/10 mb-2"},mC={class:"text-white text-xs font-medium leading-tight mb-1"},bC={class:"text-purple-300 text-xs opacity-80"},vC=Le({__name:"MotivationalWidget",setup(t){const e=[{text:"El xito es la suma de pequeos esfuerzos repetidos da tras da.",author:"Robert Collier"},{text:"La innovacin distingue al lder del seguidor.",author:"Steve Jobs"},{text:"El nico modo de hacer un gran trabajo es amar lo que haces.",author:"Steve Jobs"},{text:"La calidad nunca es un accidente; siempre es el resultado de un esfuerzo inteligente.",author:"John Ruskin"},{text:"El futuro pertenece a quienes creen en la belleza de sus sueos.",author:"Eleanor Roosevelt"},{text:"No esperes a que las oportunidades lleguen, bscalas.",author:"Annimo"},{text:"La excelencia es un hbito, no un acto.",author:"Aristteles"},{text:"El cambio es la ley de la vida. Aquellos que solo miran al pasado o al presente perdern el futuro.",author:"John F. Kennedy"}],s=I(e[0].text),o=I(e[0].author);return nt(()=>{let n=0;setInterval(()=>{n=(n+1)%e.length,s.value=e[n].text,o.value=e[n].author},3e4)}),(n,i)=>(b(),y("div",pC,[i[1]||(i[1]=r("div",{class:"flex items-center mb-2"},[r("i",{class:"fas fa-lightbulb text-yellow-400 mr-2 text-sm"}),r("h4",{class:"text-xs font-semibold text-white"},"Inspiracin")],-1)),r("div",hC,[r("div",gC,[i[0]||(i[0]=r("i",{class:"fas fa-quote-left text-purple-400 text-xs mb-1 block opacity-60"},null,-1)),r("p",mC,w(s.value),1),r("p",bC,"- "+w(o.value),1)])])]))}}),yC=Et(vC,[["__scopeId","data-v-c126555f"]]),xC={class:"space-y-6 relative min-h-screen"},wC={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-900/40 via-blue-900/30 to-indigo-900/40 backdrop-blur-xl border border-purple-500/20 p-4 lg:p-6 shadow-2xl"},_C={class:"relative z-10"},kC={class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},CC={class:"flex-1"},$C={class:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-white via-purple-200 to-blue-200 bg-clip-text text-transparent mb-1 animate-fade-in"},EC={class:"text-gray-300 text-sm animate-fade-in animation-delay-300"},SC={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 lg:gap-4 min-w-0"},AC={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20 animate-fade-in animation-delay-600 hover:bg-white/15 transition-colors duration-300"},TC={class:"flex items-center justify-between mb-1"},PC={class:"text-lg font-bold text-white leading-tight"},MC={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20 animate-fade-in animation-delay-800 hover:bg-white/15 transition-colors duration-300"},RC={class:"flex items-center justify-between mb-1"},DC={class:"text-lg font-bold text-white leading-tight"},OC={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20 animate-fade-in animation-delay-1000 hover:bg-white/15 transition-colors duration-300"},IC={class:"flex items-center justify-between mb-1"},LC={class:"text-lg font-bold text-white leading-tight"},BC={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20 animate-fade-in animation-delay-1200 hover:bg-white/15 transition-colors duration-300"},NC={class:"flex items-center justify-between mb-1"},jC={class:"text-lg font-bold text-white leading-tight"},FC={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20 animate-fade-in animation-delay-1400 hover:bg-white/15 transition-colors duration-300"},UC={class:"flex items-center justify-between mb-1"},zC={class:"text-lg font-bold text-white leading-tight"},VC={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6"},HC={class:"lg:col-span-1"},qC={key:0,class:"bg-gray-900/40 backdrop-blur-xl rounded-2xl shadow-2xl p-4 border border-purple-500/20 animate-fade-in animation-delay-1600"},WC={class:"grid grid-cols-1 gap-2"},GC={class:"relative z-10"},KC={class:"relative z-10 text-white text-sm font-medium tracking-tight group-hover:text-purple-100 transition-colors duration-300 truncate"},YC={class:"mt-6"},JC={class:"lg:col-span-2"},XC=Le({__name:"Dashboard",setup(t){const e=xt(),s=fv(),o=pv(),n=hv(),i=gv(),a=Af(),l=re(()=>({clients:s.clients.length,activities:o.activities.length,openIssues:i.issues.filter(f=>f.status==="open").length,teamMembers:a.members.length})),c=re(()=>n.totalRevenue.toLocaleString()),d=re(()=>{const f=[];return e.canCreateClients&&f.push({name:"Nuevo Cliente",to:"/clients",icon:lv,colors:"from-blue-600/20 to-blue-700/20 border-blue-500/30 hover:from-blue-500/30 hover:to-blue-600/30",iconColor:"text-blue-400 group-hover:text-blue-300"}),e.canCreateActivities&&f.push({name:"Nueva Actividad",to:"/activities",icon:L4,colors:"from-green-600/20 to-green-700/20 border-green-500/30 hover:from-green-500/30 hover:to-green-600/30",iconColor:"text-green-400 group-hover:text-green-300"}),e.canViewAccounting&&f.push({name:"Registrar Pago",to:"/accounting",icon:E4,colors:"from-purple-600/20 to-purple-700/20 border-purple-500/30 hover:from-purple-500/30 hover:to-purple-600/30",iconColor:"text-purple-400 group-hover:text-purple-300"}),e.canCreateCases&&f.push({name:"Nuevo Caso",to:"/cases",icon:M4,colors:"from-orange-600/20 to-orange-700/20 border-orange-500/30 hover:from-orange-500/30 hover:to-orange-600/30",iconColor:"text-orange-400 group-hover:text-orange-300"}),e.canCreateTeam&&f.push({name:"Gestionar Equipo",to:"/team",icon:mn,colors:"from-indigo-600/20 to-indigo-700/20 border-indigo-500/30 hover:from-indigo-500/30 hover:to-indigo-600/30",iconColor:"text-indigo-400 group-hover:text-indigo-300"}),f}),u=()=>{const f=new Date().getHours();return f<12?"Buenos das! Comencemos con energa este da.":f<18?"Buenas tardes! Qu actividades tienes planeadas?":"Buenas noches! Revisemos el progreso del da."};return nt(async()=>{try{const f=[];e.canViewClients&&f.push(s.fetchClients()),e.canViewActivities&&(console.log("[Dashboard] Fetching all activities (secondary onMounted)"),f.push(o.fetchActivities())),e.canViewAccounting&&(f.push(n.fetchPayments()),f.push(n.fetchSummary())),e.canViewCases&&f.push(i.fetchIssues()),e.canViewTeam&&f.push(a.fetchTeam()),await Promise.all(f)}catch(f){console.error("Error loading dashboard data:",f)}}),(f,p)=>{var m,v;const g=Wo("router-link");return b(),y("div",xC,[p[12]||(p[12]=Es('<div class="fixed inset-0 -z-10 overflow-hidden" data-v-e1c84604><div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900" data-v-e1c84604></div><div class="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse" data-v-e1c84604></div><div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl animate-pulse animation-delay-3000" data-v-e1c84604></div><div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-indigo-500/3 rounded-full blur-2xl animate-pulse animation-delay-6000" data-v-e1c84604></div><div class="absolute inset-0 opacity-[0.02]" style="background-image:radial-gradient(circle at 1px 1px, rgba(255,255,255,0.3) 1px, transparent 0);background-size:20px 20px;" data-v-e1c84604></div></div>',1)),r("div",wC,[p[10]||(p[10]=r("div",{class:"absolute inset-0 opacity-10"},[r("div",{class:"absolute top-0 left-0 w-32 h-32 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),r("div",{class:"absolute top-0 right-0 w-32 h-32 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),r("div",{class:"absolute bottom-0 left-1/2 w-32 h-32 bg-indigo-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})],-1)),r("div",_C,[r("div",kC,[r("div",CC,[r("h1",$C," Hola, "+w(((v=(m=ye(e).user)==null?void 0:m.name)==null?void 0:v.split(" ")[0])||"Usuario")+"!  ",1),r("p",EC,w(u()),1)]),r("div",SC,[fe(Ut,{permissions:["view-clients"],fallback:!1},{default:tt(()=>[r("div",AC,[r("div",TC,[fe(ye(qn),{class:"w-4 h-4 text-blue-400"}),p[0]||(p[0]=r("div",{class:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse"},null,-1))]),r("div",PC,w(l.value.clients),1),p[1]||(p[1]=r("div",{class:"text-xs text-gray-300"},"Clientes",-1))])]),_:1}),fe(Ut,{permissions:["view-activities"],fallback:!1},{default:tt(()=>[r("div",MC,[r("div",RC,[fe(ye(A4),{class:"w-4 h-4 text-green-400"}),p[2]||(p[2]=r("div",{class:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"},null,-1))]),r("div",DC,w(l.value.activities),1),p[3]||(p[3]=r("div",{class:"text-xs text-gray-300"},"Actividades",-1))])]),_:1}),fe(Ut,{permissions:["view-accounting"],fallback:!1},{default:tt(()=>[r("div",OC,[r("div",IC,[fe(ye(T4),{class:"w-4 h-4 text-purple-400"}),p[4]||(p[4]=r("div",{class:"w-1.5 h-1.5 bg-purple-400 rounded-full animate-pulse"},null,-1))]),r("div",LC,"$"+w(c.value),1),p[5]||(p[5]=r("div",{class:"text-xs text-gray-300"},"Ingresos",-1))])]),_:1}),fe(Ut,{permissions:["view-cases"],fallback:!1},{default:tt(()=>[r("div",BC,[r("div",NC,[fe(ye(bu),{class:"w-4 h-4 text-red-400"}),p[6]||(p[6]=r("div",{class:"w-1.5 h-1.5 bg-red-400 rounded-full animate-pulse"},null,-1))]),r("div",jC,w(l.value.openIssues),1),p[7]||(p[7]=r("div",{class:"text-xs text-gray-300"},"Issues",-1))])]),_:1}),fe(Ut,{permissions:["view-team"],fallback:!1},{default:tt(()=>[r("div",FC,[r("div",UC,[fe(ye(mn),{class:"w-4 h-4 text-indigo-400"}),p[8]||(p[8]=r("div",{class:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-pulse"},null,-1))]),r("div",zC,w(l.value.teamMembers),1),p[9]||(p[9]=r("div",{class:"text-xs text-gray-300"},"Equipo",-1))])]),_:1})])])])]),r("div",VC,[r("div",HC,[d.value.length>0?(b(),y("div",qC,[p[11]||(p[11]=r("h3",{class:"text-lg font-semibold text-white mb-3 flex items-center"},[r("i",{class:"fas fa-bolt text-purple-400 mr-2"}),ne(" Acciones Rpidas ")],-1)),r("div",WC,[(b(!0),y(ge,null,xe(d.value.slice(0,4),(x,_)=>(b(),Ue(g,{key:x.name,to:x.to,class:de(`
                group relative overflow-hidden
                flex items-center gap-3 p-3 min-h-[50px]
                bg-gradient-to-r ${x.colors} rounded-lg shadow-lg
                transition-all duration-300 hover:scale-102 hover:shadow-xl hover:shadow-purple-500/25
                border border-transparent hover:border-purple-400/40
                animate-fade-in
              `),style:yo({animationDelay:`${1600+_*100}ms`})},{default:tt(()=>[r("div",GC,[(b(),Ue(vc(x.icon),{class:de(`w-4 h-4 ${x.iconColor} group-hover:scale-110 transition-transform duration-300`)},null,8,["class"]))]),r("span",KC,w(x.name),1)]),_:2},1032,["to","class","style"]))),128))])])):q("",!0),r("div",YC,[fe(yC)])]),r("div",JC,[fe(fC)])])])}}}),QC=Et(XC,[["__scopeId","data-v-e1c84604"]]),ZC={class:"min-h-screen relative flex flex-col px-4 py-6 sm:py-8 text-slate-100 font-[Inter,Sora,ui-sans-serif]"},e$={class:"relative z-10 w-full max-w-7xl flex-1 pb-24 md:pb-0 mx-auto"},t$={class:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center px-1.5 sm:px-0"},s$={class:"order-2"},o$={class:"max-w-md mx-auto group rounded-2xl p-[1px] bg-gradient-to-r from-cyan-300/30 to-fuchsia-400/30 hover:from-cyan-300/60 hover:to-fuchsia-400/60 transition-colors"},n$={class:"rounded-2xl bg-white/5 dark:bg-white/5 backdrop-blur-xl border border-white/10 p-5 sm:p-8 shadow-xl"},r$={class:"relative"},i$=["aria-invalid"],a$={key:0,id:"emailHelp",class:"text-[#F43F5E] text-sm mt-1"},l$={class:"relative"},c$=["type","aria-invalid"],d$={key:0,id:"passwordHelp",class:"text-[#F43F5E] text-sm mt-1"},u$={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2"},f$={class:"flex items-center"},p$={key:0,class:"p-3 bg-red-900/40 border border-red-500/50 rounded-lg","aria-live":"polite"},h$={class:"flex items-center"},g$={class:"text-red-300 text-sm"},m$=["disabled"],b$={key:0,class:"flex items-center justify-center"},v$={key:1,class:"flex items-center justify-center"},y$={class:"w-full z-10 mt-auto"},x$={class:"max-w-7xl mx-auto px-4 py-4 flex flex-col sm:flex-row items-center justify-between text-slate-200/80 text-xs sm:text-sm",style:{"padding-bottom":"calc(env(safe-area-inset-bottom, 0px) + 8px)"}},w$={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},_$={class:"bg-gray-900 rounded-2xl shadow-2xl border border-purple-500/20 max-w-md w-full mx-4 p-6"},k$={class:"flex items-center justify-between mb-6"},C$={class:"flex space-x-3"},$$=["disabled"],E$=Le({__name:"Login",setup(t){const e=Ec(),s=xt(),o=I({email:"",password:""}),n=I(!1),i=I(!1),a=I(""),l=I(""),c=I(!1),d=I(""),u=I(!1),f=re(()=>o.value.email&&o.value.password&&!a.value&&!l.value),{isLoading:p,error:g}=s,m=()=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.email)?a.value="":a.value="Por favor ingresa un correo vlido"},v=async()=>{if(!f.value)return;(await s.login(o.value)).success&&await e.push("/")},x=async()=>{u.value=!0,setTimeout(()=>{u.value=!1,c.value=!1,alert("Se ha enviado un correo con las instrucciones para restablecer tu contrasea.")},2e3)};nt(async()=>{await s.checkAuth()&&await e.push("/")});const _=new Date().getFullYear();return(k,C)=>(b(),y("div",ZC,[C[24]||(C[24]=r("div",{class:"absolute inset-0 bg-gradient-to-br from-[#7C3AED] via-purple-700 to-[#06B6D4]"},null,-1)),C[25]||(C[25]=r("div",{class:"absolute inset-0 opacity-[0.06] pointer-events-none bg-[length:36px_36px]",style:{"background-image":"linear-gradient(to right,rgba(255,255,255,.12)_1px,transparent_1px),linear-gradient(to bottom,rgba(255,255,255,.12)_1px,transparent_1px)"}},null,-1)),r("div",e$,[r("div",t$,[C[18]||(C[18]=Es('<section class="hidden md:flex flex-col gap-6 pr-4"><div class="flex items-start gap-4"><img src="'+tu+'" alt="GEMS CRM" class="w-12 h-12 rounded-lg shadow-md shadow-cyan-300/20"><div><h1 class="text-4xl md:text-5xl lg:text-6xl font-bold leading-tight text-white"> GEMS CRM </h1><p class="mt-3 text-lg md:text-xl font-normal text-slate-100/90"> Enfcate en lo importante y avanza paso a paso con claridad. </p></div></div><blockquote class="text-[13px] md:text-sm font-medium text-slate-300/80"> Escribe la visin, y declrala con claridad, para que corra el que la leyere.  Habacuc 2:2 </blockquote><div class="rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md p-5 text-slate-100/95"><p class="text-[15px] md:text-base font-medium"> Somos GEMS, una comunidad con propsito. Creemos en el crecimiento compartido: cada lnea de cdigo y cada pxel puede elevar a alguien ms. Ayudamos a las personas creando experiencias que suman valor real. </p><p class="mt-3 text-[15px] md:text-base font-medium"> GEMS no es solo una empresa; es un estilo de vida. Y t, que lees esto, aportars tu granito de arena: con tu talento </p></div></section><section class="md:hidden order-1"><div class="flex items-start gap-3 mb-3"><img src="'+tu+'" alt="GEMS CRM" class="w-10 h-10 rounded-md shadow-md shadow-cyan-300/20"><div><h1 class="text-[30px] leading-snug font-bold text-white"> GEMS CRM </h1><p class="mt-1.5 text-[15px] font-normal text-slate-100/90"> Enfcate en lo importante y avanza paso a paso con claridad. </p></div></div></section>',2)),r("section",s$,[r("div",o$,[r("div",n$,[C[17]||(C[17]=r("p",{class:"sr-only"},"Inicia sesin en tu cuenta",-1)),r("form",{onSubmit:Fe(v,["prevent"]),class:"space-y-6","aria-live":"polite"},[r("div",null,[C[11]||(C[11]=r("label",{for:"email",class:"block text-sm font-medium text-slate-200 mb-2"}," Correo Electrnico ",-1)),r("div",r$,[ie(r("input",{id:"email","onUpdate:modelValue":C[0]||(C[0]=P=>o.value.email=P),type:"email",required:"",class:de(["w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-slate-300/70 focus:ring-2 focus:ring-sky-400 focus:border-transparent outline-none transition-all duration-200",{"border-[#F43F5E] focus:ring-[#F43F5E]":a.value}]),placeholder:"tu@email.com",onBlur:m,onInput:C[1]||(C[1]=P=>a.value=""),"aria-invalid":!!a.value,"aria-describedby":"emailHelp"},null,42,i$),[[ke,o.value.email]]),C[10]||(C[10]=r("i",{class:"fas fa-envelope absolute right-3 top-3.5 text-slate-300/70","aria-hidden":"true"},null,-1))]),a.value?(b(),y("p",a$,w(a.value),1)):q("",!0)]),r("div",null,[C[12]||(C[12]=r("label",{for:"password",class:"block text-sm font-medium text-slate-200 mb-2"}," Contrasea ",-1)),r("div",l$,[ie(r("input",{id:"password","onUpdate:modelValue":C[2]||(C[2]=P=>o.value.password=P),type:n.value?"text":"password",required:"",class:de(["w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-slate-300/70 focus:ring-2 focus:ring-sky-400 focus:border-transparent outline-none transition-all duration-200 pr-12",{"border-[#F43F5E] focus:ring-[#F43F5E]":l.value}]),placeholder:"",onInput:C[3]||(C[3]=P=>l.value=""),"aria-invalid":!!l.value,"aria-describedby":"passwordHelp"},null,42,c$),[[A2,o.value.password]]),r("button",{type:"button",onClick:C[4]||(C[4]=P=>n.value=!n.value),class:"absolute right-3 top-3.5 text-slate-300/70 hover:text-white transition-colors","aria-label":"Mostrar u ocultar contrasea"},[r("i",{class:de(n.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),l.value?(b(),y("p",d$,w(l.value),1)):q("",!0)]),r("div",u$,[r("div",f$,[ie(r("input",{id:"remember","onUpdate:modelValue":C[5]||(C[5]=P=>i.value=P),type:"checkbox",class:"w-4 h-4 text-sky-500 bg-white/5 border-white/10 rounded focus:ring-sky-400 focus:ring-2"},null,512),[[_c,i.value]]),C[13]||(C[13]=r("label",{for:"remember",class:"ml-2 text-sm text-slate-200"}," Recordarme ",-1))]),r("button",{type:"button",onClick:C[6]||(C[6]=P=>c.value=!0),class:"relative text-sm text-sky-300 hover:text-sky-200 transition-colors after:absolute after:left-0 after:-bottom-0.5 after:h-[2px] after:w-0 after:bg-gradient-to-r from-cyan-300 to-fuchsia-400 hover:after:w-full after:transition-all self-end sm:self-auto"}," Olvidaste tu contrasea? ")]),ye(g)?(b(),y("div",p$,[r("div",h$,[C[14]||(C[14]=r("i",{class:"fas fa-exclamation-triangle text-red-300 mr-2","aria-hidden":"true"},null,-1)),r("p",g$,w(ye(g)),1)])])):q("",!0),r("button",{type:"submit",disabled:ye(p)||!f.value,class:"w-full py-3 px-4 rounded-xl font-medium text-white bg-[#0EA5E9] hover:bg-[#22D3EE] focus:outline-none focus-visible:ring-4 focus-visible:ring-cyan-300/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg"},[ye(p)?(b(),y("span",v$,[...C[16]||(C[16]=[r("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ne(" Iniciando sesin... ",-1)])])):(b(),y("span",b$,[...C[15]||(C[15]=[r("i",{class:"fas fa-sign-in-alt mr-2","aria-hidden":"true"},null,-1),ne(" Iniciar Sesin ",-1)])]))],8,m$)],32)])])]),C[19]||(C[19]=Es('<section class="md:hidden order-3"><blockquote class="mt-6 text-sm font-medium text-slate-300/90 max-w-md mx-auto"> Escribe la visin, y declrala con claridad, para que corra el que la leyere.  Habacuc 2:2 </blockquote></section><section class="md:hidden order-4 mt-3"><div class="rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md p-4 text-slate-100/95"><p class="text-[14px] font-medium"> Somos GEMS, una comunidad con propsito. Creemos en el crecimiento compartido: cada lnea de cdigo y cada pxel puede elevar a alguien ms. Ayudamos a las personas creando experiencias que suman valor real. </p><p class="mt-2 text-[14px] font-medium"> GEMS no es solo una empresa; es un estilo de vida. Y t, que lees esto, aportars tu granito de arena: con tu talento </p></div></section>',2))])]),r("footer",y$,[r("div",x$,[r("div",null,"  "+w(ye(_))+" GEMS Innovations. Todos los derechos reservados. ",1),C[20]||(C[20]=r("nav",{class:"flex items-center gap-4 mt-2 sm:mt-0","aria-label":"Enlaces de GEMS Innovations"},[r("a",{href:"https://www.instagram.com/gemsinnovations/",target:"_blank",rel:"noopener noreferrer",class:"text-sky-200 hover:text-sky-100 transition-colors underline decoration-transparent hover:decoration-sky-200 underline-offset-4","aria-label":"Instagram de GEMS Innovations"}," Instagram "),r("a",{href:"https://gemsinnovations.com/",target:"_blank",rel:"noopener noreferrer",class:"text-sky-200 hover:text-sky-100 transition-colors underline decoration-transparent hover:decoration-sky-200 underline-offset-4","aria-label":"Sitio web de GEMS Innovations"}," gemsinnovations.com ")],-1))])]),c.value?(b(),y("div",w$,[r("div",_$,[r("div",k$,[C[22]||(C[22]=r("h3",{class:"text-xl font-bold text-white"},"Restablecer Contrasea",-1)),r("button",{onClick:C[7]||(C[7]=P=>c.value=!1),class:"text-gray-400 hover:text-white transition-colors"},[...C[21]||(C[21]=[r("i",{class:"fas fa-times text-lg"},null,-1)])])]),r("form",{onSubmit:Fe(x,["prevent"]),class:"space-y-4"},[r("div",null,[C[23]||(C[23]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Correo Electrnico ",-1)),ie(r("input",{"onUpdate:modelValue":C[8]||(C[8]=P=>d.value=P),type:"email",required:"",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"tu@email.com"},null,512),[[ke,d.value]])]),r("div",C$,[r("button",{type:"button",onClick:C[9]||(C[9]=P=>c.value=!1),class:"flex-1 py-2 px-4 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:u.value,class:"flex-1 py-2 px-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 transition-all"},w(u.value?"Enviando...":"Enviar"),9,$$)])],32)])])):q("",!0)]))}}),S$={class:"prospect-list h-full flex flex-col bg-gray-900 border-r border-purple-900/20"},A$={class:"p-4 border-b border-purple-800/20 flex items-center gap-3"},T$={class:"p-3 flex-1 overflow-auto"},P$={key:0,class:"text-gray-400"},M$={key:1,class:"text-red-400"},R$={key:2},D$={key:0,class:"text-gray-400"},O$={class:"space-y-2"},I$=["onClick"],L$={class:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold"},B$={class:"flex-1 min-w-0"},N$={class:"text-sm font-semibold text-white truncate"},j$={class:"text-xs text-gray-400 truncate"},F$={class:"text-xs text-gray-400"},U$=Le({__name:"ProspectConversationsListFixed",emits:["select"],setup(t,{emit:e}){const s=I(""),o=I([]),n=I(!0),i=I(""),a=I(null),l=e,c=re(()=>{const f=s.value.trim().toLowerCase(),p=[...o.value].sort((g,m)=>Number(new Date(String(m.lastUpdated||0)))-Number(new Date(String(g.lastUpdated||0))));return f?p.filter(g=>(g.prospectName||"").toLowerCase().includes(f)||(g.company||"").toLowerCase().includes(f)):p});function d(f){return f.prospectName?f.prospectName.charAt(0).toUpperCase():"?"}function u(f){a.value=f._id,l("select",f)}return nt(async()=>{try{const f=await fetch("/api/prospects");if(!f.ok)throw new Error("Network response not ok");const p=await f.json();o.value=Array.isArray(p)?p:[]}catch(f){console.error(f),i.value="Error cargando prospectos"}finally{n.value=!1}}),(f,p)=>(b(),y("aside",S$,[r("div",A$,[p[1]||(p[1]=r("div",{class:"text-lg font-bold text-white"},"Prospectos",-1)),ie(r("input",{"onUpdate:modelValue":p[0]||(p[0]=g=>s.value=g),placeholder:"Buscar...",class:"ml-auto bg-gray-800 text-sm text-gray-200 rounded px-3 py-1 focus:outline-none"},null,512),[[ke,s.value]])]),r("div",T$,[n.value?(b(),y("div",P$,"Cargando prospectos...")):i.value?(b(),y("div",M$,w(i.value),1)):(b(),y("div",R$,[c.value.length===0?(b(),y("div",D$,"No hay prospectos.")):q("",!0),r("ul",O$,[(b(!0),y(ge,null,xe(c.value,g=>{var m;return b(),y("li",{key:g._id,onClick:v=>u(g),class:"p-2 rounded-lg cursor-pointer flex items-center gap-3 hover:bg-gray-800"},[r("div",L$,w(d(g)),1),r("div",B$,[r("div",N$,w(g.prospectName),1),r("div",j$,w(g.company||"Sin empresa"),1)]),r("div",F$,w(((m=g.messages)==null?void 0:m.length)??0),1)],8,I$)}),128))])]))])]))}}),z$=Et(U$,[["__scopeId","data-v-3614dabb"]]),V$={class:"flex flex-col h-full relative items-center justify-center",style:{"min-height":"100vh"}},H$={class:"font-bold text-lg text-purple-400 mb-2 z-10 flex items-center gap-2"},q$={class:"flex-1 rounded-lg p-4 overflow-y-auto flex flex-col gap-2 z-10 prospect-chat-area",style:{"backdrop-filter":"blur(8px)",background:"rgba(36, 16, 56, 0.20)","max-width":"600px","min-width":"320px",width:"100%"}},W$={key:0,class:"font-semibold mr-2 flex items-center"},G$={key:1,class:"font-semibold mr-2 flex items-center"},K$=["innerHTML"],Y$={class:"block text-xs text-gray-200 mt-2 ml-2"},J$={key:0,class:"w-full flex justify-center"},X$={class:"flex gap-2 mt-4 z-10"},Q$=["disabled"],Z$=["disabled"],eE=Le({__name:"ProspectConversationDetail",props:{conversation:Object},emits:["message-sent"],setup(t,{emit:e}){function s(d){if(d.role==="assistant"){let u=d.content;return u=u.replace(/(Diagnstico de falencias y oportunidades:)/g,"<b>$1</b>"),u=u.replace(/(Estrategias para abordarlo:)/g,"<b>$1</b>"),u=u.replace(/(Un mensaje para WhatsApp:)/g,"<b>$1</b>"),u=u.replace(/(Sugerencias de servicios de anuncios, redes sociales y automatizacin:)/g,"<b>$1</b>"),u=u.replace(/(Ejemplos de casos de xito similares:)/g,"<b>$1</b>"),u}return d.content}const o=t,n=e,i=I(""),a=I(!1);function l(d){return new Date(d).toLocaleString("es-CO",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})}async function c(){if(i.value.trim()){a.value=!0;try{const u=await(await fetch(`/api/prospects/${o.conversation._id}/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:"user",content:i.value})})).json();n("message-sent",u.messages[u.messages.length-1]),i.value=""}catch{alert("Error enviando mensaje")}a.value=!1}}return(d,u)=>(b(),y("div",V$,[u[6]||(u[6]=r("div",{class:"absolute inset-0 z-0 pointer-events-none",style:{background:"radial-gradient(ellipse at 60% 40%, #7c3aed55 0%, #ec489955 60%, #18181b 100%)",filter:"blur(40px)",opacity:"0.7"}},null,-1)),r("div",H$,[u[1]||(u[1]=r("svg",{class:"w-6 h-6 text-pink-400 animate-pulse",fill:"none",viewBox:"0 0 24 24"},[r("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"})],-1)),ne(" Conversacin con "+w(t.conversation.prospectName),1)]),r("div",q$,[(b(!0),y(ge,null,xe(t.conversation.messages,(f,p)=>(b(),y(ge,{key:p},[r("div",{class:de(["w-full flex mb-2",f.role==="user"?"justify-end":"justify-start"])},[r("div",{class:de([f.role==="user"?"bg-gradient-to-r from-gray-700 via-purple-400 to-gray-600 text-white":"bg-gradient-to-r from-gray-800 via-purple-300 to-gray-700 text-white","max-w-[70%] px-5 py-3 rounded-3xl shadow-lg text-base whitespace-pre-line relative flex items-end animate-fade-in prospect-chat-bubble"]),style:{"backdrop-filter":"blur(2px)",border:"1px solid #a78bfa33"}},[f.role==="user"?(b(),y("span",W$,[...u[2]||(u[2]=[r("svg",{class:"w-5 h-5 text-blue-300 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[r("circle",{cx:"10",cy:"10",r:"10"})],-1),ne(" T: ",-1)])])):(b(),y("span",G$,[...u[3]||(u[3]=[r("svg",{class:"w-5 h-5 text-pink-300 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[r("rect",{x:"4",y:"4",width:"12",height:"12",rx:"6"})],-1),ne(" IA: ",-1)])])),r("span",{class:"block w-full whitespace-pre-line",innerHTML:s(f)},null,8,K$),r("span",Y$,w(l(f.timestamp)),1)],2)],2),p<t.conversation.messages.length-1&&f.role!==t.conversation.messages[p+1].role?(b(),y("div",J$,[...u[4]||(u[4]=[r("div",{class:"h-0.5 w-1/2 bg-gray-300 opacity-40 rounded my-1"},null,-1)])])):q("",!0)],64))),128))]),r("div",X$,[ie(r("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=f=>i.value=f),class:"flex-1 bg-gray-800/80 text-white rounded-xl px-4 py-3 border border-purple-500/30 shadow-lg focus:ring-2 focus:ring-pink-500 focus:outline-none",placeholder:"Escribe un mensaje o agrega contexto...",disabled:a.value},null,8,Q$),[[ke,i.value]]),r("button",{class:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-5 py-3 rounded-xl font-bold shadow-xl hover:scale-105 transition-transform duration-150",onClick:c,disabled:a.value},[...u[5]||(u[5]=[r("svg",{class:"w-5 h-5 inline-block mr-1",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[r("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1),ne(" Enviar ",-1)])],8,Z$)])]))}}),tE=Et(eE,[["__scopeId","data-v-2aeaecbd"]]),sE={class:"flex h-[70vh] bg-gray-900 rounded-xl shadow-lg overflow-hidden"},oE={class:"w-80 min-w-[220px] max-w-[320px] bg-gray-800 border-r border-purple-500/20 p-4 overflow-y-auto"},nE={class:"flex-1 p-8 flex flex-col"},rE={key:1,class:"mb-6"},iE={class:"flex flex-col md:flex-row gap-6"},aE={class:"flex-1"},lE={class:"flex-1"},cE={key:0,class:"flex flex-wrap gap-2 mt-2"},dE=["src"],uE={class:"flex items-center gap-4 mt-6"},fE=["disabled"],pE={key:0,class:"mt-6 bg-gray-900/70 rounded-xl p-6 border border-purple-500/30"},hE={class:"text-gray-200 whitespace-pre-line"},gE={key:1,class:"mt-4 text-red-400"},mE=Le({__name:"ProspectAIForm",setup(t){const e=I(null);function s(f){e.value=f}function o(f){e.value&&e.value.messages.push(f)}const n=I(""),i=I([]),a=I(!1),l=I(""),c=I("");function d(f){const p=f.target.files;if(p){i.value=[];for(const g of Array.from(p)){const m=new FileReader;m.onload=v=>{var x;i.value.push({file:g,preview:(x=v.target)==null?void 0:x.result})},m.readAsDataURL(g)}}}async function u(){var f,p,g,m;a.value=!0,c.value="",l.value="";try{let v=`Eres un asesor comercial experto en ventas B2B para micro y medianas empresas. Analiza el siguiente prospecto y genera:
- Un diagnstico de sus falencias y oportunidades
- Estrategias para abordarlo
- Un mensaje para WhatsApp
- Sugerencias de servicios de anuncios, redes sociales y automatizacin
- Ejemplos de casos de xito similares
Prospecto:
${n.value}`,x=`Sugiere un nombre comercial para este prospecto, siguiendo el formato: Prospecto [color] [palabra relacionada con el sector, empresa o necesidad]. El nombre debe ser profesional, relevante y fcil de identificar. Prospecto:
${n.value}`;i.value.length&&(v+=`

El prospecto incluye imgenes descriptivas.`,x+=`

El prospecto incluye imgenes descriptivas.`);const _="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",C=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"Eres un asesor comercial experto en ventas B2B para micro y medianas empresas."},{role:"user",content:v}],max_tokens:800,temperature:.7})})).json();if(!C.choices||!((p=(f=C.choices[0])==null?void 0:f.message)!=null&&p.content))throw new Error("No se recibi respuesta vlida de la IA");l.value=C.choices[0].message.content;const $=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"Eres un generador de nombres comerciales creativos y estandarizados."},{role:"user",content:x}],max_tokens:30,temperature:.7})})).json();let R="Prospecto sin nombre";if($.choices&&((m=(g=$.choices[0])==null?void 0:g.message)!=null&&m.content)&&(R=$.choices[0].message.content.trim()),!(await fetch("https://gems-crm-backend.onrender.com/api/prospects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prospectName:R,company:"",initialMessage:n.value+`

`+l.value})})).ok)throw new Error("No se pudo guardar el prospecto en el historial");if(typeof window<"u"){const B=new CustomEvent("prospect-created");window.dispatchEvent(B)}}catch(v){c.value=v.message||"Error al analizar prospecto"}finally{a.value=!1}}return(f,p)=>(b(),y("div",sE,[r("div",oE,[p[1]||(p[1]=r("div",{class:"font-bold text-purple-300 mb-4 text-lg"},"Prospectos recientes",-1)),fe(z$,{onSelect:s})]),r("div",nE,[e.value?(b(),Ue(tE,{key:0,conversation:e.value,onMessageSent:o},null,8,["conversation"])):(b(),y("div",rE,[p[5]||(p[5]=r("div",{class:"font-bold text-purple-300 text-xl mb-2"},"Nuevo Prospecto",-1)),r("div",iE,[r("div",aE,[p[2]||(p[2]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Texto descriptivo del prospecto",-1)),ie(r("textarea",{"onUpdate:modelValue":p[0]||(p[0]=g=>n.value=g),rows:"6",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe el prospecto, su negocio, necesidades, etc."},null,512),[[ke,n.value]])]),r("div",lE,[p[3]||(p[3]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Imgenes del prospecto (opcional)",-1)),r("input",{type:"file",multiple:"",accept:"image/*",onChange:d,class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white"},null,32),i.value.length?(b(),y("div",cE,[(b(!0),y(ge,null,xe(i.value,(g,m)=>(b(),y("img",{key:m,src:g.preview,class:"w-20 h-20 object-cover rounded-lg border border-purple-500/30"},null,8,dE))),128))])):q("",!0)])]),r("div",uE,[r("button",{onClick:u,disabled:a.value||!n.value,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 font-medium disabled:opacity-50"},w(a.value?"Analizando...":"Analizar Prospecto con IA"),9,fE)]),l.value?(b(),y("div",pE,[p[4]||(p[4]=r("h2",{class:"text-xl font-bold text-purple-300 mb-2"},"Anlisis y Recomendaciones",-1)),r("div",hE,w(l.value),1)])):q("",!0),c.value?(b(),y("div",gE,w(c.value),1)):q("",!0)]))])]))}});class bE{constructor(){_e(this,"baseUrl",et.BASE_URL);_e(this,"endpoint","/clients")}async getAll(){try{const e=await fetch(`${this.baseUrl}${this.endpoint}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();return Array.isArray(s)?s:[]}catch(e){throw console.error("Error fetching clients:",e),new Error("No se pudieron cargar los clientes")}}async getById(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error fetching client:",s),new Error("No se pudo cargar el cliente")}}async create(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error creating client:",s),new Error("No se pudo crear el cliente")}}async update(e,s){try{const o=await fetch(`${this.baseUrl}${this.endpoint}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error updating client:",o),new Error("No se pudo actualizar el cliente")}}async deleteClient(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`)}catch(s){throw console.error("Error deleting client:",s),new Error("No se pudo eliminar el cliente")}}async search(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}/search?q=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();return Array.isArray(o)?o:[]}catch(s){throw console.error("Error searching clients:",s),new Error("No se pudo realizar la bsqueda")}}}const go=new bE,vE=Gs("client",()=>{const t=I([]),e=I(!1),s=I(null);return{clients:t,loading:e,error:s,fetchClients:async()=>{e.value=!0,s.value=null;try{const p=await go.getAll();t.value=p}catch(p){s.value=p.message||"Error al cargar clientes",console.error("Error fetching clients:",p)}finally{e.value=!1}},getClient:async p=>{try{return await go.getById(p)}catch(g){throw s.value=g.message||"Error al cargar cliente",g}},createClient:async p=>{e.value=!0,s.value=null;try{const g=await go.create(p);return t.value.push(g),g}catch(g){throw s.value=g.message||"Error al crear cliente",g}finally{e.value=!1}},updateClient:async(p,g)=>{e.value=!0,s.value=null;try{const m=await go.update(p,g),v=t.value.findIndex(x=>x._id===p);return v!==-1&&(t.value[v]=m),m}catch(m){throw s.value=m.message||"Error al actualizar cliente",m}finally{e.value=!1}},deleteClient:async p=>{e.value=!0,s.value=null;try{await go.deleteClient(p);const g=t.value.findIndex(m=>m._id===p);g!==-1&&t.value.splice(g,1)}catch(g){throw s.value=g.message||"Error al eliminar cliente",g}finally{e.value=!1}},searchClients:async p=>{try{return await go.search(p)}catch(g){throw s.value=g.message||"Error al buscar clientes",g}},getClientById:p=>t.value.find(g=>g._id===p),getActiveClients:()=>t.value.filter(p=>p.estado==="active"),getClientsByCompany:p=>t.value.filter(g=>g.empresa===p)}}),yE={class:"space-y-6"},xE={class:"mb-6"},wE={class:"flex gap-2"},_E={key:0},kE={key:1},CE={class:"flex justify-end mb-4"},$E={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-purple-500/20"},EE={class:"flex flex-col sm:flex-row gap-4"},SE={class:"flex-1 relative"},AE={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg border border-purple-500/20 overflow-hidden"},TE={key:0,class:"flex items-center justify-center py-12"},PE={key:1,class:"text-center py-12"},ME={class:"bg-red-500/20 border border-red-500/50 rounded-lg p-6 mx-6"},RE={class:"flex items-center justify-center gap-3 mb-4"},DE={class:"text-red-400 mb-4"},OE={key:2},IE={class:"hidden md:block overflow-x-auto"},LE={class:"min-w-full"},BE={class:"divide-y divide-gray-700/50"},NE={class:"px-6 py-4 whitespace-nowrap"},jE={class:"flex items-center"},FE={class:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg"},UE={class:"text-white text-lg font-bold"},zE={class:"ml-4"},VE={class:"text-white font-medium"},HE={class:"px-6 py-4 whitespace-nowrap"},qE={class:"text-gray-300"},WE={class:"px-6 py-4 whitespace-nowrap"},GE={class:"text-gray-300"},KE={class:"text-gray-400 text-sm"},YE={class:"px-6 py-4 whitespace-nowrap text-gray-300"},JE={class:"px-6 py-4 whitespace-nowrap text-right"},XE={class:"flex items-center justify-end gap-2"},QE=["onClick"],ZE=["onClick"],e6={class:"md:hidden p-4 space-y-4"},t6={class:"flex items-center justify-between mb-3"},s6={class:"flex items-center"},o6={class:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center"},n6={class:"text-white font-bold"},r6={class:"ml-3"},i6={class:"text-white font-medium"},a6={class:"text-gray-400 text-sm"},l6={class:"flex gap-2"},c6=["onClick"],d6=["onClick"],u6={class:"space-y-1 text-sm"},f6={class:"text-gray-300"},p6={class:"text-gray-400"},h6={class:"text-gray-500"},g6={key:0,class:"text-center py-12"},m6={class:"text-xl font-medium text-gray-300 mb-2"},b6={class:"text-gray-400 mb-6"},v6={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},y6={class:"bg-gray-900 rounded-2xl shadow-2xl border border-purple-500/20 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},x6={class:"flex items-center justify-between p-6 border-b border-purple-500/20"},w6={class:"text-xl font-bold text-white"},_6={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},k6={class:"flex justify-end gap-4 pt-4"},C6=["disabled"],$6={key:0,class:"flex items-center gap-2"},E6={key:1,class:"flex items-center gap-2"},S6={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},A6={class:"bg-gray-900 rounded-2xl shadow-2xl border border-red-500/20 max-w-md w-full mx-4"},T6={class:"flex items-center justify-between p-6 border-b border-red-500/20"},P6={class:"text-xl font-bold text-white flex items-center gap-2"},M6={class:"p-6"},R6={class:"flex items-center gap-4 mb-6"},D6={class:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center"},O6={class:"text-white font-bold text-lg"},I6={class:"text-white font-medium"},L6={class:"text-gray-400 text-sm"},B6={class:"flex justify-end gap-4"},N6=["disabled"],j6={key:0,class:"flex items-center gap-2"},F6={key:1,class:"flex items-center gap-2"},U6=Le({__name:"Clients",setup(t){const e=I("clientes"),s=vE(),o=I(!1),n=I(!1),i=I(""),a=I("name"),l=I(null),c=I(null),d=I({name:"",email:"",phone:"",company:""}),u=re(()=>s.clients),f=re(()=>s.loading),p=re(()=>s.error),g=re(()=>{let $=u.value;if(i.value){const R=i.value.toLowerCase();$=$.filter(V=>V.name.toLowerCase().includes(R)||V.email.toLowerCase().includes(R)||V.company.toLowerCase().includes(R)||V.phone.toLowerCase().includes(R))}return $.sort((R,V)=>{switch(a.value){case"name":return R.name.localeCompare(V.name);case"company":return R.company.localeCompare(V.company);case"email":return R.email.localeCompare(V.email);case"createdAt":return new Date(V.createdAt||"").getTime()-new Date(R.createdAt||"").getTime();default:return 0}})}),m=()=>{d.value={name:"",email:"",phone:"",company:""}},v=$=>{l.value=$,d.value={name:$.name,email:$.email,phone:$.phone,company:$.company},o.value=!0},x=$=>{c.value=$,n.value=!0},_=async()=>{try{l.value?await s.updateClient(l.value._id,d.value):await s.createClient(d.value),o.value=!1,m(),l.value=null}catch($){console.error("Error saving client:",$)}},k=async()=>{var $;if(($=c.value)!=null&&$._id)try{await s.deleteClient(c.value._id),n.value=!1,c.value=null}catch(R){console.error("Error deleting client:",R)}},C=$=>$?new Date($).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"N/A",P=async()=>{try{await s.fetchClients()}catch($){console.error("Error fetching clients:",$)}};return nt(()=>{P()}),($,R)=>{var E,S,O;const V=Wo("PermissionGuard"),B=Wo("router-link");return b(),y("div",yE,[r("div",xE,[r("div",wE,[r("button",{class:de([e.value==="clientes"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-300","px-6 py-2 rounded-lg font-medium transition-colors"]),onClick:R[0]||(R[0]=T=>e.value="clientes")},"Clientes",2),r("button",{class:de([e.value==="prospectos"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-300","px-6 py-2 rounded-lg font-medium transition-colors"]),onClick:R[1]||(R[1]=T=>e.value="prospectos")},"Prospectos",2)])]),e.value==="prospectos"?(b(),y("div",_E,[fe(mE)])):(b(),y("div",kE,[r("div",CE,[fe(V,{permissions:["create-clients"],fallback:!1},{default:tt(()=>[r("button",{onClick:R[2]||(R[2]=T=>{o.value=!0,l.value=null,m()}),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2 font-medium transform hover:scale-105 shadow-lg shadow-purple-500/25"},[fe(ye(zl),{class:"w-5 h-5"}),R[14]||(R[14]=ne(" Nuevo Cliente ",-1))])]),_:1})]),r("div",$E,[r("div",EE,[r("div",SE,[fe(ye(av),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ie(r("input",{"onUpdate:modelValue":R[3]||(R[3]=T=>i.value=T),type:"text",placeholder:"Buscar clientes por nombre, email, empresa...",class:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg px-10 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},null,512),[[ke,i.value]])]),ie(r("select",{"onUpdate:modelValue":R[4]||(R[4]=T=>a.value=T),class:"bg-gray-700/50 border border-gray-600/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...R[15]||(R[15]=[r("option",{value:"name"},"Ordenar por Nombre",-1),r("option",{value:"company"},"Ordenar por Empresa",-1),r("option",{value:"email"},"Ordenar por Email",-1),r("option",{value:"createdAt"},"Ordenar por Fecha",-1)])],512),[[De,a.value]])])]),r("div",AE,[f.value?(b(),y("div",TE,[...R[16]||(R[16]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"},null,-1)])])):p.value?(b(),y("div",PE,[r("div",ME,[r("div",RE,[fe(ye(bu),{class:"w-8 h-8 text-red-400"}),R[17]||(R[17]=r("h3",{class:"text-red-300 font-medium text-lg"},"Error al cargar clientes",-1))]),r("p",DE,w(p.value),1),r("button",{onClick:P,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Reintentar ")])])):(b(),y("div",OE,[r("div",IE,[r("table",LE,[R[19]||(R[19]=r("thead",{class:"bg-gray-900/50"},[r("tr",null,[r("th",{class:"px-6 py-4 text-left text-xs font-medium text-purple-300 uppercase tracking-wider"}," Cliente "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-purple-300 uppercase tracking-wider"}," Empresa "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-purple-300 uppercase tracking-wider"}," Contacto "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-purple-300 uppercase tracking-wider"}," Fecha Registro "),r("th",{class:"px-6 py-4 text-right text-xs font-medium text-purple-300 uppercase tracking-wider"}," Acciones ")])],-1)),r("tbody",BE,[(b(!0),y(ge,null,xe(g.value,T=>(b(),y("tr",{key:T._id,class:"hover:bg-gray-700/30 transition-colors"},[r("td",NE,[r("div",jE,[r("div",FE,[r("span",UE,w(T.name.charAt(0).toUpperCase()),1)]),r("div",zE,[r("div",VE,w(T.name),1)])])]),r("td",HE,[r("div",qE,w(T.company),1)]),r("td",WE,[r("div",GE,w(T.email),1),r("div",KE,w(T.phone),1)]),r("td",YE,w(C(T.createdAt)),1),r("td",JE,[r("div",XE,[fe(B,{to:`/clients/${T._id}`,class:"p-2 text-purple-300 hover:text-white hover:bg-purple-600/20 rounded-lg transition-colors",title:"Ver detalle"},{default:tt(()=>[...R[18]||(R[18]=[r("i",{class:"fas fa-eye"},null,-1)])]),_:1},8,["to"]),fe(V,{permissions:["edit-clients"],fallback:!1},{default:tt(()=>[r("button",{onClick:L=>v(T),class:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 rounded-lg transition-colors",title:"Editar cliente"},[fe(ye(Ul),{class:"w-4 h-4"})],8,QE)]),_:2},1024),fe(V,{permissions:["delete-clients"],fallback:!1},{default:tt(()=>[r("button",{onClick:L=>x(T),class:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-colors",title:"Eliminar cliente"},[fe(ye(vu),{class:"w-4 h-4"})],8,ZE)]),_:2},1024)])])]))),128))])])]),r("div",e6,[(b(!0),y(ge,null,xe(g.value,T=>(b(),y("div",{key:T._id,class:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/20 hover:bg-gray-700/50 transition-colors"},[r("div",t6,[r("div",s6,[r("div",o6,[r("span",n6,w(T.name.charAt(0).toUpperCase()),1)]),r("div",r6,[r("h3",i6,w(T.name),1),r("p",a6,w(T.company),1)])]),r("div",l6,[fe(V,{permissions:["edit-clients"],fallback:!1},{default:tt(()=>[r("button",{onClick:L=>v(T),class:"p-2 text-blue-400 hover:bg-blue-500/20 rounded-lg transition-colors"},[fe(ye(Ul),{class:"w-4 h-4"})],8,c6)]),_:2},1024),fe(V,{permissions:["delete-clients"],fallback:!1},{default:tt(()=>[r("button",{onClick:L=>x(T),class:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors"},[fe(ye(vu),{class:"w-4 h-4"})],8,d6)]),_:2},1024)])]),r("div",u6,[r("p",f6,w(T.email),1),r("p",p6,w(T.phone),1),r("p",h6,"Registrado: "+w(C(T.createdAt)),1),fe(B,{to:`/clients/${T._id}`,class:"inline-flex items-center gap-2 text-purple-300 hover:text-white mt-2"},{default:tt(()=>[...R[20]||(R[20]=[r("i",{class:"fas fa-eye"},null,-1),ne(" Ver detalle ",-1)])]),_:1},8,["to"])])]))),128))]),g.value.length===0?(b(),y("div",g6,[fe(ye(qn),{class:"mx-auto h-16 w-16 text-gray-500 mb-4"}),r("h3",m6,w(i.value?"No se encontraron clientes":"No hay clientes registrados"),1),r("p",b6,w(i.value?"Intenta con una bsqueda diferente":"Comienza agregando tu primer cliente"),1),r("button",{onClick:R[5]||(R[5]=T=>{o.value=!0,l.value=null,m()}),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2 mx-auto font-medium transform hover:scale-105 shadow-lg shadow-purple-500/25"},[fe(ye(zl),{class:"w-5 h-5"}),R[21]||(R[21]=ne(" Nuevo Cliente ",-1))])])):q("",!0)]))]),o.value?(b(),y("div",v6,[r("div",y6,[r("div",x6,[r("h3",w6,w(l.value?"Editar Cliente":"Crear Nuevo Cliente"),1),r("button",{onClick:R[6]||(R[6]=T=>o.value=!1),class:"text-gray-400 hover:text-white transition-colors"},[...R[22]||(R[22]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("form",{onSubmit:Fe(_,["prevent"]),class:"p-6 space-y-6"},[r("div",_6,[r("div",null,[R[23]||(R[23]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-user mr-2 text-purple-400"}),ne("Nombre completo * ")],-1)),ie(r("input",{"onUpdate:modelValue":R[7]||(R[7]=T=>d.value.name=T),type:"text",required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"Juan Prez"},null,512),[[ke,d.value.name]])]),r("div",null,[R[24]||(R[24]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-envelope mr-2 text-purple-400"}),ne("Email * ")],-1)),ie(r("input",{"onUpdate:modelValue":R[8]||(R[8]=T=>d.value.email=T),type:"email",required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"juan@ejemplo.com"},null,512),[[ke,d.value.email]])]),r("div",null,[R[25]||(R[25]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-phone mr-2 text-purple-400"}),ne("Telfono * ")],-1)),ie(r("input",{"onUpdate:modelValue":R[9]||(R[9]=T=>d.value.phone=T),type:"tel",required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"+57 300 123 4567"},null,512),[[ke,d.value.phone]])]),r("div",null,[R[26]||(R[26]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-building mr-2 text-purple-400"}),ne("Empresa * ")],-1)),ie(r("input",{"onUpdate:modelValue":R[10]||(R[10]=T=>d.value.company=T),type:"text",required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"Empresa ABC"},null,512),[[ke,d.value.company]])])]),r("div",k6,[r("button",{type:"button",onClick:R[11]||(R[11]=T=>o.value=!1),class:"px-6 py-3 text-gray-300 bg-gray-700 border border-gray-600 rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Cancelar "),r("button",{type:"submit",disabled:f.value,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 font-medium transform hover:scale-105 shadow-lg shadow-purple-500/25 disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(b(),y("span",$6,[...R[27]||(R[27]=[r("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},null,-1),ne(" Guardando... ",-1)])])):(b(),y("span",E6,[R[28]||(R[28]=r("i",{class:"fas fa-save"},null,-1)),ne(" "+w(l.value?"Actualizar":"Crear")+" Cliente ",1)]))],8,C6)])],32)])])):q("",!0),n.value?(b(),y("div",S6,[r("div",A6,[r("div",T6,[r("h3",P6,[fe(ye(bu),{class:"w-6 h-6 text-red-400"}),R[29]||(R[29]=ne(" Confirmar Eliminacin ",-1))]),r("button",{onClick:R[12]||(R[12]=T=>n.value=!1),class:"text-gray-400 hover:text-white transition-colors"},[...R[30]||(R[30]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("div",M6,[r("div",R6,[r("div",D6,[r("span",O6,w((E=c.value)==null?void 0:E.name.charAt(0).toUpperCase()),1)]),r("div",null,[r("p",I6,w((S=c.value)==null?void 0:S.name),1),r("p",L6,w((O=c.value)==null?void 0:O.company),1)])]),R[33]||(R[33]=r("div",{class:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-6"},[r("p",{class:"text-red-300 text-sm"},[r("i",{class:"fas fa-exclamation-triangle mr-2"}),r("strong",null,"Ests seguro de que deseas eliminar este cliente?")]),r("p",{class:"text-red-400 text-sm mt-2"}," Esta accin no se puede deshacer y se perdern todos los datos asociados. ")],-1)),r("div",B6,[r("button",{onClick:R[13]||(R[13]=T=>n.value=!1),class:"px-6 py-3 text-gray-300 bg-gray-700 border border-gray-600 rounded-lg hover:bg-gray-600 transition-colors font-medium"}," Cancelar "),r("button",{onClick:k,disabled:f.value,class:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[f.value?(b(),y("span",j6,[...R[31]||(R[31]=[r("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},null,-1),ne(" Eliminando... ",-1)])])):(b(),y("span",F6,[...R[32]||(R[32]=[r("i",{class:"fas fa-trash"},null,-1),ne(" Eliminar Cliente ",-1)])]))],8,N6)])])])])):q("",!0)]))])}}});class z6{constructor(){_e(this,"baseUrl",et.BASE_URL);_e(this,"endpoint","/activities")}getHeaders(){const e=localStorage.getItem("token");return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}}async getAll(){try{const e=await fetch(`${this.baseUrl}${this.endpoint}`,{method:"GET",headers:this.getHeaders()});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();return Array.isArray(s)?s:[]}catch(e){throw console.error("Error fetching activities:",e),new Error("No se pudieron cargar las actividades")}}async getById(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}/${e}`,{method:"GET",headers:this.getHeaders()});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error fetching activity:",s),new Error("No se pudo cargar la actividad")}}async create(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error creating activity:",s),new Error("No se pudo crear la actividad")}}async update(e,s){try{const o=await fetch(`${this.baseUrl}${this.endpoint}/${e}`,{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(s)});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error updating activity:",o),new Error("No se pudo actualizar la actividad")}}async deleteActivity(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}/${e}`,{method:"DELETE",headers:this.getHeaders()});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`)}catch(s){throw console.error("Error deleting activity:",s),new Error("No se pudo eliminar la actividad")}}async getByAssignedUser(e){try{const s=await fetch(`${this.baseUrl}${this.endpoint}/assigned/${e}`,{method:"GET",headers:this.getHeaders()});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();return Array.isArray(o)?o:[]}catch(s){throw console.error("Error fetching assigned activities:",s),new Error("No se pudieron cargar las actividades asignadas")}}async getWithFilters(e){try{const s=new URLSearchParams;e.assignedTo&&s.append("assignedTo",e.assignedTo),e.status&&s.append("status",e.status);const o=await fetch(`${this.baseUrl}${this.endpoint}?${s.toString()}`,{method:"GET",headers:this.getHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const n=await o.json();return Array.isArray(n)?n:[]}catch(s){throw console.error("Error fetching filtered activities:",s),new Error("No se pudieron cargar las actividades filtradas")}}async updateStatus(e,s){try{const o=await fetch(`${this.baseUrl}${this.endpoint}/${e}/status`,{method:"PATCH",headers:this.getHeaders(),body:JSON.stringify({status:s})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error updating activity status:",o),new Error("No se pudo actualizar el estado de la actividad")}}async reassignActivity(e,s){try{const o=await fetch(`${this.baseUrl}${this.endpoint}/${e}/assign`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignedTo:s})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error reassigning activity:",o),new Error("No se pudo reasignar la actividad")}}}const Bt=new z6;class V6{constructor(){_e(this,"baseUrl",`${et.BASE_URL}${C5.TEAM}`)}async getAll(){try{const e=localStorage.getItem("token");console.log(" Haciendo peticin a:",this.baseUrl),console.log(" Token presente:",!!e);const s=await fetch(this.baseUrl,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log(" Response status:",s.status),console.log(" Response ok:",s.ok),!s.ok){const i=await s.text();throw console.error(" Error response:",i),new Error(`Error ${s.status}: ${s.statusText}`)}const o=await s.json();console.log(" Response data:",o);const n=o.success&&Array.isArray(o.data)?o.data:[];return console.log(" Team members parsed:",n),n}catch(e){throw console.error(" Error fetching team members:",e),new Error("No se pudieron cargar los miembros del equipo")}}async getActiveMembers(){try{return(await this.getAll()).filter(s=>s.isActive)}catch(e){throw console.error("Error fetching active team members:",e),new Error("No se pudieron cargar los miembros activos del equipo")}}async getById(e){try{const s=localStorage.getItem("token"),o=await fetch(`${this.baseUrl}/${e}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Error ${o.status}: ${o.statusText}`);const n=await o.json();return n.success?n.data:n}catch(s){throw console.error("Error fetching team member:",s),new Error("No se pudo cargar el miembro del equipo")}}async create(e){try{const s=localStorage.getItem("token"),o=await fetch(this.baseUrl,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw new Error(`Error ${o.status}: ${o.statusText}`);const n=await o.json();return n.success?n.data:n}catch(s){throw console.error("Error creating team member:",s),s}}async update(e,s){try{const o=localStorage.getItem("token"),n=await fetch(`${this.baseUrl}/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok)throw new Error(`Error ${n.status}: ${n.statusText}`);const i=await n.json();return i.success?i.data:i}catch(o){throw console.error("Error updating team member:",o),o}}async delete(e){try{const s=localStorage.getItem("token"),o=await fetch(`${this.baseUrl}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Error ${o.status}: ${o.statusText}`)}catch(s){throw console.error("Error deleting team member:",s),s}}}const Vl=new V6;/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/function mv(t,e,s){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:s;throw new TypeError("Private element is not present on this object")}function H6(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r0(t,e){return t.get(mv(t,e))}function q6(t,e,s){H6(t,e),e.set(t,s)}function W6(t,e,s){return t.set(mv(t,e),s),s}const G6=100,Ne={},K6=()=>{Ne.previousActiveElement instanceof HTMLElement?(Ne.previousActiveElement.focus(),Ne.previousActiveElement=null):document.body&&document.body.focus()},Y6=t=>new Promise(e=>{if(!t)return e();const s=window.scrollX,o=window.scrollY;Ne.restoreFocusTimeout=setTimeout(()=>{K6(),e()},G6),window.scrollTo(s,o)}),bv="swal2-",J6=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],pe=J6.reduce((t,e)=>(t[e]=bv+e,t),{}),X6=["success","warning","info","question","error"],Hl=X6.reduce((t,e)=>(t[e]=bv+e,t),{}),vv="SweetAlert2:",Tf=t=>t.charAt(0).toUpperCase()+t.slice(1),hs=t=>{console.warn(`${vv} ${typeof t=="object"?t.join(" "):t}`)},or=t=>{console.error(`${vv} ${t}`)},i0=[],Q6=t=>{i0.includes(t)||(i0.push(t),hs(t))},yv=(t,e=null)=>{Q6(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Bc=t=>typeof t=="function"?t():t,Pf=t=>t&&typeof t.toPromise=="function",aa=t=>Pf(t)?t.toPromise():Promise.resolve(t),Mf=t=>t&&Promise.resolve(t)===t,ms=()=>document.body.querySelector(`.${pe.container}`),la=t=>{const e=ms();return e?e.querySelector(t):null},Os=t=>la(`.${t}`),ot=()=>Os(pe.popup),zr=()=>Os(pe.icon),Z6=()=>Os(pe["icon-content"]),xv=()=>Os(pe.title),Rf=()=>Os(pe["html-container"]),wv=()=>Os(pe.image),Df=()=>Os(pe["progress-steps"]),Nc=()=>Os(pe["validation-message"]),wo=()=>la(`.${pe.actions} .${pe.confirm}`),Vr=()=>la(`.${pe.actions} .${pe.cancel}`),nr=()=>la(`.${pe.actions} .${pe.deny}`),eS=()=>Os(pe["input-label"]),Hr=()=>la(`.${pe.loader}`),ca=()=>Os(pe.actions),_v=()=>Os(pe.footer),jc=()=>Os(pe["timer-progress-bar"]),Of=()=>Os(pe.close),tS=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,If=()=>{const t=ot();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(e).sort((i,a)=>{const l=parseInt(i.getAttribute("tabindex")||"0"),c=parseInt(a.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),o=t.querySelectorAll(tS),n=Array.from(o).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(n))].filter(i=>$s(i))},Lf=()=>Vo(document.body,pe.shown)&&!Vo(document.body,pe["toast-shown"])&&!Vo(document.body,pe["no-backdrop"]),Fc=()=>{const t=ot();return t?Vo(t,pe.toast):!1},sS=()=>{const t=ot();return t?t.hasAttribute("data-loading"):!1},Is=(t,e)=>{if(t.textContent="",e){const o=new DOMParser().parseFromString(e,"text/html"),n=o.querySelector("head");n&&Array.from(n.childNodes).forEach(a=>{t.appendChild(a)});const i=o.querySelector("body");i&&Array.from(i.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?t.appendChild(a.cloneNode(!0)):t.appendChild(a)})}},Vo=(t,e)=>{if(!e)return!1;const s=e.split(/\s+/);for(let o=0;o<s.length;o++)if(!t.classList.contains(s[o]))return!1;return!0},oS=(t,e)=>{Array.from(t.classList).forEach(s=>{!Object.values(pe).includes(s)&&!Object.values(Hl).includes(s)&&!Object.values(e.showClass||{}).includes(s)&&t.classList.remove(s)})},Ds=(t,e,s)=>{if(oS(t,e),!e.customClass)return;const o=e.customClass[s];if(o){if(typeof o!="string"&&!o.forEach){hs(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof o}"`);return}at(t,o)}},Uc=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${pe.popup} > .${pe[e]}`);case"checkbox":return t.querySelector(`.${pe.popup} > .${pe.checkbox} input`);case"radio":return t.querySelector(`.${pe.popup} > .${pe.radio} input:checked`)||t.querySelector(`.${pe.popup} > .${pe.radio} input:first-child`);case"range":return t.querySelector(`.${pe.popup} > .${pe.range} input`);default:return t.querySelector(`.${pe.popup} > .${pe.input}`)}},kv=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},Cv=(t,e,s)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(o=>{Array.isArray(t)?t.forEach(n=>{s?n.classList.add(o):n.classList.remove(o)}):s?t.classList.add(o):t.classList.remove(o)}))},at=(t,e)=>{Cv(t,e,!0)},Ws=(t,e)=>{Cv(t,e,!1)},an=(t,e)=>{const s=Array.from(t.children);for(let o=0;o<s.length;o++){const n=s[o];if(n instanceof HTMLElement&&Vo(n,e))return n}},Wn=(t,e,s)=>{s===`${parseInt(s)}`&&(s=parseInt(s)),s||parseInt(s)===0?t.style.setProperty(e,typeof s=="number"?`${s}px`:s):t.style.removeProperty(e)},qt=(t,e="flex")=>{t&&(t.style.display=e)},ls=t=>{t&&(t.style.display="none")},Bf=(t,e="block")=>{t&&new MutationObserver(()=>{da(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},a0=(t,e,s,o)=>{const n=t.querySelector(e);n&&n.style.setProperty(s,o)},da=(t,e,s="flex")=>{e?qt(t,s):ls(t)},$s=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),nS=()=>!$s(wo())&&!$s(nr())&&!$s(Vr()),yu=t=>t.scrollHeight>t.clientHeight,rS=(t,e)=>{let s=t;for(;s&&s!==e;){if(yu(s))return!0;s=s.parentElement}return!1},$v=t=>{const e=window.getComputedStyle(t),s=parseFloat(e.getPropertyValue("animation-duration")||"0"),o=parseFloat(e.getPropertyValue("transition-duration")||"0");return s>0||o>0},Nf=(t,e=!1)=>{const s=jc();s&&$s(s)&&(e&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${t/1e3}s linear`,s.style.width="0%"},10))},iS=()=>{const t=jc();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const s=parseInt(window.getComputedStyle(t).width),o=e/s*100;t.style.width=`${o}%`},aS=()=>typeof window>"u"||typeof document>"u",lS=`
 <div aria-labelledby="${pe.title}" aria-describedby="${pe["html-container"]}" class="${pe.popup}" tabindex="-1">
   <button type="button" class="${pe.close}"></button>
   <ul class="${pe["progress-steps"]}"></ul>
   <div class="${pe.icon}"></div>
   <img class="${pe.image}" />
   <h2 class="${pe.title}" id="${pe.title}"></h2>
   <div class="${pe["html-container"]}" id="${pe["html-container"]}"></div>
   <input class="${pe.input}" id="${pe.input}" />
   <input type="file" class="${pe.file}" />
   <div class="${pe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${pe.select}" id="${pe.select}"></select>
   <div class="${pe.radio}"></div>
   <label class="${pe.checkbox}">
     <input type="checkbox" id="${pe.checkbox}" />
     <span class="${pe.label}"></span>
   </label>
   <textarea class="${pe.textarea}" id="${pe.textarea}"></textarea>
   <div class="${pe["validation-message"]}" id="${pe["validation-message"]}"></div>
   <div class="${pe.actions}">
     <div class="${pe.loader}"></div>
     <button type="button" class="${pe.confirm}"></button>
     <button type="button" class="${pe.deny}"></button>
     <button type="button" class="${pe.cancel}"></button>
   </div>
   <div class="${pe.footer}"></div>
   <div class="${pe["timer-progress-bar-container"]}">
     <div class="${pe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),cS=()=>{const t=ms();return t?(t.remove(),Ws([document.documentElement,document.body],[pe["no-backdrop"],pe["toast-shown"],pe["has-column"]]),!0):!1},Pn=()=>{Ne.currentInstance.resetValidationMessage()},dS=()=>{const t=ot(),e=an(t,pe.input),s=an(t,pe.file),o=t.querySelector(`.${pe.range} input`),n=t.querySelector(`.${pe.range} output`),i=an(t,pe.select),a=t.querySelector(`.${pe.checkbox} input`),l=an(t,pe.textarea);e.oninput=Pn,s.onchange=Pn,i.onchange=Pn,a.onchange=Pn,l.oninput=Pn,o.oninput=()=>{Pn(),n.value=o.value},o.onchange=()=>{Pn(),n.value=o.value}},uS=t=>typeof t=="string"?document.querySelector(t):t,fS=t=>{const e=ot();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},pS=t=>{window.getComputedStyle(t).direction==="rtl"&&at(ms(),pe.rtl)},hS=t=>{const e=cS();if(aS()){or("SweetAlert2 requires document to initialize");return}const s=document.createElement("div");s.className=pe.container,e&&at(s,pe["no-transition"]),Is(s,lS),s.dataset.swal2Theme=t.theme;const o=uS(t.target);o.appendChild(s),t.topLayer&&(s.setAttribute("popover",""),s.showPopover()),fS(t),pS(o),dS()},jf=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?gS(t,e):t&&Is(e,t)},gS=(t,e)=>{t.jquery?mS(e,t):Is(e,t.toString())},mS=(t,e)=>{if(t.textContent="",0 in e)for(let s=0;s in e;s++)t.appendChild(e[s].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},bS=(t,e)=>{const s=ca(),o=Hr();!s||!o||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?ls(s):qt(s),Ds(s,e,"actions"),vS(s,o,e),Is(o,e.loaderHtml||""),Ds(o,e,"loader"))};function vS(t,e,s){const o=wo(),n=nr(),i=Vr();!o||!n||!i||(Cd(o,"confirm",s),Cd(n,"deny",s),Cd(i,"cancel",s),yS(o,n,i,s),s.reverseButtons&&(s.toast?(t.insertBefore(i,o),t.insertBefore(n,o)):(t.insertBefore(i,e),t.insertBefore(n,e),t.insertBefore(o,e))))}function yS(t,e,s,o){if(!o.buttonsStyling){Ws([t,e,s],pe.styled);return}at([t,e,s],pe.styled),o.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",o.confirmButtonColor),o.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",o.denyButtonColor),o.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",o.cancelButtonColor),kd(t),kd(e),kd(s)}function kd(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function Cd(t,e,s){const o=Tf(e);da(t,s[`show${o}Button`],"inline-block"),Is(t,s[`${e}ButtonText`]||""),t.setAttribute("aria-label",s[`${e}ButtonAriaLabel`]||""),t.className=pe[e],Ds(t,s,`${e}Button`)}const xS=(t,e)=>{const s=Of();s&&(Is(s,e.closeButtonHtml||""),Ds(s,e,"closeButton"),da(s,e.showCloseButton),s.setAttribute("aria-label",e.closeButtonAriaLabel||""))},wS=(t,e)=>{const s=ms();s&&(_S(s,e.backdrop),kS(s,e.position),CS(s,e.grow),Ds(s,e,"container"))};function _S(t,e){typeof e=="string"?t.style.background=e:e||at([document.documentElement,document.body],pe["no-backdrop"])}function kS(t,e){e&&(e in pe?at(t,pe[e]):(hs('The "position" parameter is not valid, defaulting to "center"'),at(t,pe.center)))}function CS(t,e){e&&at(t,pe[`grow-${e}`])}var bt={innerParams:new WeakMap,domCache:new WeakMap};const $S=["input","file","range","select","radio","checkbox","textarea"],ES=(t,e)=>{const s=ot();if(!s)return;const o=bt.innerParams.get(t),n=!o||e.input!==o.input;$S.forEach(i=>{const a=an(s,pe[i]);a&&(TS(i,e.inputAttributes),a.className=pe[i],n&&ls(a))}),e.input&&(n&&SS(e),PS(e))},SS=t=>{if(!t.input)return;if(!Tt[t.input]){or(`Unexpected type of input! Expected ${Object.keys(Tt).join(" | ")}, got "${t.input}"`);return}const e=Ev(t.input);if(!e)return;const s=Tt[t.input](e,t);qt(e),t.inputAutoFocus&&setTimeout(()=>{kv(s)})},AS=t=>{for(let e=0;e<t.attributes.length;e++){const s=t.attributes[e].name;["id","type","value","style"].includes(s)||t.removeAttribute(s)}},TS=(t,e)=>{const s=ot();if(!s)return;const o=Uc(s,t);if(o){AS(o);for(const n in e)o.setAttribute(n,e[n])}},PS=t=>{if(!t.input)return;const e=Ev(t.input);e&&Ds(e,t,"input")},Ff=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},ua=(t,e,s)=>{if(s.inputLabel){const o=document.createElement("label"),n=pe["input-label"];o.setAttribute("for",t.id),o.className=n,typeof s.customClass=="object"&&at(o,s.customClass.inputLabel),o.innerText=s.inputLabel,e.insertAdjacentElement("beforebegin",o)}},Ev=t=>{const e=ot();if(e)return an(e,pe[t]||pe.input)},ql=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:Mf(e)||hs(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Tt={};Tt.text=Tt.email=Tt.password=Tt.number=Tt.tel=Tt.url=Tt.search=Tt.date=Tt["datetime-local"]=Tt.time=Tt.week=Tt.month=(t,e)=>(ql(t,e.inputValue),ua(t,t,e),Ff(t,e),t.type=e.input,t);Tt.file=(t,e)=>(ua(t,t,e),Ff(t,e),t);Tt.range=(t,e)=>{const s=t.querySelector("input"),o=t.querySelector("output");return ql(s,e.inputValue),s.type=e.input,ql(o,e.inputValue),ua(s,t,e),t};Tt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const s=document.createElement("option");Is(s,e.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,t.appendChild(s)}return ua(t,t,e),t};Tt.radio=t=>(t.textContent="",t);Tt.checkbox=(t,e)=>{const s=Uc(ot(),"checkbox");s.value="1",s.checked=!!e.inputValue;const o=t.querySelector("span");return Is(o,e.inputPlaceholder||e.inputLabel),s};Tt.textarea=(t,e)=>{ql(t,e.inputValue),Ff(t,e),ua(t,t,e);const s=o=>parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const o=parseInt(window.getComputedStyle(ot()).width),n=()=>{if(!document.body.contains(t))return;const i=t.offsetWidth+s(t);i>o?ot().style.width=`${i}px`:Wn(ot(),"width",e.width)};new MutationObserver(n).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const MS=(t,e)=>{const s=Rf();s&&(Bf(s),Ds(s,e,"htmlContainer"),e.html?(jf(e.html,s),qt(s,"block")):e.text?(s.textContent=e.text,qt(s,"block")):ls(s),ES(t,e))},RS=(t,e)=>{const s=_v();s&&(Bf(s),da(s,e.footer,"block"),e.footer&&jf(e.footer,s),Ds(s,e,"footer"))},DS=(t,e)=>{const s=bt.innerParams.get(t),o=zr();if(!o)return;if(s&&e.icon===s.icon){c0(o,e),l0(o,e);return}if(!e.icon&&!e.iconHtml){ls(o);return}if(e.icon&&Object.keys(Hl).indexOf(e.icon)===-1){or(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),ls(o);return}qt(o),c0(o,e),l0(o,e),at(o,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Sv)},l0=(t,e)=>{for(const[s,o]of Object.entries(Hl))e.icon!==s&&Ws(t,o);at(t,e.icon&&Hl[e.icon]),LS(t,e),Sv(),Ds(t,e,"icon")},Sv=()=>{const t=ot();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),s=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let o=0;o<s.length;o++)s[o].style.backgroundColor=e},OS=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,IS=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,c0=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let s=t.innerHTML,o="";e.iconHtml?o=d0(e.iconHtml):e.icon==="success"?(o=OS(e),s=s.replace(/ style=".*?"/g,"")):e.icon==="error"?o=IS:e.icon&&(o=d0({question:"?",warning:"!",info:"i"}[e.icon])),s.trim()!==o.trim()&&Is(t,o)},LS=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])a0(t,s,"background-color",e.iconColor);a0(t,".swal2-success-ring","border-color",e.iconColor)}},d0=t=>`<div class="${pe["icon-content"]}">${t}</div>`,BS=(t,e)=>{const s=wv();if(s){if(!e.imageUrl){ls(s);return}qt(s,""),s.setAttribute("src",e.imageUrl),s.setAttribute("alt",e.imageAlt||""),Wn(s,"width",e.imageWidth),Wn(s,"height",e.imageHeight),s.className=pe.image,Ds(s,e,"image")}};let Uf=!1,Av=0,Tv=0,Pv=0,Mv=0;const NS=t=>{t.addEventListener("mousedown",Wl),document.body.addEventListener("mousemove",Gl),t.addEventListener("mouseup",Kl),t.addEventListener("touchstart",Wl),document.body.addEventListener("touchmove",Gl),t.addEventListener("touchend",Kl)},jS=t=>{t.removeEventListener("mousedown",Wl),document.body.removeEventListener("mousemove",Gl),t.removeEventListener("mouseup",Kl),t.removeEventListener("touchstart",Wl),document.body.removeEventListener("touchmove",Gl),t.removeEventListener("touchend",Kl)},Wl=t=>{const e=ot();if(t.target===e||zr().contains(t.target)){Uf=!0;const s=Rv(t);Av=s.clientX,Tv=s.clientY,Pv=parseInt(e.style.insetInlineStart)||0,Mv=parseInt(e.style.insetBlockStart)||0,at(e,"swal2-dragging")}},Gl=t=>{const e=ot();if(Uf){let{clientX:s,clientY:o}=Rv(t);e.style.insetInlineStart=`${Pv+(s-Av)}px`,e.style.insetBlockStart=`${Mv+(o-Tv)}px`}},Kl=()=>{const t=ot();Uf=!1,Ws(t,"swal2-dragging")},Rv=t=>{let e=0,s=0;return t.type.startsWith("mouse")?(e=t.clientX,s=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,s=t.touches[0].clientY),{clientX:e,clientY:s}},FS=(t,e)=>{const s=ms(),o=ot();if(!(!s||!o)){if(e.toast){Wn(s,"width",e.width),o.style.width="100%";const n=Hr();n&&o.insertBefore(n,zr())}else Wn(o,"width",e.width);Wn(o,"padding",e.padding),e.color&&(o.style.color=e.color),e.background&&(o.style.background=e.background),ls(Nc()),US(o,e),e.draggable&&!e.toast?(at(o,pe.draggable),NS(o)):(Ws(o,pe.draggable),jS(o))}},US=(t,e)=>{const s=e.showClass||{};t.className=`${pe.popup} ${$s(t)?s.popup:""}`,e.toast?(at([document.documentElement,document.body],pe["toast-shown"]),at(t,pe.toast)):at(t,pe.modal),Ds(t,e,"popup"),typeof e.customClass=="string"&&at(t,e.customClass),e.icon&&at(t,pe[`icon-${e.icon}`])},zS=(t,e)=>{const s=Df();if(!s)return;const{progressSteps:o,currentProgressStep:n}=e;if(!o||o.length===0||n===void 0){ls(s);return}qt(s),s.textContent="",n>=o.length&&hs("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((i,a)=>{const l=VS(i);if(s.appendChild(l),a===n&&at(l,pe["active-progress-step"]),a!==o.length-1){const c=HS(e);s.appendChild(c)}})},VS=t=>{const e=document.createElement("li");return at(e,pe["progress-step"]),Is(e,t),e},HS=t=>{const e=document.createElement("li");return at(e,pe["progress-step-line"]),t.progressStepsDistance&&Wn(e,"width",t.progressStepsDistance),e},qS=(t,e)=>{const s=xv();s&&(Bf(s),da(s,e.title||e.titleText,"block"),e.title&&jf(e.title,s),e.titleText&&(s.innerText=e.titleText),Ds(s,e,"title"))},Dv=(t,e)=>{FS(t,e),wS(t,e),zS(t,e),DS(t,e),BS(t,e),qS(t,e),xS(t,e),MS(t,e),bS(t,e),RS(t,e);const s=ot();typeof e.didRender=="function"&&s&&e.didRender(s),Ne.eventEmitter.emit("didRender",s)},WS=()=>$s(ot()),Ov=()=>{var t;return(t=wo())===null||t===void 0?void 0:t.click()},GS=()=>{var t;return(t=nr())===null||t===void 0?void 0:t.click()},KS=()=>{var t;return(t=Vr())===null||t===void 0?void 0:t.click()},qr=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Iv=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},YS=(t,e,s)=>{Iv(t),e.toast||(t.keydownHandler=o=>XS(e,o,s),t.keydownTarget=e.keydownListenerCapture?window:ot(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},xu=(t,e)=>{var s;const o=If();if(o.length){t=t+e,t===-2&&(t=o.length-1),t===o.length?t=0:t===-1&&(t=o.length-1),o[t].focus();return}(s=ot())===null||s===void 0||s.focus()},Lv=["ArrowRight","ArrowDown"],JS=["ArrowLeft","ArrowUp"],XS=(t,e,s)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?QS(e,t):e.key==="Tab"?ZS(e):[...Lv,...JS].includes(e.key)?eA(e.key):e.key==="Escape"&&tA(e,t,s)))},QS=(t,e)=>{if(!Bc(e.allowEnterKey))return;const s=Uc(ot(),e.input);if(t.target&&s&&t.target instanceof HTMLElement&&t.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(e.input))return;Ov(),t.preventDefault()}},ZS=t=>{const e=t.target,s=If();let o=-1;for(let n=0;n<s.length;n++)if(e===s[n]){o=n;break}t.shiftKey?xu(o,-1):xu(o,1),t.stopPropagation(),t.preventDefault()},eA=t=>{const e=ca(),s=wo(),o=nr(),n=Vr();if(!e||!s||!o||!n)return;const i=[s,o,n];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const a=Lv.includes(t)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<e.children.length;c++){if(l=l[a],!l)return;if(l instanceof HTMLButtonElement&&$s(l))break}l instanceof HTMLButtonElement&&l.focus()}},tA=(t,e,s)=>{t.preventDefault(),Bc(e.allowEscapeKey)&&s(qr.esc)};var Mr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const sA=()=>{const t=ms();Array.from(document.body.children).forEach(s=>{s.contains(t)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},Bv=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},Nv=typeof window<"u"&&!!window.GestureEvent,oA=()=>{if(Nv&&!Vo(document.body,pe.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,at(document.body,pe.iosfix),nA()}},nA=()=>{const t=ms();if(!t)return;let e;t.ontouchstart=s=>{e=rA(s)},t.ontouchmove=s=>{e&&(s.preventDefault(),s.stopPropagation())}},rA=t=>{const e=t.target,s=ms(),o=Rf();return!s||!o||iA(t)||aA(t)?!1:e===s||!yu(s)&&e instanceof HTMLElement&&!rS(e,o)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(yu(o)&&o.contains(e))},iA=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",aA=t=>t.touches&&t.touches.length>1,lA=()=>{if(Vo(document.body,pe.iosfix)){const t=parseInt(document.body.style.top,10);Ws(document.body,pe.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},cA=()=>{const t=document.createElement("div");t.className=pe["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let Cr=null;const dA=t=>{Cr===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(Cr=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Cr+cA()}px`)},uA=()=>{Cr!==null&&(document.body.style.paddingRight=`${Cr}px`,Cr=null)};function jv(t,e,s,o){Fc()?u0(t,o):(Y6(s).then(()=>u0(t,o)),Iv(Ne)),Nv?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Lf()&&(uA(),lA(),Bv()),fA()}function fA(){Ws([document.documentElement,document.body],[pe.shown,pe["height-auto"],pe["no-backdrop"],pe["toast-shown"]])}function ln(t){t=hA(t);const e=Mr.swalPromiseResolve.get(this),s=pA(this);this.isAwaitingPromise?t.isDismissed||(fa(this),e(t)):s&&e(t)}const pA=t=>{const e=ot();if(!e)return!1;const s=bt.innerParams.get(t);if(!s||Vo(e,s.hideClass.popup))return!1;Ws(e,s.showClass.popup),at(e,s.hideClass.popup);const o=ms();return Ws(o,s.showClass.backdrop),at(o,s.hideClass.backdrop),gA(t,e,s),!0};function Fv(t){const e=Mr.swalPromiseReject.get(this);fa(this),e&&e(t)}const fa=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,bt.innerParams.get(t)||t._destroy())},hA=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),gA=(t,e,s)=>{var o;const n=ms(),i=$v(e);typeof s.willClose=="function"&&s.willClose(e),(o=Ne.eventEmitter)===null||o===void 0||o.emit("willClose",e),i?mA(t,e,n,s.returnFocus,s.didClose):jv(t,n,s.returnFocus,s.didClose)},mA=(t,e,s,o,n)=>{Ne.swalCloseEventFinishedCallback=jv.bind(null,t,s,o,n);const i=function(a){if(a.target===e){var l;(l=Ne.swalCloseEventFinishedCallback)===null||l===void 0||l.call(Ne),delete Ne.swalCloseEventFinishedCallback,e.removeEventListener("animationend",i),e.removeEventListener("transitionend",i)}};e.addEventListener("animationend",i),e.addEventListener("transitionend",i)},u0=(t,e)=>{setTimeout(()=>{var s;typeof e=="function"&&e.bind(t.params)(),(s=Ne.eventEmitter)===null||s===void 0||s.emit("didClose"),t._destroy&&t._destroy()})},Rr=t=>{let e=ot();if(e||new Zt,e=ot(),!e)return;const s=Hr();Fc()?ls(zr()):bA(e,t),qt(s),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},bA=(t,e)=>{const s=ca(),o=Hr();!s||!o||(!e&&$s(wo())&&(e=wo()),qt(s),e&&(ls(e),o.setAttribute("data-button-to-replace",e.className),s.insertBefore(o,e)),at([t,s],pe.loading))},vA=(t,e)=>{e.input==="select"||e.input==="radio"?kA(t,e):["text","email","number","tel","textarea"].some(s=>s===e.input)&&(Pf(e.inputValue)||Mf(e.inputValue))&&(Rr(wo()),CA(t,e))},yA=(t,e)=>{const s=t.getInput();if(!s)return null;switch(e.input){case"checkbox":return xA(s);case"radio":return wA(s);case"file":return _A(s);default:return e.inputAutoTrim?s.value.trim():s.value}},xA=t=>t.checked?1:0,wA=t=>t.checked?t.value:null,_A=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,kA=(t,e)=>{const s=ot();if(!s)return;const o=n=>{e.input==="select"?$A(s,Yl(n),e):e.input==="radio"&&EA(s,Yl(n),e)};Pf(e.inputOptions)||Mf(e.inputOptions)?(Rr(wo()),aa(e.inputOptions).then(n=>{t.hideLoading(),o(n)})):typeof e.inputOptions=="object"?o(e.inputOptions):or(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},CA=(t,e)=>{const s=t.getInput();s&&(ls(s),aa(e.inputValue).then(o=>{s.value=e.input==="number"?`${parseFloat(o)||0}`:`${o}`,qt(s),s.focus(),t.hideLoading()}).catch(o=>{or(`Error in inputValue promise: ${o}`),s.value="",qt(s),s.focus(),t.hideLoading()}))};function $A(t,e,s){const o=an(t,pe.select);if(!o)return;const n=(i,a,l)=>{const c=document.createElement("option");c.value=l,Is(c,a),c.selected=Uv(l,s.inputValue),i.appendChild(c)};e.forEach(i=>{const a=i[0],l=i[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=a,c.disabled=!1,o.appendChild(c),l.forEach(d=>n(c,d[1],d[0]))}else n(o,l,a)}),o.focus()}function EA(t,e,s){const o=an(t,pe.radio);if(!o)return;e.forEach(i=>{const a=i[0],l=i[1],c=document.createElement("input"),d=document.createElement("label");c.type="radio",c.name=pe.radio,c.value=a,Uv(a,s.inputValue)&&(c.checked=!0);const u=document.createElement("span");Is(u,l),u.className=pe.label,d.appendChild(c),d.appendChild(u),o.appendChild(d)});const n=o.querySelectorAll("input");n.length&&n[0].focus()}const Yl=t=>{const e=[];return t instanceof Map?t.forEach((s,o)=>{let n=s;typeof n=="object"&&(n=Yl(n)),e.push([o,n])}):Object.keys(t).forEach(s=>{let o=t[s];typeof o=="object"&&(o=Yl(o)),e.push([s,o])}),e},Uv=(t,e)=>!!e&&e.toString()===t.toString(),SA=t=>{const e=bt.innerParams.get(t);t.disableButtons(),e.input?zv(t,"confirm"):Vf(t,!0)},AA=t=>{const e=bt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?zv(t,"deny"):zf(t,!1)},TA=(t,e)=>{t.disableButtons(),e(qr.cancel)},zv=(t,e)=>{const s=bt.innerParams.get(t);if(!s.input){or(`The "input" parameter is needed to be set when using returnInputValueOn${Tf(e)}`);return}const o=t.getInput(),n=yA(t,s);s.inputValidator?PA(t,n,e):o&&!o.checkValidity()?(t.enableButtons(),t.showValidationMessage(s.validationMessage||o.validationMessage)):e==="deny"?zf(t,n):Vf(t,n)},PA=(t,e,s)=>{const o=bt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>aa(o.inputValidator(e,o.validationMessage))).then(i=>{t.enableButtons(),t.enableInput(),i?t.showValidationMessage(i):s==="deny"?zf(t,e):Vf(t,e)})},zf=(t,e)=>{const s=bt.innerParams.get(t||void 0);s.showLoaderOnDeny&&Rr(nr()),s.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>aa(s.preDeny(e,s.validationMessage))).then(n=>{n===!1?(t.hideLoading(),fa(t)):t.close({isDenied:!0,value:typeof n>"u"?e:n})}).catch(n=>Vv(t||void 0,n))):t.close({isDenied:!0,value:e})},f0=(t,e)=>{t.close({isConfirmed:!0,value:e})},Vv=(t,e)=>{t.rejectPromise(e)},Vf=(t,e)=>{const s=bt.innerParams.get(t||void 0);s.showLoaderOnConfirm&&Rr(),s.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>aa(s.preConfirm(e,s.validationMessage))).then(n=>{$s(Nc())||n===!1?(t.hideLoading(),fa(t)):f0(t,typeof n>"u"?e:n)}).catch(n=>Vv(t||void 0,n))):f0(t,e)};function Jl(){const t=bt.innerParams.get(this);if(!t)return;const e=bt.domCache.get(this);ls(e.loader),Fc()?t.icon&&qt(zr()):MA(e),Ws([e.popup,e.actions],pe.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const MA=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?qt(e[0],"inline-block"):nS()&&ls(t.actions)};function Hv(){const t=bt.innerParams.get(this),e=bt.domCache.get(this);return e?Uc(e.popup,t.input):null}function qv(t,e,s){const o=bt.domCache.get(t);e.forEach(n=>{o[n].disabled=s})}function Wv(t,e){const s=ot();if(!(!s||!t))if(t.type==="radio"){const o=s.querySelectorAll(`[name="${pe.radio}"]`);for(let n=0;n<o.length;n++)o[n].disabled=e}else t.disabled=e}function Gv(){qv(this,["confirmButton","denyButton","cancelButton"],!1)}function Kv(){qv(this,["confirmButton","denyButton","cancelButton"],!0)}function Yv(){Wv(this.getInput(),!1)}function Jv(){Wv(this.getInput(),!0)}function Xv(t){const e=bt.domCache.get(this),s=bt.innerParams.get(this);Is(e.validationMessage,t),e.validationMessage.className=pe["validation-message"],s.customClass&&s.customClass.validationMessage&&at(e.validationMessage,s.customClass.validationMessage),qt(e.validationMessage);const o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",pe["validation-message"]),kv(o),at(o,pe.inputerror))}function Qv(){const t=bt.domCache.get(this);t.validationMessage&&ls(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Ws(e,pe.inputerror))}const $r={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},RA=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],DA={allowEnterKey:void 0},OA=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Zv=t=>Object.prototype.hasOwnProperty.call($r,t),ey=t=>RA.indexOf(t)!==-1,ty=t=>DA[t],IA=t=>{Zv(t)||hs(`Unknown parameter "${t}"`)},LA=t=>{OA.includes(t)&&hs(`The parameter "${t}" is incompatible with toasts`)},BA=t=>{const e=ty(t);e&&yv(t,e)},sy=t=>{t.backdrop===!1&&t.allowOutsideClick&&hs('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&hs(`Invalid theme "${t.theme}"`);for(const e in t)IA(e),t.toast&&LA(e),BA(e)};function oy(t){const e=ms(),s=ot(),o=bt.innerParams.get(this);if(!s||Vo(s,o.hideClass.popup)){hs("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=NA(t),i=Object.assign({},o,n);sy(i),e.dataset.swal2Theme=i.theme,Dv(this,i),bt.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const NA=t=>{const e={};return Object.keys(t).forEach(s=>{ey(s)?e[s]=t[s]:hs(`Invalid parameter to update: ${s}`)}),e};function ny(){const t=bt.domCache.get(this),e=bt.innerParams.get(this);if(!e){ry(this);return}t.popup&&Ne.swalCloseEventFinishedCallback&&(Ne.swalCloseEventFinishedCallback(),delete Ne.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Ne.eventEmitter.emit("didDestroy"),jA(this)}const jA=t=>{ry(t),delete t.params,delete Ne.keydownHandler,delete Ne.keydownTarget,delete Ne.currentInstance},ry=t=>{t.isAwaitingPromise?($d(bt,t),t.isAwaitingPromise=!0):($d(Mr,t),$d(bt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},$d=(t,e)=>{for(const s in t)t[s].delete(e)};var FA=Object.freeze({__proto__:null,_destroy:ny,close:ln,closeModal:ln,closePopup:ln,closeToast:ln,disableButtons:Kv,disableInput:Jv,disableLoading:Jl,enableButtons:Gv,enableInput:Yv,getInput:Hv,handleAwaitingPromise:fa,hideLoading:Jl,rejectPromise:Fv,resetValidationMessage:Qv,showValidationMessage:Xv,update:oy});const UA=(t,e,s)=>{t.toast?zA(t,e,s):(HA(e),qA(e),WA(t,e,s))},zA=(t,e,s)=>{e.popup.onclick=()=>{t&&(VA(t)||t.timer||t.input)||s(qr.close)}},VA=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Xl=!1;const HA=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Xl=!0)}}},qA=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(s){t.popup.onmouseup=()=>{},(s.target===t.popup||s.target instanceof HTMLElement&&t.popup.contains(s.target))&&(Xl=!0)}}},WA=(t,e,s)=>{e.container.onclick=o=>{if(Xl){Xl=!1;return}o.target===e.container&&Bc(t.allowOutsideClick)&&s(qr.backdrop)}},GA=t=>typeof t=="object"&&t.jquery,p0=t=>t instanceof Element||GA(t),KA=t=>{const e={};return typeof t[0]=="object"&&!p0(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((s,o)=>{const n=t[o];typeof n=="string"||p0(n)?e[s]=n:n!==void 0&&or(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof n}`)}),e};function YA(...t){return new this(...t)}function JA(t){class e extends this{_main(o,n){return super._main(o,Object.assign({},t,n))}}return e}const XA=()=>Ne.timeout&&Ne.timeout.getTimerLeft(),iy=()=>{if(Ne.timeout)return iS(),Ne.timeout.stop()},ay=()=>{if(Ne.timeout){const t=Ne.timeout.start();return Nf(t),t}},QA=()=>{const t=Ne.timeout;return t&&(t.running?iy():ay())},ZA=t=>{if(Ne.timeout){const e=Ne.timeout.increase(t);return Nf(e,!0),e}},eT=()=>!!(Ne.timeout&&Ne.timeout.isRunning());let h0=!1;const wu={};function tT(t="data-swal-template"){wu[t]=this,h0||(document.body.addEventListener("click",sT),h0=!0)}const sT=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const s in wu){const o=e.getAttribute(s);if(o){wu[s].fire({template:o});return}}};class oT{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,s){const o=this._getHandlersByEventName(e);o.includes(s)||o.push(s)}once(e,s){const o=(...n)=>{this.removeListener(e,o),s.apply(this,n)};this.on(e,o)}emit(e,...s){this._getHandlersByEventName(e).forEach(o=>{try{o.apply(this,s)}catch(n){console.error(n)}})}removeListener(e,s){const o=this._getHandlersByEventName(e),n=o.indexOf(s);n>-1&&o.splice(n,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Ne.eventEmitter=new oT;const nT=(t,e)=>{Ne.eventEmitter.on(t,e)},rT=(t,e)=>{Ne.eventEmitter.once(t,e)},iT=(t,e)=>{if(!t){Ne.eventEmitter.reset();return}e?Ne.eventEmitter.removeListener(t,e):Ne.eventEmitter.removeAllListeners(t)};var aT=Object.freeze({__proto__:null,argsToParams:KA,bindClickHandler:tT,clickCancel:KS,clickConfirm:Ov,clickDeny:GS,enableLoading:Rr,fire:YA,getActions:ca,getCancelButton:Vr,getCloseButton:Of,getConfirmButton:wo,getContainer:ms,getDenyButton:nr,getFocusableElements:If,getFooter:_v,getHtmlContainer:Rf,getIcon:zr,getIconContent:Z6,getImage:wv,getInputLabel:eS,getLoader:Hr,getPopup:ot,getProgressSteps:Df,getTimerLeft:XA,getTimerProgressBar:jc,getTitle:xv,getValidationMessage:Nc,increaseTimer:ZA,isDeprecatedParameter:ty,isLoading:sS,isTimerRunning:eT,isUpdatableParameter:ey,isValidParameter:Zv,isVisible:WS,mixin:JA,off:iT,on:nT,once:rT,resumeTimer:ay,showLoading:Rr,stopTimer:iy,toggleTimer:QA});class lT{constructor(e,s){this.callback=e,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const s=this.running;return s&&this.stop(),this.remaining+=e,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const ly=["swal-title","swal-html","swal-footer"],cT=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const s=e.content;return bT(s),Object.assign(dT(s),uT(s),fT(s),pT(s),hT(s),gT(s),mT(s,ly))},dT=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(o=>{Zn(o,["name","value"]);const n=o.getAttribute("name"),i=o.getAttribute("value");!n||!i||(typeof $r[n]=="boolean"?e[n]=i!=="false":typeof $r[n]=="object"?e[n]=JSON.parse(i):e[n]=i)}),e},uT=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(o=>{const n=o.getAttribute("name"),i=o.getAttribute("value");!n||!i||(e[n]=new Function(`return ${i}`)())}),e},fT=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(o=>{Zn(o,["type","color","aria-label"]);const n=o.getAttribute("type");!n||!["confirm","cancel","deny"].includes(n)||(e[`${n}ButtonText`]=o.innerHTML,e[`show${Tf(n)}Button`]=!0,o.hasAttribute("color")&&(e[`${n}ButtonColor`]=o.getAttribute("color")),o.hasAttribute("aria-label")&&(e[`${n}ButtonAriaLabel`]=o.getAttribute("aria-label")))}),e},pT=t=>{const e={},s=t.querySelector("swal-image");return s&&(Zn(s,["src","width","height","alt"]),s.hasAttribute("src")&&(e.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(e.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(e.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(e.imageAlt=s.getAttribute("alt")||void 0)),e},hT=t=>{const e={},s=t.querySelector("swal-icon");return s&&(Zn(s,["type","color"]),s.hasAttribute("type")&&(e.icon=s.getAttribute("type")),s.hasAttribute("color")&&(e.iconColor=s.getAttribute("color")),e.iconHtml=s.innerHTML),e},gT=t=>{const e={},s=t.querySelector("swal-input");s&&(Zn(s,["type","label","placeholder","value"]),e.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(e.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(e.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(e.inputValue=s.getAttribute("value")));const o=Array.from(t.querySelectorAll("swal-input-option"));return o.length&&(e.inputOptions={},o.forEach(n=>{Zn(n,["value"]);const i=n.getAttribute("value");if(!i)return;const a=n.innerHTML;e.inputOptions[i]=a})),e},mT=(t,e)=>{const s={};for(const o in e){const n=e[o],i=t.querySelector(n);i&&(Zn(i,[]),s[n.replace(/^swal-/,"")]=i.innerHTML.trim())}return s},bT=t=>{const e=ly.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(s=>{const o=s.tagName.toLowerCase();e.includes(o)||hs(`Unrecognized element <${o}>`)})},Zn=(t,e)=>{Array.from(t.attributes).forEach(s=>{e.indexOf(s.name)===-1&&hs([`Unrecognized attribute "${s.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},cy=10,vT=t=>{const e=ms(),s=ot();typeof t.willOpen=="function"&&t.willOpen(s),Ne.eventEmitter.emit("willOpen",s);const n=window.getComputedStyle(document.body).overflowY;wT(e,s,t),setTimeout(()=>{yT(e,s)},cy),Lf()&&(xT(e,t.scrollbarPadding,n),sA()),!Fc()&&!Ne.previousActiveElement&&(Ne.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(s)),Ne.eventEmitter.emit("didOpen",s),Ws(e,pe["no-transition"])},Ql=t=>{const e=ot();if(t.target!==e)return;const s=ms();e.removeEventListener("animationend",Ql),e.removeEventListener("transitionend",Ql),s.style.overflowY="auto"},yT=(t,e)=>{$v(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Ql),e.addEventListener("transitionend",Ql)):t.style.overflowY="auto"},xT=(t,e,s)=>{oA(),e&&s!=="hidden"&&dA(s),setTimeout(()=>{t.scrollTop=0})},wT=(t,e,s)=>{at(t,s.showClass.backdrop),s.animation?(e.style.setProperty("opacity","0","important"),qt(e,"grid"),setTimeout(()=>{at(e,s.showClass.popup),e.style.removeProperty("opacity")},cy)):qt(e,"grid"),at([document.documentElement,document.body],pe.shown),s.heightAuto&&s.backdrop&&!s.toast&&at([document.documentElement,document.body],pe["height-auto"])};var g0={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function _T(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=g0.email),t.input==="url"&&(t.inputValidator=g0.url))}function kT(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(hs('Target parameter is not valid, defaulting to "body"'),t.target="body")}function CT(t){_T(t),t.showLoaderOnConfirm&&!t.preConfirm&&hs(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),kT(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),hS(t)}let po;var Na=new WeakMap;class Dt{constructor(...e){if(q6(this,Na,void 0),typeof window>"u")return;po=this;const s=Object.freeze(this.constructor.argsToParams(e));this.params=s,this.isAwaitingPromise=!1,W6(Na,this,this._main(po.params))}_main(e,s={}){if(sy(Object.assign({},s,e)),Ne.currentInstance){const i=Mr.swalPromiseResolve.get(Ne.currentInstance),{isAwaitingPromise:a}=Ne.currentInstance;Ne.currentInstance._destroy(),a||i({isDismissed:!0}),Lf()&&Bv()}Ne.currentInstance=po;const o=ET(e,s);CT(o),Object.freeze(o),Ne.timeout&&(Ne.timeout.stop(),delete Ne.timeout),clearTimeout(Ne.restoreFocusTimeout);const n=ST(po);return Dv(po,o),bt.innerParams.set(po,o),$T(po,n,o)}then(e){return r0(Na,this).then(e)}finally(e){return r0(Na,this).finally(e)}}const $T=(t,e,s)=>new Promise((o,n)=>{const i=a=>{t.close({isDismissed:!0,dismiss:a})};Mr.swalPromiseResolve.set(t,o),Mr.swalPromiseReject.set(t,n),e.confirmButton.onclick=()=>{SA(t)},e.denyButton.onclick=()=>{AA(t)},e.cancelButton.onclick=()=>{TA(t,i)},e.closeButton.onclick=()=>{i(qr.close)},UA(s,e,i),YS(Ne,s,i),vA(t,s),vT(s),AT(Ne,s,i),TT(e,s),setTimeout(()=>{e.container.scrollTop=0})}),ET=(t,e)=>{const s=cT(t),o=Object.assign({},$r,e,s,t);return o.showClass=Object.assign({},$r.showClass,o.showClass),o.hideClass=Object.assign({},$r.hideClass,o.hideClass),o.animation===!1&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},ST=t=>{const e={popup:ot(),container:ms(),actions:ca(),confirmButton:wo(),denyButton:nr(),cancelButton:Vr(),loader:Hr(),closeButton:Of(),validationMessage:Nc(),progressSteps:Df()};return bt.domCache.set(t,e),e},AT=(t,e,s)=>{const o=jc();ls(o),e.timer&&(t.timeout=new lT(()=>{s("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(qt(o),Ds(o,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Nf(e.timer)})))},TT=(t,e)=>{if(!e.toast){if(!Bc(e.allowEnterKey)){yv("allowEnterKey"),RT();return}PT(t)||MT(t,e)||xu(-1,1)}},PT=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const s of e)if(s instanceof HTMLElement&&$s(s))return s.focus(),!0;return!1},MT=(t,e)=>e.focusDeny&&$s(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&$s(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&$s(t.confirmButton)?(t.confirmButton.focus(),!0):!1,RT=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Dt.prototype.disableButtons=Kv;Dt.prototype.enableButtons=Gv;Dt.prototype.getInput=Hv;Dt.prototype.disableInput=Jv;Dt.prototype.enableInput=Yv;Dt.prototype.hideLoading=Jl;Dt.prototype.disableLoading=Jl;Dt.prototype.showValidationMessage=Xv;Dt.prototype.resetValidationMessage=Qv;Dt.prototype.close=ln;Dt.prototype.closePopup=ln;Dt.prototype.closeModal=ln;Dt.prototype.closeToast=ln;Dt.prototype.rejectPromise=Fv;Dt.prototype.update=oy;Dt.prototype._destroy=ny;Object.assign(Dt,aT);Object.keys(FA).forEach(t=>{Dt[t]=function(...e){return po&&po[t]?po[t](...e):null}});Dt.DismissReason=qr;Dt.version="11.23.0";const Zt=Dt;Zt.default=Zt;typeof document<"u"&&function(t,e){var s=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=e);else try{s.innerHTML=e}catch{s.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const Ao={background:"#1f2937",color:"#f3f4f6",confirmButtonColor:"#8b5cf6",cancelButtonColor:"#6b7280",customClass:{popup:"swal-dark-popup",title:"swal-dark-title",content:"swal-dark-content",confirmButton:"swal-confirm-button",cancelButton:"swal-cancel-button",input:"swal-dark-input"}},Wr=()=>({showSuccess:(u,f)=>Zt.fire({...Ao,icon:"success",title:u,text:f,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,toast:!0,position:"top-end"}),showError:(u,f)=>Zt.fire({...Ao,icon:"error",title:u,text:f,confirmButtonText:"Entendido"}),showWarning:(u,f)=>Zt.fire({...Ao,icon:"warning",title:u,text:f,confirmButtonText:"Entendido"}),showInfo:(u,f)=>Zt.fire({...Ao,icon:"info",title:u,text:f,confirmButtonText:"Entendido"}),confirmDelete:(u,f="elemento")=>Zt.fire({...Ao,title:"Ests seguro?",html:`
        <p style="color: #d1d5db; margin: 1rem 0;">
          Esta accin eliminar permanentemente <strong style="color: #f87171;">${u}</strong>
        </p>
        <p style="color: #9ca3af; font-size: 0.875rem;">
          Esta accin no se puede deshacer
        </p>
      `,icon:"warning",showCancelButton:!0,confirmButtonText:`S, eliminar ${f}`,cancelButtonText:"Cancelar",reverseButtons:!0,focusCancel:!0}),confirm:(u,f,p="Confirmar")=>Zt.fire({...Ao,title:u,text:f,icon:"question",showCancelButton:!0,confirmButtonText:p,cancelButtonText:"Cancelar",reverseButtons:!0}),showLoading:(u="Procesando...")=>Zt.fire({...Ao,title:u,html:"Por favor espera...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{Zt.showLoading()}}),closeLoading:()=>{Zt.close()},toast:(u,f="info")=>Zt.mixin({...Ao,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:g=>{g.addEventListener("mouseenter",Zt.stopTimer),g.addEventListener("mouseleave",Zt.resumeTimer)}}).fire({icon:f,title:u}),showInput:(u,f,p="text")=>Zt.fire({...Ao,title:u,input:p,inputLabel:f,inputPlaceholder:`Ingresa ${f.toLowerCase()}`,showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",inputValidator:g=>{if(!g)return`${f} es requerido`}})}),DT=()=>{if(typeof document<"u"){const t=document.createElement("style");t.textContent=`
      .swal-dark-popup {
        border: 1px solid rgba(139, 92, 246, 0.3) !important;
        backdrop-filter: blur(10px) !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      .swal-dark-title {
        font-weight: 700 !important;
        font-size: 1.25rem !important;
      }
      
      .swal-dark-content {
        color: #d1d5db !important;
      }
      
      .swal-confirm-button {
        background: linear-gradient(135deg, #8b5cf6, #ec4899) !important;
        border: none !important;
        border-radius: 8px !important;
        padding: 0.75rem 1.5rem !important;
        font-weight: 600 !important;
        transition: all 0.2s ease !important;
        box-shadow: 0 4px 14px 0 rgba(139, 92, 246, 0.3) !important;
      }
      
      .swal-confirm-button:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 8px 25px 0 rgba(139, 92, 246, 0.4) !important;
      }
      
      .swal-cancel-button {
        background: #374151 !important;
        border: 1px solid #4b5563 !important;
        border-radius: 8px !important;
        padding: 0.75rem 1.5rem !important;
        font-weight: 600 !important;
        transition: all 0.2s ease !important;
      }
      
      .swal-cancel-button:hover {
        background: #4b5563 !important;
        transform: translateY(-1px) !important;
      }
      
      .swal-dark-input {
        background: #374151 !important;
        border: 1px solid #4b5563 !important;
        border-radius: 8px !important;
        color: #f3f4f6 !important;
        padding: 0.75rem !important;
      }
      
      .swal-dark-input:focus {
        border-color: #8b5cf6 !important;
        box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1) !important;
        outline: none !important;
      }
      
      .swal2-timer-progress-bar {
        background: linear-gradient(135deg, #8b5cf6, #ec4899) !important;
      }
      
      .swal2-toast.swal2-show {
        backdrop-filter: blur(10px) !important;
        border: 1px solid rgba(139, 92, 246, 0.2) !important;
      }
    `,document.head.appendChild(t)}},ys=et.BASE_URL.replace("/api",""),zc=Gs("boards",()=>{const t=xt(),e=I([]),s=I(null),o=I(null),n=I(!1),i=I(null),a=re(()=>({headers:{Authorization:`Bearer ${t.token}`}})),l=re(()=>{var S;return(S=t.user)!=null&&S._id?e.value.filter(O=>!O.members||!Array.isArray(O.members)?!1:O.members.some(T=>{var L,K,z,F,W,Z;return(L=T==null?void 0:T.userId)!=null&&L._id?T.userId._id===((K=t.user)==null?void 0:K._id):(z=T==null?void 0:T.user)!=null&&z._id?T.user._id===((F=t.user)==null?void 0:F._id):typeof(T==null?void 0:T.userId)=="string"?T.userId===((W=t.user)==null?void 0:W._id):typeof(T==null?void 0:T.user)=="string"?T.user===((Z=t.user)==null?void 0:Z._id):!1})):[]}),c=re(()=>{var S;return((S=s.value)==null?void 0:S.sprints)||[]}),d=re(()=>{var S;return((S=s.value)==null?void 0:S.sprints.find(O=>O.status==="active"))||null});async function u(){var S,O;n.value=!0,i.value=null;try{const T=await Ae.get(`${ys}/api/boards`,a.value);e.value=Array.isArray(T.data)?T.data:[]}catch(T){i.value=((O=(S=T.response)==null?void 0:S.data)==null?void 0:O.message)||"Error al cargar tableros",console.error("Error fetching boards:",T),e.value=[]}finally{n.value=!1}}async function f(S){var O,T;n.value=!0,i.value=null;try{const L=await Ae.get(`${ys}/api/boards/${S}`,a.value);return s.value=L.data,L.data}catch(L){throw i.value=((T=(O=L.response)==null?void 0:O.data)==null?void 0:T.message)||"Error al cargar tablero",console.error("Error fetching board:",L),L}finally{n.value=!1}}async function p(S){var O,T;n.value=!0,i.value=null;try{const L=await Ae.post(`${ys}/api/boards`,S,a.value);return e.value.push(L.data),L.data}catch(L){throw i.value=((T=(O=L.response)==null?void 0:O.data)==null?void 0:T.message)||"Error al crear tablero",console.error("Error creating board:",L),L}finally{n.value=!1}}async function g(S,O){var T,L,K;n.value=!0,i.value=null;try{const z=await Ae.patch(`${ys}/api/boards/${S}`,O,a.value),F=e.value.findIndex(W=>W._id===S);return F!==-1&&(e.value[F]=z.data),((T=s.value)==null?void 0:T._id)===S&&(s.value=z.data),z.data}catch(z){throw i.value=((K=(L=z.response)==null?void 0:L.data)==null?void 0:K.message)||"Error al actualizar tablero",console.error("Error updating board:",z),z}finally{n.value=!1}}async function m(S){var O,T,L;n.value=!0,i.value=null;try{await Ae.delete(`${ys}/api/boards/${S}`,a.value),e.value=e.value.filter(K=>K._id!==S),((O=s.value)==null?void 0:O._id)===S&&(s.value=null)}catch(K){throw i.value=((L=(T=K.response)==null?void 0:T.data)==null?void 0:L.message)||"Error al eliminar tablero",console.error("Error deleting board:",K),K}finally{n.value=!1}}async function v(S,O,T){var L,K,z;try{const F=await Ae.post(`${ys}/api/boards/${S}/members`,{userId:O,role:T},a.value),W=e.value.findIndex(Z=>Z._id===S);return W!==-1&&(e.value[W]=F.data),((L=s.value)==null?void 0:L._id)===S&&(s.value=F.data),F.data}catch(F){throw i.value=((z=(K=F.response)==null?void 0:K.data)==null?void 0:z.message)||"Error al agregar miembro",console.error("Error adding member:",F),F}}async function x(S,O){var T,L,K;try{const z=await Ae.delete(`${ys}/api/boards/${S}/members/${O}`,a.value),F=e.value.findIndex(W=>W._id===S);return F!==-1&&(e.value[F]=z.data),((T=s.value)==null?void 0:T._id)===S&&(s.value=z.data),z.data}catch(z){throw i.value=((K=(L=z.response)==null?void 0:L.data)==null?void 0:K.message)||"Error al eliminar miembro",console.error("Error removing member:",z),z}}async function _(S,O){var T,L,K;try{const z=await Ae.post(`${ys}/api/boards/${S}/sprints`,O,a.value),F=e.value.findIndex(W=>W._id===S);return F!==-1&&(e.value[F]=z.data),((T=s.value)==null?void 0:T._id)===S&&(s.value=z.data),z.data}catch(z){throw i.value=((K=(L=z.response)==null?void 0:L.data)==null?void 0:K.message)||"Error al crear sprint",console.error("Error creating sprint:",z),z}}async function k(S){var O,T;try{const L=await Ae.get(`${ys}/api/boards/${S}/sprints/active`,a.value);return o.value=L.data,L.data}catch(L){throw i.value=((T=(O=L.response)==null?void 0:O.data)==null?void 0:T.message)||"Error al cargar sprint activo",console.error("Error fetching active sprint:",L),L}}async function C(S,O){var T,L,K;try{const z=await Ae.patch(`${ys}/api/boards/${S}/sprints/${O}/activate`,{},a.value),F=e.value.findIndex(W=>W._id===S);return F!==-1&&(e.value[F]=z.data),((T=s.value)==null?void 0:T._id)===S&&(s.value=z.data),z.data}catch(z){throw i.value=((K=(L=z.response)==null?void 0:L.data)==null?void 0:K.message)||"Error al activar sprint",console.error("Error activating sprint:",z),z}}async function P(S,O){var T,L,K;try{const z=await Ae.patch(`${ys}/api/boards/${S}/sprints/${O}/complete`,{},a.value),F=e.value.findIndex(W=>W._id===S);return F!==-1&&(e.value[F]=z.data),((T=s.value)==null?void 0:T._id)===S&&(s.value=z.data),z.data}catch(z){throw i.value=((K=(L=z.response)==null?void 0:L.data)==null?void 0:K.message)||"Error al completar sprint",console.error("Error completing sprint:",z),z}}async function $(S,O,T){var L,K,z;try{const F=await Ae.patch(`${ys}/api/boards/${S}/sprints/${O}`,T,a.value),W=e.value.findIndex(Z=>Z._id===S);return W!==-1&&(e.value[W]=F.data),((L=s.value)==null?void 0:L._id)===S&&(s.value=F.data),F.data}catch(F){throw i.value=((z=(K=F.response)==null?void 0:K.data)==null?void 0:z.message)||"Error al actualizar sprint",console.error("Error updating sprint:",F),F}}async function R(S,O){var T,L,K,z;console.log(" deleteSprint store - boardId:",S,"sprintId:",O);try{const F=await Ae.delete(`${ys}/api/boards/${S}/sprints/${O}`,a.value);console.log(" Sprint eliminado - Response:",F.data);const W=e.value.findIndex(Z=>Z._id===S);return W!==-1&&(e.value[W]=F.data,console.log(" Board actualizado en el store")),((T=s.value)==null?void 0:T._id)===S&&(s.value=F.data,console.log(" currentBoard actualizado")),F.data}catch(F){throw i.value=((K=(L=F.response)==null?void 0:L.data)==null?void 0:K.message)||"Error al eliminar sprint",console.error(" Error en deleteSprint:",((z=F.response)==null?void 0:z.data)||F.message),F}}async function V(S,O,T){var L,K,z;try{const F=await Ae.post(`${ys}/api/boards/${S}/github/connect`,{repoOwner:O,repoName:T},a.value),W=e.value.findIndex(Z=>Z._id===S);return W!==-1&&(e.value[W]=F.data),((L=s.value)==null?void 0:L._id)===S&&(s.value=F.data),F.data}catch(F){throw i.value=((z=(K=F.response)==null?void 0:K.data)==null?void 0:z.message)||"Error al conectar con GitHub",console.error("Error connecting GitHub:",F),F}}function B(S){s.value=S}function E(){e.value=[],s.value=null,o.value=null,n.value=!1,i.value=null}return{boards:e,currentBoard:s,activeSprint:o,loading:n,error:i,myBoards:l,currentBoardSprints:c,currentActiveSprint:d,fetchBoards:u,fetchBoardById:f,createBoard:p,updateBoard:g,deleteBoard:m,addMember:v,removeMember:x,createSprint:_,updateSprint:$,deleteSprint:R,fetchActiveSprint:k,activateSprint:C,completeSprint:P,connectGitHub:V,setCurrentBoard:B,$reset:E}}),Ks=et.BASE_URL.replace("/api",""),Hf=Gs("tasks",()=>{const t=xt(),e=I([]),s=I(null),o=I(!1),n=I(null),i=I({}),a=I(null),l=re(()=>({headers:{Authorization:`Bearer ${t.token}`}})),c=re(()=>{const E={};return e.value.forEach(S=>{E[S.boardStatus]||(E[S.boardStatus]=[]),E[S.boardStatus].push(S)}),E}),d=re(()=>e.value.filter(E=>{var S,O;return((S=E.assignedTo)==null?void 0:S._id)===((O=t.user)==null?void 0:O._id)})),u=re(()=>e.value.filter(E=>E.boardStatus==="backlog"));async function f(E,S){var O,T;o.value=!0,n.value=null;try{const L=new URLSearchParams;E&&L.append("board",E),S!=null&&S.boardStatus&&L.append("boardStatus",S.boardStatus),S!=null&&S.status&&L.append("status",S.status),S!=null&&S.priority&&L.append("priority",S.priority),S!=null&&S.assignedTo&&L.append("assignedTo",S.assignedTo),S!=null&&S.sprint&&L.append("sprint",S.sprint),S!=null&&S.type&&L.append("type",S.type),S!=null&&S.search&&L.append("search",S.search);const K=await Ae.get(`${Ks}/api/tasks?${L.toString()}`,l.value);e.value=K.data}catch(L){n.value=((T=(O=L.response)==null?void 0:O.data)==null?void 0:T.message)||"Error al cargar tareas",console.error("Error fetching tasks:",L)}finally{o.value=!1}}async function p(){var E,S;o.value=!0,n.value=null;try{const O=await Ae.get(`${Ks}/api/tasks/my-tasks`,l.value);e.value=O.data}catch(O){n.value=((S=(E=O.response)==null?void 0:E.data)==null?void 0:S.message)||"Error al cargar mis tareas",console.error("Error fetching my tasks:",O)}finally{o.value=!1}}async function g(E){var S,O;o.value=!0,n.value=null;try{const T=await Ae.get(`${Ks}/api/tasks/${E}`,l.value);return s.value=T.data,T.data}catch(T){throw n.value=((O=(S=T.response)==null?void 0:S.data)==null?void 0:O.message)||"Error al cargar tarea",console.error("Error fetching task:",T),T}finally{o.value=!1}}async function m(E){var S,O;o.value=!0,n.value=null;try{const T=await Ae.post(`${Ks}/api/tasks`,E,l.value);return e.value.push(T.data),T.data}catch(T){throw n.value=((O=(S=T.response)==null?void 0:S.data)==null?void 0:O.message)||"Error al crear tarea",console.error("Error creating task:",T),T}finally{o.value=!1}}async function v(E,S){var O,T,L;o.value=!0,n.value=null;try{const K=await Ae.put(`${Ks}/api/tasks/${E}`,S,l.value),z=e.value.findIndex(F=>F._id===E);return z!==-1&&(e.value[z]=K.data),((O=s.value)==null?void 0:O._id)===E&&(s.value=K.data),K.data}catch(K){throw n.value=((L=(T=K.response)==null?void 0:T.data)==null?void 0:L.message)||"Error al actualizar tarea",console.error("Error updating task:",K),K}finally{o.value=!1}}async function x(E,S,O){var T,L;try{const K=await Ae.patch(`${Ks}/api/tasks/${E}/move`,{boardStatus:S,newIndex:O},l.value),z=e.value.findIndex(F=>F._id===E);return z!==-1&&(e.value[z]=K.data),K.data}catch(K){throw n.value=((L=(T=K.response)==null?void 0:T.data)==null?void 0:L.message)||"Error al mover tarea",console.error("Error moving task:",K),K}}async function _(E){var S,O,T;o.value=!0,n.value=null;try{await Ae.delete(`${Ks}/api/tasks/${E}`,l.value),e.value=e.value.filter(L=>L._id!==E),((S=s.value)==null?void 0:S._id)===E&&(s.value=null)}catch(L){throw n.value=((T=(O=L.response)==null?void 0:O.data)==null?void 0:T.message)||"Error al eliminar tarea",console.error("Error deleting task:",L),L}finally{o.value=!1}}async function k(E,S){var O,T,L;try{const K=await Ae.post(`${Ks}/api/tasks/${E}/comments`,{text:S},l.value),z=e.value.findIndex(F=>F._id===E);return z!==-1&&(e.value[z]=K.data),((O=s.value)==null?void 0:O._id)===E&&(s.value=K.data),K.data}catch(K){throw n.value=((L=(T=K.response)==null?void 0:T.data)==null?void 0:L.message)||"Error al agregar comentario",console.error("Error adding comment:",K),K}}async function C(E,S){var T,L,K;const O=new FormData;O.append("attachment",S);try{const z=await Ae.post(`${Ks}/api/tasks/${E}/attachments`,O,{...l.value,headers:{...l.value.headers,"Content-Type":"multipart/form-data"}}),F=e.value.findIndex(W=>W._id===E);return F!==-1&&(e.value[F]=z.data),((T=s.value)==null?void 0:T._id)===E&&(s.value=z.data),z.data}catch(z){throw n.value=((K=(L=z.response)==null?void 0:L.data)==null?void 0:K.message)||"Error al subir archivo",console.error("Error uploading attachment:",z),z}}async function P(E,S){var O,T,L;try{const K=await Ae.patch(`${Ks}/api/tasks/${E}/github`,S,l.value),z=e.value.findIndex(F=>F._id===E);return z!==-1&&(e.value[z]=K.data),((O=s.value)==null?void 0:O._id)===E&&(s.value=K.data),K.data}catch(K){throw n.value=((L=(T=K.response)==null?void 0:T.data)==null?void 0:L.message)||"Error al sincronizar con GitHub",console.error("Error syncing with GitHub:",K),K}}async function $(E,S){var O,T;try{const L=new URLSearchParams;E&&L.append("board",E),S&&L.append("sprint",S);const K=await Ae.get(`${Ks}/api/tasks/stats/overview?${L.toString()}`,l.value);return a.value=K.data,K.data}catch(L){throw n.value=((T=(O=L.response)==null?void 0:O.data)==null?void 0:T.message)||"Error al cargar estadsticas",console.error("Error fetching stats:",L),L}}function R(E){i.value=E}function V(){i.value={}}function B(){e.value=[],s.value=null,o.value=!1,n.value=null,i.value={},a.value=null}return{tasks:e,currentTask:s,loading:o,error:n,filters:i,stats:a,tasksByBoard:c,myTasks:d,backlogTasks:u,fetchTasks:f,fetchMyTasks:p,fetchTaskById:g,createTask:m,updateTask:v,moveTask:x,deleteTask:_,addComment:k,uploadAttachment:C,syncWithGitHub:P,fetchStats:$,setFilters:R,clearFilters:V,$reset:B}}),To=et.BASE_URL.replace("/api",""),OT=Gs("github",()=>{const t=xt(),e=I([]),s=I([]),o=I([]),n=I([]),i=I(!1),a=I(null),l=re(()=>({headers:{Authorization:`Bearer ${t.token}`}}));async function c(_){var k,C;i.value=!0,a.value=null;try{const P=await Ae.get(`${To}/api/github/repos/${_}`,l.value);return e.value=P.data,P.data}catch(P){throw a.value=((C=(k=P.response)==null?void 0:k.data)==null?void 0:C.message)||"Error al cargar repositorios",console.error("Error fetching repositories:",P),P}finally{i.value=!1}}async function d(_,k){var C,P;i.value=!0,a.value=null;try{const $=await Ae.get(`${To}/api/github/repos/${_}/${k}/branches`,l.value);return s.value=$.data,$.data}catch($){throw a.value=((P=(C=$.response)==null?void 0:C.data)==null?void 0:P.message)||"Error al cargar ramas",console.error("Error fetching branches:",$),$}finally{i.value=!1}}async function u(_,k,C="open"){var P,$;i.value=!0,a.value=null;try{const R=await Ae.get(`${To}/api/github/repos/${_}/${k}/pulls?state=${C}`,l.value);return o.value=R.data,R.data}catch(R){throw a.value=(($=(P=R.response)==null?void 0:P.data)==null?void 0:$.message)||"Error al cargar pull requests",console.error("Error fetching pull requests:",R),R}finally{i.value=!1}}async function f(_,k,C){var P,$;i.value=!0,a.value=null;try{const R=C?`${To}/api/github/repos/${_}/${k}/commits?branch=${C}`:`${To}/api/github/repos/${_}/${k}/commits`,V=await Ae.get(R,l.value);return n.value=V.data,V.data}catch(R){throw a.value=(($=(P=R.response)==null?void 0:P.data)==null?void 0:$.message)||"Error al cargar commits",console.error("Error fetching commits:",R),R}finally{i.value=!1}}async function p(_,k="main",C){var P,$;i.value=!0,a.value=null;try{return(await Ae.post(`${To}/api/github/tasks/${_}/create-branch`,{baseBranch:k,branchName:C},l.value)).data}catch(R){throw a.value=(($=(P=R.response)==null?void 0:P.data)==null?void 0:$.message)||"Error al crear rama",console.error("Error creating branch:",R),R}finally{i.value=!1}}async function g(_,k,C){var P,$;i.value=!0,a.value=null;try{return(await Ae.delete(`${To}/api/github/repos/${_}/${k}/branches/${C}`,l.value)).data}catch(R){throw a.value=(($=(P=R.response)==null?void 0:P.data)==null?void 0:$.error)||"Error al eliminar rama",console.error("Error deleting branch:",R),R}finally{i.value=!1}}async function m(_,k,C){var P,$;i.value=!0,a.value=null;try{return(await Ae.post(`${To}/api/github/tasks/${_}/create-pr`,{title:k,description:C},l.value)).data}catch(R){throw a.value=(($=(P=R.response)==null?void 0:P.data)==null?void 0:$.message)||"Error al crear pull request",console.error("Error creating pull request:",R),R}finally{i.value=!1}}async function v(_){var k,C;i.value=!0,a.value=null;try{return(await Ae.post(`${To}/api/github/boards/${_}/setup-webhook`,{},l.value)).data}catch(P){throw a.value=((C=(k=P.response)==null?void 0:k.data)==null?void 0:C.message)||"Error al configurar webhook",console.error("Error setting up webhook:",P),P}finally{i.value=!1}}function x(){e.value=[],s.value=[],o.value=[],n.value=[],i.value=!1,a.value=null}return{repositories:e,branches:s,pullRequests:o,commits:n,loading:i,error:a,fetchRepositories:c,fetchBranches:d,fetchPullRequests:u,fetchCommits:f,createBranch:p,deleteBranch:g,createPullRequest:m,setupWebhook:v,$reset:x}}),IT={class:"flex flex-wrap gap-2 mb-2"},LT=["src"],BT={class:"whitespace-nowrap",style:{"line-height":"28px","font-size":"13px",height:"28px",display:"inline-flex","align-items":"center","vertical-align":"middle"}},NT=["onClick"],jT={class:"max-h-40 overflow-y-auto"},FT=["onClick","disabled"],UT=["src"],zT={class:"text-xs text-gray-400"},VT={key:1,class:"ml-auto text-green-400"},HT={key:0,class:"text-yellow-400 text-sm mt-1"},dy=Le({__name:"AssignedUsersSelector",props:{modelValue:{},teamMembers:{}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,o=e,n=I(""),i=d=>{s.modelValue.includes(d)||o("update:modelValue",[...s.modelValue,d])},a=d=>{o("update:modelValue",s.modelValue.filter(u=>u!==d))},l=re(()=>n.value?s.teamMembers.filter(d=>d.name.toLowerCase().includes(n.value.toLowerCase())||d.email.toLowerCase().includes(n.value.toLowerCase())):s.teamMembers),c=re(()=>s.modelValue.map(d=>s.teamMembers.find(u=>u._id===d)).filter(Boolean));return(d,u)=>(b(),y("div",null,[r("div",IT,[(b(!0),y(ge,null,xe(c.value,f=>(b(),y("span",{key:f._id,class:"flex items-center px-2 bg-purple-700/80 rounded-full text-white text-xs",style:{height:"28px","min-height":"28px","max-height":"28px","align-items":"center"}},[f.photo?(b(),y("img",{key:0,src:f.photo,class:"rounded-full object-cover",style:{width:"20px",height:"20px","min-width":"20px","min-height":"20px","max-width":"20px","max-height":"20px","margin-right":"6px",display:"inline-block","vertical-align":"middle"}},null,8,LT)):q("",!0),r("span",BT,w(f.name||"Usuario"),1),r("button",{type:"button",onClick:p=>a(f._id),class:"ml-1 text-pink-300 hover:text-pink-500 flex items-center justify-center",style:{height:"20px",width:"20px","line-height":"28px","font-size":"16px",display:"inline-flex","align-items":"center","vertical-align":"middle"}},"  ",8,NT)]))),128))]),ie(r("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>n.value=f),type:"text",placeholder:"Buscar usuario...",class:"w-full px-3 py-2 mb-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[ke,n.value]]),r("div",jT,[(b(!0),y(ge,null,xe(l.value,f=>(b(),y("button",{key:f._id,type:"button",onClick:p=>typeof f._id=="string"&&i(f._id),disabled:typeof f._id!="string"||d.modelValue&&d.modelValue.includes(f._id),class:"flex items-center w-full px-3 py-2 mb-1 bg-gray-700/60 rounded-lg text-white hover:bg-purple-700/80 disabled:opacity-50"},[f.photo?(b(),y("img",{key:0,src:f.photo,class:"w-5 h-5 rounded-full mr-2"},null,8,UT)):q("",!0),r("span",null,[ne(w(f.name)+" ",1),r("span",zT,"("+w(f.email)+")",1)]),typeof f._id=="string"&&d.modelValue&&d.modelValue.includes(f._id)?(b(),y("span",VT,"")):q("",!0)],8,FT))),128))]),d.teamMembers.length===0?(b(),y("p",HT," No hay usuarios disponibles para asignar. ")):q("",!0)]))}}),qT={class:"space-y-3"},WT={class:"grid grid-cols-4 gap-2"},GT=["onClick"],KT={class:"flex gap-3"},YT={class:"flex-1"},JT={class:"relative"},XT={class:"flex-1"},QT={class:"relative"},ZT={key:0,class:"bg-gray-700/50 rounded-lg p-3 border border-gray-600"},e8={class:"flex items-center justify-between"},t8={class:"flex items-center gap-2"},s8={class:"text-white font-medium"},o8={class:"mt-2"},n8={class:"w-full bg-gray-600 rounded-full h-1.5"},r8=Le({__name:"TimeEstimateInput",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,o=e,n=I(0),i=I(0),a=[{value:"15 minutos",label:"15min",icon:"fas fa-bolt"},{value:"30 minutos",label:"30min",icon:"fas fa-clock"},{value:"1 hora",label:"1h",icon:"fas fa-hourglass-half"},{value:"2 horas",label:"2h",icon:"fas fa-hourglass-half"},{value:"4 horas",label:"4h",icon:"fas fa-hourglass"},{value:"1 da",label:"1 da",icon:"fas fa-calendar-day"},{value:"2 das",label:"2 das",icon:"fas fa-calendar-alt"},{value:"1 semana",label:"1 sem",icon:"fas fa-calendar-week"}],l=m=>{o("update:modelValue",m),c(m)},c=m=>{switch(m){case"15 minutos":n.value=0,i.value=15;break;case"30 minutos":n.value=0,i.value=30;break;case"1 hora":n.value=1,i.value=0;break;case"2 horas":n.value=2,i.value=0;break;case"4 horas":n.value=4,i.value=0;break;case"1 da":n.value=8,i.value=0;break;case"2 das":n.value=16,i.value=0;break;case"1 semana":n.value=40,i.value=0;break;default:const v=m.match(/(\d+)\s*(horas?|h)\s*(?:(\d+)\s*(minutos?|min))?/);v&&(n.value=parseInt(v[1])||0,i.value=parseInt(v[3])||0)}},d=()=>{const m=n.value||0,v=i.value||0;if(m===0&&v===0){o("update:modelValue","");return}let x="";m>0&&(x+=`${m} ${m===1?"hora":"horas"}`),v>0&&(x&&(x+=" "),x+=`${v} ${v===1?"minuto":"minutos"}`),o("update:modelValue",x)},u=()=>{o("update:modelValue",""),n.value=0,i.value=0},f=()=>{if(!s.modelValue)return"0%";const m=g(s.modelValue);return m<=15?`${m/15*25}%`:m<=60?`${25+(m-15)/45*25}%`:m<=480?`${50+(m-60)/420*25}%`:`${75+Math.min((m-480)/1440*25,25)}%`},p=()=>{if(!s.modelValue)return"bg-gray-500";const m=g(s.modelValue);return m<=60?"bg-green-500":m<=480?"bg-yellow-500":"bg-red-500"},g=m=>{if(!m)return 0;let v=0;const x=m.match(/(\d+)\s*(?:horas?|h)/);x&&(v+=parseInt(x[1])*60);const _=m.match(/(\d+)\s*(?:minutos?|min)/);_&&(v+=parseInt(_[1]));const k=m.match(/(\d+)\s*(?:das?|da)/);k&&(v+=parseInt(k[1])*8*60);const C=m.match(/(\d+)\s*(?:semanas?|sem)/);return C&&(v+=parseInt(C[1])*5*8*60),v};return Rt(()=>s.modelValue,m=>{m&&!a.some(v=>v.value===m)&&c(m)},{immediate:!0}),(m,v)=>(b(),y("div",qT,[v[10]||(v[10]=r("label",{class:"block text-sm font-medium text-gray-300"},[r("i",{class:"fas fa-clock text-blue-400 mr-1"}),ne(" Tiempo Estimado ")],-1)),r("div",WT,[(b(),y(ge,null,xe(a,x=>r("button",{type:"button",key:x.value,onClick:_=>l(x.value),class:de(["py-2 px-3 text-xs font-medium rounded-lg transition-all duration-200",m.modelValue===x.value?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"])},[r("i",{class:de([x.icon,"mr-1"])},null,2),ne(" "+w(x.label),1)],10,GT)),64))]),v[11]||(v[11]=r("div",{class:"flex items-center gap-3"},[r("div",{class:"flex-1 h-px bg-gray-600"}),r("span",{class:"text-xs text-gray-400"},"o personalizado"),r("div",{class:"flex-1 h-px bg-gray-600"})],-1)),r("div",KT,[r("div",YT,[v[3]||(v[3]=r("label",{class:"block text-xs text-gray-400 mb-1"},"Horas",-1)),r("div",JT,[ie(r("input",{"onUpdate:modelValue":v[0]||(v[0]=x=>n.value=x),onInput:d,type:"number",min:"0",max:"100",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-8",placeholder:"0"},null,544),[[ke,n.value,void 0,{number:!0}]]),v[2]||(v[2]=r("span",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-gray-400"},"h",-1))])]),r("div",XT,[v[6]||(v[6]=r("label",{class:"block text-xs text-gray-400 mb-1"},"Minutos",-1)),r("div",QT,[ie(r("select",{"onUpdate:modelValue":v[1]||(v[1]=x=>i.value=x),onChange:d,class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-8"},[...v[4]||(v[4]=[r("option",{value:"0"},"0",-1),r("option",{value:"15"},"15",-1),r("option",{value:"30"},"30",-1),r("option",{value:"45"},"45",-1)])],544),[[De,i.value,void 0,{number:!0}]]),v[5]||(v[5]=r("span",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-gray-400"},"m",-1))])])]),m.modelValue?(b(),y("div",ZT,[r("div",e8,[v[8]||(v[8]=r("div",{class:"flex items-center gap-2"},[r("i",{class:"fas fa-stopwatch text-green-400"}),r("span",{class:"text-sm text-gray-300"},"Tiempo estimado:")],-1)),r("div",t8,[r("span",s8,w(m.modelValue),1),r("button",{type:"button",onClick:u,class:"text-gray-400 hover:text-red-400 transition-colors",title:"Limpiar"},[...v[7]||(v[7]=[r("i",{class:"fas fa-times text-xs"},null,-1)])])])]),r("div",o8,[v[9]||(v[9]=r("div",{class:"flex text-xs text-gray-500 mb-1"},[r("span",null,"Rpido"),r("span",{class:"ml-auto"},"Largo")],-1)),r("div",n8,[r("div",{class:de(["h-1.5 rounded-full transition-all duration-500",p()]),style:yo({width:f()})},null,6)])])])):q("",!0)]))}}),i8=Et(r8,[["__scopeId","data-v-a3f81aae"]]),a8={class:"p-6"},l8={class:"text-xl font-bold text-white mb-6"},c8=["value"],d8={class:"flex justify-end space-x-3 pt-6"},u8=["disabled"],uy=Le({__name:"ActivityFormModal",props:{activity:{default:null},clients:{},teamMembers:{default:()=>[]}},emits:["close","saved"],setup(t,{emit:e}){const s=t,o=e,n=I(!1),i=re(()=>!!s.activity),a=Ft({title:"",description:"",clientId:"",assignedTo:[],priority:"medium",status:"pending",dueDate:"",estimatedTime:"",date:""}),l=()=>{s.activity?(a.title=s.activity.title,a.description=s.activity.description||"",a.clientId=s.activity.clientId,a.assignedTo=Array.isArray(s.activity.assignedTo)?s.activity.assignedTo:s.activity.assignedTo?[s.activity.assignedTo]:[],a.priority=s.activity.priority||"medium",a.status=s.activity.status,a.dueDate=s.activity.dueDate?c(s.activity.dueDate):"",a.estimatedTime=s.activity.estimatedTime||"",a.date=c(s.activity.date)):a.date=new Date().toISOString().slice(0,16)},c=f=>new Date(f).toISOString().slice(0,16),d=async()=>{var f;n.value=!0;try{const p={title:a.title,description:a.description,clientId:a.clientId,assignedTo:(a.assignedTo||[]).filter(m=>typeof m=="string"&&m),priority:a.priority,status:a.status,dueDate:a.dueDate||void 0,estimatedTime:a.estimatedTime||void 0,date:a.date};console.log(" Form data before submit:",a),console.log(" Activity data to send:",p),console.log(" AssignedTo value:",a.assignedTo);let g;i.value&&((f=s.activity)!=null&&f._id)?g=await Bt.update(s.activity._id,p):g=await Bt.create(p),console.log(" Saved activity:",g),o("saved",g),o("close")}catch(p){console.error("Error saving activity:",p),alert("Error al guardar la actividad. Por favor intenta de nuevo.")}finally{n.value=!1}},u=f=>{f.target===f.currentTarget&&o("close")};return nt(()=>{console.log(" ActivityFormModal mounted"),console.log(" Team members received:",s.teamMembers),console.log(" Team members count:",s.teamMembers.length),l()}),(f,p)=>(b(),y("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:u},[r("div",{class:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:p[10]||(p[10]=Fe(()=>{},["stop"]))},[r("div",a8,[r("h2",l8,w(i.value?"Editar Actividad":"Nueva Actividad"),1),r("form",{onSubmit:Fe(d,["prevent"]),class:"space-y-4"},[r("div",null,[p[11]||(p[11]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Ttulo * ",-1)),ie(r("input",{"onUpdate:modelValue":p[0]||(p[0]=g=>a.title=g),type:"text",required:"",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ttulo de la actividad"},null,512),[[ke,a.title]])]),r("div",null,[p[12]||(p[12]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Descripcin ",-1)),ie(r("textarea",{"onUpdate:modelValue":p[1]||(p[1]=g=>a.description=g),rows:"3",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Descripcin de la actividad"},null,512),[[ke,a.description]])]),r("div",null,[p[14]||(p[14]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Cliente * ",-1)),ie(r("select",{"onUpdate:modelValue":p[2]||(p[2]=g=>a.clientId=g),required:"",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[p[13]||(p[13]=r("option",{value:""},"Seleccionar cliente",-1)),(b(!0),y(ge,null,xe(f.clients,g=>(b(),y("option",{key:g._id,value:g._id},w(g.name)+" - "+w(g.company),9,c8))),128))],512),[[De,a.clientId]])]),r("div",null,[p[15]||(p[15]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Asignar a ",-1)),fe(dy,{modelValue:a.assignedTo,"onUpdate:modelValue":p[3]||(p[3]=g=>a.assignedTo=g),teamMembers:s.teamMembers},null,8,["modelValue","teamMembers"])]),r("div",null,[p[17]||(p[17]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Prioridad ",-1)),ie(r("select",{"onUpdate:modelValue":p[4]||(p[4]=g=>a.priority=g),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...p[16]||(p[16]=[r("option",{value:"low"},"Baja",-1),r("option",{value:"medium"},"Media",-1),r("option",{value:"high"},"Alta",-1),r("option",{value:"urgent"},"Urgente",-1)])],512),[[De,a.priority]])]),r("div",null,[p[19]||(p[19]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Estado ",-1)),ie(r("select",{"onUpdate:modelValue":p[5]||(p[5]=g=>a.status=g),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...p[18]||(p[18]=[r("option",{value:"pending"},"Pendiente",-1),r("option",{value:"completed"},"Completada",-1),r("option",{value:"cancelled"},"Cancelada",-1)])],512),[[De,a.status]])]),r("div",null,[p[20]||(p[20]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Fecha de vencimiento ",-1)),ie(r("input",{"onUpdate:modelValue":p[6]||(p[6]=g=>a.dueDate=g),type:"datetime-local",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[ke,a.dueDate]])]),r("div",null,[fe(i8,{modelValue:a.estimatedTime,"onUpdate:modelValue":p[7]||(p[7]=g=>a.estimatedTime=g)},null,8,["modelValue"])]),r("div",null,[p[21]||(p[21]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Fecha de la actividad * ",-1)),ie(r("input",{"onUpdate:modelValue":p[8]||(p[8]=g=>a.date=g),type:"datetime-local",required:"",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[ke,a.date]])]),r("div",d8,[r("button",{type:"button",onClick:p[9]||(p[9]=g=>f.$emit("close")),class:"px-4 py-2 text-gray-300 hover:text-white transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:n.value,class:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},w(n.value?"Guardando...":i.value?"Actualizar":"Crear"),9,u8)])],32)])])]))}}),f8={class:"p-6"},p8={class:"mb-6 p-4 bg-gray-700/50 rounded-lg border border-gray-600"},h8={class:"flex items-start gap-3"},g8={class:"flex-1"},m8={class:"text-white font-medium mb-1"},b8={class:"text-gray-400 text-sm line-clamp-2"},v8={class:"mt-3 flex items-center gap-4 text-xs text-gray-400"},y8={class:"flex items-center gap-1"},x8={key:0,class:"flex items-center gap-1"},w8={key:0,class:"mb-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg"},_8={class:"flex items-center gap-2 text-blue-300"},k8={class:"text-sm"},C8={class:"mb-6"},$8=["value"],E8={key:1,class:"mb-6 p-3 bg-gray-700/30 rounded-lg border border-gray-600"},S8={class:"flex items-center gap-3"},A8={class:"text-white font-medium"},T8={class:"text-gray-400 text-sm"},P8={key:0,class:"text-gray-500 text-xs"},M8={class:"flex justify-end space-x-3"},R8=["disabled"],D8={key:0,class:"fas fa-spinner fa-spin"},O8={key:1,class:"fas fa-user-check"},I8=Le({__name:"AssignActivityModal",props:{activity:{},teamMembers:{}},emits:["close","assign"],setup(t,{emit:e}){const s=t,o=e,n=I(!1),i=I(""),a=re(()=>i.value?s.teamMembers.find(p=>p._id===i.value):null),l=re(()=>{var g;const p=((g=s.activity)==null?void 0:g.assignedTo)||"";return i.value!==p}),c=p=>p?new Date(p).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"",d=p=>({low:"Baja",medium:"Media",high:"Alta",urgent:"Urgente"})[p]||"Media",u=()=>{l.value&&(n.value=!0,o("assign",i.value||null),setTimeout(()=>{n.value=!1},2e3))},f=p=>{p.target===p.currentTarget&&o("close")};return nt(()=>{var p;i.value=((p=s.activity)==null?void 0:p.assignedTo)||""}),(p,g)=>{var m,v,x,_,k;return b(),y("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:f},[r("div",{class:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md",onClick:g[2]||(g[2]=Fe(()=>{},["stop"]))},[r("div",f8,[g[11]||(g[11]=r("h2",{class:"text-xl font-bold text-white mb-4"},[r("i",{class:"fas fa-user-check mr-2 text-purple-400"}),ne(" Asignar Actividad ")],-1)),r("div",p8,[r("div",h8,[g[5]||(g[5]=r("div",{class:"flex-shrink-0 w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-tasks text-white text-sm"})],-1)),r("div",g8,[r("h3",m8,w((m=p.activity)==null?void 0:m.title),1),r("p",b8,w((v=p.activity)==null?void 0:v.description),1),r("div",v8,[r("div",y8,[g[3]||(g[3]=r("i",{class:"fas fa-calendar"},null,-1)),r("span",null,w(c(((x=p.activity)==null?void 0:x.date)||"")),1)]),(_=p.activity)!=null&&_.priority?(b(),y("div",x8,[g[4]||(g[4]=r("i",{class:"fas fa-exclamation-circle"},null,-1)),r("span",null,w(d(p.activity.priority)),1)])):q("",!0)])])])]),(k=p.activity)!=null&&k.assignedToUser?(b(),y("div",w8,[r("div",_8,[g[7]||(g[7]=r("i",{class:"fas fa-info-circle"},null,-1)),r("span",k8,[g[6]||(g[6]=ne(" Actualmente asignada a: ",-1)),r("strong",null,w(p.activity.assignedToUser.name),1)])])])):q("",!0),r("div",C8,[g[9]||(g[9]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-user mr-1"}),ne(" Asignar a ")],-1)),ie(r("select",{"onUpdate:modelValue":g[0]||(g[0]=C=>i.value=C),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[g[8]||(g[8]=r("option",{value:""},"Sin asignar",-1)),(b(!0),y(ge,null,xe(p.teamMembers,C=>(b(),y("option",{key:C._id,value:C._id},w(C.name)+" - "+w(C.role)+" "+w(C.department?`(${C.department})`:""),9,$8))),128))],512),[[De,i.value]])]),a.value?(b(),y("div",E8,[r("div",S8,[g[10]||(g[10]=r("div",{class:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-user text-white"})],-1)),r("div",null,[r("h4",A8,w(a.value.name),1),r("p",T8,w(a.value.role),1),a.value.department?(b(),y("p",P8,w(a.value.department),1)):q("",!0)])])])):q("",!0),r("div",M8,[r("button",{onClick:g[1]||(g[1]=C=>p.$emit("close")),class:"px-4 py-2 text-gray-300 hover:text-white transition-colors"}," Cancelar "),r("button",{onClick:u,disabled:n.value||!l.value,class:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[n.value?(b(),y("i",D8)):(b(),y("i",O8)),ne(" "+w(n.value?"Asignando...":"Asignar"),1)],8,R8)])])])])}}}),fy=Et(I8,[["__scopeId","data-v-96f434af"]]),L8={class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50"},B8={class:"flex items-center justify-between mb-6"},N8={class:"flex items-center gap-4"},j8={class:"text-2xl font-bold text-white"},F8={class:"flex items-center gap-3"},U8={class:"grid grid-cols-7 gap-1 mb-2"},z8={class:"grid grid-cols-7 gap-1"},V8={class:"flex justify-between items-start mb-2"},H8={key:0,class:"w-2 h-2 bg-blue-500 rounded-full"},q8={key:0,class:"space-y-1"},W8=["onClick","title"],G8={class:"truncate font-medium"},K8={class:"flex items-center gap-1 text-xs opacity-75"},Y8=["onClick"],J8={key:1,class:"absolute bottom-2 right-2"},X8={class:"bg-purple-600 text-white text-xs px-2 py-1 rounded-full"},Q8=Le({__name:"MonthlyCalendar",props:{activities:{},clients:{},teamMembers:{}},emits:["quickTask","viewActivity"],setup(t,{emit:e}){const s=t,o=e,n=I(new Date),i=I(!0),a=re(()=>n.value.getFullYear()),l=re(()=>n.value.getMonth()),c=re(()=>["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][l.value]),d=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],u=re(()=>{const V=a.value,B=l.value,E=new Date(V,B,1),S=new Date(V,B+1,0),O=new Date(E);O.setDate(O.getDate()-E.getDay());const T=new Date(S),L=6-S.getDay();T.setDate(T.getDate()+L);const K=[],z=new Date(O);for(;z<=T;)K.push({date:new Date(z),isCurrentMonth:z.getMonth()===B}),z.setDate(z.getDate()+1);return K}),f=()=>{n.value=new Date(a.value,l.value-1,1)},p=()=>{n.value=new Date(a.value,l.value+1,1)},g=()=>{n.value=new Date},m=()=>{i.value=!i.value},v=V=>{const B=new Date;return V.toDateString()===B.toDateString()},x=V=>{const B=[];return V.isCurrentMonth||B.push("opacity-30"),v(V.date)?B.push("bg-blue-900/30 border-blue-500/50"):B.push("hover:bg-gray-700/30"),B.join(" ")},_=V=>s.activities.filter(B=>new Date(B.date).toDateString()===V.toDateString()),k=V=>{const B="transition-colors";switch(V.status){case"pending":return new Date(V.dueDate||V.date)<new Date?`${B} bg-orange-600/80 text-white border-l-2 border-orange-400`:`${B} bg-yellow-600/80 text-white border-l-2 border-yellow-400`;case"completed":return`${B} bg-green-600/80 text-white border-l-2 border-green-400`;case"cancelled":return`${B} bg-red-600/80 text-white border-l-2 border-red-400`;default:return`${B} bg-gray-600/80 text-white border-l-2 border-gray-400`}},C=V=>{if(!V)return"Sin cliente";if(typeof V=="object"&&V.name)return V.name;if(typeof V=="string"){const B=s.clients.find(E=>E._id===V);return B?B.name:"Cliente no encontrado"}return"Sin cliente"},P=V=>{if(!V||!V.assignedTo||V.assignedTo.length===0)return"Sin asignar";if(Array.isArray(V.assignedTo)){const B=V.assignedTo[0];if(typeof B=="string"){const E=s.teamMembers.find(S=>S._id===B);return(E==null?void 0:E.name)||"Sin asignar"}if(B&&typeof B=="object"&&"name"in B)return B.name}return"Sin asignar"},$=V=>{o("quickTask",V)},R=V=>{o("viewActivity",V)};return(V,B)=>(b(),y("div",L8,[r("div",B8,[r("div",N8,[r("button",{onClick:f,class:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors"},[...B[0]||(B[0]=[r("i",{class:"fas fa-chevron-left"},null,-1)])]),r("h2",j8,w(c.value)+" "+w(a.value),1),r("button",{onClick:p,class:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors"},[...B[1]||(B[1]=[r("i",{class:"fas fa-chevron-right"},null,-1)])])]),r("div",F8,[r("button",{onClick:g,class:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm"},[...B[2]||(B[2]=[r("i",{class:"fas fa-calendar-day mr-2"},null,-1),ne(" Hoy ",-1)])]),r("button",{onClick:m,class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},[B[3]||(B[3]=r("i",{class:"fas fa-eye mr-2"},null,-1)),ne(" "+w(i.value?"Ocultar Tareas":"Ver Tareas"),1)])])]),r("div",U8,[(b(),y(ge,null,xe(d,E=>r("div",{key:E,class:"p-3 text-center text-sm font-medium text-gray-400 border-b border-gray-700"},w(E),1)),64))]),r("div",z8,[(b(!0),y(ge,null,xe(u.value,(E,S)=>(b(),y("div",{key:S,class:de(["min-h-[120px] border border-gray-700/30 rounded-lg p-2 relative",x(E)])},[r("div",V8,[r("span",{class:de(["text-sm font-medium",E.isCurrentMonth?"text-white":"text-gray-500"])},w(E.date.getDate()),3),v(E.date)?(b(),y("div",H8)):q("",!0)]),i.value&&E.isCurrentMonth?(b(),y("div",q8,[(b(!0),y(ge,null,xe(_(E.date),O=>(b(),y("div",{key:O._id,class:de(["px-2 py-1 rounded text-xs cursor-pointer",k(O)]),onClick:T=>R(O),title:`${O.title} - ${C(O.clientId)}`},[r("div",G8,w(O.title),1),r("div",K8,[B[4]||(B[4]=r("i",{class:"fas fa-user",style:{"font-size":"8px"}},null,-1)),r("span",null,w(P(O)),1)])],10,W8))),128)),E.isCurrentMonth?(b(),y("button",{key:0,onClick:O=>$(E.date),class:"w-full mt-1 py-1 text-xs text-gray-400 hover:text-white hover:bg-gray-700/50 rounded border border-dashed border-gray-600 hover:border-gray-500 transition-all duration-200",title:"Agregar tarea rpida"},[...B[5]||(B[5]=[r("i",{class:"fas fa-plus mr-1"},null,-1),ne(" Agregar ",-1)])],8,Y8)):q("",!0)])):!i.value&&E.isCurrentMonth&&_(E.date).length>0?(b(),y("div",J8,[r("span",X8,w(_(E.date).length),1)])):q("",!0)],2))),128))]),B[6]||(B[6]=Es('<div class="flex flex-wrap gap-4 mt-6 pt-4 border-t border-gray-700" data-v-76283aea><div class="flex items-center gap-2" data-v-76283aea><div class="w-3 h-3 bg-yellow-500 rounded" data-v-76283aea></div><span class="text-sm text-gray-300" data-v-76283aea>Pendiente</span></div><div class="flex items-center gap-2" data-v-76283aea><div class="w-3 h-3 bg-green-500 rounded" data-v-76283aea></div><span class="text-sm text-gray-300" data-v-76283aea>Completada</span></div><div class="flex items-center gap-2" data-v-76283aea><div class="w-3 h-3 bg-red-500 rounded" data-v-76283aea></div><span class="text-sm text-gray-300" data-v-76283aea>Cancelada</span></div><div class="flex items-center gap-2" data-v-76283aea><div class="w-3 h-3 bg-orange-500 rounded" data-v-76283aea></div><span class="text-sm text-gray-300" data-v-76283aea>Vencida</span></div></div>',1))]))}}),Z8=Et(Q8,[["__scopeId","data-v-76283aea"]]),e7={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},t7={class:"bg-gray-800 rounded-lg p-6 w-full max-w-md border border-gray-700"},s7={class:"flex justify-between items-center mb-4"},o7={class:"space-y-4"},n7={class:"bg-gray-700/50 rounded-lg p-3 border border-gray-600"},r7={class:"space-y-2 text-sm text-gray-400"},i7={class:"flex justify-between"},a7={class:"text-white"},l7={class:"flex justify-between"},c7={class:"text-white"},d7={class:"flex justify-between"},u7={class:"text-white"},f7={class:"flex gap-2"},p7=["onClick"],h7={class:"flex gap-3 mt-6"},g7=["disabled"],m7={key:0,class:"fas fa-spinner fa-spin mr-2"},b7={key:1,class:"fas fa-lightning-bolt mr-2"},v7=Le({__name:"QuickTaskModal",props:{selectedDate:{}},emits:["close","create"],setup(t,{emit:e}){const s=t,o=e,n=xt(),i=I(!1),a=I(),l=I({title:"",description:"",priority:"medium"}),c=re(()=>n.user),d=re(()=>{const g=new Date(s.selectedDate);return g.setDate(g.getDate()+2),g}),u=[{value:"low",label:"Baja",activeClass:"bg-blue-600 text-white"},{value:"medium",label:"Media",activeClass:"bg-yellow-600 text-white"},{value:"high",label:"Alta",activeClass:"bg-orange-600 text-white"},{value:"urgent",label:"Urgente",activeClass:"bg-red-600 text-white"}],f=g=>g.toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),p=async()=>{var g,m;if(l.value.title.trim()){i.value=!0;try{const v={title:l.value.title.trim(),description:l.value.description.trim()||`Tarea creada rpidamente para ${f(s.selectedDate)}`,date:s.selectedDate.toISOString(),dueDate:d.value.toISOString(),status:"pending",priority:l.value.priority,assignedTo:((g=c.value)==null?void 0:g._id)||null,clientId:null,estimatedTime:"2 horas",createdBy:((m=c.value)==null?void 0:m._id)||null};o("create",v)}catch(v){console.error("Error creating quick task:",v)}finally{i.value=!1}}};return nt(async()=>{var g;await _s(),(g=a.value)==null||g.focus()}),(g,m)=>{var v;return b(),y("div",e7,[r("div",t7,[r("div",s7,[m[5]||(m[5]=r("h3",{class:"text-lg font-semibold text-white"},[r("i",{class:"fas fa-lightning-bolt text-yellow-400 mr-2"}),ne(" Tarea Rpida ")],-1)),r("button",{onClick:m[0]||(m[0]=x=>g.$emit("close")),class:"text-gray-400 hover:text-white transition-colors"},[...m[4]||(m[4]=[r("i",{class:"fas fa-times"},null,-1)])])]),r("form",{onSubmit:Fe(p,["prevent"])},[r("div",o7,[r("div",null,[m[6]||(m[6]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[ne(" Ttulo de la tarea "),r("span",{class:"text-red-400"},"*")],-1)),ie(r("input",{"onUpdate:modelValue":m[1]||(m[1]=x=>l.value.title=x),type:"text",ref_key:"titleInput",ref:a,class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Qu necesitas hacer?",required:""},null,512),[[ke,l.value.title]])]),r("div",null,[m[7]||(m[7]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Descripcin (opcional) ",-1)),ie(r("textarea",{"onUpdate:modelValue":m[2]||(m[2]=x=>l.value.description=x),rows:"2",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Detalles adicionales..."},null,512),[[ke,l.value.description]])]),r("div",n7,[m[13]||(m[13]=r("h4",{class:"text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-magic text-purple-400 mr-1"}),ne(" Configuracin automtica: ")],-1)),r("div",r7,[r("div",i7,[m[8]||(m[8]=r("span",null," Fecha:",-1)),r("span",a7,w(f(g.selectedDate)),1)]),r("div",l7,[m[9]||(m[9]=r("span",null," Vencimiento:",-1)),r("span",c7,w(f(d.value))+" (2 das)",1)]),r("div",d7,[m[10]||(m[10]=r("span",null," Asignado a:",-1)),r("span",u7,w(((v=c.value)==null?void 0:v.name)||"Ti mismo"),1)]),m[11]||(m[11]=r("div",{class:"flex justify-between"},[r("span",null," Cliente:"),r("span",{class:"text-gray-300"},"Se asignar despus")],-1)),m[12]||(m[12]=r("div",{class:"flex justify-between"},[r("span",null," Estado:"),r("span",{class:"text-yellow-300"},"Pendiente")],-1))])]),r("div",null,[m[14]||(m[14]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Prioridad ",-1)),r("div",f7,[(b(),y(ge,null,xe(u,x=>r("button",{type:"button",key:x.value,onClick:_=>l.value.priority=x.value,class:de(["flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all duration-200",l.value.priority===x.value?x.activeClass:"bg-gray-700 text-gray-300 hover:bg-gray-600"])},w(x.label),11,p7)),64))])])]),r("div",h7,[r("button",{type:"button",onClick:m[3]||(m[3]=x=>g.$emit("close")),class:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:!l.value.title.trim()||i.value,class:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-md hover:from-purple-700 hover:to-pink-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(b(),y("i",m7)):(b(),y("i",b7)),ne(" "+w(i.value?"Creando...":"Crear Tarea"),1)],8,g7)])],32)])])}}}),y7=Et(v7,[["__scopeId","data-v-f832d068"]]),x7={class:"flex items-center gap-2 min-w-0"},w7=["title"],_7=["src","alt"],k7=["src"],C7={key:2},$7={class:"text-xs text-gray-300 truncate"},tn=Le({__name:"AvatarInline",props:{name:{default:""},photo:{default:""},avatar:{default:""}},setup(t){const e=t,s=I(!1),o=re(()=>!e.photo||s.value?"":e.photo),n=re(()=>{const c=o.value;return c?/^https?:\/\//i.test(c)?c:`${String(et.BASE_URL).replace(/\/?api\/?$/i,"").replace(/\/$/,"")}/${c.replace(/^\//,"")}`:""}),i=re(()=>e.avatar?Lc(e.avatar)||Fl():null),a=re(()=>{var d;const c=((d=e.name)==null?void 0:d.trim())||"";return c?c.split(" ").map(u=>u[0]).join("").toUpperCase().slice(0,2):"U"}),l=()=>{s.value=!0};return _i(()=>{s.value=!1}),(c,d)=>(b(),y("div",x7,[r("div",{class:"flex-shrink-0 w-5 h-5 rounded-full overflow-hidden border border-gray-600 bg-gray-700 text-[10px] flex items-center justify-center text-white",title:c.name},[i.value?(b(),y("img",{key:0,src:i.value.path,alt:i.value.name,class:"w-full h-full object-cover"},null,8,_7)):o.value?(b(),y("img",{key:1,src:n.value,alt:"avatar",class:"w-full h-full object-cover",onError:l},null,40,k7)):(b(),y("span",C7,w(a.value),1))],8,w7),r("span",$7,w(c.name||"Sin asignar"),1)]))}}),E7={class:"space-y-6"},S7={class:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between"},A7={class:"flex items-center gap-3 flex-wrap"},T7={class:"flex bg-gray-700 rounded-lg p-1"},P7={key:0,class:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 backdrop-blur-sm rounded-xl p-4 border border-yellow-500/30 relative"},M7={class:"flex items-center gap-4"},R7={class:"flex items-center gap-2 text-yellow-300"},D7={class:"flex items-center text-xs bg-yellow-600/20 px-2 py-1 rounded"},O7={class:"flex-1 relative"},I7={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-gray-900 border border-gray-700 rounded-md p-2 text-xs text-gray-400 z-20"},L7=["disabled"],B7={class:"relative"},N7={key:1,class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-3 sm:p-4 border border-gray-700/50"},j7={class:"flex flex-wrap gap-3 sm:gap-4 items-center"},F7={class:"flex-1 min-w-64"},U7=["value"],z7={class:"flex-1 min-w-48"},V7={key:2},H7={key:3,class:"flex gap-4 h-[calc(100vh-280px)]"},q7={class:"flex-1 space-y-4 overflow-hidden"},W7={class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-3 border border-gray-700/50"},G7={class:"flex items-center justify-between gap-4"},K7={class:"flex items-center gap-3 flex-1"},Y7=["value"],J7=["value"],X7={class:"relative z-50"},Q7={key:0,class:"ml-1 text-xs bg-white text-purple-600 rounded-full px-1.5"},Z7={class:"flex items-center gap-2"},eP={key:0,class:"bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50 overflow-hidden"},tP={class:"p-4 overflow-y-auto max-h-[calc(100vh-420px)]"},sP={class:"group hover:bg-purple-500/5 rounded transition-colors"},oP={class:"flex items-center gap-2 py-2 px-3 border-l-2 border-purple-500"},nP=["onClick"],rP={class:"text-xs font-mono text-purple-300"},iP={class:"flex-1 min-w-0"},aP={class:"text-sm font-medium text-white"},lP={class:"flex items-center gap-3 text-xs text-gray-400"},cP={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100"},dP=["onClick"],uP=["onClick"],fP=["onClick"],pP=["onClick"],hP={key:0,class:"ml-6"},gP={class:"group hover:bg-blue-500/5 rounded transition-colors"},mP={class:"flex items-center gap-2 py-1.5 px-3 border-l-2 border-blue-500"},bP=["onClick"],vP={class:"text-xs font-mono text-blue-300"},yP={class:"flex-1 min-w-0"},xP={class:"text-sm text-gray-200"},wP={class:"flex items-center gap-2 text-xs text-gray-400"},_P={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100"},kP=["onClick"],CP=["onClick"],$P=["onClick"],EP=["onClick"],SP={key:0,class:"ml-6"},AP={class:"group hover:bg-green-500/5 rounded transition-colors"},TP={class:"flex items-center gap-2 py-1.5 px-3 border-l-2 border-green-500"},PP=["onClick"],MP={class:"text-xs font-mono text-green-300"},RP={class:"flex-1 min-w-0"},DP={class:"text-sm text-gray-200"},OP={class:"flex items-center gap-2 text-xs text-gray-400"},IP={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100"},LP=["onClick"],BP=["onClick"],NP=["onClick"],jP=["onClick"],FP={key:0,class:"ml-6"},UP={class:"group hover:bg-gray-500/5 rounded transition-colors"},zP={class:"flex items-center gap-2 py-1 px-3 border-l border-gray-500"},VP={class:"text-xs font-mono text-gray-400"},HP={class:"flex-1 min-w-0"},qP={class:"text-sm text-gray-300"},WP={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100"},GP=["onClick"],KP=["onClick"],YP=["onClick"],JP={key:0,class:"mb-4"},XP={class:"flex items-center gap-2 mb-3 px-2"},QP={class:"text-xs text-gray-500"},ZP={class:"space-y-1"},eM={class:"flex items-center gap-2 py-1.5 px-3 border-l border-gray-500"},tM={class:"text-xs font-mono text-gray-400"},sM={class:"flex-1 min-w-0"},oM={class:"text-sm text-gray-300"},nM={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100"},rM=["onClick"],iM=["onClick"],aM=["onClick"],lM={key:1,class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-12 border border-gray-700/50 text-center"},cM={class:"bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] shadow-2xl border border-blue-500/20 flex flex-col overflow-hidden"},dM={class:"p-4 border-b border-gray-700/50 flex items-center justify-between bg-gray-900/50"},uM={class:"flex items-center gap-3"},fM={class:"text-sm font-medium text-blue-400"},pM={class:"flex items-center gap-2"},hM={class:"flex-1 overflow-y-auto p-4 space-y-4"},gM={class:"text-lg font-bold text-white mb-2"},mM={class:"text-sm text-gray-400"},bM={class:"grid grid-cols-2 gap-3"},vM={key:0,class:"flex items-center gap-3 p-3 bg-gray-700/50 rounded-lg"},yM={class:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium"},xM={class:"text-sm font-medium text-white"},wM={class:"text-xs text-gray-400"},_M={key:1,class:"text-sm text-gray-500 p-3 bg-gray-700/30 rounded-lg"},kM={class:"grid grid-cols-2 gap-3"},CM={key:0},$M=["value"],EM={key:1},SM={class:"text-sm text-blue-400"},AM={class:"border-t border-gray-700/50 pt-4"},TM={key:0,class:"mb-3"},PM={class:"flex items-center gap-2 p-3 bg-green-900/20 border border-green-500/30 rounded-lg"},MM={class:"text-sm text-green-300 flex-1"},RM={key:1,class:"space-y-3"},DM={key:2,class:"mt-3 space-y-2"},OM=["href"],IM={class:"border-t border-gray-700/50 pt-4"},LM={class:"space-y-3 mb-3"},BM={class:"flex items-center gap-2 mb-2"},NM={class:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white"},jM={class:"text-xs font-medium text-white"},FM={class:"text-xs text-gray-500"},UM={class:"text-sm text-gray-300"},zM={class:"flex gap-2"},VM={class:"bg-gray-800 rounded-xl border border-gray-700 p-6 max-w-md w-full mx-4"},HM={class:"space-y-4"},qM=["value"],WM={class:"text-sm font-medium text-gray-300 mb-2 block"},GM={class:"py-4 flex items-center justify-center gap-4"},KM={class:"flex flex-col items-center"},YM={class:"text-xs text-gray-400 mt-2"},JM={class:"flex flex-col items-center"},XM={class:"text-xs text-gray-400 mt-2 text-center max-w-[120px] truncate"},QM={class:"flex gap-3 mt-6"},ZM=["disabled"],eR={key:4,class:"flex items-center justify-center py-12"},tR={key:5,class:"bg-red-500/20 border border-red-500/50 rounded-lg p-4"},sR={class:"flex items-center gap-3"},oR={class:"text-red-400 text-sm"},nR={key:6,class:"grid grid-cols-1 gap-3 sm:gap-4 md:grid-cols-2 xl:grid-cols-4"},rR={class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-3 sm:p-4 border border-yellow-500/20 w-full snap-start"},iR={class:"flex items-center gap-3 mb-4"},aR={class:"bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded-full text-xs font-medium"},lR=["onDragstart"],cR={class:"flex items-start justify-between gap-2 mb-3 min-w-0"},dR={class:"flex flex-wrap items-center gap-2 flex-1 min-w-0"},uR={class:"text-white font-semibold text-[13px] sm:text-sm leading-tight flex-1 min-w-0 break-words whitespace-normal"},fR={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"},pR=["onClick"],hR=["onClick"],gR=["onClick"],mR={class:"text-gray-400 text-xs mb-2"},bR={class:"text-gray-300 text-[13px] sm:text-sm mb-3 line-clamp-2"},vR={class:"flex items-center gap-2 mb-3 flex-wrap"},yR=["onClick"],xR={class:"flex items-center justify-between text-xs text-gray-400"},wR={class:"flex items-center gap-1"},_R={key:0,class:"flex items-center gap-1"},kR={key:0,class:"mt-2 flex items-center gap-1 text-xs"},CR={key:0,class:"text-center py-8"},$R={class:"mt-3 px-2"},ER={class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-3 sm:p-4 border border-blue-500/20 w-full snap-start"},SR={class:"flex items-center gap-3 mb-4"},AR={class:"bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full text-xs font-medium"},TR=["onDragstart"],PR={class:"flex items-start justify-between gap-2 mb-3 min-w-0"},MR={class:"flex flex-wrap items-center gap-2 flex-1 min-w-0"},RR={class:"text-white font-semibold text-[13px] sm:text-sm leading-tight flex-1 min-w-0 break-words whitespace-normal"},DR={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"},OR=["onClick"],IR=["onClick"],LR=["onClick"],BR={class:"text-gray-400 text-xs mb-2"},NR={class:"text-gray-300 text-[13px] sm:text-sm mb-3 line-clamp-2"},jR={class:"flex items-center gap-2 mb-3"},FR=["onClick"],UR={class:"flex items-center justify-between text-xs text-gray-400"},zR={class:"flex items-center gap-1"},VR={key:0,class:"flex items-center gap-1"},HR={key:0,class:"mt-2 flex items-center gap-1 text-xs"},qR={key:0,class:"text-center py-8"},WR={class:"mt-3 px-2"},GR={class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-3 sm:p-4 border border-green-500/20 w-full snap-start"},KR={class:"flex items-center gap-3 mb-4"},YR={class:"bg-green-500/20 text-green-300 px-2 py-1 rounded-full text-xs font-medium"},JR=["onDragstart"],XR={class:"flex items-start justify-between gap-2 mb-3 min-w-0"},QR={class:"flex flex-wrap items-center gap-2 flex-1 min-w-0"},ZR={class:"text-white font-semibold text-[13px] sm:text-sm leading-tight flex-1 min-w-0 break-words whitespace-normal"},eD={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"},tD=["onClick"],sD=["onClick"],oD=["onClick"],nD={class:"text-gray-400 text-xs mb-2"},rD={class:"text-gray-300 text-[13px] sm:text-sm mb-3 line-clamp-2"},iD={class:"flex items-center gap-2 mb-3"},aD={class:"flex items-center justify-between text-xs text-gray-400"},lD={class:"flex items-center gap-1"},cD={key:0,class:"text-center py-8"},dD={class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-3 sm:p-4 border border-red-600/30 w-full snap-start"},uD={class:"flex items-center gap-3 mb-4"},fD={class:"bg-red-600/20 text-red-300 px-2 py-1 rounded-full text-xs font-medium"},pD=["onDragstart"],hD={class:"flex items-start justify-between gap-2 mb-3 min-w-0"},gD={class:"flex flex-wrap items-center gap-2 flex-1 min-w-0"},mD={class:"text-white font-semibold text-[13px] sm:text-sm leading-tight flex-1 min-w-0 break-words whitespace-normal"},bD={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"},vD=["onClick"],yD=["onClick"],xD=["onClick"],wD=["onClick"],_D={class:"text-gray-400 text-xs mb-2"},kD={class:"text-gray-300 text-[13px] sm:text-sm mb-3 line-clamp-2"},CD={class:"flex items-center gap-2 mb-3"},$D=["onClick"],ED={class:"flex items-center justify-between text-xs text-gray-400 mb-2"},SD={class:"flex items-center gap-1"},AD={key:0,class:"flex items-center gap-1"},TD={key:0,class:"flex items-center gap-1 text-xs"},PD={class:"text-red-400 font-medium"},MD={class:"text-xs text-red-300 ml-2"},RD={key:0,class:"text-center py-8"},DD={key:7,class:"text-center py-12"},OD={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-purple-500/20"},ID={class:"text-gray-400 mb-6"},LD={key:0,class:"fixed inset-0 z-[99999] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},BD={class:"flex min-h-full items-center justify-center p-4"},ND={class:"relative bg-gray-800 rounded-2xl shadow-2xl border border-gray-600 w-full max-w-md transform transition-all"},jD={class:"flex items-center justify-between p-6 border-b border-gray-700"},FD={class:"p-6 space-y-6"},UD={class:"grid grid-cols-4 gap-2"},zD=["onClick"],VD={class:"grid grid-cols-2 gap-2"},HD=["onClick"],qD={class:"grid grid-cols-3 gap-2"},WD=["onClick"],GD={class:"bg-gray-750 rounded-xl p-4 border border-gray-600"},KD={class:"flex items-center gap-3 cursor-pointer"},YD={class:"relative"},JD={class:"flex items-center justify-between gap-3 p-6 border-t border-gray-700 bg-gray-750 rounded-b-2xl"},XD={class:"flex gap-3"},QD={class:"bg-gray-800 rounded-2xl p-6 w-full max-w-2xl shadow-2xl border border-green-500/20 max-h-[90vh] overflow-y-auto"},ZD={class:"text-xl font-bold text-white mb-4"},eO={class:"grid grid-cols-2 gap-4"},tO={class:"col-span-2"},sO={class:"col-span-2"},oO={key:0},nO=["value"],rO={key:1},iO=["value"],aO={key:2},lO=["value"],cO=["value"],dO={key:3},uO=["value"],fO=["value"],pO={key:4},hO={class:"col-span-2"},gO={class:"col-span-2"},mO={class:"flex justify-end space-x-3 mt-6"},bO=["disabled"],vO={class:"bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-purple-500/20"},yO={key:0,class:"mb-3 p-2 bg-green-500/10 border border-green-500/30 rounded text-xs text-green-400"},xO={class:"mb-4"},wO={class:"mb-4"},_O={key:0,class:"mb-3 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg"},kO=["disabled"],CO={value:""},$O=["value"],EO={class:"mb-4"},SO={class:"flex justify-end space-x-3"},AO=["disabled"],TO={class:"bg-gray-800 rounded-2xl p-6 w-full max-w-2xl shadow-2xl border border-blue-500/20 max-h-[90vh] overflow-y-auto"},PO={class:"flex items-center justify-between mb-6"},MO={key:0,class:"mb-6 p-4 bg-gray-700/30 rounded-lg border border-gray-600/50"},RO={class:"flex items-start justify-between"},DO={class:"flex items-center gap-2 mb-2"},OO={class:"font-medium text-white"},IO={key:0,class:"flex items-center gap-2 text-sm text-gray-300"},LO={key:0,class:"text-gray-400"},BO={class:"text-right"},NO={class:"text-2xl font-bold text-blue-400"},jO={class:"mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg"},FO={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},UO={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},zO=["disabled"],VO={class:"space-y-3"},HO={key:0,class:"text-center py-8 text-gray-400"},qO={key:1,class:"space-y-2"},WO={class:"flex items-start justify-between mb-2"},GO={class:"flex-1"},KO={class:"flex items-center gap-2 mb-1"},YO={class:"font-medium text-white"},JO={key:0,class:"text-sm text-gray-400 mb-2"},XO={class:"flex items-center gap-4 text-xs text-gray-400"},QO={key:0},ZO={class:"flex items-center gap-2"},e9=["onClick"],t9={class:"mt-6 flex justify-end"},s9=["value"],o9={key:0},n9={class:"flex flex-wrap gap-1 max-h-24 overflow-y-auto"},r9=["onClick"],i9={class:"bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-red-500/30 max-h-[90vh] overflow-y-auto"},a9={class:"flex flex-col items-center text-center mb-6"},l9={class:"text-red-400 font-semibold text-base mt-2 break-words max-w-full"},c9={key:0,class:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-4"},d9={class:"space-y-2.5"},u9={key:0,class:"flex items-center justify-between bg-gray-900/50 rounded px-3 py-2"},f9={class:"text-white font-semibold"},p9={key:1,class:"flex items-center justify-between bg-gray-900/50 rounded px-3 py-2"},h9={class:"text-white font-semibold"},g9={key:2,class:"flex items-center justify-between bg-gray-900/50 rounded px-3 py-2"},m9={class:"text-white font-semibold"},b9={class:"border-t border-red-500/30 pt-3 mt-3"},v9={class:"flex items-center justify-between font-bold bg-red-500/20 rounded px-3 py-2"},y9={class:"text-red-400 text-lg"},x9={class:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4"},w9={class:"flex items-start gap-2"},_9={class:"text-yellow-200 text-xs leading-relaxed"},k9={class:"flex flex-col-reverse sm:flex-row gap-3"},C9={key:0,class:"ml-1 font-normal text-xs"},$9=Le({__name:"ActivitiesView",props:{searchTerm:{default:""}},emits:["create","edit"],setup(t,{expose:e,emit:s}){const o=t,{showSuccess:n,showError:i,confirmDelete:a,toast:l,showLoading:c,closeLoading:d}=Wr(),u=xt(),f=zc(),p=Hf(),g=OT(),m=et.BASE_URL.replace("/api",""),v=I([]),x=I([]),_=I([]),k=I(!0),C=I(!0),P=I(null),$=I(null),R=I(!1),V=I("tasks"),B=I(""),E=I(!1),S=I(!1),O=I(new Set),T=I(new Set),L=I(new Set),K=I({dueDays:2,priority:"medium",estimatedTime:"2 horas",autoAssign:!0}),z=I(""),F=I(""),W=I(!1),Z=I(null),le=I({}),J=I({boardStatus:"",priority:"",type:"",assignedTo:"",tags:[]}),Pe=I(!1),me=I(!1),Y=I(null),j=I(!1),Q=I(null),se=I(!1),D=I(!1),H=I({name:"",description:"",type:"scrum",clientId:""}),ee=I(!1),he=I({name:"",goal:"",startDate:"",endDate:""}),Oe=I(!1),N=I({taskId:"",taskTitle:"",taskType:"",features:0,stories:0,tasks:0,total:0}),G=I(!1),te=I(null),X=I(!1),U=I(null),ae=re(()=>{let M=v.value;if(o.searchTerm){const h=o.searchTerm.toLowerCase();M=M.filter(ce=>{var we;return ce.title.toLowerCase().includes(h)||((we=ce.description)==null?void 0:we.toLowerCase().includes(h))||Xr(ce.clientId).toLowerCase().includes(h)})}return z.value&&z.value!=="all"&&(M=M.filter(h=>z.value==="unassigned"?!h.assignedTo||h.assignedTo.length===0:!h.assignedTo||h.assignedTo.length===0?!1:Array.isArray(h.assignedTo)&&typeof h.assignedTo[0]=="object"?h.assignedTo.some(ce=>ce._id===z.value):Array.isArray(h.assignedTo)&&typeof h.assignedTo[0]=="string"?h.assignedTo.includes(z.value):!1)),F.value&&F.value!=="all"&&(M=M.filter(h=>h.status===F.value)),M}),$e=re(()=>ae.value.filter(M=>M.status==="pending")),Ce=re(()=>ae.value.filter(M=>M.status==="in-progress")),oe=re(()=>ae.value.filter(M=>M.status==="completed")),be=re(()=>ae.value.filter(M=>M.status==="overdue")),Re=M=>{if(!M)return{name:"Sin asignar",photo:"",avatar:""};if(typeof M=="object"&&M.name)return{name:M.name,photo:M.photo||"",avatar:M.avatar||""};if(typeof M=="string"){const h=_.value.find(ce=>ce._id===M);return{name:(h==null?void 0:h.name)||"Sin asignar",photo:(h==null?void 0:h.photo)||"",avatar:(h==null?void 0:h.avatar)||""}}return{name:"Sin asignar",photo:"",avatar:""}},Ee=async()=>{k.value=!0;try{if(v.value=await Bt.getAll(),console.log(" Activities loaded:",v.value.length),await f.fetchBoards(),console.log(" Boards loaded:",f.myBoards.length),f.myBoards.length>0){const M=f.myBoards[0];await p.fetchTasks(M._id),console.log(" Tasks loaded:",p.tasks.length)}}catch(M){console.error(" Error loading activities:",M),P.value=M instanceof Error?M.message:"Error desconocido"}finally{k.value=!1}},Ie=async()=>{try{const M=new Date,h=v.value.filter(ce=>ce.dueDate&&new Date(ce.dueDate)<M&&ce.status!=="completed"&&ce.status!=="cancelled"&&ce.status!=="overdue");for(const ce of h)if(ce._id){await Bt.updateStatus(ce._id,"overdue");const we=v.value.findIndex(Me=>Me._id===ce._id);we!==-1&&(v.value[we].status="overdue")}h.length>0&&console.log(` Se actualizaron ${h.length} actividades vencidas`)}catch(M){console.error(" Error al actualizar actividades vencidas:",M)}},je=async()=>{var M,h;if(console.log(" Iniciando carga de miembros del equipo..."),console.log(" Usuario actual:",(M=u.user)==null?void 0:M.name,"- Rol:",(h=u.user)==null?void 0:h.role),console.log(" Puede ver equipo:",u.canViewTeam),!u.canViewTeam){console.log(" Usuario no tiene permisos para ver el equipo");return}try{console.log(" Cargando miembros del equipo..."),_.value=await Vl.getActiveMembers(),console.log(" Miembros del equipo cargados:",_.value)}catch(ce){console.error(" Error loading team members:",ce);try{console.log(" Intentando cargar todos los miembros...");const we=await Vl.getAll();_.value=we.filter(Me=>Me.isActive),console.log(" Miembros activos filtrados:",_.value)}catch(we){console.error(" Error loading all team members:",we)}}},We=async()=>{C.value=!0;try{x.value=await go.getAll(),console.log(" Clientes cargados:",x.value.length,x.value)}catch(M){console.error(" Error loading clients:",M)}finally{C.value=!1}},ut=async M=>{try{await Bt.updateStatus(M,"completed");const h=v.value.findIndex(ce=>ce._id===M);h!==-1&&(v.value[h].status="completed"),l("Actividad marcada como completada","success")}catch(h){i("Error al completar actividad",h instanceof Error?h.message:"Error desconocido")}},rt=async M=>{try{await Bt.updateStatus(M,"pending");const h=v.value.findIndex(ce=>ce._id===M);h!==-1&&(v.value[h].status="pending"),l("Actividad marcada como pendiente","success")}catch(h){i("Error al cambiar estado de actividad",h instanceof Error?h.message:"Error desconocido")}},Jt=async M=>{try{await Bt.updateStatus(M,"in-progress");const h=v.value.findIndex(ce=>ce._id===M);h!==-1&&(v.value[h].status="in-progress"),l("Actividad marcada como en proceso","success")}catch(h){i("Error al cambiar estado de actividad",h instanceof Error?h.message:"Error desconocido")}},Xt=async M=>{try{const h=v.value.find(Me=>Me._id===M);if(!h)return;const ce=new Date;ce.setDate(ce.getDate()+7),await Bt.update(M,{...h,dueDate:ce.toISOString(),status:"pending"});const we=v.value.findIndex(Me=>Me._id===M);we!==-1&&(v.value[we].dueDate=ce.toISOString(),v.value[we].status="pending"),l("Plazo extendido por 7 das","success")}catch(h){i("Error al extender plazo",h instanceof Error?h.message:"Error desconocido")}},Ls=M=>{const h=new Date,ce=new Date(M),we=h.getTime()-ce.getTime(),Me=Math.ceil(we/(1e3*60*60*24));return Math.max(0,Me)},Ss=M=>new Date(M)<new Date,oo=async M=>{const h=v.value.find(we=>we._id===M);if(!h)return;if((await a(h.title,"actividad")).isConfirmed)try{await Bt.deleteActivity(M),v.value=v.value.filter(we=>we._id!==M),l("Actividad eliminada correctamente","success")}catch(we){i("Error al eliminar actividad",we instanceof Error?we.message:"Error desconocido")}},Xo=M=>{Y.value=M,me.value=!0},Wt=M=>{Q.value=M,j.value=!0},As=()=>{j.value=!1,Q.value=null},ma=()=>{Pe.value=!1,me.value=!1,Y.value=null},ba=M=>{if(Y.value){const h=v.value.findIndex(ce=>ce._id===M._id);h!==-1&&(v.value[h]=M),l("Actividad actualizada correctamente","success")}else v.value.unshift(M),l("Actividad creada correctamente","success")},wx=async M=>{var h,ce;if((h=Q.value)!=null&&h._id){se.value=!0;try{const we=await Bt.reassignActivity(Q.value._id,M),Me=v.value.findIndex(Qe=>Qe._id===Q.value._id);Me!==-1&&(v.value[Me]=we);const Je=M?((ce=_.value.find(Qe=>Qe._id===M))==null?void 0:ce.name)||"Usuario":"Nadie";l(`Actividad asignada a ${Je}`,"success"),As()}catch(we){i("Error al asignar actividad",we instanceof Error?we.message:"Error desconocido")}finally{se.value=!1}}},_x=M=>{te.value=M,G.value=!0},lp=async()=>{var we,Me;if(!B.value.trim())return;const M=new Date,h=new Date;h.setDate(M.getDate()+K.value.dueDays);const ce={title:B.value.trim(),description:`Tarea creada rpidamente el ${M.toLocaleDateString("es-ES")}`,date:M.toISOString(),dueDate:h.toISOString(),status:"pending",priority:K.value.priority,assignedTo:((we=u.user)==null?void 0:we._id)||null,clientId:null,estimatedTime:K.value.estimatedTime,createdBy:((Me=u.user)==null?void 0:Me._id)||null};await cp(ce),B.value="",E.value=!1},cp=async M=>{try{c("Creando tarea rpida...");const h=await Bt.create(M);v.value.unshift(h),l("Tarea rpida creada correctamente","success"),G.value=!1,te.value=null}catch(h){i("Error al crear tarea rpida",h instanceof Error?h.message:"Error desconocido")}finally{d()}},kx=M=>{U.value=M,X.value=!0},Cx=()=>{K.value={dueDays:2,priority:"medium",estimatedTime:"2 horas",autoAssign:!0}},dp=async M=>{var Me,Je;const h=new Date,ce=new Date;ce.setDate(h.getDate()+K.value.dueDays);const we={title:`Nueva tarea ${M==="pending"?"pendiente":M}`,description:`Tarea creada rpidamente en columna ${M} el ${h.toLocaleDateString("es-ES")}`,date:h.toISOString(),dueDate:ce.toISOString(),status:M,priority:K.value.priority,assignedTo:((Me=u.user)==null?void 0:Me._id)||null,clientId:null,estimatedTime:K.value.estimatedTime,createdBy:((Je=u.user)==null?void 0:Je._id)||null};try{c("Creando tarea rpida...");const Qe=await Bt.create(we);v.value.unshift(Qe),l(`Tarea ${M==="pending"?"pendiente":M} creada`,"success"),setTimeout(()=>{Xo(Qe)},500)}catch(Qe){i("Error al crear tarea rpida",Qe instanceof Error?Qe.message:"Error desconocido")}finally{d()}},$x=async()=>{if(!H.value.name){i("Error","El nombre del tablero es requerido");return}if(!H.value.clientId){i("Error","Debes seleccionar un cliente");return}try{c("Creando tablero...");const M={name:H.value.name,description:H.value.description,type:H.value.type,client:H.value.clientId};await f.createBoard(M),n("Tablero creado exitosamente"),D.value=!1,H.value={name:"",description:"",type:"scrum",clientId:""},await f.fetchBoards()}catch(M){i("Error al crear tablero",M instanceof Error?M.message:"Error desconocido")}finally{d()}},Ex=async()=>{if(!Ye.value)return;const M=f.myBoards.find(ce=>ce._id===Ye.value);if(!(!M||!await a(`Eliminar tablero "${M.name}"?`,"Esta accin no se puede deshacer. Todas las tareas asociadas se eliminarn permanentemente.")))try{c("Eliminando tablero..."),await f.deleteBoard(Ye.value),await f.fetchBoards(),f.myBoards.length>0?Ye.value=f.myBoards[0]._id:Ye.value="",n("Tablero eliminado exitosamente")}catch(ce){i("Error al eliminar tablero",ce instanceof Error?ce.message:"Error desconocido")}finally{d()}},Sx=async()=>{if(!Ye.value){i("Error","Debes seleccionar un tablero");return}if(!he.value.name||!he.value.startDate||!he.value.endDate){i("Error","Completa todos los campos requeridos");return}try{c("Creando sprint..."),await f.createSprint(Ye.value,{name:he.value.name,goal:he.value.goal,startDate:new Date(he.value.startDate),endDate:new Date(he.value.endDate),status:"planned"}),n("Sprint creado exitosamente"),he.value={name:"",goal:"",startDate:"",endDate:""},await f.fetchBoardById(Ye.value)}catch(M){i("Error al crear sprint",M instanceof Error?M.message:"Error desconocido")}finally{d()}},Ax=async M=>{if(console.log(" Eliminando sprint:",M),console.log(" Board seleccionado:",Ye.value),!Ye.value){i("Error","No hay tablero seleccionado");return}try{console.log(" Llamando a boardsStore.deleteSprint..."),await f.deleteSprint(Ye.value,M),console.log(" Sprint eliminado exitosamente"),l("Sprint eliminado","success"),console.log(" Recargando tablero..."),await f.fetchBoardById(Ye.value),console.log(" Tablero recargado")}catch(h){console.error(" Error al eliminar sprint:",h),i("Error al eliminar sprint",h instanceof Error?h.message:"Error desconocido")}},Tx=()=>{D.value=!1,l("Redirigiendo a la seccin de clientes...","info")},up=M=>{if(console.log(" getActivityAssignedName received:",M),!M)return"Sin asignar";if(typeof M=="object"&&M.name)return console.log(" Found user name:",M.name),M.name;if(typeof M=="string"){const h=_.value.find(ce=>ce._id===M);return console.log(" Looking for member with ID:",M,"Found:",h),(h==null?void 0:h.name)||"Sin asignar"}return console.log(" Could not determine user name"),"Sin asignar"};re(()=>[...$e.value,...Ce.value,...oe.value,...be.value].map(h=>{var ce;return{...h,assignmentName:((ce=h.assignedTo)==null?void 0:ce.name)||up(h.assignedTo)||up(h.assignedToUser)||"Sin asignar"}}));const va=M=>{if(console.log(" getSmartAssignedName for activity:",M==null?void 0:M._id),!M)return console.log(" No activity provided"),"Sin asignar";if(M.assignedTo){if(console.log(" Found assignedTo:",M.assignedTo),typeof M.assignedTo=="object"&&M.assignedTo.name)return console.log(" assignedTo has name:",M.assignedTo.name),M.assignedTo.name;if(typeof M.assignedTo=="string"){const h=_.value.find(ce=>ce._id===M.assignedTo);return console.log(" assignedTo is ID, found member:",h),(h==null?void 0:h.name)||"Sin asignar"}}if(M.assignedToUser){if(console.log(" Using legacy assignedToUser:",M.assignedToUser),typeof M.assignedToUser=="object"&&M.assignedToUser.name)return M.assignedToUser.name;if(typeof M.assignedToUser=="string"){const h=_.value.find(ce=>ce._id===M.assignedToUser);return(h==null?void 0:h.name)||"Sin asignar"}}return console.log(" No assignment found"),"Sin asignar"},ya=M=>{const h={low:"fas fa-arrow-down",medium:"fas fa-minus",high:"fas fa-arrow-up",urgent:"fas fa-exclamation"};return h[M]||h.medium},xa=M=>({low:"Baja",medium:"Media",high:"Alta",urgent:"Urgente"})[M]||"Media",Px=()=>{z.value="",F.value="",Ee()},Mx=()=>{if(W.value=!W.value,W.value&&Z.value){const M=Z.value.getBoundingClientRect();le.value={top:`${M.bottom+8}px`,right:`${window.innerWidth-M.right}px`}}},Rx=M=>{const h=J.value.tags.indexOf(M);h>-1?J.value.tags.splice(h,1):J.value.tags.push(M)},Dx=()=>{W.value=!1,l("Filtros aplicados correctamente","success")},Ox=()=>{J.value={boardStatus:"",priority:"",type:"",assignedTo:"",tags:[]},l("Filtros limpiados","info")},Ye=I(""),ve=I(null),fp=I(""),Gr=I(!1),ir=I(!1),Qo=I(!1),wa=I(""),ar=I(""),Te=I({title:"",description:"",type:"task",priority:"medium",boardStatus:"todo",sprint:"",assignedTo:"",storyPoints:0,estimatedTime:"",tags:""});I({activeSprint:!0,backlog:!0});const St=I({repository:"",type:"feature",baseBranch:"master",customName:""}),it=re(()=>f.myBoards.find(M=>M._id===Ye.value)),pp=re(()=>!!(J.value.boardStatus||J.value.priority||J.value.type||J.value.assignedTo||J.value.tags.length>0)),Ix=re(()=>{let M=0;return J.value.boardStatus&&M++,J.value.priority&&M++,J.value.type&&M++,J.value.assignedTo&&M++,J.value.tags.length>0&&(M+=J.value.tags.length),M}),hp=re(()=>{const M=new Set;return p.tasks.forEach(h=>{h.tags&&Array.isArray(h.tags)&&h.tags.forEach(ce=>M.add(ce))}),Array.from(M).sort()}),lr=re(()=>{let M=p.tasks;return J.value.boardStatus&&(M=M.filter(h=>h.boardStatus===J.value.boardStatus)),J.value.priority&&(M=M.filter(h=>h.priority===J.value.priority)),J.value.type&&(M=M.filter(h=>h.type===J.value.type)),J.value.assignedTo&&(J.value.assignedTo==="unassigned"?M=M.filter(h=>!h.assignedTo||h.assignedTo.length===0):M=M.filter(h=>h.assignedTo&&Array.isArray(h.assignedTo)?h.assignedTo.some(ce=>typeof ce=="string"?ce===J.value.assignedTo:ce._id===J.value.assignedTo):!1)),J.value.tags.length>0&&(M=M.filter(h=>!h.tags||!Array.isArray(h.tags)?!1:J.value.tags.some(ce=>h.tags.includes(ce)))),M});re(()=>{var h;if(!it.value||it.value.type!=="scrum")return[];const M=(h=it.value.sprints)==null?void 0:h.find(ce=>ce.status==="active");return M?lr.value.filter(ce=>ce.sprint===M._id&&ce.boardStatus!=="backlog"):[]});const gp=()=>lr.value.filter(M=>M.type==="epic"),Kr=M=>lr.value.filter(h=>h.type==="feature"&&h.epicId===M),$n=M=>lr.value.filter(h=>h.type==="user-story"&&h.featureId===M),ko=M=>lr.value.filter(h=>h.type==="task"&&h.userStoryId===M),Lx=M=>{const h=Kr(M);let ce=h.length;return h.forEach(we=>{const Me=$n(we._id);ce+=Me.length,Me.forEach(Je=>{ce+=ko(Je._id).length})}),{length:ce}},ed=()=>lr.value.filter(M=>M.type==="task"&&!M.userStoryId&&!M.featureId&&!M.epicId),Bx=M=>{O.value.has(M)?O.value.delete(M):O.value.add(M)},Nx=M=>{T.value.has(M)?T.value.delete(M):T.value.add(M)},jx=M=>{L.value.has(M)?L.value.delete(M):L.value.add(M)},mp=M=>O.value.has(M),bp=M=>T.value.has(M),vp=M=>L.value.has(M),Fx=(M,h)=>{const ce=[];return h==="epic"?Kr(M).forEach(Me=>{ce.push(Me._id),$n(Me._id).forEach(Qe=>{ce.push(Qe._id),ko(Qe._id).forEach(Bs=>ce.push(Bs._id))})}):h==="feature"?$n(M).forEach(Me=>{ce.push(Me._id),ko(Me._id).forEach(Qe=>ce.push(Qe._id))}):h==="user-story"&&ko(M).forEach(Me=>ce.push(Me._id)),ce},Ux=(M,h)=>{let ce=0,we=0,Me=0;if(h==="epic"){const Je=Kr(M);ce=Je.length,Je.forEach(Qe=>{const bs=$n(Qe._id);we+=bs.length,bs.forEach(Bs=>{Me+=ko(Bs._id).length})})}else if(h==="feature"){const Je=$n(M);we=Je.length,Je.forEach(Qe=>{Me+=ko(Qe._id).length})}else h==="user-story"&&(Me=ko(M).length);return{features:ce,stories:we,tasks:Me,total:ce+we+Me}},zx=async()=>{var M;if(Ye.value){await p.fetchTasks(Ye.value);const h=xt();if((M=h.user)!=null&&M.githubUsername)try{await g.fetchRepositories(h.user.githubUsername)}catch{console.log("No se pudieron cargar repositorios de GitHub")}}},Vx=async()=>{await p.fetchTasks(Ye.value)},Hx=async()=>{Ye.value&&await p.fetchTasks(Ye.value)},yp=M=>{var h,ce,we;Te.value={title:"",description:"",type:"task",priority:"medium",boardStatus:((ce=(h=it.value)==null?void 0:h.columns[0])==null?void 0:ce.mappedStatus)||"todo",sprint:"",assignedTo:((we=u.user)==null?void 0:we._id)||"",storyPoints:0,estimatedTime:"",tags:"",...M&&{userStoryId:M}},ir.value=!0},qx=M=>{var h,ce,we;Te.value={title:"",description:"",type:"feature",priority:"medium",boardStatus:((ce=(h=it.value)==null?void 0:h.columns[0])==null?void 0:ce.mappedStatus)||"todo",sprint:"",assignedTo:((we=u.user)==null?void 0:we._id)||"",storyPoints:0,estimatedTime:"",tags:"",epicId:M},ir.value=!0},Wx=M=>{var h,ce,we;Te.value={title:"",description:"",type:"user-story",priority:"medium",boardStatus:((ce=(h=it.value)==null?void 0:h.columns[0])==null?void 0:ce.mappedStatus)||"todo",sprint:"",assignedTo:((we=u.user)==null?void 0:we._id)||"",storyPoints:0,estimatedTime:"",tags:"",featureId:M},ir.value=!0},Gx=async()=>{var M,h,ce;if(!Te.value.title||!Ye.value){i("Error","El ttulo es requerido");return}if(Te.value.type==="feature"&&!Te.value.epicId){i("Error","Debes seleccionar una pica para la Feature");return}if(Te.value.type==="user-story"&&!Te.value.featureId){i("Error","Debes seleccionar una Feature para la User Story");return}try{c(Qo.value?"Actualizando tarea...":"Creando tarea...");const we={boardId:Ye.value,title:Te.value.title,description:Te.value.description,type:Te.value.type,priority:Te.value.priority,boardStatus:Te.value.boardStatus,status:"active",assignedTo:Te.value.assignedTo||void 0,estimatedTime:Te.value.estimatedTime||void 0};if(Te.value.type==="feature"&&Te.value.epicId&&(we.epicId=Te.value.epicId),Te.value.type==="user-story"&&Te.value.featureId&&(we.featureId=Te.value.featureId),Te.value.type==="task"&&Te.value.userStoryId&&(we.userStoryId=Te.value.userStoryId),((M=it.value)==null?void 0:M.type)==="scrum"&&Te.value.sprint&&(we.sprint=Te.value.sprint,we.storyPoints=Te.value.storyPoints||0),Te.value.tags&&(we.tags=Te.value.tags.split(",").map(Me=>Me.trim()).filter(Me=>Me)),Qo.value&&wa.value)await p.updateTask(wa.value,we),n("Tarea actualizada exitosamente");else{const Me=await p.createTask(we),Je=Kx(Te.value.boardStatus),Qe={title:Te.value.title,description:Te.value.description,status:Je,priority:Te.value.priority,assignedTo:Te.value.assignedTo,date:new Date().toISOString(),dueDate:null,estimatedTime:Te.value.estimatedTime,taskId:Me._id,clientId:((ce=(h=it.value)==null?void 0:h.client)==null?void 0:ce._id)||null};await Bt.create(Qe),n("Tarea creada exitosamente")}td(),Ye.value?await p.fetchTasks(Ye.value):await Ee()}catch(we){i(Qo.value?"Error al actualizar tarea":"Error al crear tarea",we instanceof Error?we.message:"Error desconocido")}finally{d()}},td=()=>{ir.value=!1,Qo.value=!1,wa.value="",Te.value={title:"",description:"",type:"task",priority:"medium",boardStatus:"todo",sprint:"",assignedTo:"",storyPoints:0,estimatedTime:"",tags:""}},Kx=M=>({backlog:"pending",todo:"pending","in-progress":"in-progress",review:"in-progress",testing:"in-progress",done:"completed"})[M]||"pending",Yr=M=>{ve.value=M},xp=M=>{const h={backlog:"bg-gray-600/50 text-gray-300",todo:"bg-blue-600/50 text-blue-300","in-progress":"bg-yellow-600/50 text-yellow-300",review:"bg-purple-600/50 text-purple-300",testing:"bg-orange-600/50 text-orange-300",done:"bg-green-600/50 text-green-300"};return h[M]||h.backlog},wp=M=>({backlog:"Backlog",todo:"To Do","in-progress":"In Progress",review:"Review",testing:"Testing",done:"Done"})[M]||M,Yx=M=>{var ce;if(!M.sprint||!it.value)return"-";const h=(ce=it.value.sprints)==null?void 0:ce.find(we=>we._id===M.sprint);return h?h.name:"-"},Jx=async()=>{if(ve.value)try{await p.updateTask(ve.value._id,{boardStatus:ve.value.boardStatus}),await l("Estado actualizado","success")}catch{await l("Error al actualizar estado","error")}},Xx=async()=>{if(ve.value)try{await p.updateTask(ve.value._id,{priority:ve.value.priority}),await l("Prioridad actualizada","success")}catch{await l("Error al actualizar prioridad","error")}},Qx=async()=>{if(ve.value)try{await p.updateTask(ve.value._id,{sprint:ve.value.sprint||null}),await l("Sprint actualizado","success"),await p.fetchTasks(Ye.value)}catch{await l("Error al actualizar sprint","error")}},cr=async M=>{const h=p.tasks.find(we=>we._id===M);if(!h){i("Error","Tarea no encontrada");return}const ce=Ux(M,h.type);N.value={taskId:M,taskTitle:h.title,taskType:h.type,features:ce.features,stories:ce.stories,tasks:ce.tasks,total:ce.total},Oe.value=!0},Zx=async()=>{var M,h,ce,we,Me,Je,Qe;try{c("Eliminando elementos..."),Oe.value=!1;const bs=Fx(N.value.taskId,N.value.taskType),Bs=[N.value.taskId,...bs],At=[];for(const Lt of Bs){const yt=p.tasks.find(ds=>ds._id===Lt);if((M=yt==null?void 0:yt.github)!=null&&M.branch&&((h=yt.github)!=null&&h.repoOwner)&&((ce=yt.github)!=null&&ce.repoName)){let ds=!0;if((we=yt.github.pullRequest)!=null&&we.number)try{console.log(` Sincronizando PR de tarea ${yt.title}...`);const vs=await Ae.post(`${m}/api/github/tasks/${Lt}/sync-pr`,{},{headers:{Authorization:`Bearer ${u.token}`}});if((Je=(Me=vs.data.task)==null?void 0:Me.github)!=null&&Je.pullRequest){yt.github.pullRequest=vs.data.task.github.pullRequest;const Co=vs.data.task.github.pullRequest.status,Aa=vs.data.task.github.pullRequest.mergedAt;Co==="open"&&!Aa&&(ds=!1,console.log(` Rama "${yt.github.branch}" tiene PR #${vs.data.task.github.pullRequest.number} abierto`))}}catch(vs){console.warn(` No se pudo sincronizar PR de ${yt.title}:`,vs);const Co=yt.github.pullRequest;ds=!Co||Co.status==="closed"||Co.status==="merged"||!!Co.mergedAt}ds&&At.push({repoOwner:yt.github.repoOwner,repoName:yt.github.repoName,branch:yt.github.branch,taskTitle:yt.title})}}for(const Lt of Bs){if(p.tasks.find(ds=>ds._id===Lt)){const ds=v.value.find(vs=>vs.taskId===Lt);if(ds&&ds._id)try{await Bt.deleteActivity(ds._id),console.log(` Actividad eliminada del Kanban: ${ds.title}`)}catch(vs){console.warn(" No se pudo eliminar actividad del Kanban:",vs)}}await p.deleteTask(Lt)}if(At.length>0){console.log(` Eliminando ${At.length} ramas de GitHub...`);for(const Lt of At)try{await g.deleteBranch(Lt.repoOwner,Lt.repoName,Lt.branch),console.log(` Rama eliminada: ${Lt.branch}`)}catch(yt){((Qe=yt.response)==null?void 0:Qe.status)===404?console.log(` Rama ya no existe en GitHub: ${Lt.branch}`):console.error(` Error eliminando rama ${Lt.branch}:`,yt.message)}At.length>0&&await l(`${Bs.length} elementos y ${At.length} ramas eliminadas`,"success")}else await l(`${Bs.length} elementos eliminados correctamente`,"success");ve.value=null,await Ee()}catch(bs){i("Error al eliminar elementos",bs instanceof Error?bs.message:"Error desconocido")}finally{d()}},_p=()=>{Oe.value=!1,N.value={taskId:"",taskTitle:"",taskType:"",features:0,stories:0,tasks:0,total:0}},kp=()=>{var M;ve.value&&(Te.value={title:ve.value.title,description:ve.value.description||"",type:ve.value.type,priority:ve.value.priority,boardStatus:ve.value.boardStatus,sprint:ve.value.sprint||"",assignedTo:typeof ve.value.assignedTo=="object"?ve.value.assignedTo._id:ve.value.assignedTo||"",storyPoints:ve.value.storyPoints||0,estimatedTime:ve.value.estimatedTime||"",tags:((M=ve.value.tags)==null?void 0:M.join(", "))||""},ir.value=!0,Qo.value=!0,wa.value=ve.value._id)},Jr=M=>{ve.value=M,kp()},_a=M=>{if(!M)return null;if(Array.isArray(M)){if(M.length===0)return null;const h=M[0];return typeof h=="object"&&h?h:typeof h=="string"&&_.value.find(ce=>ce._id===h)||null}return typeof M=="object"&&M?M:typeof M=="string"&&_.value.find(h=>h._id===M)||null},ka=()=>{if(!ve.value)return"";const M=ve.value._id.slice(-4).toUpperCase(),h=ve.value.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"").substring(0,40);return`${St.value.type}/${M}-${h}`},e1=async()=>{if(Gr.value=!0,g.repositories.length===0)try{await g.fetchRepositories("sebastianpg12")}catch(M){console.error("Error loading repositories:",M)}},t1=async()=>{var M,h;if(!(!ve.value||!St.value.repository))try{c("Creando rama en GitHub...");const[ce,we]=St.value.repository.split("/");console.log(" Configurando repositorio en tarea..."),console.log("Repository:",ce,"/",we),console.log("Base branch:",St.value.baseBranch),await p.updateTask(ve.value._id,{github:{repoOwner:ce,repoName:we,branch:void 0,branchUrl:void 0,pullRequest:void 0,commits:[],lastSync:new Date}}),console.log(" Repositorio configurado en tarea"),console.log(" Creando rama en GitHub...");const Me=St.value.customName||ka(),Je=await g.createBranch(ve.value._id,St.value.baseBranch,Me);console.log(" Rama creada:",Je),ve.value.github&&(ve.value.github.branch=Je.task.github.branch,ve.value.github.branchUrl=Je.task.github.branchUrl,ve.value.github.repoOwner=ce,ve.value.github.repoName=we),await p.fetchTasks(Ye.value),St.value.customName="",Gr.value=!1,d(),await l("Rama creada exitosamente","success")}catch(ce){console.error(" Error al crear rama:",ce),d();let we="Error al crear rama";(h=(M=ce.response)==null?void 0:M.data)!=null&&h.error?we=ce.response.data.error:ce.message&&(we=ce.message),await l(we,"error")}},s1=async()=>{var M;if(!(!ve.value||!((M=ve.value.github)!=null&&M.branch)))try{c("Creando Pull Request...");const h=`[${ve.value._id.slice(-4).toUpperCase()}] ${ve.value.title}`,ce=ve.value.description||"",we=await g.createPullRequest(ve.value._id,h,ce);ve.value.github&&(ve.value.github.pr=we.prUrl),await p.fetchTasks(Ye.value),d(),await l("Pull Request creado","success")}catch(h){d(),await l(h.message||"Error al crear PR","error")}},o1=async()=>{var M,h;if(!(!ve.value||!((h=(M=ve.value.github)==null?void 0:M.pullRequest)!=null&&h.number)))try{c("Sincronizando estado del PR...");const ce=await Ae.post(`${m}/api/github/tasks/${ve.value._id}/sync-pr`,{},{headers:{Authorization:`Bearer ${u.token}`}});if(ce.data.task){ve.value.github=ce.data.task.github,await p.fetchTasks(Ye.value);const we=ce.data.task.github.pullRequest;if(we){const Me=we.mergedAt?"mergeado":we.status;await l(`PR actualizado: estado ${Me}`,"success")}else await l("Estado del PR actualizado","success")}d()}catch(ce){d(),console.error("Error sincronizando PR:",ce),await l("Error al sincronizar estado del PR","error")}},n1=async()=>{var M,h,ce,we,Me;if(!(!ve.value||!((M=ve.value.github)!=null&&M.branch)))try{const Je=ve.value.github.branch,Qe=ve.value.github.repoOwner,bs=ve.value.github.repoName;if(!Qe||!bs){await l("Informacin del repositorio no disponible","error");return}if((h=ve.value.github.pullRequest)!=null&&h.number)try{c("Verificando estado del PR..."),console.log(" Sincronizando estado del PR desde GitHub...");const At=await Ae.post(`${m}/api/github/tasks/${ve.value._id}/sync-pr`,{},{headers:{Authorization:`Bearer ${u.token}`}});At.data.task&&(ve.value.github=At.data.task.github,console.log(" Estado del PR actualizado:",At.data.task.github.pullRequest)),d()}catch(At){console.warn(" No se pudo sincronizar PR, continuando con datos locales:",At),d()}if(ve.value.github.pullRequest){const At=ve.value.github.pullRequest.status,Lt=ve.value.github.pullRequest.mergedAt;if(console.log(" Estado del PR:",{status:At,merged:Lt}),At==="open"&&!Lt){const yt=ve.value.github.pullRequest.number;await l(`No se puede eliminar: PR #${yt} est abierto.
Cierra o mergea el PR en GitHub primero.`,"error");return}}if(!confirm(` Eliminar rama "${Je}"?

Esto eliminar la rama permanentemente de GitHub.
Asegrate de que:
 El cdigo ya fue mergeado
 No hay trabajo sin guardar
 El PR est cerrado o mergeado

Esta accin NO se puede deshacer.`))return;c("Eliminando rama de GitHub...");try{await g.deleteBranch(Qe,bs,Je)}catch(At){if(((ce=At.response)==null?void 0:ce.status)===404)console.log(" Rama no encontrada en GitHub, limpiando solo localmente..."),await l("Rama no encontrada en GitHub, limpiando asociacin local","warning");else throw At}await p.updateTask(ve.value._id,{github:{repoOwner:void 0,repoName:void 0,branch:void 0,branchUrl:void 0,pullRequest:void 0,commits:[],lastSync:new Date}}),ve.value.github&&(ve.value.github.branch=void 0,ve.value.github.branchUrl=void 0,ve.value.github.pullRequest=void 0,ve.value.github.repoOwner=void 0,ve.value.github.repoName=void 0),await p.fetchTasks(Ye.value),d(),await l("Rama eliminada exitosamente","success")}catch(Je){console.error(" Error al eliminar rama:",Je),d();let Qe="Error al eliminar rama";(Me=(we=Je.response)==null?void 0:we.data)!=null&&Me.error?Qe=Je.response.data.error:Je.message&&(Qe=Je.message),await l(Qe,"error")}},Cp=async()=>{if(!(!ve.value||!ar.value.trim()))try{await p.addComment(ve.value._id,ar.value),ve.value.comments||(ve.value.comments=[]),ve.value.comments.push({_id:Date.now().toString(),text:ar.value,user:u.user,createdAt:new Date().toISOString()}),ar.value="",await l("Comentario aadido","success")}catch{await l("Error al aadir comentario","error")}},Ca=M=>{const h={low:"bg-gray-600/50 text-gray-300",medium:"bg-blue-600/50 text-blue-300",high:"bg-orange-600/50 text-orange-300",urgent:"bg-red-600/50 text-red-300"};return h[M]||h.medium},r1=M=>{const h={bug:"fas fa-bug text-red-400",feature:"fas fa-star text-yellow-400",task:"fas fa-tasks text-blue-400",improvement:"fas fa-arrow-up text-green-400",documentation:"fas fa-book text-purple-400"};return h[M]||h.task},Xr=M=>{if(!M)return"Cliente no vlido";if(typeof M=="object"&&M.name)return M.name;if(typeof M=="string"){if(C.value)return"Cargando cliente...";const h=x.value.find(ce=>ce._id===M);return h?h.name:"Cliente no vlido"}return"Cliente no vlido"},no=M=>new Date(M).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),$a=(M,h)=>{$.value=h,R.value=!0,M.dataTransfer&&(M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("text/plain",h._id||"")),M.target instanceof HTMLElement&&(M.target.style.opacity="0.5")},Ea=M=>{R.value=!1,M.target instanceof HTMLElement&&(M.target.style.opacity="1"),setTimeout(()=>{$.value=null},100)},Sa=async(M,h)=>{if(M.preventDefault(),!$.value||!$.value._id)return;const ce=$.value._id;if($.value.status!==h)try{await Bt.update(ce,{status:h});const Me=v.value.findIndex(Qe=>Qe._id===ce);Me!==-1&&(v.value[Me].status=h),l(`Actividad marcada como ${h==="completed"?"completada":h==="cancelled"?"cancelada":"pendiente"}`,"success")}catch(Me){i("Error al mover actividad",Me instanceof Error?Me.message:"Error desconocido"),await Ee()}};return nt(async()=>{const M=localStorage.getItem("token"),h=localStorage.getItem("user");if(console.log(" Token presente:",!!M),console.log(" Usuario en localStorage:",h?JSON.parse(h):null),await Promise.all([We(),je(),Ee(),f.fetchBoards()]),f.myBoards.length===0)try{const we=await f.createBoard({name:"Tablero Principal",description:"Tablero de tareas del equipo",type:"scrum",members:[]});Ye.value=we._id,await p.fetchTasks(we._id),console.log(" Board por defecto creado y tareas cargadas")}catch(we){console.error("Error creando tablero por defecto:",we)}else{const we=f.myBoards[0]._id;Ye.value=we,await p.fetchTasks(we),console.log(" Board seleccionado y tareas cargadas:",we)}await Ie();const ce=setInterval(Ie,5*60*1e3);sr(()=>{clearInterval(ce)}),document.addEventListener("click",we=>{const Me=we.target;Me.closest(".relative")||(E.value=!1),(!Me.closest(".relative")||!Me.closest("button"))&&(Me.closest('[class*="bg-gray-800"]')||(W.value=!1))})}),Rt(()=>Ye.value,async(M,h)=>{if(M&&M!==h){console.log(" Cargando tareas del board:",M);try{await p.fetchTasks(M),console.log(" Tareas cargadas:",p.tasks.length)}catch(ce){console.error(" Error cargando tareas:",ce)}}}),Rt(()=>Te.value.type,(M,h)=>{M!==h&&(M!=="feature"&&(Te.value.epicId=void 0),M!=="user-story"&&(Te.value.featureId=void 0),M!=="task"&&(Te.value.userStoryId=void 0))}),Rt(()=>o.searchTerm,()=>{}),e({loadActivities:Ee,loadClients:We,clients:x}),(M,h)=>{var ce,we,Me,Je,Qe,bs,Bs,At,Lt,yt,ds,vs,Co,Aa,$p,Ep,Sp,Ap,Tp;return b(),y("div",E7,[r("div",S7,[r("div",A7,[r("div",T7,[r("button",{onClick:h[0]||(h[0]=A=>V.value="kanban"),class:de([V.value==="kanban"?"bg-purple-600 text-white":"text-gray-400 hover:text-white","px-3 py-1 rounded-md text-sm font-medium transition-colors"])},[...h[87]||(h[87]=[r("i",{class:"fas fa-columns mr-2"},null,-1),ne(" Kanban ",-1)])],2),r("button",{onClick:h[1]||(h[1]=A=>V.value="tasks"),class:de([V.value==="tasks"?"bg-purple-600 text-white":"text-gray-400 hover:text-white","px-3 py-1 rounded-md text-sm font-medium transition-colors"])},[...h[88]||(h[88]=[r("i",{class:"fas fa-tasks mr-2"},null,-1),ne(" Tasks ",-1)])],2),r("button",{onClick:h[2]||(h[2]=A=>V.value="calendar"),class:de([V.value==="calendar"?"bg-purple-600 text-white":"text-gray-400 hover:text-white","px-3 py-1 rounded-md text-sm font-medium transition-colors"])},[...h[89]||(h[89]=[r("i",{class:"fas fa-calendar-alt mr-2"},null,-1),ne(" Calendario ",-1)])],2)]),fe(Ut,{permissions:["create-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:h[3]||(h[3]=A=>Pe.value=!0),class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2"},[...h[90]||(h[90]=[r("i",{class:"fas fa-plus"},null,-1),ne(" Nueva Actividad ",-1)])])]),_:1})])]),V.value!=="tasks"?(b(),y("div",P7,[r("div",M7,[r("div",R7,[h[94]||(h[94]=r("i",{class:"fas fa-lightning-bolt"},null,-1)),h[95]||(h[95]=r("span",{class:"font-medium"},"Tarea Rpida",-1)),r("div",D7,[h[91]||(h[91]=r("i",{class:"fas fa-timer mr-1"},null,-1)),r("span",null,w(K.value.dueDays)+"d",1),h[92]||(h[92]=r("span",{class:"mx-1"},"",-1)),r("span",null,w(K.value.priority==="low"?"Baja":K.value.priority==="medium"?"Media":K.value.priority==="high"?"Alta":"Urgente"),1),h[93]||(h[93]=r("span",{class:"mx-1"},"",-1)),r("span",null,w(K.value.estimatedTime),1)])]),r("div",O7,[ie(r("input",{"onUpdate:modelValue":h[4]||(h[4]=A=>B.value=A),onKeyup:[Vn(lp,["enter"]),h[5]||(h[5]=Vn(A=>B.value="",["esc"]))],onFocus:h[6]||(h[6]=A=>S.value=!0),onBlur:h[7]||(h[7]=A=>M.setTimeout(()=>S.value=!1,200)),type:"text",placeholder:"Qu necesitas hacer? (Enter para crear, Esc para limpiar)",class:"w-full px-3 py-2 bg-gray-800/50 border border-yellow-500/30 rounded-md text-white placeholder-gray-400 focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all duration-200"},null,544),[[ke,B.value]]),S.value&&B.value?(b(),y("div",I7,[...h[96]||(h[96]=[r("div",{class:"flex gap-4"},[r("span",null,[r("kbd",{class:"bg-gray-800 px-1 rounded"},"Enter"),ne(" Crear tarea")]),r("span",null,[r("kbd",{class:"bg-gray-800 px-1 rounded"},"Esc"),ne(" Limpiar")]),r("span",null,[r("kbd",{class:"bg-gray-800 px-1 rounded"},"Ctrl+E"),ne(" Editar despus")])],-1)])])):q("",!0)]),r("button",{onClick:lp,disabled:!B.value.trim(),class:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...h[97]||(h[97]=[r("i",{class:"fas fa-bolt mr-1"},null,-1),ne(" Crear ",-1)])],8,L7),r("div",B7,[r("button",{onClick:h[8]||(h[8]=A=>E.value=!E.value),class:"p-2 text-yellow-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Configuracin rpida"},[...h[98]||(h[98]=[r("i",{class:"fas fa-cog"},null,-1)])])])])])):q("",!0),V.value!=="tasks"?(b(),y("div",N7,[r("div",j7,[r("div",F7,[h[101]||(h[101]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Filtrar por miembro del equipo ",-1)),ie(r("select",{"onUpdate:modelValue":h[9]||(h[9]=A=>z.value=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[h[99]||(h[99]=r("option",{value:""},"Todos los miembros",-1)),h[100]||(h[100]=r("option",{value:"unassigned"},"Sin asignar",-1)),(b(!0),y(ge,null,xe(_.value,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name)+" - "+w(A.role),9,U7))),128))],512),[[De,z.value]])]),r("div",z7,[h[103]||(h[103]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Filtrar por estado ",-1)),ie(r("select",{"onUpdate:modelValue":h[10]||(h[10]=A=>F.value=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...h[102]||(h[102]=[r("option",{value:""},"Todos los estados",-1),r("option",{value:"pending"},"Pendiente",-1),r("option",{value:"completed"},"Completada",-1)])],512),[[De,F.value]])]),r("div",{class:"flex items-end"},[r("button",{onClick:Px,class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors"},[...h[104]||(h[104]=[r("i",{class:"fas fa-filter-circle-xmark mr-2"},null,-1),ne(" Limpiar ",-1)])])])])])):q("",!0),V.value==="calendar"?(b(),y("div",V7,[fe(Z8,{activities:ae.value,clients:x.value,"team-members":_.value,onQuickTask:_x,onViewActivity:kx},null,8,["activities","clients","team-members"])])):V.value==="tasks"?(b(),y("div",H7,[r("div",q7,[r("div",W7,[r("div",G7,[r("div",K7,[ie(r("select",{"onUpdate:modelValue":h[11]||(h[11]=A=>Ye.value=A),onChange:zx,class:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm focus:ring-2 focus:ring-blue-500"},[h[105]||(h[105]=r("option",{value:""},"Seleccionar tablero...",-1)),(b(!0),y(ge,null,xe(ye(f).myBoards,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name),9,Y7))),128))],544),[[De,Ye.value]]),r("button",{onClick:h[12]||(h[12]=A=>D.value=!0),class:"px-3 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-md hover:from-purple-700 hover:to-pink-700 text-sm font-medium flex items-center gap-2",title:"Crear nuevo tablero"},[...h[106]||(h[106]=[r("i",{class:"fas fa-plus"},null,-1),r("span",{class:"hidden sm:inline"},"Nuevo Tablero",-1)])]),Ye.value&&ye(f).myBoards.length>1?(b(),y("button",{key:0,onClick:Ex,class:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium flex items-center gap-2",title:"Eliminar tablero actual"},[...h[107]||(h[107]=[r("i",{class:"fas fa-trash"},null,-1),r("span",{class:"hidden sm:inline"},"Eliminar",-1)])])):q("",!0),it.value&&it.value.type==="scrum"?ie((b(),y("select",{key:1,"onUpdate:modelValue":h[13]||(h[13]=A=>fp.value=A),onChange:Vx,class:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm focus:ring-2 focus:ring-blue-500"},[h[108]||(h[108]=r("option",{value:""},"Todos los sprints",-1)),h[109]||(h[109]=r("option",{value:"backlog"},"Backlog",-1)),(b(!0),y(ge,null,xe(it.value.sprints,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name)+" ("+w(A.status)+") ",9,J7))),128))],544)),[[De,fp.value]]):q("",!0),it.value&&it.value.type==="scrum"?(b(),y("button",{key:2,onClick:h[14]||(h[14]=A=>ee.value=!0),class:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium flex items-center gap-2",title:"Gestionar sprints"},[...h[110]||(h[110]=[r("i",{class:"fas fa-running"},null,-1),r("span",{class:"hidden sm:inline"},"Sprints",-1)])])):q("",!0),r("div",X7,[r("button",{onClick:Mx,ref_key:"filterButton",ref:Z,class:de(["px-3 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm",{"bg-purple-600":W.value||pp.value}])},[h[111]||(h[111]=r("i",{class:"fas fa-filter mr-2"},null,-1)),h[112]||(h[112]=ne(" Filtros ",-1)),pp.value?(b(),y("span",Q7,w(Ix.value),1)):q("",!0)],2)])]),r("div",Z7,[Ye.value?(b(),y("button",{key:0,onClick:h[15]||(h[15]=A=>yp()),class:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-md hover:from-green-700 hover:to-emerald-700 text-sm font-medium flex items-center gap-2"},[...h[113]||(h[113]=[r("i",{class:"fas fa-plus"},null,-1),r("span",null,"Nueva Tarea",-1)])])):q("",!0),Ye.value?(b(),y("button",{key:1,onClick:Hx,class:"px-3 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600"},[...h[114]||(h[114]=[r("i",{class:"fas fa-sync-alt"},null,-1)])])):q("",!0)])])]),Ye.value?(b(),y("div",eP,[r("div",tP,[(b(!0),y(ge,null,xe(gp(),A=>(b(),y("div",{key:A._id,class:"mb-3"},[r("div",sP,[r("div",oP,[r("button",{onClick:Se=>Bx(A._id),class:"p-1 hover:bg-gray-700 rounded"},[r("i",{class:de([mp(A._id)?"fas fa-chevron-right":"fas fa-chevron-down","text-xs text-gray-400"])},null,2)],8,nP),h[119]||(h[119]=r("i",{class:"fas fa-mountain text-purple-400 text-sm"},null,-1)),r("span",rP,w(A._id.slice(-4).toUpperCase()),1),r("div",iP,[r("span",aP,w(A.title),1)]),r("div",lP,[r("span",null,w(Kr(A._id).length)+" features",1),r("span",null,w(Lx(A._id).length)+" tasks",1)]),r("div",cP,[r("button",{onClick:Se=>Yr(A),class:"p-1 text-gray-400 hover:bg-blue-500/20 rounded",title:"Ver"},[...h[115]||(h[115]=[r("i",{class:"fas fa-eye text-xs"},null,-1)])],8,dP),r("button",{onClick:Se=>Jr(A),class:"p-1 text-gray-400 hover:bg-purple-500/20 rounded",title:"Editar"},[...h[116]||(h[116]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,uP),r("button",{onClick:Se=>cr(A._id),class:"p-1 text-gray-400 hover:bg-red-500/20 rounded",title:"Eliminar"},[...h[117]||(h[117]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,fP),r("button",{onClick:Se=>qx(A._id),class:"p-1 text-green-400 hover:bg-green-500/20 rounded",title:"Nueva Feature"},[...h[118]||(h[118]=[r("i",{class:"fas fa-plus text-xs"},null,-1)])],8,pP)])])]),mp(A._id)?q("",!0):(b(),y("div",hP,[(b(!0),y(ge,null,xe(Kr(A._id),Se=>(b(),y("div",{key:Se._id,class:"mb-2"},[r("div",gP,[r("div",mP,[r("button",{onClick:Ot=>Nx(Se._id),class:"p-1 hover:bg-gray-700 rounded"},[r("i",{class:de([bp(Se._id)?"fas fa-chevron-right":"fas fa-chevron-down","text-xs text-gray-400"])},null,2)],8,bP),h[124]||(h[124]=r("i",{class:"fas fa-layer-group text-blue-400 text-xs"},null,-1)),r("span",vP,w(Se._id.slice(-4).toUpperCase()),1),r("div",yP,[r("span",xP,w(Se.title),1)]),r("div",wP,[r("span",null,w($n(Se._id).length)+" stories",1)]),r("div",_P,[r("button",{onClick:Ot=>Yr(Se),class:"p-1 text-gray-400 hover:bg-blue-500/20 rounded",title:"Ver"},[...h[120]||(h[120]=[r("i",{class:"fas fa-eye text-xs"},null,-1)])],8,kP),r("button",{onClick:Ot=>Jr(Se),class:"p-1 text-gray-400 hover:bg-purple-500/20 rounded",title:"Editar"},[...h[121]||(h[121]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,CP),r("button",{onClick:Ot=>cr(Se._id),class:"p-1 text-gray-400 hover:bg-red-500/20 rounded",title:"Eliminar"},[...h[122]||(h[122]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,$P),r("button",{onClick:Ot=>Wx(Se._id),class:"p-1 text-green-400 hover:bg-green-500/20 rounded",title:"Nueva User Story"},[...h[123]||(h[123]=[r("i",{class:"fas fa-plus text-xs"},null,-1)])],8,EP)])])]),bp(Se._id)?q("",!0):(b(),y("div",SP,[(b(!0),y(ge,null,xe($n(Se._id),Ot=>(b(),y("div",{key:Ot._id,class:"mb-2"},[r("div",AP,[r("div",TP,[r("button",{onClick:Qt=>jx(Ot._id),class:"p-1 hover:bg-gray-700 rounded"},[r("i",{class:de([vp(Ot._id)?"fas fa-chevron-right":"fas fa-chevron-down","text-xs text-gray-400"])},null,2)],8,PP),h[129]||(h[129]=r("i",{class:"fas fa-book-open text-green-400 text-xs"},null,-1)),r("span",MP,w(Ot._id.slice(-4).toUpperCase()),1),r("div",RP,[r("span",DP,w(Ot.title),1)]),r("div",OP,[r("span",null,w(ko(Ot._id).length)+" tasks",1)]),r("div",IP,[r("button",{onClick:Qt=>Yr(Ot),class:"p-1 text-gray-400 hover:bg-blue-500/20 rounded",title:"Ver"},[...h[125]||(h[125]=[r("i",{class:"fas fa-eye text-xs"},null,-1)])],8,LP),r("button",{onClick:Qt=>Jr(Ot),class:"p-1 text-gray-400 hover:bg-purple-500/20 rounded",title:"Editar"},[...h[126]||(h[126]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,BP),r("button",{onClick:Qt=>cr(Ot._id),class:"p-1 text-gray-400 hover:bg-red-500/20 rounded",title:"Eliminar"},[...h[127]||(h[127]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,NP),r("button",{onClick:Qt=>yp(Ot._id),class:"p-1 text-green-400 hover:bg-green-500/20 rounded",title:"Nueva Task"},[...h[128]||(h[128]=[r("i",{class:"fas fa-plus text-xs"},null,-1)])],8,jP)])])]),vp(Ot._id)?q("",!0):(b(),y("div",FP,[(b(!0),y(ge,null,xe(ko(Ot._id),Qt=>(b(),y("div",{key:Qt._id,class:"mb-1"},[r("div",UP,[r("div",zP,[h[133]||(h[133]=r("i",{class:"fas fa-tasks text-gray-400 text-xs"},null,-1)),r("span",VP,w(Qt._id.slice(-4).toUpperCase()),1),r("div",HP,[r("span",qP,w(Qt.title),1)]),r("span",{class:de([xp(Qt.boardStatus),"text-xs px-2 py-0.5 rounded"])},w(wp(Qt.boardStatus)),3),r("div",WP,[r("button",{onClick:Pp=>Yr(Qt),class:"p-1 text-gray-400 hover:bg-blue-500/20 rounded",title:"Ver"},[...h[130]||(h[130]=[r("i",{class:"fas fa-eye text-xs"},null,-1)])],8,GP),r("button",{onClick:Pp=>Jr(Qt),class:"p-1 text-gray-400 hover:bg-purple-500/20 rounded",title:"Editar"},[...h[131]||(h[131]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,KP),r("button",{onClick:Pp=>cr(Qt._id),class:"p-1 text-gray-400 hover:bg-red-500/20 rounded",title:"Eliminar"},[...h[132]||(h[132]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,YP)])])])]))),128))]))]))),128))]))]))),128))]))]))),128)),ed().length>0?(b(),y("div",JP,[r("div",XP,[h[134]||(h[134]=r("i",{class:"fas fa-tasks text-gray-400 text-sm"},null,-1)),h[135]||(h[135]=r("h3",{class:"text-sm font-medium text-gray-400"},"Tareas Independientes",-1)),r("span",QP,w(ed().length),1)]),r("div",ZP,[(b(!0),y(ge,null,xe(ed(),A=>(b(),y("div",{key:A._id,class:"group hover:bg-gray-500/5 rounded transition-colors"},[r("div",eM,[h[139]||(h[139]=r("i",{class:"fas fa-tasks text-gray-400 text-xs"},null,-1)),r("span",tM,w(A._id.slice(-4).toUpperCase()),1),r("div",sM,[r("span",oM,w(A.title),1)]),r("span",{class:de([xp(A.boardStatus),"text-xs px-2 py-0.5 rounded"])},w(wp(A.boardStatus)),3),r("div",nM,[r("button",{onClick:Se=>Yr(A),class:"p-1 text-gray-400 hover:bg-blue-500/20 rounded",title:"Ver"},[...h[136]||(h[136]=[r("i",{class:"fas fa-eye text-xs"},null,-1)])],8,rM),r("button",{onClick:Se=>Jr(A),class:"p-1 text-gray-400 hover:bg-purple-500/20 rounded",title:"Editar"},[...h[137]||(h[137]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,iM),r("button",{onClick:Se=>cr(A._id),class:"p-1 text-gray-400 hover:bg-red-500/20 rounded",title:"Eliminar"},[...h[138]||(h[138]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,aM)])])]))),128))])])):q("",!0)])])):(b(),y("div",lM,[h[141]||(h[141]=r("i",{class:"fas fa-tasks text-gray-600 text-6xl mb-4"},null,-1)),h[142]||(h[142]=r("h3",{class:"text-xl font-bold text-gray-300 mb-2"},"No hay tablero seleccionado",-1)),h[143]||(h[143]=r("p",{class:"text-gray-400 mb-6"},"Selecciona un tablero para ver y gestionar las tareas",-1)),r("button",{onClick:h[16]||(h[16]=A=>D.value=!0),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-md hover:from-purple-700 hover:to-pink-700 font-medium"},[...h[140]||(h[140]=[r("i",{class:"fas fa-plus mr-2"},null,-1),ne(" Crear primer tablero ",-1)])])]))])])):q("",!0),(b(),Ue(Mo,{to:"body"},[ve.value?(b(),y("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:h[26]||(h[26]=Fe(A=>ve.value=null,["self"]))},[r("div",cM,[r("div",dM,[r("div",uM,[r("i",{class:de([r1(ve.value.type),"text-lg"])},null,2),r("span",fM,w(ve.value._id.slice(-4).toUpperCase()),1)]),r("div",pM,[r("button",{onClick:kp,class:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs flex items-center gap-1",title:"Editar tarea"},[...h[144]||(h[144]=[r("i",{class:"fas fa-edit"},null,-1)])]),r("button",{onClick:h[17]||(h[17]=A=>cr(ve.value._id)),class:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-md text-xs flex items-center gap-1",title:"Eliminar tarea"},[...h[145]||(h[145]=[r("i",{class:"fas fa-trash"},null,-1)])]),r("button",{onClick:h[18]||(h[18]=A=>ve.value=null),class:"text-gray-400 hover:text-white"},[...h[146]||(h[146]=[r("i",{class:"fas fa-times"},null,-1)])])])]),r("div",hM,[r("div",null,[r("h3",gM,w(ve.value.title),1),r("p",mM,w(ve.value.description||"Sin descripcin"),1)]),r("div",bM,[r("div",null,[h[148]||(h[148]=r("label",{class:"text-xs font-medium text-gray-400 mb-1 block"},"Estado",-1)),ie(r("select",{"onUpdate:modelValue":h[19]||(h[19]=A=>ve.value.boardStatus=A),onChange:Jx,class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm"},[...h[147]||(h[147]=[r("option",{value:"backlog"},"Backlog",-1),r("option",{value:"todo"},"To Do",-1),r("option",{value:"in-progress"},"In Progress",-1),r("option",{value:"review"},"Review",-1),r("option",{value:"testing"},"Testing",-1),r("option",{value:"done"},"Done",-1)])],544),[[De,ve.value.boardStatus]])]),r("div",null,[h[150]||(h[150]=r("label",{class:"text-xs font-medium text-gray-400 mb-1 block"},"Prioridad",-1)),ie(r("select",{"onUpdate:modelValue":h[20]||(h[20]=A=>ve.value.priority=A),onChange:Xx,class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm"},[...h[149]||(h[149]=[r("option",{value:"low"},"Low",-1),r("option",{value:"medium"},"Medium",-1),r("option",{value:"high"},"High",-1),r("option",{value:"urgent"},"Urgent",-1)])],544),[[De,ve.value.priority]])])]),r("div",null,[h[151]||(h[151]=r("label",{class:"text-xs font-medium text-gray-400 mb-2 block"},"Persona asignada",-1)),_a(ve.value.assignedTo)?(b(),y("div",vM,[r("div",yM,w(((we=(ce=_a(ve.value.assignedTo))==null?void 0:ce.name)==null?void 0:we.charAt(0))||"?"),1),r("div",null,[r("div",xM,w(((Me=_a(ve.value.assignedTo))==null?void 0:Me.name)||"Sin nombre"),1),r("div",wM,w(((Je=_a(ve.value.assignedTo))==null?void 0:Je.email)||""),1)])])):(b(),y("div",_M,"Sin asignar"))]),r("div",kM,[r("div",null,[h[152]||(h[152]=r("label",{class:"text-xs font-medium text-gray-400 mb-1 block"},"Fecha inicio",-1)),ie(r("input",{type:"date","onUpdate:modelValue":h[21]||(h[21]=A=>ve.value.startDate=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm"},null,512),[[ke,ve.value.startDate]])]),r("div",null,[h[153]||(h[153]=r("label",{class:"text-xs font-medium text-gray-400 mb-1 block"},"Fecha lmite",-1)),ie(r("input",{type:"date","onUpdate:modelValue":h[22]||(h[22]=A=>ve.value.dueDate=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm"},null,512),[[ke,ve.value.dueDate]])])]),r("div",null,[h[154]||(h[154]=r("label",{class:"text-xs font-medium text-gray-400 mb-1 block"},"Estimacin original",-1)),ie(r("input",{type:"text","onUpdate:modelValue":h[23]||(h[23]=A=>ve.value.estimatedTime=A),placeholder:"4h",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm"},null,512),[[ke,ve.value.estimatedTime]])]),((Qe=it.value)==null?void 0:Qe.type)==="scrum"?(b(),y("div",CM,[h[156]||(h[156]=r("label",{class:"text-xs font-medium text-gray-400 mb-2 block"},"Sprint",-1)),ie(r("select",{"onUpdate:modelValue":h[24]||(h[24]=A=>ve.value.sprint=A),onChange:Qx,class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm"},[h[155]||(h[155]=r("option",{value:""},"Backlog",-1)),(b(!0),y(ge,null,xe(it.value.sprints,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name)+" ("+w(A.status)+") ",9,$M))),128))],544),[[De,ve.value.sprint]])])):(b(),y("div",EM,[h[157]||(h[157]=r("label",{class:"text-xs font-medium text-gray-400 mb-2 block"},"Sprint",-1)),r("div",SM,w(Yx(ve.value)),1)])),r("div",AM,[h[164]||(h[164]=r("div",{class:"flex items-center justify-between mb-3"},[r("label",{class:"text-xs font-medium text-gray-400"},"Desarrollo"),r("i",{class:"fab fa-github text-gray-500"})],-1)),(bs=ve.value.github)!=null&&bs.branch?(b(),y("div",TM,[r("div",PM,[h[159]||(h[159]=r("i",{class:"fas fa-code-branch text-green-400"},null,-1)),r("span",MM,w(ve.value.github.branch),1),r("button",{onClick:n1,class:"px-2 py-1 text-xs bg-red-600/20 text-red-300 border border-red-500/30 rounded hover:bg-red-600/30 transition-colors",title:"Eliminar rama"},[...h[158]||(h[158]=[r("i",{class:"fas fa-trash"},null,-1)])])])])):q("",!0),(Bs=ve.value.github)!=null&&Bs.branch?q("",!0):(b(),y("div",RM,[r("button",{onClick:e1,class:"w-full px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm"},[...h[160]||(h[160]=[r("i",{class:"fas fa-code-branch mr-2"},null,-1),ne(" Crear rama ",-1)])])])),(At=ve.value.github)!=null&&At.pr?(b(),y("div",DM,[r("a",{href:ve.value.github.pr,target:"_blank",class:"flex items-center gap-2 p-3 bg-purple-900/20 border border-purple-500/30 rounded-lg hover:bg-purple-900/30 transition-colors"},[...h[161]||(h[161]=[r("i",{class:"fas fa-code-pull-request text-purple-400"},null,-1),r("span",{class:"text-sm text-purple-300 flex-1"},"Ver Pull Request",-1),r("i",{class:"fas fa-external-link-alt text-purple-400 text-xs"},null,-1)])],8,OM),r("button",{onClick:o1,class:"w-full px-3 py-2 text-xs bg-purple-600/20 text-purple-300 border border-purple-500/30 rounded-lg hover:bg-purple-600/30 transition-colors flex items-center justify-center gap-2",title:"Actualizar estado del PR desde GitHub"},[...h[162]||(h[162]=[r("i",{class:"fas fa-sync-alt"},null,-1),r("span",null,"Actualizar estado del PR",-1)])])])):(Lt=ve.value.github)!=null&&Lt.branch?(b(),y("button",{key:3,onClick:s1,class:"w-full mt-3 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm"},[...h[163]||(h[163]=[r("i",{class:"fas fa-code-pull-request mr-2"},null,-1),ne(" Crear Pull Request ",-1)])])):q("",!0)]),r("div",IM,[h[166]||(h[166]=r("label",{class:"text-xs font-medium text-gray-400 mb-3 block"},"Comentarios",-1)),r("div",LM,[(b(!0),y(ge,null,xe(ve.value.comments,A=>{var Se,Ot,Qt;return b(),y("div",{key:A._id,class:"p-3 bg-gray-700/50 rounded-lg"},[r("div",BM,[r("div",NM,w((Ot=(Se=A.user)==null?void 0:Se.name)==null?void 0:Ot.charAt(0)),1),r("span",jM,w((Qt=A.user)==null?void 0:Qt.name),1),r("span",FM,w(no(A.createdAt)),1)]),r("p",UM,w(A.text),1)])}),128))]),r("div",zM,[ie(r("input",{"onUpdate:modelValue":h[25]||(h[25]=A=>ar.value=A),onKeyup:Vn(Cp,["enter"]),type:"text",placeholder:"Aadir comentario...",class:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm"},null,544),[[ke,ar.value]]),r("button",{onClick:Cp,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},[...h[165]||(h[165]=[r("i",{class:"fas fa-paper-plane"},null,-1)])])])])])])])):q("",!0)])),(b(),Ue(Mo,{to:"body"},[Gr.value&&ve.value?(b(),y("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[10000]",onClick:h[34]||(h[34]=Fe(A=>Gr.value=!1,["self"]))},[r("div",VM,[h[179]||(h[179]=r("h3",{class:"text-xl font-bold text-white mb-4"},[r("i",{class:"fab fa-github mr-2"}),ne(" Crear rama ")],-1)),r("div",HM,[r("div",null,[h[168]||(h[168]=r("label",{class:"text-sm font-medium text-gray-300 mb-2 block"},"Repositorio",-1)),ie(r("select",{"onUpdate:modelValue":h[27]||(h[27]=A=>St.value.repository=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"},[h[167]||(h[167]=r("option",{value:""},"Seleccionar...",-1)),(b(!0),y(ge,null,xe(ye(g).repositories,A=>(b(),y("option",{key:A.name,value:A.full_name},w(A.name),9,qM))),128))],512),[[De,St.value.repository]])]),r("div",null,[h[170]||(h[170]=r("label",{class:"text-sm font-medium text-gray-300 mb-2 block"},"Tipo",-1)),ie(r("select",{"onUpdate:modelValue":h[28]||(h[28]=A=>St.value.type=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"},[...h[169]||(h[169]=[r("option",{value:"feature"},"Feature",-1),r("option",{value:"bugfix"},"Bugfix",-1),r("option",{value:"hotfix"},"Hotfix",-1),r("option",{value:"release"},"Release",-1)])],512),[[De,St.value.type]])]),r("div",null,[h[172]||(h[172]=r("label",{class:"text-sm font-medium text-gray-300 mb-2 block"},"Desde rama",-1)),ie(r("select",{"onUpdate:modelValue":h[29]||(h[29]=A=>St.value.baseBranch=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"},[...h[171]||(h[171]=[r("option",{value:"master"},"master",-1),r("option",{value:"main"},"main",-1),r("option",{value:"develop"},"develop",-1)])],512),[[De,St.value.baseBranch]])]),r("div",null,[r("label",WM,[h[174]||(h[174]=ne(" Nombre de la rama ",-1)),r("button",{onClick:h[30]||(h[30]=A=>St.value.customName=ka()),type:"button",class:"ml-2 text-xs text-blue-400 hover:text-blue-300",title:"Regenerar nombre"},[...h[173]||(h[173]=[r("i",{class:"fas fa-sync-alt"},null,-1)])])]),ie(r("input",{"onUpdate:modelValue":h[31]||(h[31]=A=>St.value.customName=A),type:"text",placeholder:"feature/task-123-titulo",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm font-mono focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onFocus:h[32]||(h[32]=()=>{St.value.customName||(St.value.customName=ka())})},null,544),[[ke,St.value.customName]]),h[175]||(h[175]=r("p",{class:"text-xs text-gray-500 mt-1"},"Puedes personalizar el nombre de la rama",-1))]),r("div",GM,[r("div",KM,[h[176]||(h[176]=r("div",{class:"w-3 h-3 bg-blue-500 rounded-full"},null,-1)),r("div",YM,w(St.value.baseBranch),1)]),h[178]||(h[178]=r("div",{class:"flex-1 h-0.5 bg-blue-500"},null,-1)),r("div",JM,[h[177]||(h[177]=r("div",{class:"w-3 h-3 bg-green-500 rounded-full"},null,-1)),r("div",XM,w(St.value.customName||ka()),1)])])]),r("div",QM,[r("button",{onClick:t1,disabled:!St.value.repository,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium"}," Crear ",8,ZM),r("button",{onClick:h[33]||(h[33]=A=>Gr.value=!1),class:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600"}," Cancelar ")])])])):q("",!0)])),k.value?(b(),y("div",eR,[...h[180]||(h[180]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"},null,-1)])])):P.value?(b(),y("div",tR,[r("div",sR,[h[182]||(h[182]=r("i",{class:"fas fa-exclamation-triangle text-red-400"},null,-1)),r("div",null,[h[181]||(h[181]=r("h3",{class:"text-red-300 font-medium"},"Error al cargar actividades",-1)),r("p",oR,w(P.value),1)])]),r("button",{onClick:Ee,class:"mt-3 px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors"}," Reintentar ")])):V.value==="kanban"?(b(),y("div",nR,[r("div",rR,[r("div",iR,[h[183]||(h[183]=r("div",{class:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-clock text-white text-sm"})],-1)),h[184]||(h[184]=r("h2",{class:"text-xl font-bold text-white"},"Pendiente",-1)),r("span",aR,w($e.value.length),1)]),r("div",{class:de(["space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto overflow-x-hidden pr-1 sm:pr-2 transition-all duration-300",R.value&&((yt=$.value)==null?void 0:yt.status)!=="pending"?"drop-zone-highlight":""]),onDrop:h[35]||(h[35]=A=>Sa(A,"pending")),onDragover:h[36]||(h[36]=Fe(()=>{},["prevent"])),onDragenter:h[37]||(h[37]=Fe(()=>{},["prevent"]))},[(b(!0),y(ge,null,xe($e.value,A=>(b(),y("div",{key:A._id,class:"bg-gray-900/50 rounded-lg p-3 sm:p-4 border border-gray-700 hover:border-yellow-500/40 transition-all duration-200 group cursor-move overflow-hidden",draggable:"true",onDragstart:Se=>$a(Se,A),onDragend:Ea},[r("div",cR,[r("div",dR,[h[185]||(h[185]=r("i",{class:"fas fa-grip-vertical text-gray-500 text-xs opacity-50 group-hover:opacity-100 transition-opacity"},null,-1)),r("h3",uR,w(A.title),1),A.priority?(b(),y("span",{key:0,class:de(["px-2.5 py-1 rounded-full text-[10px] font-semibold border inline-flex items-center gap-1 basis-full mt-1 shrink-0",Ca(A.priority)])},[r("i",{class:de([ya(A.priority),"text-[10px]"])},null,2),ne(" "+w(xa(A.priority)),1)],2)):q("",!0)]),r("div",fR,[r("button",{onClick:Se=>ut(A._id),class:"p-1 text-gray-400 hover:text-green-400 hover:bg-green-500/20 rounded transition-all duration-200",title:"Marcar como completada"},[...h[186]||(h[186]=[r("i",{class:"fas fa-check text-xs"},null,-1)])],8,pR),fe(Ut,{permissions:["edit-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>Xo(A),class:"p-1 text-gray-400 hover:text-purple-400 hover:bg-purple-500/20 rounded transition-all duration-200",title:"Editar"},[...h[187]||(h[187]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,hR)]),_:2},1024),fe(Ut,{permissions:["delete-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>oo(A._id),class:"p-1 text-gray-400 hover:text-red-400 hover:bg-red-500/20 rounded transition-all duration-200",title:"Eliminar"},[...h[188]||(h[188]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,gR)]),_:2},1024)])]),r("p",mR,w(Xr(A.clientId)),1),r("p",bR,w(A.description),1),r("div",vR,[Array.isArray(A.assignedTo)&&A.assignedTo.length?(b(!0),y(ge,{key:0},xe(A.assignedTo,Se=>(b(),y("div",{key:Se._id||Se,class:"flex items-center gap-1"},[fe(tn,{name:Re(Se).name,photo:Re(Se).photo,avatar:Re(Se).avatar},null,8,["name","photo","avatar"])]))),128)):(b(),y(ge,{key:1},[fe(tn,{name:va(A),photo:A.assignedTo&&typeof A.assignedTo=="object"?A.assignedTo.photo:"",avatar:A.assignedTo&&typeof A.assignedTo=="object"?A.assignedTo.avatar:""},null,8,["name","photo","avatar"]),A.assignedTo?q("",!0):(b(),y("button",{key:0,onClick:Se=>Wt(A),class:"ml-auto text-xs text-purple-400 hover:text-purple-300 transition-colors",title:"Asignar actividad"},[...h[189]||(h[189]=[r("i",{class:"fas fa-user-plus"},null,-1)])],8,yR))],64))]),r("div",xR,[r("div",wR,[h[190]||(h[190]=r("i",{class:"fas fa-calendar"},null,-1)),r("span",null,w(no(A.date)),1)]),A.estimatedTime?(b(),y("div",_R,[h[191]||(h[191]=r("i",{class:"fas fa-clock"},null,-1)),r("span",null,w(A.estimatedTime),1)])):q("",!0)]),A.dueDate?(b(),y("div",kR,[h[192]||(h[192]=r("i",{class:"fas fa-calendar-times text-orange-400"},null,-1)),r("span",{class:de(["text-orange-400",{"text-red-400":Ss(A.dueDate)}])}," Vence: "+w(no(A.dueDate)),3)])):q("",!0)],40,lR))),128)),$e.value.length===0?(b(),y("div",CR,[...h[193]||(h[193]=[r("i",{class:"fas fa-clock text-3xl text-gray-600 mb-2"},null,-1),r("p",{class:"text-gray-400 text-sm"},"No hay actividades pendientes",-1)])])):q("",!0)],34),r("div",$R,[r("button",{onClick:h[38]||(h[38]=A=>dp("pending")),class:"w-full py-2 border border-dashed border-yellow-500/30 rounded-lg text-yellow-300 hover:text-yellow-200 hover:border-yellow-400/50 hover:bg-yellow-500/5 transition-all duration-200 text-sm"},[...h[194]||(h[194]=[r("i",{class:"fas fa-plus mr-2"},null,-1),ne(" Agregar tarea rpida ",-1)])])])]),r("div",ER,[r("div",SR,[h[195]||(h[195]=r("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-play text-white text-sm"})],-1)),h[196]||(h[196]=r("h2",{class:"text-xl font-bold text-white"},"En Proceso",-1)),r("span",AR,w(Ce.value.length),1)]),r("div",{class:de(["space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto overflow-x-hidden pr-1 sm:pr-2 transition-all duration-300",R.value&&((ds=$.value)==null?void 0:ds.status)!=="in-progress"?"drop-zone-highlight":""]),onDrop:h[39]||(h[39]=A=>Sa(A,"in-progress")),onDragover:h[40]||(h[40]=Fe(()=>{},["prevent"])),onDragenter:h[41]||(h[41]=Fe(()=>{},["prevent"]))},[(b(!0),y(ge,null,xe(Ce.value,A=>(b(),y("div",{key:A._id,class:"bg-gray-900/50 rounded-lg p-3 sm:p-4 border border-gray-700 hover:border-blue-500/40 transition-all duration-200 group cursor-move overflow-hidden",draggable:"true",onDragstart:Se=>$a(Se,A),onDragend:Ea},[r("div",PR,[r("div",MR,[h[197]||(h[197]=r("i",{class:"fas fa-grip-vertical text-gray-500 text-xs opacity-50 group-hover:opacity-100 transition-opacity"},null,-1)),r("h3",RR,w(A.title),1),A.priority?(b(),y("span",{key:0,class:de(["px-2.5 py-1 rounded-full text-[10px] font-semibold border inline-flex items-center gap-1 basis-full mt-1 shrink-0",Ca(A.priority)])},[r("i",{class:de([ya(A.priority),"text-[10px]"])},null,2),ne(" "+w(xa(A.priority)),1)],2)):q("",!0)]),r("div",DR,[r("button",{onClick:Se=>ut(A._id),class:"p-1 text-gray-400 hover:text-green-400 hover:bg-green-500/20 rounded transition-all duration-200",title:"Marcar como completada"},[...h[198]||(h[198]=[r("i",{class:"fas fa-check text-xs"},null,-1)])],8,OR),fe(Ut,{permissions:["edit-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>Xo(A),class:"p-1 text-gray-400 hover:text-purple-400 hover:bg-purple-500/20 rounded transition-all duration-200",title:"Editar"},[...h[199]||(h[199]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,IR)]),_:2},1024),fe(Ut,{permissions:["delete-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>oo(A._id),class:"p-1 text-gray-400 hover:text-red-400 hover:bg-red-500/20 rounded transition-all duration-200",title:"Eliminar"},[...h[200]||(h[200]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,LR)]),_:2},1024)])]),r("p",BR,w(Xr(A.clientId)),1),r("p",NR,w(A.description),1),r("div",jR,[Array.isArray(A.assignedTo)&&A.assignedTo.length>0?(b(!0),y(ge,{key:0},xe(A.assignedTo,Se=>(b(),y("div",{key:Se._id||Se,class:"flex items-center gap-1"},[fe(tn,{name:Re(Se).name,photo:Re(Se).photo,avatar:Re(Se).avatar},null,8,["name","photo","avatar"])]))),128)):(b(),y(ge,{key:1},[fe(tn,{name:va(A),photo:"",avatar:""},null,8,["name"]),!Array.isArray(A.assignedTo)||A.assignedTo.length===0?(b(),y("button",{key:0,onClick:Se=>Wt(A),class:"ml-auto text-xs text-purple-400 hover:text-purple-300 transition-colors",title:"Asignar actividad"},[...h[201]||(h[201]=[r("i",{class:"fas fa-user-plus"},null,-1)])],8,FR)):q("",!0)],64))]),r("div",UR,[r("div",zR,[h[202]||(h[202]=r("i",{class:"fas fa-calendar"},null,-1)),r("span",null,w(no(A.date)),1)]),A.estimatedTime?(b(),y("div",VR,[h[203]||(h[203]=r("i",{class:"fas fa-clock"},null,-1)),r("span",null,w(A.estimatedTime),1)])):q("",!0)]),A.dueDate?(b(),y("div",HR,[h[204]||(h[204]=r("i",{class:"fas fa-calendar-times text-orange-400"},null,-1)),r("span",{class:de(["text-orange-400",{"text-red-400":Ss(A.dueDate)}])}," Vence: "+w(no(A.dueDate)),3)])):q("",!0)],40,TR))),128)),Ce.value.length===0?(b(),y("div",qR,[...h[205]||(h[205]=[r("i",{class:"fas fa-play text-3xl text-gray-600 mb-2"},null,-1),r("p",{class:"text-gray-400 text-sm"},"No hay actividades en proceso",-1)])])):q("",!0)],34),r("div",WR,[r("button",{onClick:h[42]||(h[42]=A=>dp("in-progress")),class:"w-full py-2 border border-dashed border-blue-500/30 rounded-lg text-blue-300 hover:text-blue-200 hover:border-blue-400/50 hover:bg-blue-500/5 transition-all duration-200 text-sm"},[...h[206]||(h[206]=[r("i",{class:"fas fa-plus mr-2"},null,-1),ne(" Agregar tarea rpida ",-1)])])])]),r("div",GR,[r("div",KR,[h[207]||(h[207]=r("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-check text-white text-sm"})],-1)),h[208]||(h[208]=r("h2",{class:"text-xl font-bold text-white"},"Completada",-1)),r("span",YR,w(oe.value.length),1)]),r("div",{class:de(["space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto overflow-x-hidden pr-1 sm:pr-2 transition-all duration-300",R.value&&((vs=$.value)==null?void 0:vs.status)!=="completed"?"drop-zone-highlight":""]),onDrop:h[43]||(h[43]=A=>Sa(A,"completed")),onDragover:h[44]||(h[44]=Fe(()=>{},["prevent"])),onDragenter:h[45]||(h[45]=Fe(()=>{},["prevent"]))},[(b(!0),y(ge,null,xe(oe.value,A=>(b(),y("div",{key:A._id,class:"bg-gray-900/50 rounded-lg p-3 sm:p-4 border border-gray-700 hover:border-green-500/40 transition-all duration-200 group cursor-move overflow-hidden",draggable:"true",onDragstart:Se=>$a(Se,A),onDragend:Ea},[r("div",XR,[r("div",QR,[h[209]||(h[209]=r("i",{class:"fas fa-grip-vertical text-gray-500 text-xs opacity-50 group-hover:opacity-100 transition-opacity"},null,-1)),r("h3",ZR,w(A.title),1),A.priority?(b(),y("span",{key:0,class:de(["px-2.5 py-1 rounded-full text-[10px] font-semibold border inline-flex items-center gap-1 basis-full mt-1 shrink-0",Ca(A.priority)])},[r("i",{class:de([ya(A.priority),"text-[10px]"])},null,2),ne(" "+w(xa(A.priority)),1)],2)):q("",!0)]),r("div",eD,[r("button",{onClick:Se=>rt(A._id),class:"p-1 text-gray-400 hover:text-yellow-400 hover:bg-yellow-500/20 rounded transition-all duration-200",title:"Marcar como pendiente"},[...h[210]||(h[210]=[r("i",{class:"fas fa-undo text-xs"},null,-1)])],8,tD),fe(Ut,{permissions:["edit-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>Xo(A),class:"p-1 text-gray-400 hover:text-purple-400 hover:bg-purple-500/20 rounded transition-all duration-200",title:"Editar"},[...h[211]||(h[211]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,sD)]),_:2},1024),fe(Ut,{permissions:["delete-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>oo(A._id),class:"p-1 text-gray-400 hover:text-red-400 hover:bg-red-500/20 rounded transition-all duration-200",title:"Eliminar"},[...h[212]||(h[212]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,oD)]),_:2},1024)])]),r("p",nD,w(Xr(A.clientId)),1),r("p",rD,w(A.description),1),r("div",iD,[Array.isArray(A.assignedTo)&&A.assignedTo.length>0?(b(!0),y(ge,{key:0},xe(A.assignedTo,Se=>(b(),y("div",{key:Se._id||Se,class:"flex items-center gap-1"},[fe(tn,{name:Re(Se).name,photo:Re(Se).photo,avatar:Re(Se).avatar},null,8,["name","photo","avatar"])]))),128)):(b(),Ue(tn,{key:1,name:va(A),photo:"",avatar:""},null,8,["name"]))]),r("div",aD,[r("div",lD,[h[213]||(h[213]=r("i",{class:"fas fa-calendar"},null,-1)),r("span",null,w(no(A.date)),1)]),h[214]||(h[214]=r("div",{class:"flex items-center gap-1"},[r("i",{class:"fas fa-check-circle text-green-400"}),r("span",null,"Completada")],-1))])],40,JR))),128)),oe.value.length===0?(b(),y("div",cD,[...h[215]||(h[215]=[r("i",{class:"fas fa-check-circle text-3xl text-gray-600 mb-2"},null,-1),r("p",{class:"text-gray-400 text-sm"},"No hay actividades completadas",-1)])])):q("",!0)],34)]),r("div",dD,[r("div",uD,[h[216]||(h[216]=r("div",{class:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-exclamation-triangle text-white text-sm"})],-1)),h[217]||(h[217]=r("h2",{class:"text-xl font-bold text-white"},"Vencida",-1)),r("span",fD,w(be.value.length),1)]),r("div",{class:de(["space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto overflow-x-hidden pr-1 sm:pr-2 transition-all duration-300",R.value&&((Co=$.value)==null?void 0:Co.status)!=="overdue"?"drop-zone-highlight":""]),onDrop:h[46]||(h[46]=A=>Sa(A,"overdue")),onDragover:h[47]||(h[47]=Fe(()=>{},["prevent"])),onDragenter:h[48]||(h[48]=Fe(()=>{},["prevent"]))},[(b(!0),y(ge,null,xe(be.value,A=>(b(),y("div",{key:A._id,class:"bg-red-900/20 rounded-lg p-3 sm:p-4 border border-red-500/40 hover:border-red-500/60 transition-all duration-200 group cursor-move overflow-hidden",draggable:"true",onDragstart:Se=>$a(Se,A),onDragend:Ea},[r("div",hD,[r("div",gD,[h[218]||(h[218]=r("i",{class:"fas fa-grip-vertical text-gray-500 text-xs opacity-50 group-hover:opacity-100 transition-opacity"},null,-1)),r("h3",mD,w(A.title),1),A.priority?(b(),y("span",{key:0,class:de(["px-2.5 py-1 rounded-full text-[10px] font-semibold border inline-flex items-center gap-1 basis-full mt-1 shrink-0",Ca(A.priority)])},[r("i",{class:de([ya(A.priority),"text-[10px]"])},null,2),ne(" "+w(xa(A.priority)),1)],2)):q("",!0)]),r("div",bD,[r("button",{onClick:Se=>Jt(A._id),class:"p-1 text-gray-400 hover:text-blue-400 hover:bg-blue-500/20 rounded transition-all duration-200",title:"Retomar actividad"},[...h[219]||(h[219]=[r("i",{class:"fas fa-play text-xs"},null,-1)])],8,vD),r("button",{onClick:Se=>Xt(A._id),class:"p-1 text-gray-400 hover:text-yellow-400 hover:bg-yellow-500/20 rounded transition-all duration-200",title:"Extender plazo"},[...h[220]||(h[220]=[r("i",{class:"fas fa-calendar-plus text-xs"},null,-1)])],8,yD),fe(Ut,{permissions:["edit-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>Xo(A),class:"p-1 text-gray-400 hover:text-purple-400 hover:bg-purple-500/20 rounded transition-all duration-200",title:"Editar"},[...h[221]||(h[221]=[r("i",{class:"fas fa-edit text-xs"},null,-1)])],8,xD)]),_:2},1024),fe(Ut,{permissions:["delete-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:Se=>oo(A._id),class:"p-1 text-gray-400 hover:text-red-400 hover:bg-red-500/20 rounded transition-all duration-200",title:"Eliminar"},[...h[222]||(h[222]=[r("i",{class:"fas fa-trash text-xs"},null,-1)])],8,wD)]),_:2},1024)])]),r("p",_D,w(Xr(A.clientId)),1),r("p",kD,w(A.description),1),r("div",CD,[Array.isArray(A.assignedTo)&&A.assignedTo.length>0?(b(!0),y(ge,{key:0},xe(A.assignedTo,Se=>(b(),y("div",{key:Se._id||Se,class:"flex items-center gap-1"},[fe(tn,{name:Re(Se).name,photo:Re(Se).photo,avatar:Re(Se).avatar},null,8,["name","photo","avatar"])]))),128)):(b(),y(ge,{key:1},[fe(tn,{name:va(A),photo:"",avatar:""},null,8,["name"]),!Array.isArray(A.assignedTo)||A.assignedTo.length===0?(b(),y("button",{key:0,onClick:Se=>Wt(A),class:"ml-auto text-xs text-purple-400 hover:text-purple-300 transition-colors",title:"Asignar actividad"},[...h[223]||(h[223]=[r("i",{class:"fas fa-user-plus"},null,-1)])],8,$D)):q("",!0)],64))]),r("div",ED,[r("div",SD,[h[224]||(h[224]=r("i",{class:"fas fa-calendar"},null,-1)),r("span",null,w(no(A.date)),1)]),A.estimatedTime?(b(),y("div",AD,[h[225]||(h[225]=r("i",{class:"fas fa-clock"},null,-1)),r("span",null,w(A.estimatedTime),1)])):q("",!0)]),A.dueDate?(b(),y("div",TD,[h[226]||(h[226]=r("i",{class:"fas fa-exclamation-triangle text-red-400"},null,-1)),r("span",PD," Venci: "+w(no(A.dueDate)),1),r("span",MD," ("+w(Ls(A.dueDate))+" das) ",1)])):q("",!0)],40,pD))),128)),be.value.length===0?(b(),y("div",RD,[...h[227]||(h[227]=[r("i",{class:"fas fa-exclamation-triangle text-3xl text-gray-600 mb-2"},null,-1),r("p",{class:"text-gray-400 text-sm"},"No hay actividades vencidas",-1),r("p",{class:"text-gray-500 text-xs mt-1"},"Excelente gestin del tiempo!",-1)])])):q("",!0)],34)])])):q("",!0),!k.value&&!P.value&&v.value.length===0?(b(),y("div",DD,[r("div",OD,[h[229]||(h[229]=r("i",{class:"fas fa-tasks text-6xl text-gray-600 mb-4"},null,-1)),h[230]||(h[230]=r("h3",{class:"text-xl font-bold text-white mb-2"},"No hay actividades",-1)),r("p",ID,w(o.searchTerm?"No se encontraron actividades que coincidan con tu bsqueda":"Comienza agregando tu primera actividad"),1),fe(Ut,{permissions:["create-activities"],fallback:!1},{default:tt(()=>[r("button",{onClick:h[49]||(h[49]=A=>Pe.value=!0),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200"},[...h[228]||(h[228]=[r("i",{class:"fas fa-plus mr-2"},null,-1),ne(" Crear Primera Actividad ",-1)])])]),_:1})])])):q("",!0),Pe.value||me.value?(b(),Ue(uy,{key:8,activity:Y.value,clients:x.value,"team-members":_.value,onClose:ma,onSaved:ba},null,8,["activity","clients","team-members"])):q("",!0),j.value?(b(),Ue(fy,{key:9,activity:Q.value,"team-members":_.value,onClose:As,onAssign:wx},null,8,["activity","team-members"])):q("",!0),G.value?(b(),Ue(y7,{key:10,"selected-date":te.value,onClose:h[50]||(h[50]=A=>{G.value=!1,te.value=null}),onCreate:cp},null,8,["selected-date"])):q("",!0),(b(),Ue(Mo,{to:"body"},[E.value?(b(),y("div",LD,[r("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:h[51]||(h[51]=A=>E.value=!1)}),r("div",BD,[r("div",ND,[r("div",jD,[h[232]||(h[232]=r("div",{class:"flex items-center gap-3"},[r("div",{class:"w-10 h-10 bg-yellow-600 rounded-xl flex items-center justify-center"},[r("i",{class:"fas fa-cog text-white"})]),r("div",null,[r("h3",{class:"text-xl font-bold text-white"},"Configuracin"),r("p",{class:"text-sm text-gray-400"},"Tareas rpidas por defecto")])],-1)),r("button",{onClick:h[52]||(h[52]=A=>E.value=!1),class:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-all duration-200"},[...h[231]||(h[231]=[r("i",{class:"fas fa-times"},null,-1)])])]),r("div",FD,[r("div",null,[h[233]||(h[233]=r("label",{class:"flex items-center gap-2 text-sm font-medium text-gray-200 mb-3"},[r("i",{class:"fas fa-calendar-day text-yellow-400"}),ne(" Das hasta vencimiento ")],-1)),r("div",UD,[(b(),y(ge,null,xe([1,2,3,7],A=>r("button",{key:A,onClick:Se=>K.value.dueDays=A,class:de(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",K.value.dueDays===A?"bg-yellow-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},w(A===7?"1 sem":`${A} da${A>1?"s":""}`),11,zD)),64))])]),r("div",null,[h[234]||(h[234]=r("label",{class:"flex items-center gap-2 text-sm font-medium text-gray-200 mb-3"},[r("i",{class:"fas fa-flag text-yellow-400"}),ne(" Prioridad por defecto ")],-1)),r("div",VD,[(b(),y(ge,null,xe([{value:"low",label:"Baja",color:"green"},{value:"medium",label:"Media",color:"yellow"},{value:"high",label:"Alta",color:"orange"},{value:"urgent",label:"Urgente",color:"red"}],A=>r("button",{key:A.value,onClick:Se=>K.value.priority=A.value,class:de(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2",K.value.priority===A.value?`bg-${A.color}-600 text-white shadow-lg`:"bg-gray-700 text-gray-300 hover:bg-gray-600"])},[r("i",{class:de(`fas fa-circle text-${A.color}-400 text-xs`)},null,2),ne(" "+w(A.label),1)],10,HD)),64))])]),r("div",null,[h[235]||(h[235]=r("label",{class:"flex items-center gap-2 text-sm font-medium text-gray-200 mb-3"},[r("i",{class:"fas fa-clock text-yellow-400"}),ne(" Tiempo estimado ")],-1)),r("div",qD,[(b(),y(ge,null,xe(["30 min","1 hora","2 horas","4 horas","1 da"],A=>r("button",{key:A,onClick:Se=>K.value.estimatedTime=A,class:de(["px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",K.value.estimatedTime===A?"bg-yellow-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},w(A),11,WD)),64))])]),r("div",GD,[r("label",KD,[r("div",YD,[ie(r("input",{"onUpdate:modelValue":h[53]||(h[53]=A=>K.value.autoAssign=A),type:"checkbox",class:"sr-only"},null,512),[[_c,K.value.autoAssign]]),r("div",{class:de(["w-12 h-6 rounded-full transition-all duration-200",K.value.autoAssign?"bg-yellow-600":"bg-gray-600"])},[r("div",{class:de(["w-5 h-5 bg-white rounded-full transition-transform duration-200 mt-0.5",K.value.autoAssign?"translate-x-6 ml-1":"translate-x-0 ml-1"])},null,2)],2)]),h[236]||(h[236]=r("div",null,[r("span",{class:"text-white font-medium"},"Auto-asignacin"),r("p",{class:"text-xs text-gray-400"},"Asignarme automticamente las tareas rpidas")],-1))])])]),r("div",JD,[r("button",{onClick:Cx,class:"px-4 py-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-all duration-200 text-sm font-medium"},[...h[237]||(h[237]=[r("i",{class:"fas fa-undo mr-2"},null,-1),ne(" Restablecer ",-1)])]),r("div",XD,[r("button",{onClick:h[54]||(h[54]=A=>E.value=!1),class:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all duration-200 text-sm font-medium"}," Cancelar "),r("button",{onClick:h[55]||(h[55]=A=>E.value=!1),class:"px-6 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-all duration-200 text-sm font-medium shadow-lg"},[...h[238]||(h[238]=[r("i",{class:"fas fa-save mr-2"},null,-1),ne(" Guardar ",-1)])])])])])])])):q("",!0)])),(b(),Ue(Mo,{to:"body"},[ir.value?(b(),y("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:Fe(td,["self"])},[r("div",QD,[r("h2",ZD,[h[239]||(h[239]=r("i",{class:"fas fa-tasks mr-2"},null,-1)),ne(" "+w(Qo.value?"Editar Tarea":"Nueva Tarea"),1)]),r("form",{onSubmit:Fe(Gx,["prevent"])},[r("div",eO,[r("div",tO,[h[240]||(h[240]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Ttulo *",-1)),ie(r("input",{"onUpdate:modelValue":h[56]||(h[56]=A=>Te.value.title=A),type:"text",required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Ttulo de la tarea"},null,512),[[ke,Te.value.title]])]),r("div",sO,[h[241]||(h[241]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Descripcin",-1)),ie(r("textarea",{"onUpdate:modelValue":h[57]||(h[57]=A=>Te.value.description=A),rows:"3",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Describe la tarea..."},null,512),[[ke,Te.value.description]])]),r("div",null,[h[243]||(h[243]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Tipo *",-1)),ie(r("select",{"onUpdate:modelValue":h[58]||(h[58]=A=>Te.value.type=A),required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...h[242]||(h[242]=[r("option",{value:"epic"},"pica",-1),r("option",{value:"feature"},"Feature",-1),r("option",{value:"user-story"},"User Story",-1),r("option",{value:"task"},"Task",-1),r("option",{value:"bug"},"Bug",-1)])],512),[[De,Te.value.type]])]),Te.value.type==="feature"?(b(),y("div",oO,[h[245]||(h[245]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-mountain text-purple-400 mr-1"}),ne(" pica * ")],-1)),ie(r("select",{"onUpdate:modelValue":h[59]||(h[59]=A=>Te.value.epicId=A),required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[h[244]||(h[244]=r("option",{value:""},"Selecciona una pica",-1)),(b(!0),y(ge,null,xe(gp(),A=>(b(),y("option",{key:A._id,value:A._id},w(A.title),9,nO))),128))],512),[[De,Te.value.epicId]])])):q("",!0),Te.value.type==="user-story"?(b(),y("div",rO,[h[247]||(h[247]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-layer-group text-blue-400 mr-1"}),ne(" Feature * ")],-1)),ie(r("select",{"onUpdate:modelValue":h[60]||(h[60]=A=>Te.value.featureId=A),required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[h[246]||(h[246]=r("option",{value:""},"Selecciona una feature",-1)),(b(!0),y(ge,null,xe(ye(p).tasks.filter(A=>A.type==="feature"),A=>(b(),y("option",{key:A._id,value:A._id},w(A.title),9,iO))),128))],512),[[De,Te.value.featureId]])])):q("",!0),Te.value.type==="task"?(b(),y("div",aO,[h[249]||(h[249]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-book-open text-green-400 mr-1"}),ne(" User Story (opcional) ")],-1)),ie(r("select",{"onUpdate:modelValue":h[61]||(h[61]=A=>Te.value.userStoryId=A),class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent"},[h[248]||(h[248]=r("option",{value:""},"Sin User Story (tarea independiente)",-1)),(b(!0),y(ge,null,xe(ye(p).tasks.filter(A=>A.type==="user-story"),A=>(b(),y("option",{key:A._id,value:A._id},w(A.title),9,lO))),128))],512),[[De,Te.value.userStoryId]])])):q("",!0),r("div",null,[h[251]||(h[251]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Prioridad *",-1)),ie(r("select",{"onUpdate:modelValue":h[62]||(h[62]=A=>Te.value.priority=A),required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...h[250]||(h[250]=[r("option",{value:"low"},"Baja",-1),r("option",{value:"medium"},"Media",-1),r("option",{value:"high"},"Alta",-1),r("option",{value:"critical"},"Crtica",-1)])],512),[[De,Te.value.priority]])]),r("div",null,[h[252]||(h[252]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Estado *",-1)),ie(r("select",{"onUpdate:modelValue":h[63]||(h[63]=A=>Te.value.boardStatus=A),required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent"},[(b(!0),y(ge,null,xe((Aa=it.value)==null?void 0:Aa.columns,A=>(b(),y("option",{key:A.id,value:A.mappedStatus},w(A.name),9,cO))),128))],512),[[De,Te.value.boardStatus]])]),(($p=it.value)==null?void 0:$p.type)==="scrum"?(b(),y("div",dO,[h[254]||(h[254]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Sprint",-1)),ie(r("select",{"onUpdate:modelValue":h[64]||(h[64]=A=>Te.value.sprint=A),class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent"},[h[253]||(h[253]=r("option",{value:""},"Backlog",-1)),(b(!0),y(ge,null,xe((Ep=it.value)==null?void 0:Ep.sprints,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name),9,uO))),128))],512),[[De,Te.value.sprint]])])):q("",!0),r("div",null,[h[256]||(h[256]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Asignar a",-1)),ie(r("select",{"onUpdate:modelValue":h[65]||(h[65]=A=>Te.value.assignedTo=A),class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent"},[h[255]||(h[255]=r("option",{value:""},"Sin asignar",-1)),(b(!0),y(ge,null,xe(_.value,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name),9,fO))),128))],512),[[De,Te.value.assignedTo]])]),((Sp=it.value)==null?void 0:Sp.type)==="scrum"?(b(),y("div",pO,[h[257]||(h[257]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Story Points",-1)),ie(r("input",{"onUpdate:modelValue":h[66]||(h[66]=A=>Te.value.storyPoints=A),type:"number",min:"0",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0"},null,512),[[ke,Te.value.storyPoints,void 0,{number:!0}]])])):q("",!0),r("div",hO,[h[259]||(h[259]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Estimacin de tiempo",-1)),ie(r("select",{"onUpdate:modelValue":h[67]||(h[67]=A=>Te.value.estimatedTime=A),class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 focus:border-transparent"},[...h[258]||(h[258]=[r("option",{value:""},"Sin estimacin",-1),r("option",{value:"15m"},"15 minutos",-1),r("option",{value:"30m"},"30 minutos",-1),r("option",{value:"1h"},"1 hora",-1),r("option",{value:"2h"},"2 horas",-1),r("option",{value:"3h"},"3 horas",-1),r("option",{value:"4h"},"4 horas",-1),r("option",{value:"1d"},"1 da",-1),r("option",{value:"2d"},"2 das",-1),r("option",{value:"3d"},"3 das",-1),r("option",{value:"1w"},"1 semana",-1),r("option",{value:"2w"},"2 semanas",-1)])],512),[[De,Te.value.estimatedTime]])]),r("div",gO,[h[260]||(h[260]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Etiquetas",-1)),ie(r("input",{"onUpdate:modelValue":h[68]||(h[68]=A=>Te.value.tags=A),type:"text",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"frontend, backend, api (separadas por comas)"},null,512),[[ke,Te.value.tags]])])]),r("div",mO,[r("button",{type:"button",onClick:td,class:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 border border-gray-600 rounded-lg hover:bg-gray-600"}," Cancelar "),r("button",{type:"submit",disabled:!Te.value.title||!Te.value.type||!Te.value.boardStatus,class:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed"},[r("i",{class:de([Qo.value?"fas fa-save":"fas fa-plus","mr-2"])},null,2),ne(" "+w(Qo.value?"Guardar Cambios":"Crear Tarea"),1)],8,bO)])],32)])])):q("",!0)])),(b(),Ue(Mo,{to:"body"},[D.value?(b(),y("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:h[73]||(h[73]=Fe(A=>D.value=!1,["self"]))},[r("div",vO,[h[271]||(h[271]=r("h2",{class:"text-xl font-bold text-white mb-4"},[r("i",{class:"fas fa-plus-circle mr-2 text-purple-400"}),ne(" Crear Nuevo Tablero ")],-1)),x.value.length>0?(b(),y("div",yO,[h[261]||(h[261]=r("i",{class:"fas fa-check-circle mr-1"},null,-1)),ne(" "+w(x.value.length)+" cliente(s) disponible(s) ",1)])):q("",!0),r("form",{onSubmit:Fe($x,["prevent"])},[r("div",xO,[h[262]||(h[262]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-tag text-purple-400 mr-1"}),ne(" Nombre * ")],-1)),ie(r("input",{"onUpdate:modelValue":h[69]||(h[69]=A=>H.value.name=A),type:"text",required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ej: Desarrollo App Mvil"},null,512),[[ke,H.value.name]])]),r("div",wO,[h[266]||(h[266]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-user-tie text-blue-400 mr-1"}),ne(" Cliente / Proyecto * ")],-1)),x.value.length===0?(b(),y("div",_O,[r("div",{class:"flex items-start gap-2"},[h[265]||(h[265]=r("i",{class:"fas fa-exclamation-triangle text-yellow-500 mt-0.5"},null,-1)),r("div",{class:"flex-1"},[h[264]||(h[264]=r("p",{class:"text-xs text-yellow-200"}," No hay clientes disponibles. Debes crear un cliente primero. ",-1)),r("button",{type:"button",onClick:Tx,class:"mt-2 text-xs text-blue-400 hover:text-blue-300 underline"},[...h[263]||(h[263]=[r("i",{class:"fas fa-external-link-alt mr-1"},null,-1),ne(" Ir a crear cliente ",-1)])])])])])):q("",!0),ie(r("select",{"onUpdate:modelValue":h[70]||(h[70]=A=>H.value.clientId=A),required:"",disabled:x.value.length===0,class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"},[r("option",CO,w(x.value.length===0?"No hay clientes disponibles":"Selecciona un cliente"),1),(b(!0),y(ge,null,xe(x.value,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name)+w(A.company?` - ${A.company}`:""),9,$O))),128))],8,kO),[[De,H.value.clientId]]),h[267]||(h[267]=r("p",{class:"text-xs text-gray-400 mt-1"},[r("i",{class:"fas fa-info-circle mr-1"}),ne(" El tablero se asociar a este cliente/proyecto ")],-1))]),r("div",EO,[h[268]||(h[268]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-align-left text-gray-400 mr-1"}),ne(" Descripcin ")],-1)),ie(r("textarea",{"onUpdate:modelValue":h[71]||(h[71]=A=>H.value.description=A),rows:"3",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Descripcin del proyecto..."},null,512),[[ke,H.value.description]])]),h[270]||(h[270]=r("div",{class:"mb-6"},[r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-layer-group text-purple-400 mr-1"}),ne(" Tipo de Tablero ")]),r("div",{class:"flex items-center p-4 border-2 border-purple-500 bg-purple-500/10 rounded-lg"},[r("div",{class:"flex-1"},[r("div",{class:"font-medium text-white"},"Scrum"),r("div",{class:"text-xs text-gray-400"},"Tablero con sprints para gestin gil")]),r("i",{class:"fas fa-check-circle text-purple-500 text-xl"})])],-1)),r("div",SO,[r("button",{type:"button",onClick:h[72]||(h[72]=A=>D.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 border border-gray-600 rounded-lg hover:bg-gray-600"}," Cancelar "),r("button",{type:"submit",disabled:!H.value.name||!H.value.clientId,class:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed"},[...h[269]||(h[269]=[r("i",{class:"fas fa-plus mr-2"},null,-1),ne(" Crear Tablero ",-1)])],8,AO)])],32)])])):q("",!0)])),(b(),Ue(Mo,{to:"body"},[ee.value?(b(),y("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:h[80]||(h[80]=Fe(A=>ee.value=!1,["self"]))},[r("div",TO,[r("div",PO,[h[273]||(h[273]=r("h2",{class:"text-xl font-bold text-white"},[r("i",{class:"fas fa-running mr-2 text-blue-400"}),ne(" Gestionar Sprints ")],-1)),r("button",{onClick:h[74]||(h[74]=A=>ee.value=!1),class:"text-gray-400 hover:text-white"},[...h[272]||(h[272]=[r("i",{class:"fas fa-times"},null,-1)])])]),it.value?(b(),y("div",MO,[r("div",RO,[r("div",null,[r("div",DO,[h[274]||(h[274]=r("i",{class:"fas fa-layer-group text-purple-400"},null,-1)),r("span",OO,w(it.value.name),1)]),it.value.client?(b(),y("div",IO,[h[275]||(h[275]=r("i",{class:"fas fa-user-tie text-blue-400"},null,-1)),r("span",null,w(it.value.client.name),1),it.value.client.company?(b(),y("span",LO," - "+w(it.value.client.company),1)):q("",!0)])):q("",!0)]),r("div",BO,[h[276]||(h[276]=r("div",{class:"text-xs text-gray-400"},"Total Sprints",-1)),r("div",NO,w(((Ap=it.value.sprints)==null?void 0:Ap.length)||0),1)])])])):q("",!0),r("div",jO,[h[282]||(h[282]=r("h3",{class:"text-sm font-medium text-blue-400 mb-3"},[r("i",{class:"fas fa-plus-circle mr-2"}),ne(" Crear Nuevo Sprint ")],-1)),r("form",{onSubmit:Fe(Sx,["prevent"]),class:"space-y-3"},[r("div",FO,[r("div",null,[h[277]||(h[277]=r("label",{class:"block text-xs font-medium text-gray-300 mb-1"},"Nombre del Sprint *",-1)),ie(r("input",{"onUpdate:modelValue":h[75]||(h[75]=A=>he.value.name=A),type:"text",required:"",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Sprint 1"},null,512),[[ke,he.value.name]])]),r("div",null,[h[278]||(h[278]=r("label",{class:"block text-xs font-medium text-gray-300 mb-1"},"Objetivo",-1)),ie(r("input",{"onUpdate:modelValue":h[76]||(h[76]=A=>he.value.goal=A),type:"text",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Implementar autenticacin"},null,512),[[ke,he.value.goal]])])]),r("div",UO,[r("div",null,[h[279]||(h[279]=r("label",{class:"block text-xs font-medium text-gray-300 mb-1"},"Fecha Inicio *",-1)),ie(r("input",{"onUpdate:modelValue":h[77]||(h[77]=A=>he.value.startDate=A),type:"date",required:"",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[ke,he.value.startDate]])]),r("div",null,[h[280]||(h[280]=r("label",{class:"block text-xs font-medium text-gray-300 mb-1"},"Fecha Fin *",-1)),ie(r("input",{"onUpdate:modelValue":h[78]||(h[78]=A=>he.value.endDate=A),type:"date",required:"",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[ke,he.value.endDate]])])]),r("button",{type:"submit",disabled:!he.value.name||!he.value.startDate||!he.value.endDate,class:"w-full px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed"},[...h[281]||(h[281]=[r("i",{class:"fas fa-plus mr-2"},null,-1),ne(" Crear Sprint ",-1)])],8,zO)],32)]),r("div",VO,[h[287]||(h[287]=r("h3",{class:"text-sm font-medium text-gray-300"},[r("i",{class:"fas fa-list mr-2"}),ne(" Sprints Existentes ")],-1)),!((Tp=it.value)!=null&&Tp.sprints)||it.value.sprints.length===0?(b(),y("div",HO,[...h[283]||(h[283]=[r("i",{class:"fas fa-inbox text-4xl mb-3 opacity-50"},null,-1),r("p",null,"No hay sprints creados",-1),r("p",{class:"text-xs mt-1"},"Crea tu primer sprint usando el formulario arriba",-1)])])):(b(),y("div",qO,[(b(!0),y(ge,null,xe(it.value.sprints,A=>(b(),y("div",{key:A._id,class:"p-4 bg-gray-700/30 border border-gray-600/50 rounded-lg hover:border-blue-500/50 transition-colors"},[r("div",WO,[r("div",GO,[r("div",KO,[r("h4",YO,w(A.name),1),r("span",{class:de([{"bg-green-500/20 text-green-400 border-green-500/30":A.status==="active","bg-gray-500/20 text-gray-400 border-gray-500/30":A.status==="planned","bg-blue-500/20 text-blue-400 border-blue-500/30":A.status==="completed"},"text-xs px-2 py-0.5 rounded-full border"])},w(A.status==="active"?"Activo":A.status==="planned"?"Planeado":"Completado"),3)]),A.goal?(b(),y("p",JO,w(A.goal),1)):q("",!0),r("div",XO,[r("span",null,[h[284]||(h[284]=r("i",{class:"fas fa-calendar-alt mr-1"},null,-1)),ne(" "+w(no(A.startDate))+" - "+w(no(A.endDate)),1)]),A.velocity?(b(),y("span",QO,[h[285]||(h[285]=r("i",{class:"fas fa-tachometer-alt mr-1"},null,-1)),ne(" Velocity: "+w(A.velocity),1)])):q("",!0)])]),r("div",ZO,[r("button",{onClick:Se=>Ax(A._id),class:"p-2 text-red-400 hover:bg-red-500/20 rounded transition-colors",title:"Eliminar sprint"},[...h[286]||(h[286]=[r("i",{class:"fas fa-trash text-sm"},null,-1)])],8,e9)])])]))),128))]))]),r("div",t9,[r("button",{onClick:h[79]||(h[79]=A=>ee.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 border border-gray-600 rounded-lg hover:bg-gray-600"}," Cerrar ")])])])):q("",!0)])),(b(),Ue(Mo,{to:"body"},[W.value?(b(),y("div",{key:0,class:"fixed inset-0 z-[9998]",onClick:h[86]||(h[86]=A=>W.value=!1)},[r("div",{style:yo(le.value),onClick:h[85]||(h[85]=Fe(()=>{},["stop"])),class:"fixed w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl p-4 space-y-3"},[r("div",{class:"flex items-center justify-between mb-3"},[h[288]||(h[288]=r("h3",{class:"text-sm font-semibold text-white"},"Filtros de Tareas",-1)),r("button",{onClick:Ox,class:"text-xs text-purple-400 hover:text-purple-300"}," Limpiar todo ")]),r("div",null,[h[290]||(h[290]=r("label",{class:"block text-xs font-medium text-gray-400 mb-1"}," Estado en Tablero ",-1)),ie(r("select",{"onUpdate:modelValue":h[81]||(h[81]=A=>J.value.boardStatus=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm focus:ring-2 focus:ring-purple-500"},[...h[289]||(h[289]=[r("option",{value:""},"Todos los estados",-1),r("option",{value:"backlog"}," Backlog",-1),r("option",{value:"todo"}," Por Hacer",-1),r("option",{value:"in-progress"}," En Progreso",-1),r("option",{value:"review"}," En Revisin",-1),r("option",{value:"done"}," Completado",-1)])],512),[[De,J.value.boardStatus]])]),r("div",null,[h[292]||(h[292]=r("label",{class:"block text-xs font-medium text-gray-400 mb-1"}," Prioridad ",-1)),ie(r("select",{"onUpdate:modelValue":h[82]||(h[82]=A=>J.value.priority=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm focus:ring-2 focus:ring-purple-500"},[...h[291]||(h[291]=[r("option",{value:""},"Todas las prioridades",-1),r("option",{value:"critical"}," Crtica",-1),r("option",{value:"high"}," Alta",-1),r("option",{value:"medium"}," Media",-1),r("option",{value:"low"}," Baja",-1)])],512),[[De,J.value.priority]])]),r("div",null,[h[294]||(h[294]=r("label",{class:"block text-xs font-medium text-gray-400 mb-1"}," Tipo de Tarea ",-1)),ie(r("select",{"onUpdate:modelValue":h[83]||(h[83]=A=>J.value.type=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm focus:ring-2 focus:ring-purple-500"},[...h[293]||(h[293]=[r("option",{value:""},"Todos los tipos",-1),r("option",{value:"epic"}," Epic",-1),r("option",{value:"feature"}," Feature",-1),r("option",{value:"user-story"}," User Story",-1),r("option",{value:"task"}," Task",-1),r("option",{value:"bug"}," Bug",-1)])],512),[[De,J.value.type]])]),r("div",null,[h[297]||(h[297]=r("label",{class:"block text-xs font-medium text-gray-400 mb-1"}," Asignado a ",-1)),ie(r("select",{"onUpdate:modelValue":h[84]||(h[84]=A=>J.value.assignedTo=A),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white text-sm focus:ring-2 focus:ring-purple-500"},[h[295]||(h[295]=r("option",{value:""},"Todos los miembros",-1)),h[296]||(h[296]=r("option",{value:"unassigned"},"Sin asignar",-1)),(b(!0),y(ge,null,xe(_.value,A=>(b(),y("option",{key:A._id,value:A._id},w(A.name),9,s9))),128))],512),[[De,J.value.assignedTo]])]),hp.value.length>0?(b(),y("div",o9,[h[298]||(h[298]=r("label",{class:"block text-xs font-medium text-gray-400 mb-1"}," Etiquetas ",-1)),r("div",n9,[(b(!0),y(ge,null,xe(hp.value,A=>(b(),y("button",{key:A,onClick:Se=>Rx(A),class:de(["px-2 py-1 text-xs rounded-md transition-colors",J.value.tags.includes(A)?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])}," #"+w(A),11,r9))),128))])])):q("",!0),r("button",{onClick:Dx,class:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm font-medium"}," Aplicar Filtros ")],4)])):q("",!0)])),(b(),Ue(Mo,{to:"body"},[Oe.value?(b(),y("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:Fe(_p,["self"])},[r("div",i9,[r("div",a9,[h[299]||(h[299]=r("div",{class:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mb-4"},[r("i",{class:"fas fa-exclamation-triangle text-red-500 text-2xl"})],-1)),h[300]||(h[300]=r("h2",{class:"text-xl font-bold text-white mb-2"},"Ests seguro?",-1)),h[301]||(h[301]=r("p",{class:"text-gray-300 text-sm"}," Esta accin eliminar permanentemente ",-1)),r("p",l9,' "'+w(N.value.taskTitle)+'" ',1)]),N.value.total>0?(b(),y("div",c9,[h[306]||(h[306]=r("p",{class:"text-white font-medium mb-3 text-center"},"Esta accin eliminar en cascada:",-1)),r("div",d9,[N.value.features>0?(b(),y("div",u9,[h[302]||(h[302]=r("div",{class:"flex items-center gap-2"},[r("i",{class:"fas fa-layer-group text-blue-400"}),r("span",{class:"text-gray-200 text-sm"},"Features")],-1)),r("span",f9,w(N.value.features),1)])):q("",!0),N.value.stories>0?(b(),y("div",p9,[h[303]||(h[303]=r("div",{class:"flex items-center gap-2"},[r("i",{class:"fas fa-book-open text-green-400"}),r("span",{class:"text-gray-200 text-sm"},"User Stories")],-1)),r("span",h9,w(N.value.stories),1)])):q("",!0),N.value.tasks>0?(b(),y("div",g9,[h[304]||(h[304]=r("div",{class:"flex items-center gap-2"},[r("i",{class:"fas fa-tasks text-gray-400"}),r("span",{class:"text-gray-200 text-sm"},"Tasks")],-1)),r("span",m9,w(N.value.tasks),1)])):q("",!0),r("div",b9,[r("div",v9,[h[305]||(h[305]=r("div",{class:"flex items-center gap-2"},[r("i",{class:"fas fa-trash text-red-400"}),r("span",{class:"text-white"},"Total")],-1)),r("span",y9,w(N.value.total+1),1)])])])])):q("",!0),r("div",x9,[r("div",w9,[h[307]||(h[307]=r("i",{class:"fas fa-info-circle text-yellow-500 mt-0.5 flex-shrink-0"},null,-1)),r("p",_9," Esta accin no se puede deshacer. "+w(N.value.total>0?"Todos los elementos hijos se eliminarn junto con el elemento principal.":"La tarea se eliminar permanentemente."),1)])]),h[309]||(h[309]=r("div",{class:"bg-green-500/10 border border-green-500/30 rounded-lg p-3 mb-6"},[r("div",{class:"flex items-start gap-2"},[r("i",{class:"fab fa-github text-green-400 mt-0.5 flex-shrink-0"}),r("div",{class:"flex-1"},[r("p",{class:"text-green-200 text-xs font-semibold mb-1"}," Ramas de GitHub "),r("p",{class:"text-green-200/80 text-xs leading-relaxed"}," Las ramas asociadas a estas tareas (sin PR abierto) tambin se eliminarn automticamente de GitHub. ")])])],-1)),r("div",k9,[r("button",{type:"button",onClick:_p,class:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-300 bg-gray-700 border border-gray-600 rounded-lg hover:bg-gray-600 transition-colors"}," Cancelar "),r("button",{type:"button",onClick:Zx,class:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-red-600 to-red-700 rounded-lg hover:from-red-700 hover:to-red-800 transition-all"},[h[308]||(h[308]=ne(" S, eliminar",-1)),N.value.total>0?(b(),y("span",C9,"("+w(N.value.total+1)+")",1)):q("",!0)])])])])):q("",!0)]))])}}}),E9=Et($9,[["__scopeId","data-v-cd5aa94f"]]),S9={class:"grid grid-cols-1 gap-6"},A9=["disabled"],T9={value:"",disabled:""},P9=["value"],M9={key:0,class:"text-yellow-400 text-sm mt-1"},R9={key:0,class:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg"},D9={class:"text-red-400 text-sm"},O9={class:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700"},I9=["disabled"],L9={key:0,class:"flex items-center"},B9={key:1},N9=["value"],j9={key:0,class:"text-yellow-400 text-sm mt-1"},F9=Le({__name:"ActivityForm",props:{activity:{}},emits:["save","cancel"],setup(t,{emit:e}){const s=I([]),o=t,n=e,i=I(!1),a=I(""),l=I([]),c=I(!1),d=Ft({title:"",description:"",date:"",status:"pending",clientId:"",assignedTo:[]}),u=I("create"),f=async()=>{try{s.value=await Vl.getActiveMembers()}catch(x){console.error("Error loading users:",x)}},p=async()=>{try{c.value=!0,l.value=await go.getAll()}catch(x){console.error("Error loading clients:",x),a.value="Error al cargar la lista de clientes"}finally{c.value=!1}},g=async()=>{var x;i.value=!0,a.value="";try{if(!d.clientId){a.value="Debes seleccionar un cliente";return}if(Array.isArray(d.assignedTo)?d.assignedTo:d.assignedTo,!d.date){a.value="Debes seleccionar una fecha y hora";return}const _=Array.isArray(d.assignedTo)?d.assignedTo.filter(C=>typeof C=="string"&&C):typeof d.assignedTo=="string"&&d.assignedTo?[d.assignedTo]:[],k={title:d.title,description:d.description,date:new Date(d.date).toISOString(),status:d.status||"pending",clientId:d.clientId,assignedTo:_};u.value==="create"?await Bt.create(k):(x=o.activity)!=null&&x._id&&await Bt.update(o.activity._id,k),n("save")}catch(_){a.value=_.message||"Error al guardar la actividad"}finally{i.value=!1}},m=()=>{Object.assign(d,{title:"",description:"",date:"",status:"pending",clientId:"",assignedTo:[]})},v=()=>{var x,_,k,C,P,$,R;if(o.activity)u.value="edit",Object.assign(d,{title:((x=o.activity)==null?void 0:x.title)||"",description:((_=o.activity)==null?void 0:_.description)||"",date:(k=o.activity)!=null&&k.date?new Date(o.activity.date).toISOString().slice(0,16):"",status:((C=o.activity)==null?void 0:C.status)||"pending",clientId:typeof((P=o.activity)==null?void 0:P.clientId)=="string"?($=o.activity)==null?void 0:$.clientId:(R=o.activity)!=null&&R.clientId&&typeof o.activity.clientId=="object"?o.activity.clientId._id:"",assignedTo:o.activity&&Array.isArray(o.activity.assignedTo)?o.activity.assignedTo:o.activity&&o.activity.assignedTo?[o.activity.assignedTo]:[]});else{f(),u.value="create",m();const V=new Date;V.setHours(V.getHours()+1),d.date=V.toISOString().slice(0,16)}};return nt(async()=>{await p(),v()}),Rt(()=>o.activity,()=>{v()}),(x,_)=>(b(),y("form",{onSubmit:Fe(g,["prevent"]),class:"space-y-6"},[r("div",S9,[r("div",null,[_[6]||(_[6]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Ttulo de la Actividad * ",-1)),ie(r("input",{"onUpdate:modelValue":_[0]||(_[0]=k=>d.title=k),type:"text",required:"",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Ej: Reunin de seguimiento con cliente"},null,512),[[ke,d.title]])]),r("div",null,[_[7]||(_[7]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Cliente * ",-1)),ie(r("select",{"onUpdate:modelValue":_[1]||(_[1]=k=>d.clientId=k),required:"",disabled:c.value,class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"},[r("option",T9,w(c.value?"Cargando clientes...":"Selecciona un cliente"),1),(b(!0),y(ge,null,xe(l.value,k=>(b(),y("option",{key:k._id,value:k._id},w(k.name)+" "+w(k.company?`- ${k.company}`:""),9,P9))),128))],8,A9),[[De,d.clientId]]),!c.value&&l.value.length===0?(b(),y("p",M9," No hay clientes disponibles. Crea un cliente primero. ")):q("",!0)]),r("div",null,[_[8]||(_[8]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Asignados *",-1)),fe(dy,{modelValue:d.assignedTo,"onUpdate:modelValue":_[2]||(_[2]=k=>d.assignedTo=k),teamMembers:s.value},null,8,["modelValue","teamMembers"])])]),r("div",null,[_[9]||(_[9]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Descripcin * ",-1)),ie(r("textarea",{"onUpdate:modelValue":_[3]||(_[3]=k=>d.description=k),rows:"4",required:"",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-none",placeholder:"Describe los detalles de la actividad..."},null,512),[[ke,d.description]])]),a.value?(b(),y("div",R9,[r("p",D9,w(a.value),1)])):q("",!0),r("div",O9,[r("button",{type:"button",onClick:_[4]||(_[4]=k=>x.$emit("cancel")),class:"px-6 py-3 text-gray-400 hover:text-white transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:i.value||l.value.length===0||c.value,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg shadow-purple-500/25"},[i.value?(b(),y("span",L9,[..._[10]||(_[10]=[r("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ne(" Guardando... ",-1)])])):(b(),y("span",B9,w(u.value==="create"?"Crear Actividad":"Actualizar Actividad"),1))],8,I9)]),r("div",null,[_[11]||(_[11]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Asignados * ",-1)),ie(r("select",{"onUpdate:modelValue":_[5]||(_[5]=k=>d.assignedTo=k),multiple:"",required:"",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"},[(b(!0),y(ge,null,xe(s.value,k=>(b(),y("option",{key:k._id,value:k._id},w(k.name)+" ("+w(k.email)+") ",9,N9))),128))],512),[[De,d.assignedTo]]),s.value.length===0?(b(),y("p",j9," No hay usuarios disponibles para asignar. ")):q("",!0)])],32))}}),U9={class:"space-y-6"},z9={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-purple-500/20"},V9={class:"relative"},H9={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},q9={class:"bg-gray-900 rounded-2xl shadow-2xl border border-purple-500/20 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},W9={class:"flex items-center justify-between p-6 border-b border-purple-500/20"},G9={class:"text-xl font-bold text-white"},K9={class:"p-6"},Y9=Le({__name:"Activities",setup(t){const e=I(""),s=I(!1),o=I(null),n=I(),i=()=>{o.value=null,s.value=!0},a=d=>{o.value=d,s.value=!0},l=()=>{s.value=!1,o.value=null},c=()=>{var d;l(),(d=n.value)!=null&&d.loadActivities&&n.value.loadActivities()};return(d,u)=>(b(),y("div",U9,[r("div",z9,[r("div",V9,[u[1]||(u[1]=r("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[r("i",{class:"fas fa-search text-gray-400"})],-1)),ie(r("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>e.value=f),type:"text",placeholder:"Buscar actividades por ttulo, descripcin o cliente...",class:"block w-full pl-10 pr-3 py-3 border border-gray-600/50 rounded-lg bg-gray-700/50 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},null,512),[[ke,e.value]])])]),fe(E9,{ref_key:"activitiesViewRef",ref:n,searchTerm:e.value,onCreate:i,onEdit:a},null,8,["searchTerm"]),s.value?(b(),y("div",H9,[r("div",q9,[r("div",W9,[r("h3",G9,w(o.value?"Editar Actividad":"Nueva Actividad"),1),r("button",{onClick:l,class:"text-gray-400 hover:text-white transition-colors"},[...u[2]||(u[2]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("div",K9,[fe(F9,{activity:o.value,onSave:c,onCancel:l},null,8,["activity"])])])])):q("",!0)]))}});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function pa(t){return t+.5|0}const cn=(t,e,s)=>Math.max(Math.min(t,s),e);function di(t){return cn(pa(t*2.55),0,255)}function bn(t){return cn(pa(t*255),0,255)}function Lo(t){return cn(pa(t/2.55)/100,0,1)}function m0(t){return cn(pa(t*100),0,100)}const js={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_u=[..."0123456789ABCDEF"],J9=t=>_u[t&15],X9=t=>_u[(t&240)>>4]+_u[t&15],ja=t=>(t&240)>>4===(t&15),Q9=t=>ja(t.r)&&ja(t.g)&&ja(t.b)&&ja(t.a);function Z9(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&js[t[1]]*17,g:255&js[t[2]]*17,b:255&js[t[3]]*17,a:e===5?js[t[4]]*17:255}:(e===7||e===9)&&(s={r:js[t[1]]<<4|js[t[2]],g:js[t[3]]<<4|js[t[4]],b:js[t[5]]<<4|js[t[6]],a:e===9?js[t[7]]<<4|js[t[8]]:255})),s}const eI=(t,e)=>t<255?e(t):"";function tI(t){var e=Q9(t)?J9:X9;return t?"#"+e(t.r)+e(t.g)+e(t.b)+eI(t.a,e):void 0}const sI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function py(t,e,s){const o=e*Math.min(s,1-s),n=(i,a=(i+t/30)%12)=>s-o*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function oI(t,e,s){const o=(n,i=(n+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[o(5),o(3),o(1)]}function nI(t,e,s){const o=py(t,1,.5);let n;for(e+s>1&&(n=1/(e+s),e*=n,s*=n),n=0;n<3;n++)o[n]*=1-e-s,o[n]+=e;return o}function rI(t,e,s,o,n){return t===n?(e-s)/o+(e<s?6:0):e===n?(s-t)/o+2:(t-e)/o+4}function qf(t){const s=t.r/255,o=t.g/255,n=t.b/255,i=Math.max(s,o,n),a=Math.min(s,o,n),l=(i+a)/2;let c,d,u;return i!==a&&(u=i-a,d=l>.5?u/(2-i-a):u/(i+a),c=rI(s,o,n,u,i),c=c*60+.5),[c|0,d||0,l]}function Wf(t,e,s,o){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,o)).map(bn)}function Gf(t,e,s){return Wf(py,t,e,s)}function iI(t,e,s){return Wf(nI,t,e,s)}function aI(t,e,s){return Wf(oI,t,e,s)}function hy(t){return(t%360+360)%360}function lI(t){const e=sI.exec(t);let s=255,o;if(!e)return;e[5]!==o&&(s=e[6]?di(+e[5]):bn(+e[5]));const n=hy(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?o=iI(n,i,a):e[1]==="hsv"?o=aI(n,i,a):o=Gf(n,i,a),{r:o[0],g:o[1],b:o[2],a:s}}function cI(t,e){var s=qf(t);s[0]=hy(s[0]+e),s=Gf(s),t.r=s[0],t.g=s[1],t.b=s[2]}function dI(t){if(!t)return;const e=qf(t),s=e[0],o=m0(e[1]),n=m0(e[2]);return t.a<255?`hsla(${s}, ${o}%, ${n}%, ${Lo(t.a)})`:`hsl(${s}, ${o}%, ${n}%)`}const b0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},v0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function uI(){const t={},e=Object.keys(v0),s=Object.keys(b0);let o,n,i,a,l;for(o=0;o<e.length;o++){for(a=l=e[o],n=0;n<s.length;n++)i=s[n],l=l.replace(i,b0[i]);i=parseInt(v0[a],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Fa;function fI(t){Fa||(Fa=uI(),Fa.transparent=[0,0,0,0]);const e=Fa[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const pI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function hI(t){const e=pI.exec(t);let s=255,o,n,i;if(e){if(e[7]!==o){const a=+e[7];s=e[8]?di(a):cn(a*255,0,255)}return o=+e[1],n=+e[3],i=+e[5],o=255&(e[2]?di(o):cn(o,0,255)),n=255&(e[4]?di(n):cn(n,0,255)),i=255&(e[6]?di(i):cn(i,0,255)),{r:o,g:n,b:i,a:s}}}function gI(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Lo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ed=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,fr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function mI(t,e,s){const o=fr(Lo(t.r)),n=fr(Lo(t.g)),i=fr(Lo(t.b));return{r:bn(Ed(o+s*(fr(Lo(e.r))-o))),g:bn(Ed(n+s*(fr(Lo(e.g))-n))),b:bn(Ed(i+s*(fr(Lo(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Ua(t,e,s){if(t){let o=qf(t);o[e]=Math.max(0,Math.min(o[e]+o[e]*s,e===0?360:1)),o=Gf(o),t.r=o[0],t.g=o[1],t.b=o[2]}}function gy(t,e){return t&&Object.assign(e||{},t)}function y0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bn(t[3]))):(e=gy(t,{r:0,g:0,b:0,a:1}),e.a=bn(e.a)),e}function bI(t){return t.charAt(0)==="r"?hI(t):lI(t)}class qi{constructor(e){if(e instanceof qi)return e;const s=typeof e;let o;s==="object"?o=y0(e):s==="string"&&(o=Z9(e)||fI(e)||bI(e)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var e=gy(this._rgb);return e&&(e.a=Lo(e.a)),e}set rgb(e){this._rgb=y0(e)}rgbString(){return this._valid?gI(this._rgb):void 0}hexString(){return this._valid?tI(this._rgb):void 0}hslString(){return this._valid?dI(this._rgb):void 0}mix(e,s){if(e){const o=this.rgb,n=e.rgb;let i;const a=s===i?.5:s,l=2*a-1,c=o.a-n.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,o.r=255&d*o.r+i*n.r+.5,o.g=255&d*o.g+i*n.g+.5,o.b=255&d*o.b+i*n.b+.5,o.a=a*o.a+(1-a)*n.a,this.rgb=o}return this}interpolate(e,s){return e&&(this._rgb=mI(this._rgb,e._rgb,s)),this}clone(){return new qi(this.rgb)}alpha(e){return this._rgb.a=bn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=pa(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ua(this._rgb,2,e),this}darken(e){return Ua(this._rgb,2,-e),this}saturate(e){return Ua(this._rgb,1,e),this}desaturate(e){return Ua(this._rgb,1,-e),this}rotate(e){return cI(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Po(){}const vI=(()=>{let t=0;return()=>t++})();function Ke(t){return t==null}function wt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Xe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function $t(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ps(t,e){return $t(t)?t:e}function Ve(t,e){return typeof t>"u"?e:t}const yI=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,my=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function mt(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function ft(t,e,s,o){let n,i,a;if(wt(t))for(i=t.length,n=0;n<i;n++)e.call(s,t[n],n);else if(Xe(t))for(a=Object.keys(t),i=a.length,n=0;n<i;n++)e.call(s,t[a[n]],a[n])}function Zl(t,e){let s,o,n,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,o=t.length;s<o;++s)if(n=t[s],i=e[s],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function ec(t){if(wt(t))return t.map(ec);if(Xe(t)){const e=Object.create(null),s=Object.keys(t),o=s.length;let n=0;for(;n<o;++n)e[s[n]]=ec(t[s[n]]);return e}return t}function by(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function xI(t,e,s,o){if(!by(t))return;const n=e[t],i=s[t];Xe(n)&&Xe(i)?Wi(n,i,o):e[t]=ec(i)}function Wi(t,e,s){const o=wt(e)?e:[e],n=o.length;if(!Xe(t))return t;s=s||{};const i=s.merger||xI;let a;for(let l=0;l<n;++l){if(a=o[l],!Xe(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)i(c[d],t,a,s)}return t}function Ai(t,e){return Wi(t,e,{merger:wI})}function wI(t,e,s){if(!by(t))return;const o=e[t],n=s[t];Xe(o)&&Xe(n)?Ai(o,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ec(n))}const x0={"":t=>t,x:t=>t.x,y:t=>t.y};function _I(t){const e=t.split("."),s=[];let o="";for(const n of e)o+=n,o.endsWith("\\")?o=o.slice(0,-1)+".":(s.push(o),o="");return s}function kI(t){const e=_I(t);return s=>{for(const o of e){if(o==="")break;s=s&&s[o]}return s}}function xn(t,e){return(x0[e]||(x0[e]=kI(e)))(t)}function Kf(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Gi=t=>typeof t<"u",wn=t=>typeof t=="function",w0=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function CI(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const st=Math.PI,vt=2*st,$I=vt+st,tc=Number.POSITIVE_INFINITY,EI=st/180,Pt=st/2,Mn=st/4,_0=st*2/3,dn=Math.log10,vo=Math.sign;function Ti(t,e,s){return Math.abs(t-e)<s}function k0(t){const e=Math.round(t);t=Ti(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(dn(t))),o=t/s;return(o<=1?1:o<=2?2:o<=5?5:10)*s}function SI(t){const e=[],s=Math.sqrt(t);let o;for(o=1;o<s;o++)t%o===0&&(e.push(o),e.push(t/o));return s===(s|0)&&e.push(s),e.sort((n,i)=>n-i).pop(),e}function AI(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Dr(t){return!AI(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function TI(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function vy(t,e,s){let o,n,i;for(o=0,n=t.length;o<n;o++)i=t[o][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Js(t){return t*(st/180)}function Yf(t){return t*(180/st)}function C0(t){if(!$t(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function yy(t,e){const s=e.x-t.x,o=e.y-t.y,n=Math.sqrt(s*s+o*o);let i=Math.atan2(o,s);return i<-.5*st&&(i+=vt),{angle:i,distance:n}}function ku(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function PI(t,e){return(t-e+$I)%vt-st}function ss(t){return(t%vt+vt)%vt}function Ki(t,e,s,o){const n=ss(t),i=ss(e),a=ss(s),l=ss(i-n),c=ss(a-n),d=ss(n-i),u=ss(n-a);return n===i||n===a||o&&i===a||l>c&&d<u}function Vt(t,e,s){return Math.max(e,Math.min(s,t))}function MI(t){return Vt(t,-32768,32767)}function Fo(t,e,s,o=1e-6){return t>=Math.min(e,s)-o&&t<=Math.max(e,s)+o}function Jf(t,e,s){s=s||(a=>t[a]<e);let o=t.length-1,n=0,i;for(;o-n>1;)i=n+o>>1,s(i)?n=i:o=i;return{lo:n,hi:o}}const Uo=(t,e,s,o)=>Jf(t,s,o?n=>{const i=t[n][e];return i<s||i===s&&t[n+1][e]===s}:n=>t[n][e]<s),RI=(t,e,s)=>Jf(t,s,o=>t[o][e]>=s);function DI(t,e,s){let o=0,n=t.length;for(;o<n&&t[o]<e;)o++;for(;n>o&&t[n-1]>s;)n--;return o>0||n<t.length?t.slice(o,n):t}const xy=["push","pop","shift","splice","unshift"];function OI(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),xy.forEach(s=>{const o="_onData"+Kf(s),n=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const a=n.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[o]=="function"&&l[o](...i)}),a}})})}function $0(t,e){const s=t._chartjs;if(!s)return;const o=s.listeners,n=o.indexOf(e);n!==-1&&o.splice(n,1),!(o.length>0)&&(xy.forEach(i=>{delete t[i]}),delete t._chartjs)}function wy(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const _y=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ky(t,e){let s=[],o=!1;return function(...n){s=n,o||(o=!0,_y.call(window,()=>{o=!1,t.apply(e,s)}))}}function II(t,e){let s;return function(...o){return e?(clearTimeout(s),s=setTimeout(t,e,o)):t.apply(this,o),e}}const Xf=t=>t==="start"?"left":t==="end"?"right":"center",es=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,LI=(t,e,s,o)=>t===(o?"left":"right")?s:t==="center"?(e+s)/2:e;function Cy(t,e,s){const o=e.length;let n=0,i=o;if(t._sorted){const{iScale:a,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:f,max:p,minDefined:g,maxDefined:m}=a.getUserBounds();if(g){if(n=Math.min(Uo(c,u,f).lo,s?o:Uo(e,u,a.getPixelForValue(f)).lo),d){const v=c.slice(0,n+1).reverse().findIndex(x=>!Ke(x[l.axis]));n-=Math.max(0,v)}n=Vt(n,0,o-1)}if(m){let v=Math.max(Uo(c,a.axis,p,!0).hi+1,s?0:Uo(e,u,a.getPixelForValue(p),!0).hi+1);if(d){const x=c.slice(v-1).findIndex(_=>!Ke(_[l.axis]));v+=Math.max(0,x)}i=Vt(v,n,o)-n}else i=o-n}return{start:n,count:i}}function $y(t){const{xScale:e,yScale:s,_scaleRanges:o}=t,n={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!o)return t._scaleRanges=n,!0;const i=o.xmin!==e.min||o.xmax!==e.max||o.ymin!==s.min||o.ymax!==s.max;return Object.assign(o,n),i}const za=t=>t===0||t===1,E0=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*vt/s)),S0=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*vt/s)+1,Pi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Pt)+1,easeOutSine:t=>Math.sin(t*Pt),easeInOutSine:t=>-.5*(Math.cos(st*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>za(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>za(t)?t:E0(t,.075,.3),easeOutElastic:t=>za(t)?t:S0(t,.075,.3),easeInOutElastic(t){return za(t)?t:t<.5?.5*E0(t*2,.1125,.45):.5+.5*S0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Pi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Pi.easeInBounce(t*2)*.5:Pi.easeOutBounce(t*2-1)*.5+.5};function Qf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function A0(t){return Qf(t)?t:new qi(t)}function Sd(t){return Qf(t)?t:new qi(t).saturate(.5).darken(.1).hexString()}const BI=["x","y","borderWidth","radius","tension"],NI=["color","borderColor","backgroundColor"];function jI(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:NI},numbers:{type:"number",properties:BI}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function FI(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const T0=new Map;function UI(t,e){e=e||{};const s=t+JSON.stringify(e);let o=T0.get(s);return o||(o=new Intl.NumberFormat(t,e),T0.set(s,o)),o}function ha(t,e,s){return UI(e,s).format(t)}const Ey={values(t){return wt(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const o=this.chart.options.locale;let n,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=zI(t,s)}const a=dn(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),ha(t,o,c)},logarithmic(t,e,s){if(t===0)return"0";const o=s[e].significand||t/Math.pow(10,Math.floor(dn(t)));return[1,2,3,5,10,15].includes(o)||e>.8*s.length?Ey.numeric.call(this,t,e,s):""}};function zI(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Vc={formatters:Ey};function VI(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Vc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const er=Object.create(null),Cu=Object.create(null);function Mi(t,e){if(!e)return t;const s=e.split(".");for(let o=0,n=s.length;o<n;++o){const i=s[o];t=t[i]||(t[i]=Object.create(null))}return t}function Ad(t,e,s){return typeof e=="string"?Wi(Mi(t,e),s):Wi(Mi(t,""),e)}class HI{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=o=>o.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(o,n)=>Sd(n.backgroundColor),this.hoverBorderColor=(o,n)=>Sd(n.borderColor),this.hoverColor=(o,n)=>Sd(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Ad(this,e,s)}get(e){return Mi(this,e)}describe(e,s){return Ad(Cu,e,s)}override(e,s){return Ad(er,e,s)}route(e,s,o,n){const i=Mi(this,e),a=Mi(this,o),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=a[n];return Xe(c)?Object.assign({},d,c):Ve(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var _t=new HI({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[jI,FI,VI]);function qI(t){return!t||Ke(t.size)||Ke(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function sc(t,e,s,o,n){let i=e[n];return i||(i=e[n]=t.measureText(n).width,s.push(n)),i>o&&(o=i),o}function WI(t,e,s,o){o=o||{};let n=o.data=o.data||{},i=o.garbageCollect=o.garbageCollect||[];o.font!==e&&(n=o.data={},i=o.garbageCollect=[],o.font=e),t.save(),t.font=e;let a=0;const l=s.length;let c,d,u,f,p;for(c=0;c<l;c++)if(f=s[c],f!=null&&!wt(f))a=sc(t,n,i,a,f);else if(wt(f))for(d=0,u=f.length;d<u;d++)p=f[d],p!=null&&!wt(p)&&(a=sc(t,n,i,a,p));t.restore();const g=i.length/2;if(g>s.length){for(c=0;c<g;c++)delete n[i[c]];i.splice(0,g)}return a}function Rn(t,e,s){const o=t.currentDevicePixelRatio,n=s!==0?Math.max(s/2,.5):0;return Math.round((e-n)*o)/o+n}function P0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function $u(t,e,s,o){Sy(t,e,s,o,null)}function Sy(t,e,s,o,n){let i,a,l,c,d,u,f,p;const g=e.pointStyle,m=e.rotation,v=e.radius;let x=(m||0)*EI;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,o),t.rotate(x),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:n?t.ellipse(s,o,n/2,v,0,0,vt):t.arc(s,o,v,0,vt),t.closePath();break;case"triangle":u=n?n/2:v,t.moveTo(s+Math.sin(x)*u,o-Math.cos(x)*v),x+=_0,t.lineTo(s+Math.sin(x)*u,o-Math.cos(x)*v),x+=_0,t.lineTo(s+Math.sin(x)*u,o-Math.cos(x)*v),t.closePath();break;case"rectRounded":d=v*.516,c=v-d,a=Math.cos(x+Mn)*c,f=Math.cos(x+Mn)*(n?n/2-d:c),l=Math.sin(x+Mn)*c,p=Math.sin(x+Mn)*(n?n/2-d:c),t.arc(s-f,o-l,d,x-st,x-Pt),t.arc(s+p,o-a,d,x-Pt,x),t.arc(s+f,o+l,d,x,x+Pt),t.arc(s-p,o+a,d,x+Pt,x+st),t.closePath();break;case"rect":if(!m){c=Math.SQRT1_2*v,u=n?n/2:c,t.rect(s-u,o-c,2*u,2*c);break}x+=Mn;case"rectRot":f=Math.cos(x)*(n?n/2:v),a=Math.cos(x)*v,l=Math.sin(x)*v,p=Math.sin(x)*(n?n/2:v),t.moveTo(s-f,o-l),t.lineTo(s+p,o-a),t.lineTo(s+f,o+l),t.lineTo(s-p,o+a),t.closePath();break;case"crossRot":x+=Mn;case"cross":f=Math.cos(x)*(n?n/2:v),a=Math.cos(x)*v,l=Math.sin(x)*v,p=Math.sin(x)*(n?n/2:v),t.moveTo(s-f,o-l),t.lineTo(s+f,o+l),t.moveTo(s+p,o-a),t.lineTo(s-p,o+a);break;case"star":f=Math.cos(x)*(n?n/2:v),a=Math.cos(x)*v,l=Math.sin(x)*v,p=Math.sin(x)*(n?n/2:v),t.moveTo(s-f,o-l),t.lineTo(s+f,o+l),t.moveTo(s+p,o-a),t.lineTo(s-p,o+a),x+=Mn,f=Math.cos(x)*(n?n/2:v),a=Math.cos(x)*v,l=Math.sin(x)*v,p=Math.sin(x)*(n?n/2:v),t.moveTo(s-f,o-l),t.lineTo(s+f,o+l),t.moveTo(s+p,o-a),t.lineTo(s-p,o+a);break;case"line":a=n?n/2:Math.cos(x)*v,l=Math.sin(x)*v,t.moveTo(s-a,o-l),t.lineTo(s+a,o+l);break;case"dash":t.moveTo(s,o),t.lineTo(s+Math.cos(x)*(n?n/2:v),o+Math.sin(x)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function zo(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Hc(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function qc(t){t.restore()}function GI(t,e,s,o,n){if(!e)return t.lineTo(s.x,s.y);if(n==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else n==="after"!=!!o?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function KI(t,e,s,o){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(o?e.cp1x:e.cp2x,o?e.cp1y:e.cp2y,o?s.cp2x:s.cp1x,o?s.cp2y:s.cp1y,s.x,s.y)}function YI(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ke(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function JI(t,e,s,o,n){if(n.strikethrough||n.underline){const i=t.measureText(o),a=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(a,u),t.lineTo(l,u),t.stroke()}}function XI(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function tr(t,e,s,o,n,i={}){const a=wt(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=n.string,YI(t,i),c=0;c<a.length;++c)d=a[c],i.backdrop&&XI(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ke(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,o,i.maxWidth)),t.fillText(d,s,o,i.maxWidth),JI(t,s,o,d,i),o+=Number(n.lineHeight);t.restore()}function Yi(t,e){const{x:s,y:o,w:n,h:i,radius:a}=e;t.arc(s+a.topLeft,o+a.topLeft,a.topLeft,1.5*st,st,!0),t.lineTo(s,o+i-a.bottomLeft),t.arc(s+a.bottomLeft,o+i-a.bottomLeft,a.bottomLeft,st,Pt,!0),t.lineTo(s+n-a.bottomRight,o+i),t.arc(s+n-a.bottomRight,o+i-a.bottomRight,a.bottomRight,Pt,0,!0),t.lineTo(s+n,o+a.topRight),t.arc(s+n-a.topRight,o+a.topRight,a.topRight,0,-Pt,!0),t.lineTo(s+a.topLeft,o)}const QI=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ZI=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function eL(t,e){const s=(""+t).match(QI);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const tL=t=>+t||0;function Zf(t,e){const s={},o=Xe(e),n=o?Object.keys(e):e,i=Xe(t)?o?a=>Ve(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of n)s[a]=tL(i(a));return s}function Ay(t){return Zf(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Gn(t){return Zf(t,["topLeft","topRight","bottomLeft","bottomRight"])}function cs(t){const e=Ay(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jt(t,e){t=t||{},e=e||_t.font;let s=Ve(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let o=Ve(t.style,e.style);o&&!(""+o).match(ZI)&&(console.warn('Invalid font style specified: "'+o+'"'),o=void 0);const n={family:Ve(t.family,e.family),lineHeight:eL(Ve(t.lineHeight,e.lineHeight),s),size:s,style:o,weight:Ve(t.weight,e.weight),string:""};return n.string=qI(n),n}function ui(t,e,s,o){let n,i,a;for(n=0,i=t.length;n<i;++n)if(a=t[n],a!==void 0&&a!==void 0)return a}function sL(t,e,s){const{min:o,max:n}=t,i=my(e,(n-o)/2),a=(l,c)=>s&&l===0?0:l+c;return{min:a(o,-Math.abs(i)),max:a(n,i)}}function kn(t,e){return Object.assign(Object.create(t),e)}function ep(t,e=[""],s,o,n=()=>t[0]){const i=s||t;typeof o>"u"&&(o=Ry("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:o,_getTarget:n,override:l=>ep([l,...t],e,i,o)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return Py(l,c,()=>dL(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return R0(l).includes(c)},ownKeys(l){return R0(l)},set(l,c,d){const u=l._storage||(l._storage=n());return l[c]=u[c]=d,delete l._keys,!0}})}function Or(t,e,s,o){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Ty(t,o),setContext:i=>Or(t,i,s,o),override:i=>Or(t.override(i),e,s,o)};return new Proxy(n,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,l){return Py(i,a,()=>nL(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,l){return t[a]=l,delete i[a],!0}})}function Ty(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:o=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:s,indexable:o,isScriptable:wn(s)?s:()=>s,isIndexable:wn(o)?o:()=>o}}const oL=(t,e)=>t?t+Kf(e):e,tp=(t,e)=>Xe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Py(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const o=s();return t[e]=o,o}function nL(t,e,s){const{_proxy:o,_context:n,_subProxy:i,_descriptors:a}=t;let l=o[e];return wn(l)&&a.isScriptable(e)&&(l=rL(e,l,t,s)),wt(l)&&l.length&&(l=iL(e,l,t,a.isIndexable)),tp(e,l)&&(l=Or(l,n,i&&i[e],a)),l}function rL(t,e,s,o){const{_proxy:n,_context:i,_subProxy:a,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,a||o);return l.delete(t),tp(t,c)&&(c=sp(n._scopes,n,t,c)),c}function iL(t,e,s,o){const{_proxy:n,_context:i,_subProxy:a,_descriptors:l}=s;if(typeof i.index<"u"&&o(t))return e[i.index%e.length];if(Xe(e[0])){const c=e,d=n._scopes.filter(u=>u!==c);e=[];for(const u of c){const f=sp(d,n,t,u);e.push(Or(f,i,a&&a[t],l))}}return e}function My(t,e,s){return wn(t)?t(e,s):t}const aL=(t,e)=>t===!0?e:typeof t=="string"?xn(e,t):void 0;function lL(t,e,s,o,n){for(const i of e){const a=aL(s,i);if(a){t.add(a);const l=My(a._fallback,s,n);if(typeof l<"u"&&l!==s&&l!==o)return l}else if(a===!1&&typeof o<"u"&&s!==o)return null}return!1}function sp(t,e,s,o){const n=e._rootScopes,i=My(e._fallback,s,o),a=[...t,...n],l=new Set;l.add(o);let c=M0(l,a,s,i||s,o);return c===null||typeof i<"u"&&i!==s&&(c=M0(l,a,i,c,o),c===null)?!1:ep(Array.from(l),[""],n,i,()=>cL(e,s,o))}function M0(t,e,s,o,n){for(;s;)s=lL(t,e,s,o,n);return s}function cL(t,e,s){const o=t._getTarget();e in o||(o[e]={});const n=o[e];return wt(n)&&Xe(s)?s:n||{}}function dL(t,e,s,o){let n;for(const i of e)if(n=Ry(oL(i,t),s),typeof n<"u")return tp(t,n)?sp(s,o,t,n):n}function Ry(t,e){for(const s of e){if(!s)continue;const o=s[t];if(typeof o<"u")return o}}function R0(t){let e=t._keys;return e||(e=t._keys=uL(t._scopes)),e}function uL(t){const e=new Set;for(const s of t)for(const o of Object.keys(s).filter(n=>!n.startsWith("_")))e.add(o);return Array.from(e)}function Dy(t,e,s,o){const{iScale:n}=t,{key:i="r"}=this._parsing,a=new Array(o);let l,c,d,u;for(l=0,c=o;l<c;++l)d=l+s,u=e[d],a[l]={r:n.parse(xn(u,i),d)};return a}const fL=Number.EPSILON||1e-14,Ir=(t,e)=>e<t.length&&!t[e].skip&&t[e],Oy=t=>t==="x"?"y":"x";function pL(t,e,s,o){const n=t.skip?e:t,i=e,a=s.skip?e:s,l=ku(i,n),c=ku(a,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=o*d,p=o*u;return{previous:{x:i.x-f*(a.x-n.x),y:i.y-f*(a.y-n.y)},next:{x:i.x+p*(a.x-n.x),y:i.y+p*(a.y-n.y)}}}function hL(t,e,s){const o=t.length;let n,i,a,l,c,d=Ir(t,0);for(let u=0;u<o-1;++u)if(c=d,d=Ir(t,u+1),!(!c||!d)){if(Ti(e[u],0,fL)){s[u]=s[u+1]=0;continue}n=s[u]/e[u],i=s[u+1]/e[u],l=Math.pow(n,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),s[u]=n*a*e[u],s[u+1]=i*a*e[u])}}function gL(t,e,s="x"){const o=Oy(s),n=t.length;let i,a,l,c=Ir(t,0);for(let d=0;d<n;++d){if(a=l,l=c,c=Ir(t,d+1),!l)continue;const u=l[s],f=l[o];a&&(i=(u-a[s])/3,l[`cp1${s}`]=u-i,l[`cp1${o}`]=f-i*e[d]),c&&(i=(c[s]-u)/3,l[`cp2${s}`]=u+i,l[`cp2${o}`]=f+i*e[d])}}function mL(t,e="x"){const s=Oy(e),o=t.length,n=Array(o).fill(0),i=Array(o);let a,l,c,d=Ir(t,0);for(a=0;a<o;++a)if(l=c,c=d,d=Ir(t,a+1),!!c){if(d){const u=d[e]-c[e];n[a]=u!==0?(d[s]-c[s])/u:0}i[a]=l?d?vo(n[a-1])!==vo(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}hL(t,n,i),gL(t,i,e)}function Va(t,e,s){return Math.max(Math.min(t,s),e)}function bL(t,e){let s,o,n,i,a,l=zo(t[0],e);for(s=0,o=t.length;s<o;++s)a=i,i=l,l=s<o-1&&zo(t[s+1],e),i&&(n=t[s],a&&(n.cp1x=Va(n.cp1x,e.left,e.right),n.cp1y=Va(n.cp1y,e.top,e.bottom)),l&&(n.cp2x=Va(n.cp2x,e.left,e.right),n.cp2y=Va(n.cp2y,e.top,e.bottom)))}function vL(t,e,s,o,n){let i,a,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")mL(t,n);else{let d=o?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)l=t[i],c=pL(d,l,t[Math.min(i+1,a-(o?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&bL(t,s)}function op(){return typeof window<"u"&&typeof document<"u"}function np(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function oc(t,e,s){let o;return typeof t=="string"?(o=parseInt(t,10),t.indexOf("%")!==-1&&(o=o/100*e.parentNode[s])):o=t,o}const Wc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function yL(t,e){return Wc(t).getPropertyValue(e)}const xL=["top","right","bottom","left"];function Kn(t,e,s){const o={};s=s?"-"+s:"";for(let n=0;n<4;n++){const i=xL[n];o[i]=parseFloat(t[e+"-"+i+s])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}const wL=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function _L(t,e){const s=t.touches,o=s&&s.length?s[0]:t,{offsetX:n,offsetY:i}=o;let a=!1,l,c;if(wL(n,i,t.target))l=n,c=i;else{const d=e.getBoundingClientRect();l=o.clientX-d.left,c=o.clientY-d.top,a=!0}return{x:l,y:c,box:a}}function Ln(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:o}=e,n=Wc(s),i=n.boxSizing==="border-box",a=Kn(n,"padding"),l=Kn(n,"border","width"),{x:c,y:d,box:u}=_L(t,s),f=a.left+(u&&l.left),p=a.top+(u&&l.top);let{width:g,height:m}=e;return i&&(g-=a.width+l.width,m-=a.height+l.height),{x:Math.round((c-f)/g*s.width/o),y:Math.round((d-p)/m*s.height/o)}}function kL(t,e,s){let o,n;if(e===void 0||s===void 0){const i=t&&np(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const a=i.getBoundingClientRect(),l=Wc(i),c=Kn(l,"border","width"),d=Kn(l,"padding");e=a.width-d.width-c.width,s=a.height-d.height-c.height,o=oc(l.maxWidth,i,"clientWidth"),n=oc(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:o||tc,maxHeight:n||tc}}const Ha=t=>Math.round(t*10)/10;function CL(t,e,s,o){const n=Wc(t),i=Kn(n,"margin"),a=oc(n.maxWidth,t,"clientWidth")||tc,l=oc(n.maxHeight,t,"clientHeight")||tc,c=kL(t,e,s);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const p=Kn(n,"border","width"),g=Kn(n,"padding");d-=g.width+p.width,u-=g.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,o?d/o:u-i.height),d=Ha(Math.min(d,a,c.maxWidth)),u=Ha(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Ha(d/2)),(e!==void 0||s!==void 0)&&o&&c.height&&u>c.height&&(u=c.height,d=Ha(Math.floor(u*o))),{width:d,height:u}}function D0(t,e,s){const o=e||1,n=Math.floor(t.height*o),i=Math.floor(t.width*o);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(s||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==o||a.height!==n||a.width!==i?(t.currentDevicePixelRatio=o,a.height=n,a.width=i,t.ctx.setTransform(o,0,0,o,0,0),!0):!1}const $L=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};op()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function O0(t,e){const s=yL(t,e),o=s&&s.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function Bn(t,e,s,o){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function EL(t,e,s,o){return{x:t.x+s*(e.x-t.x),y:o==="middle"?s<.5?t.y:e.y:o==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function SL(t,e,s,o){const n={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=Bn(t,n,s),l=Bn(n,i,s),c=Bn(i,e,s),d=Bn(a,l,s),u=Bn(l,c,s);return Bn(d,u,s)}const AL=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,o){return s-o},leftForLtr(s,o){return s-o}}},TL=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Er(t,e,s){return t?AL(e,s):TL()}function Iy(t,e){let s,o;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,o=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=o)}function Ly(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function By(t){return t==="angle"?{between:Ki,compare:PI,normalize:ss}:{between:Fo,compare:(e,s)=>e-s,normalize:e=>e}}function I0({start:t,end:e,count:s,loop:o,style:n}){return{start:t%s,end:e%s,loop:o&&(e-t+1)%s===0,style:n}}function PL(t,e,s){const{property:o,start:n,end:i}=s,{between:a,normalize:l}=By(o),c=e.length;let{start:d,end:u,loop:f}=t,p,g;if(f){for(d+=c,u+=c,p=0,g=c;p<g&&a(l(e[d%c][o]),n,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:t.style}}function Ny(t,e,s){if(!s)return[t];const{property:o,start:n,end:i}=s,a=e.length,{compare:l,between:c,normalize:d}=By(o),{start:u,end:f,loop:p,style:g}=PL(t,e,s),m=[];let v=!1,x=null,_,k,C;const P=()=>c(n,C,_)&&l(n,C)!==0,$=()=>l(i,_)===0||c(i,C,_),R=()=>v||P(),V=()=>!v||$();for(let B=u,E=u;B<=f;++B)k=e[B%a],!k.skip&&(_=d(k[o]),_!==C&&(v=c(_,n,i),x===null&&R()&&(x=l(_,n)===0?B:E),x!==null&&V()&&(m.push(I0({start:x,end:B,loop:p,count:a,style:g})),x=null),E=B,C=_));return x!==null&&m.push(I0({start:x,end:f,loop:p,count:a,style:g})),m}function jy(t,e){const s=[],o=t.segments;for(let n=0;n<o.length;n++){const i=Ny(o[n],t.points,e);i.length&&s.push(...i)}return s}function ML(t,e,s,o){let n=0,i=e-1;if(s&&!o)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,s&&(i+=n);i>n&&t[i%e].skip;)i--;return i%=e,{start:n,end:i}}function RL(t,e,s,o){const n=t.length,i=[];let a=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%n];d.skip||d.stop?l.skip||(o=!1,i.push({start:e%n,end:(c-1)%n,loop:o}),e=a=d.stop?c:null):(a=c,l.skip&&(e=c)),l=d}return a!==null&&i.push({start:e%n,end:a%n,loop:o}),i}function DL(t,e){const s=t.points,o=t.options.spanGaps,n=s.length;if(!n)return[];const i=!!t._loop,{start:a,end:l}=ML(s,n,i,o);if(o===!0)return L0(t,[{start:a,end:l,loop:i}],s,e);const c=l<a?l+n:l,d=!!t._fullLoop&&a===0&&l===n-1;return L0(t,RL(s,a,c,d),s,e)}function L0(t,e,s,o){return!o||!o.setContext||!s?e:OL(t,e,s,o)}function OL(t,e,s,o){const n=t._chart.getContext(),i=B0(t.options),{_datasetIndex:a,options:{spanGaps:l}}=t,c=s.length,d=[];let u=i,f=e[0].start,p=f;function g(m,v,x,_){const k=l?-1:1;if(m!==v){for(m+=c;s[m%c].skip;)m-=k;for(;s[v%c].skip;)v+=k;m%c!==v%c&&(d.push({start:m%c,end:v%c,loop:x,style:_}),u=_,f=v%c)}}for(const m of e){f=l?f:m.start;let v=s[f%c],x;for(p=f+1;p<=m.end;p++){const _=s[p%c];x=B0(o.setContext(kn(n,{type:"segment",p0:v,p1:_,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:a}))),IL(x,u)&&g(f,p-1,m.loop,u),v=_,u=x}f<p-1&&g(f,p-1,m.loop,u)}return d}function B0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function IL(t,e){if(!e)return!1;const s=[],o=function(n,i){return Qf(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,o)!==JSON.stringify(e,o)}function qa(t,e,s){return t.options.clip?t[s]:e[s]}function LL(t,e){const{xScale:s,yScale:o}=t;return s&&o?{left:qa(s,e,"left"),right:qa(s,e,"right"),top:qa(o,e,"top"),bottom:qa(o,e,"bottom")}:e}function Fy(t,e){const s=e._clip;if(s.disabled)return!1;const o=LL(e,t.chartArea);return{left:s.left===!1?0:o.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:o.right+(s.right===!0?0:s.right),top:s.top===!1?0:o.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:o.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class BL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,o,n){const i=s.listeners[n],a=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:a,currentStep:Math.min(o-s.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=_y.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((o,n)=>{if(!o.running||!o.items.length)return;const i=o.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>o.duration&&(o.duration=c._total),c.tick(e),l=!0):(i[a]=i[i.length-1],i.pop());l&&(n.draw(),this._notify(n,o,e,"progress")),i.length||(o.running=!1,this._notify(n,o,e,"complete"),o.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let o=s.get(e);return o||(o={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,o)),o}listen(e,s,o){this._getAnims(e).listeners[s].push(o)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((o,n)=>Math.max(o,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const o=s.items;let n=o.length-1;for(;n>=0;--n)o[n].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ro=new BL;const N0="transparent",NL={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const o=A0(t||N0),n=o.valid&&A0(e||N0);return n&&n.valid?n.mix(o,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class jL{constructor(e,s,o,n){const i=s[o];n=ui([e.to,n,i,e.from]);const a=ui([e.from,i,n]);this._active=!0,this._fn=e.fn||NL[e.type||typeof a],this._easing=Pi[e.easing]||Pi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=o,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(e,s,o){if(this._active){this._notify(!1);const n=this._target[this._prop],i=o-this._start,a=this._duration-i;this._start=o,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ui([e.to,s,n,e.from]),this._from=ui([e.from,n,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,o=this._duration,n=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||s<o),!this._active){this._target[n]=l,this._notify(!0);return}if(s<0){this._target[n]=i;return}c=s/o%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,o)=>{e.push({res:s,rej:o})})}_notify(e){const s=e?"res":"rej",o=this._promises||[];for(let n=0;n<o.length;n++)o[n][s]()}}class Uy{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!Xe(e))return;const s=Object.keys(_t.animation),o=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!Xe(i))return;const a={};for(const l of s)a[l]=i[l];(wt(i.properties)&&i.properties||[n]).forEach(l=>{(l===n||!o.has(l))&&o.set(l,a)})})}_animateOptions(e,s){const o=s.options,n=UL(e,o);if(!n)return[];const i=this._createAnimations(n,o);return o.$shared&&FL(e.options.$animations,o).then(()=>{e.options=o},()=>{}),i}_createAnimations(e,s){const o=this._properties,n=[],i=e.$animations||(e.$animations={}),a=Object.keys(s),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,s));continue}const u=s[d];let f=i[d];const p=o.get(d);if(f)if(p&&f.active()){f.update(p,u,l);continue}else f.cancel();if(!p||!p.duration){e[d]=u;continue}i[d]=f=new jL(p,e,d,u),n.push(f)}return n}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const o=this._createAnimations(e,s);if(o.length)return Ro.add(this._chart,o),!0}}function FL(t,e){const s=[],o=Object.keys(e);for(let n=0;n<o.length;n++){const i=t[o[n]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function UL(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function j0(t,e){const s=t&&t.options||{},o=s.reverse,n=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:o?i:n,end:o?n:i}}function zL(t,e,s){if(s===!1)return!1;const o=j0(t,s),n=j0(e,s);return{top:n.end,right:o.end,bottom:n.start,left:o.start}}function VL(t){let e,s,o,n;return Xe(t)?(e=t.top,s=t.right,o=t.bottom,n=t.left):e=s=o=n=t,{top:e,right:s,bottom:o,left:n,disabled:t===!1}}function zy(t,e){const s=[],o=t._getSortedDatasetMetas(e);let n,i;for(n=0,i=o.length;n<i;++n)s.push(o[n].index);return s}function F0(t,e,s,o={}){const n=t.keys,i=o.mode==="single";let a,l,c,d;if(e===null)return;let u=!1;for(a=0,l=n.length;a<l;++a){if(c=+n[a],c===s){if(u=!0,o.all)continue;break}d=t.values[c],$t(d)&&(i||e===0||vo(e)===vo(d))&&(e+=d)}return!u&&!o.all?0:e}function HL(t,e){const{iScale:s,vScale:o}=e,n=s.axis==="x"?"x":"y",i=o.axis==="x"?"x":"y",a=Object.keys(t),l=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],l[c]={[n]:u,[i]:t[u]};return l}function Td(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function qL(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function WL(t){const{min:e,max:s,minDefined:o,maxDefined:n}=t.getUserBounds();return{min:o?e:Number.NEGATIVE_INFINITY,max:n?s:Number.POSITIVE_INFINITY}}function GL(t,e,s){const o=t[e]||(t[e]={});return o[s]||(o[s]={})}function U0(t,e,s,o){for(const n of e.getMatchingVisibleMetas(o).reverse()){const i=t[n.index];if(s&&i>0||!s&&i<0)return n.index}return null}function z0(t,e){const{chart:s,_cachedMeta:o}=t,n=s._stacks||(s._stacks={}),{iScale:i,vScale:a,index:l}=o,c=i.axis,d=a.axis,u=qL(i,a,o),f=e.length;let p;for(let g=0;g<f;++g){const m=e[g],{[c]:v,[d]:x}=m,_=m._stacks||(m._stacks={});p=_[d]=GL(n,u,v),p[l]=x,p._top=U0(p,a,!0,o.type),p._bottom=U0(p,a,!1,o.type);const k=p._visualValues||(p._visualValues={});k[l]=x}}function Pd(t,e){const s=t.scales;return Object.keys(s).filter(o=>s[o].axis===e).shift()}function KL(t,e){return kn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function YL(t,e,s){return kn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function oi(t,e){const s=t.controller.index,o=t.vScale&&t.vScale.axis;if(o){e=e||t._parsed;for(const n of e){const i=n._stacks;if(!i||i[o]===void 0||i[o][s]===void 0)return;delete i[o][s],i[o]._visualValues!==void 0&&i[o]._visualValues[s]!==void 0&&delete i[o]._visualValues[s]}}}const Md=t=>t==="reset"||t==="none",V0=(t,e)=>e?t:Object.assign({},t),JL=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:zy(s,!0),values:null};class Qs{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Td(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&oi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,o=this.getDataset(),n=(f,p,g,m)=>f==="x"?p:f==="r"?m:g,i=s.xAxisID=Ve(o.xAxisID,Pd(e,"x")),a=s.yAxisID=Ve(o.yAxisID,Pd(e,"y")),l=s.rAxisID=Ve(o.rAxisID,Pd(e,"r")),c=s.indexAxis,d=s.iAxisID=n(c,i,a,l),u=s.vAxisID=n(c,a,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(a),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$0(this._data,this),e._stacked&&oi(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),o=this._data;if(Xe(s)){const n=this._cachedMeta;this._data=HL(s,n)}else if(o!==s){if(o){$0(o,this);const n=this._cachedMeta;oi(n),n._parsed=[]}s&&Object.isExtensible(s)&&OI(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,o=this.getDataset();let n=!1;this._dataCheck();const i=s._stacked;s._stacked=Td(s.vScale,s),s.stack!==o.stack&&(n=!0,oi(s),s.stack=o.stack),this._resyncElements(e),(n||i!==s._stacked)&&(z0(this,s._parsed),s._stacked=Td(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),o=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(o,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:o,_data:n}=this,{iScale:i,_stacked:a}=o,l=i.axis;let c=e===0&&s===n.length?!0:o._sorted,d=e>0&&o._parsed[e-1],u,f,p;if(this._parsing===!1)o._parsed=n,o._sorted=!0,p=n;else{wt(n[e])?p=this.parseArrayData(o,n,e,s):Xe(n[e])?p=this.parseObjectData(o,n,e,s):p=this.parsePrimitiveData(o,n,e,s);const g=()=>f[l]===null||d&&f[l]<d[l];for(u=0;u<s;++u)o._parsed[u+e]=f=p[u],c&&(g()&&(c=!1),d=f);o._sorted=c}a&&z0(this,p)}parsePrimitiveData(e,s,o,n){const{iScale:i,vScale:a}=e,l=i.axis,c=a.axis,d=i.getLabels(),u=i===a,f=new Array(n);let p,g,m;for(p=0,g=n;p<g;++p)m=p+o,f[p]={[l]:u||i.parse(d[m],m),[c]:a.parse(s[m],m)};return f}parseArrayData(e,s,o,n){const{xScale:i,yScale:a}=e,l=new Array(n);let c,d,u,f;for(c=0,d=n;c<d;++c)u=c+o,f=s[u],l[c]={x:i.parse(f[0],u),y:a.parse(f[1],u)};return l}parseObjectData(e,s,o,n){const{xScale:i,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,f,p,g;for(u=0,f=n;u<f;++u)p=u+o,g=s[p],d[u]={x:i.parse(xn(g,l),p),y:a.parse(xn(g,c),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,o){const n=this.chart,i=this._cachedMeta,a=s[e.axis],l={keys:zy(n,!0),values:s._stacks[e.axis]._visualValues};return F0(l,a,i.index,{mode:o})}updateRangeFromParsed(e,s,o,n){const i=o[s.axis];let a=i===null?NaN:i;const l=n&&o._stacks[s.axis];n&&l&&(n.values=l,a=F0(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,s){const o=this._cachedMeta,n=o._parsed,i=o._sorted&&e===o.iScale,a=n.length,l=this._getOtherScale(e),c=JL(s,o,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=WL(l);let p,g;function m(){g=n[p];const v=g[l.axis];return!$t(g[e.axis])||u>v||f<v}for(p=0;p<a&&!(!m()&&(this.updateRangeFromParsed(d,e,g,c),i));++p);if(i){for(p=a-1;p>=0;--p)if(!m()){this.updateRangeFromParsed(d,e,g,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,o=[];let n,i,a;for(n=0,i=s.length;n<i;++n)a=s[n][e.axis],$t(a)&&o.push(a);return o}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,o=s.iScale,n=s.vScale,i=this.getParsed(e);return{label:o?""+o.getLabelForValue(i[o.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=VL(Ve(this.options.clip,zL(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,o=this._cachedMeta,n=o.data||[],i=s.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||n.length-l,d=this.options.drawActiveElementsOnTop;let u;for(o.dataset&&o.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const f=n[u];f.hidden||(f.active&&d?a.push(f):f.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,s){const o=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(o):this.resolveDataElementOptions(e||0,o)}getContext(e,s,o){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=YL(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=KL(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=o,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",o){const n=s==="active",i=this._cachedDataOpts,a=e+"-"+s,l=i[a],c=this.enableOptionSharing&&Gi(o);if(l)return V0(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),f=n?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),u),g=Object.keys(_t.elements[e]),m=()=>this.getContext(o,n,s),v=d.resolveNamedOptions(p,g,m,f);return v.$shared&&(v.$shared=c,i[a]=Object.freeze(V0(v,c))),v}_resolveAnimations(e,s,o){const n=this.chart,i=this._cachedDataOpts,a=`animation-${s}`,l=i[a];if(l)return l;let c;if(n.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,s),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(e,o,s))}const d=new Uy(n,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Md(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const o=this.resolveDataElementOptions(e,s),n=this._sharedOptions,i=this.getSharedOptions(o),a=this.includeOptions(s,i)||i!==n;return this.updateSharedOptions(i,s,o),{sharedOptions:i,includeOptions:a}}updateElement(e,s,o,n){Md(n)?Object.assign(e,o):this._resolveAnimations(s,n).update(e,o)}updateSharedOptions(e,s,o){e&&!Md(s)&&this._resolveAnimations(void 0,s).update(e,o)}_setStyle(e,s,o,n){e.active=n;const i=this.getStyle(s,n);this._resolveAnimations(s,o,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,o){this._setStyle(e,o,"active",!1)}setHoverStyle(e,s,o){this._setStyle(e,o,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,o=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const n=o.length,i=s.length,a=Math.min(i,n);a&&this.parse(0,a),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,s,o=!0){const n=this._cachedMeta,i=n.data,a=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=a;l--)d[l]=d[l-s]};for(c(i),l=e;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,s),o&&this.updateElements(i,e,s,"reset")}updateElements(e,s,o,n){}_removeElements(e,s){const o=this._cachedMeta;if(this._parsing){const n=o._parsed.splice(e,s);o._stacked&&oi(o,n)}o.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,o,n]=e;this[s](o,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const o=arguments.length-2;o&&this._sync(["_insertElements",e,o])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}_e(Qs,"defaults",{}),_e(Qs,"datasetElementType",null),_e(Qs,"dataElementType",null);function XL(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let o=[];for(let n=0,i=s.length;n<i;n++)o=o.concat(s[n].controller.getAllParsedValues(t));t._cache.$bar=wy(o.sort((n,i)=>n-i))}return t._cache.$bar}function QL(t){const e=t.iScale,s=XL(e,t.type);let o=e._length,n,i,a,l;const c=()=>{a===32767||a===-32768||(Gi(l)&&(o=Math.min(o,Math.abs(a-l)||o)),l=a)};for(n=0,i=s.length;n<i;++n)a=e.getPixelForValue(s[n]),c();for(l=void 0,n=0,i=e.ticks.length;n<i;++n)a=e.getPixelForTick(n),c();return o}function ZL(t,e,s,o){const n=s.barThickness;let i,a;return Ke(n)?(i=e.min*s.categoryPercentage,a=s.barPercentage):(i=n*o,a=1),{chunk:i/o,ratio:a,start:e.pixels[t]-i/2}}function eB(t,e,s,o){const n=e.pixels,i=n[t];let a=t>0?n[t-1]:null,l=t<n.length-1?n[t+1]:null;const c=s.categoryPercentage;a===null&&(a=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-a);const d=i-(i-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/o,ratio:s.barPercentage,start:d}}function tB(t,e,s,o){const n=s.parse(t[0],o),i=s.parse(t[1],o),a=Math.min(n,i),l=Math.max(n,i);let c=a,d=l;Math.abs(a)>Math.abs(l)&&(c=l,d=a),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:n,end:i,min:a,max:l}}function Vy(t,e,s,o){return wt(t)?tB(t,e,s,o):e[s.axis]=s.parse(t,o),e}function H0(t,e,s,o){const n=t.iScale,i=t.vScale,a=n.getLabels(),l=n===i,c=[];let d,u,f,p;for(d=s,u=s+o;d<u;++d)p=e[d],f={},f[n.axis]=l||n.parse(a[d],d),c.push(Vy(p,f,i,d));return c}function Rd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function sB(t,e,s){return t!==0?vo(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function oB(t){let e,s,o,n,i;return t.horizontal?(e=t.base>t.x,s="left",o="right"):(e=t.base<t.y,s="bottom",o="top"),e?(n="end",i="start"):(n="start",i="end"),{start:s,end:o,reverse:e,top:n,bottom:i}}function nB(t,e,s,o){let n=e.borderSkipped;const i={};if(!n){t.borderSkipped=i;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:d,bottom:u}=oB(t);n==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===o?n=d:(s._bottom||0)===o?n=u:(i[q0(u,a,l,c)]=!0,n=d)),i[q0(n,a,l,c)]=!0,t.borderSkipped=i}function q0(t,e,s,o){return o?(t=rB(t,e,s),t=W0(t,s,e)):t=W0(t,e,s),t}function rB(t,e,s){return t===e?s:t===s?e:t}function W0(t,e,s){return t==="start"?e:t==="end"?s:t}function iB(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class gl extends Qs{parsePrimitiveData(e,s,o,n){return H0(e,s,o,n)}parseArrayData(e,s,o,n){return H0(e,s,o,n)}parseObjectData(e,s,o,n){const{iScale:i,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=a.axis==="x"?l:c,f=[];let p,g,m,v;for(p=o,g=o+n;p<g;++p)v=s[p],m={},m[i.axis]=i.parse(xn(v,d),p),f.push(Vy(xn(v,u),m,a,p));return f}updateRangeFromParsed(e,s,o,n){super.updateRangeFromParsed(e,s,o,n);const i=o._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:o,vScale:n}=s,i=this.getParsed(e),a=i._custom,l=Rd(a)?"["+a.start+", "+a.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+o.getLabelForValue(i[o.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,o,n){const i=n==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(s,n);for(let g=s;g<s+o;g++){const m=this.getParsed(g),v=i||Ke(m[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),x=this._calculateBarIndexPixels(g,u),_=(m._stacks||{})[l.axis],k={horizontal:d,base:v.base,enableBorderRadius:!_||Rd(m._custom)||a===_._top||a===_._bottom,x:d?v.head:x.center,y:d?x.center:v.head,height:d?x.size:Math.abs(v.size),width:d?Math.abs(v.size):x.size};p&&(k.options=f||this.resolveDataElementOptions(g,e[g].active?"active":n));const C=k.options||e[g].options;nB(k,C,_,a),iB(k,C,u.ratio),this.updateElement(e[g],g,k,n)}}_getStacks(e,s){const{iScale:o}=this._cachedMeta,n=o.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=o.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[o.axis],d=u=>{const f=u._parsed.find(g=>g[o.axis]===c),p=f&&f[u.vScale.axis];if(Ke(p)||isNaN(p))return!0};for(const u of n)if(!(s!==void 0&&d(u))&&((i===!1||a.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(o=>e[o].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const o of this.chart.data.datasets)e[Ve(this.chart.options.indexAxis==="x"?o.xAxisID:o.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,o){const n=this._getStacks(e,o),i=s!==void 0?n.indexOf(s):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,o=s.iScale,n=[];let i,a;for(i=0,a=s.data.length;i<a;++i)n.push(o.getPixelForValue(this.getParsed(i)[o.axis],i));const l=e.barThickness;return{min:l||QL(s),pixels:n,start:o._startPixel,end:o._endPixel,stackCount:this._getStackCount(),scale:o,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:o,index:n},options:{base:i,minBarLength:a}}=this,l=i||0,c=this.getParsed(e),d=c._custom,u=Rd(d);let f=c[s.axis],p=0,g=o?this.applyStack(s,c,o):f,m,v;g!==f&&(p=g-f,g=f),u&&(f=d.barStart,g=d.barEnd-d.barStart,f!==0&&vo(f)!==vo(d.barEnd)&&(p=0),p+=f);const x=!Ke(i)&&!u?i:p;let _=s.getPixelForValue(x);if(this.chart.getDataVisibility(e)?m=s.getPixelForValue(p+g):m=_,v=m-_,Math.abs(v)<a){v=sB(v,s,l)*a,f===l&&(_-=v/2);const k=s.getPixelForDecimal(0),C=s.getPixelForDecimal(1),P=Math.min(k,C),$=Math.max(k,C);_=Math.max(Math.min(_,$),P),m=_+v,o&&!u&&(c._stacks[s.axis]._visualValues[n]=s.getValueForPixel(m)-s.getValueForPixel(_))}if(_===s.getPixelForValue(l)){const k=vo(v)*s.getLineWidthForValue(l)/2;_+=k,v-=k}return{size:v,base:_,head:m,center:m+v/2}}_calculateBarIndexPixels(e,s){const o=s.scale,n=this.options,i=n.skipNull,a=Ve(n.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(s.grouped){const u=i?this._getStackCount(e):s.stackCount,f=n.barThickness==="flex"?eB(e,s,n,u*d):ZL(e,s,n,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(Ve(p,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+g;l=f.start+f.chunk*m+f.chunk/2,c=Math.min(a,f.chunk*f.ratio)}else l=o.getPixelForValue(this.getParsed(e)[o.axis],e),c=Math.min(a,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,o=e.data,n=o.length;let i=0;for(;i<n;++i)this.getParsed(i)[s.axis]!==null&&!o[i].hidden&&o[i].draw(this._ctx)}}_e(gl,"id","bar"),_e(gl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),_e(gl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ml extends Qs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,o,n){const i=super.parsePrimitiveData(e,s,o,n);for(let a=0;a<i.length;a++)i[a]._custom=this.resolveDataElementOptions(a+o).radius;return i}parseArrayData(e,s,o,n){const i=super.parseArrayData(e,s,o,n);for(let a=0;a<i.length;a++){const l=s[o+a];i[a]._custom=Ve(l[2],this.resolveDataElementOptions(a+o).radius)}return i}parseObjectData(e,s,o,n){const i=super.parseObjectData(e,s,o,n);for(let a=0;a<i.length;a++){const l=s[o+a];i[a]._custom=Ve(l&&l.r&&+l.r,this.resolveDataElementOptions(a+o).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let o=e.length-1;o>=0;--o)s=Math.max(s,e[o].size(this.resolveDataElementOptions(o))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,o=this.chart.data.labels||[],{xScale:n,yScale:i}=s,a=this.getParsed(e),l=n.getLabelForValue(a.x),c=i.getLabelForValue(a.y),d=a._custom;return{label:o[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,o,n){const i=n==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(s,n),u=a.axis,f=l.axis;for(let p=s;p<s+o;p++){const g=e[p],m=!i&&this.getParsed(p),v={},x=v[u]=i?a.getPixelForDecimal(.5):a.getPixelForValue(m[u]),_=v[f]=i?l.getBasePixel():l.getPixelForValue(m[f]);v.skip=isNaN(x)||isNaN(_),d&&(v.options=c||this.resolveDataElementOptions(p,g.active?"active":n),i&&(v.options.radius=0)),this.updateElement(g,p,v,n)}}resolveDataElementOptions(e,s){const o=this.getParsed(e);let n=super.resolveDataElementOptions(e,s);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const i=n.radius;return s!=="active"&&(n.radius=0),n.radius+=Ve(o&&o._custom,i),n}}_e(ml,"id","bubble"),_e(ml,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),_e(ml,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function aB(t,e,s){let o=1,n=1,i=0,a=0;if(e<vt){const l=t,c=l+e,d=Math.cos(l),u=Math.sin(l),f=Math.cos(c),p=Math.sin(c),g=(C,P,$)=>Ki(C,l,c,!0)?1:Math.max(P,P*s,$,$*s),m=(C,P,$)=>Ki(C,l,c,!0)?-1:Math.min(P,P*s,$,$*s),v=g(0,d,f),x=g(Pt,u,p),_=m(st,d,f),k=m(st+Pt,u,p);o=(v-_)/2,n=(x-k)/2,i=-(v+_)/2,a=-(x+k)/2}return{ratioX:o,ratioY:n,offsetX:i,offsetY:a}}class Fn extends Qs{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const o=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=o;else{let i=c=>+o[c];if(Xe(o[e])){const{key:c="value"}=this._parsing;i=d=>+xn(o[d],c)}let a,l;for(a=e,l=e+s;a<l;++a)n._parsed[a]=i(a)}}_getRotation(){return Js(this.options.rotation-90)}_getCircumference(){return Js(this.options.circumference)}_getRotationExtents(){let e=vt,s=-vt;for(let o=0;o<this.chart.data.datasets.length;++o)if(this.chart.isDatasetVisible(o)&&this.chart.getDatasetMeta(o).type===this._type){const n=this.chart.getDatasetMeta(o).controller,i=n._getRotation(),a=n._getCircumference();e=Math.min(e,i),s=Math.max(s,i+a)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:o}=s,n=this._cachedMeta,i=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(o.width,o.height)-a)/2,0),c=Math.min(yI(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:m,offsetY:v}=aB(f,u,c),x=(o.width-a)/p,_=(o.height-a)/g,k=Math.max(Math.min(x,_)/2,0),C=my(this.options.radius,k),P=Math.max(C*c,0),$=(C-P)/this._getVisibleDatasetWeightTotal();this.offsetX=m*C,this.offsetY=v*C,n.total=this.calculateTotal(),this.outerRadius=C-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,s){const o=this.options,n=this._cachedMeta,i=this._getCircumference();return s&&o.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/vt)}updateElements(e,s,o,n){const i=n==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,u=(l.left+l.right)/2,f=(l.top+l.bottom)/2,p=i&&d.animateScale,g=p?0:this.innerRadius,m=p?0:this.outerRadius,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(s,n);let _=this._getRotation(),k;for(k=0;k<s;++k)_+=this._circumference(k,i);for(k=s;k<s+o;++k){const C=this._circumference(k,i),P=e[k],$={x:u+this.offsetX,y:f+this.offsetY,startAngle:_,endAngle:_+C,circumference:C,outerRadius:m,innerRadius:g};x&&($.options=v||this.resolveDataElementOptions(k,P.active?"active":n)),_+=C,this.updateElement(P,k,$,n)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let o=0,n;for(n=0;n<s.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!s[n].hidden&&(o+=Math.abs(i))}return o}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?vt*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,o=this.chart,n=o.data.labels||[],i=ha(s._parsed[e],o.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let s=0;const o=this.chart;let n,i,a,l,c;if(!e){for(n=0,i=o.data.datasets.length;n<i;++n)if(o.isDatasetVisible(n)){a=o.getDatasetMeta(n),e=a.data,l=a.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let o=0,n=e.length;o<n;++o){const i=this.resolveDataElementOptions(o);s=Math.max(s,i.offset||0,i.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let o=0;o<e;++o)this.chart.isDatasetVisible(o)&&(s+=this._getRingWeight(o));return s}_getRingWeight(e){return Math.max(Ve(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}_e(Fn,"id","doughnut"),_e(Fn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),_e(Fn,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),_e(Fn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:o,color:n}}=e.legend.options;return s.labels.map((i,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:o,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,s,o){o.chart.toggleDataVisibility(s.index),o.chart.update()}}}});class bl extends Qs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:o,data:n=[],_dataset:i}=s,a=this.chart._animationsDisabled;let{start:l,count:c}=Cy(s,n,a);this._drawStart=l,this._drawCount=c,$y(s)&&(l=0,c=n.length),o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!i._decimated,o.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!a,options:d},e),this.updateElements(n,l,c,e)}updateElements(e,s,o,n){const i=n==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(s,n),p=a.axis,g=l.axis,{spanGaps:m,segment:v}=this.options,x=Dr(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||n==="none",k=s+o,C=e.length;let P=s>0&&this.getParsed(s-1);for(let $=0;$<C;++$){const R=e[$],V=_?R:{};if($<s||$>=k){V.skip=!0;continue}const B=this.getParsed($),E=Ke(B[g]),S=V[p]=a.getPixelForValue(B[p],$),O=V[g]=i||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,B,c):B[g],$);V.skip=isNaN(S)||isNaN(O)||E,V.stop=$>0&&Math.abs(B[p]-P[p])>x,v&&(V.parsed=B,V.raw=d.data[$]),f&&(V.options=u||this.resolveDataElementOptions($,R.active?"active":n)),_||this.updateElement(R,$,V,n),P=B}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,o=s.options&&s.options.borderWidth||0,n=e.data||[];if(!n.length)return o;const i=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}_e(bl,"id","line"),_e(bl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),_e(bl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ri extends Qs{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,o=this.chart,n=o.data.labels||[],i=ha(s._parsed[e].r,o.options.locale);return{label:n[e]||"",value:i}}parseObjectData(e,s,o,n){return Dy.bind(this)(e,s,o,n)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((o,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<s.min&&(s.min=i),i>s.max&&(s.max=i))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,o=e.options,n=Math.min(s.right-s.left,s.bottom-s.top),i=Math.max(n/2,0),a=Math.max(o.cutoutPercentage?i/100*o.cutoutPercentage:1,0),l=(i-a)/e.getVisibleDatasetCount();this.outerRadius=i-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,s,o,n){const i=n==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,f=d.yCenter,p=d.getIndexAngle(0)-.5*st;let g=p,m;const v=360/this.countVisibleElements();for(m=0;m<s;++m)g+=this._computeAngle(m,n,v);for(m=s;m<s+o;m++){const x=e[m];let _=g,k=g+this._computeAngle(m,n,v),C=a.getDataVisibility(m)?d.getDistanceFromCenterForValue(this.getParsed(m).r):0;g=k,i&&(c.animateScale&&(C=0),c.animateRotate&&(_=k=p));const P={x:u,y:f,innerRadius:0,outerRadius:C,startAngle:_,endAngle:k,options:this.resolveDataElementOptions(m,x.active?"active":n)};this.updateElement(x,m,P,n)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((o,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&s++}),s}_computeAngle(e,s,o){return this.chart.getDataVisibility(e)?Js(this.resolveDataElementOptions(e,s).angle||o):0}}_e(Ri,"id","polarArea"),_e(Ri,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),_e(Ri,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:o,color:n}}=e.legend.options;return s.labels.map((i,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:o,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,s,o){o.chart.toggleDataVisibility(s.index),o.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Eu extends Fn{}_e(Eu,"id","pie"),_e(Eu,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class vl extends Qs{getLabelAndValue(e){const s=this._cachedMeta.vScale,o=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(o[s.axis])}}parseObjectData(e,s,o,n){return Dy.bind(this)(e,s,o,n)}update(e){const s=this._cachedMeta,o=s.dataset,n=s.data||[],i=s.iScale.getLabels();if(o.points=n,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===n.length,options:a};this.updateElement(o,void 0,l,e)}this.updateElements(n,0,n.length,e)}updateElements(e,s,o,n){const i=this._cachedMeta.rScale,a=n==="reset";for(let l=s;l<s+o;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":n),u=i.getPointPositionForValue(l,this.getParsed(l).r),f=a?i.xCenter:u.x,p=a?i.yCenter:u.y,g={x:f,y:p,angle:u.angle,skip:isNaN(f)||isNaN(p),options:d};this.updateElement(c,l,g,n)}}}_e(vl,"id","radar"),_e(vl,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),_e(vl,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class yl extends Qs{getLabelAndValue(e){const s=this._cachedMeta,o=this.chart.data.labels||[],{xScale:n,yScale:i}=s,a=this.getParsed(e),l=n.getLabelForValue(a.x),c=i.getLabelForValue(a.y);return{label:o[e]||"",value:"("+l+", "+c+")"}}update(e){const s=this._cachedMeta,{data:o=[]}=s,n=this.chart._animationsDisabled;let{start:i,count:a}=Cy(s,o,n);if(this._drawStart=i,this._drawCount=a,$y(s)&&(i=0,a=o.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=s;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=o;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!n,options:d},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(o,i,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,o,n){const i=n==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(s,n),f=this.getSharedOptions(u),p=this.includeOptions(n,f),g=a.axis,m=l.axis,{spanGaps:v,segment:x}=this.options,_=Dr(v)?v:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||i||n==="none";let C=s>0&&this.getParsed(s-1);for(let P=s;P<s+o;++P){const $=e[P],R=this.getParsed(P),V=k?$:{},B=Ke(R[m]),E=V[g]=a.getPixelForValue(R[g],P),S=V[m]=i||B?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,R,c):R[m],P);V.skip=isNaN(E)||isNaN(S)||B,V.stop=P>0&&Math.abs(R[g]-C[g])>_,x&&(V.parsed=R,V.raw=d.data[P]),p&&(V.options=f||this.resolveDataElementOptions(P,$.active?"active":n)),k||this.updateElement($,P,V,n),C=R}this.updateSharedOptions(f,n,u)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let l=0;for(let c=s.length-1;c>=0;--c)l=Math.max(l,s[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const o=e.dataset,n=o.options&&o.options.borderWidth||0;if(!s.length)return n;const i=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,i,a)/2}}_e(yl,"id","scatter"),_e(yl,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),_e(yl,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var lB=Object.freeze({__proto__:null,BarController:gl,BubbleController:ml,DoughnutController:Fn,LineController:bl,PieController:Eu,PolarAreaController:Ri,RadarController:vl,ScatterController:yl});function Dn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rp{constructor(e){_e(this,"options");this.options=e||{}}static override(e){Object.assign(rp.prototype,e)}init(){}formats(){return Dn()}parse(){return Dn()}format(){return Dn()}add(){return Dn()}diff(){return Dn()}startOf(){return Dn()}endOf(){return Dn()}}var cB={_date:rp};function dB(t,e,s,o){const{controller:n,data:i,_sorted:a}=t,l=n._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&i.length){const d=l._reversePixels?RI:Uo;if(o){if(n._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=d(i,e,s-f),g=d(i,e,s+f);return{lo:p.lo,hi:g.hi}}}}else{const u=d(i,e,s);if(c){const{vScale:f}=n._cachedMeta,{_parsed:p}=t,g=p.slice(0,u.lo+1).reverse().findIndex(v=>!Ke(v[f.axis]));u.lo-=Math.max(0,g);const m=p.slice(u.hi).findIndex(v=>!Ke(v[f.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:i.length-1}}function Gc(t,e,s,o,n){const i=t.getSortedVisibleDatasetMetas(),a=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:f,hi:p}=dB(i[l],e,a,n);for(let g=f;g<=p;++g){const m=u[g];m.skip||o(m,d,g)}}}function uB(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(o,n){const i=e?Math.abs(o.x-n.x):0,a=s?Math.abs(o.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function Dd(t,e,s,o,n){const i=[];return!n&&!t.isPointInArea(e)||Gc(t,s,e,function(l,c,d){!n&&!zo(l,t.chartArea,0)||l.inRange(e.x,e.y,o)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function fB(t,e,s,o){let n=[];function i(a,l,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],o),{angle:f}=yy(a,{x:e.x,y:e.y});Ki(f,d,u)&&n.push({element:a,datasetIndex:l,index:c})}return Gc(t,s,e,i),n}function pB(t,e,s,o,n,i){let a=[];const l=uB(s);let c=Number.POSITIVE_INFINITY;function d(u,f,p){const g=u.inRange(e.x,e.y,n);if(o&&!g)return;const m=u.getCenterPoint(n);if(!(!!i||t.isPointInArea(m))&&!g)return;const x=l(e,m);x<c?(a=[{element:u,datasetIndex:f,index:p}],c=x):x===c&&a.push({element:u,datasetIndex:f,index:p})}return Gc(t,s,e,d),a}function Od(t,e,s,o,n,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!o?fB(t,e,s,n):pB(t,e,s,o,n,i)}function G0(t,e,s,o,n){const i=[],a=s==="x"?"inXRange":"inYRange";let l=!1;return Gc(t,s,e,(c,d,u)=>{c[a]&&c[a](e[s],n)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,n))}),o&&!l?[]:i}var hB={modes:{index(t,e,s,o){const n=Ln(e,t),i=s.axis||"x",a=s.includeInvisible||!1,l=s.intersect?Dd(t,n,i,o,a):Od(t,n,i,!1,o,a),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,o){const n=Ln(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;let l=s.intersect?Dd(t,n,i,o,a):Od(t,n,i,!1,o,a);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,o){const n=Ln(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return Dd(t,n,i,o,a)},nearest(t,e,s,o){const n=Ln(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return Od(t,n,i,s.intersect,o,a)},x(t,e,s,o){const n=Ln(e,t);return G0(t,n,"x",s.intersect,o)},y(t,e,s,o){const n=Ln(e,t);return G0(t,n,"y",s.intersect,o)}}};const Hy=["left","top","right","bottom"];function ni(t,e){return t.filter(s=>s.pos===e)}function K0(t,e){return t.filter(s=>Hy.indexOf(s.pos)===-1&&s.box.axis===e)}function ri(t,e){return t.sort((s,o)=>{const n=e?o:s,i=e?s:o;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function gB(t){const e=[];let s,o,n,i,a,l;for(s=0,o=(t||[]).length;s<o;++s)n=t[s],{position:i,options:{stack:a,stackWeight:l=1}}=n,e.push({index:s,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&i+a,stackWeight:l});return e}function mB(t){const e={};for(const s of t){const{stack:o,pos:n,stackWeight:i}=s;if(!o||!Hy.includes(n))continue;const a=e[o]||(e[o]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function bB(t,e){const s=mB(t),{vBoxMaxWidth:o,hBoxMaxHeight:n}=e;let i,a,l;for(i=0,a=t.length;i<a;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*o:c&&e.availableWidth,l.height=n):(l.width=o,l.height=u?u*n:c&&e.availableHeight)}return s}function vB(t){const e=gB(t),s=ri(e.filter(d=>d.box.fullSize),!0),o=ri(ni(e,"left"),!0),n=ri(ni(e,"right")),i=ri(ni(e,"top"),!0),a=ri(ni(e,"bottom")),l=K0(e,"x"),c=K0(e,"y");return{fullSize:s,leftAndTop:o.concat(i),rightAndBottom:n.concat(c).concat(a).concat(l),chartArea:ni(e,"chartArea"),vertical:o.concat(n).concat(c),horizontal:i.concat(a).concat(l)}}function Y0(t,e,s,o){return Math.max(t[s],e[s])+Math.max(t[o],e[o])}function qy(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function yB(t,e,s,o){const{pos:n,box:i}=s,a=t.maxPadding;if(!Xe(n)){s.size&&(t[n]-=s.size);const f=o[s.stack]||{size:0,count:1};f.size=Math.max(f.size,s.horizontal?i.height:i.width),s.size=f.size/f.count,t[n]+=s.size}i.getPadding&&qy(a,i.getPadding());const l=Math.max(0,e.outerWidth-Y0(a,t,"left","right")),c=Math.max(0,e.outerHeight-Y0(a,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function xB(t){const e=t.maxPadding;function s(o){const n=Math.max(e[o]-t[o],0);return t[o]+=n,n}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function wB(t,e){const s=e.maxPadding;function o(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{i[a]=Math.max(e[a],s[a])}),i}return o(t?["left","right"]:["top","bottom"])}function fi(t,e,s,o){const n=[];let i,a,l,c,d,u;for(i=0,a=t.length,d=0;i<a;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,wB(l.horizontal,e));const{same:f,other:p}=yB(e,s,l,o);d|=f&&n.length,u=u||p,c.fullSize||n.push(l)}return d&&fi(n,e,s,o)||u}function Wa(t,e,s,o,n){t.top=s,t.left=e,t.right=e+o,t.bottom=s+n,t.width=o,t.height=n}function J0(t,e,s,o){const n=s.padding;let{x:i,y:a}=e;for(const l of t){const c=l.box,d=o[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const f=e.w*u,p=d.size||c.height;Gi(d.start)&&(a=d.start),c.fullSize?Wa(c,n.left,a,s.outerWidth-n.right-n.left,p):Wa(c,e.left+d.placed,a,f,p),d.start=a,d.placed+=f,a=c.bottom}else{const f=e.h*u,p=d.size||c.width;Gi(d.start)&&(i=d.start),c.fullSize?Wa(c,i,n.top,p,s.outerHeight-n.bottom-n.top):Wa(c,i,e.top+d.placed,p,f),d.start=i,d.placed+=f,i=c.right}}e.x=i,e.y=a}var as={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,o){if(!t)return;const n=cs(t.options.layout.padding),i=Math.max(e-n.width,0),a=Math.max(s-n.height,0),l=vB(t.boxes),c=l.vertical,d=l.horizontal;ft(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=c.reduce((v,x)=>x.box.options&&x.box.options.display===!1?v:v+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:s,padding:n,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),p=Object.assign({},n);qy(p,cs(o));const g=Object.assign({maxPadding:p,w:i,h:a,x:n.left,y:n.top},n),m=bB(c.concat(d),f);fi(l.fullSize,g,f,m),fi(c,g,f,m),fi(d,g,f,m)&&fi(c,g,f,m),xB(g),J0(l.leftAndTop,g,f,m),g.x+=g.w,g.y+=g.h,J0(l.rightAndBottom,g,f,m),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ft(l.chartArea,v=>{const x=v.box;Object.assign(x,t.chartArea),x.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Wy{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,o){}removeEventListener(e,s,o){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,o,n){return s=Math.max(0,s||e.width),o=o||e.height,{width:s,height:Math.max(0,n?Math.floor(s/n):o)}}isAttached(e){return!0}updateConfig(e){}}class _B extends Wy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xl="$chartjs",kB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},X0=t=>t===null||t==="";function CB(t,e){const s=t.style,o=t.getAttribute("height"),n=t.getAttribute("width");if(t[xl]={initial:{height:o,width:n,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",X0(n)){const i=O0(t,"width");i!==void 0&&(t.width=i)}if(X0(o))if(t.style.height==="")t.height=t.width/(e||2);else{const i=O0(t,"height");i!==void 0&&(t.height=i)}return t}const Gy=$L?{passive:!0}:!1;function $B(t,e,s){t&&t.addEventListener(e,s,Gy)}function EB(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Gy)}function SB(t,e){const s=kB[t.type]||t.type,{x:o,y:n}=Ln(t,e);return{type:s,chart:e,native:t,x:o!==void 0?o:null,y:n!==void 0?n:null}}function nc(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function AB(t,e,s){const o=t.canvas,n=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||nc(l.addedNodes,o),a=a&&!nc(l.removedNodes,o);a&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}function TB(t,e,s){const o=t.canvas,n=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||nc(l.removedNodes,o),a=a&&!nc(l.addedNodes,o);a&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}const Ji=new Map;let Q0=0;function Ky(){const t=window.devicePixelRatio;t!==Q0&&(Q0=t,Ji.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function PB(t,e){Ji.size||window.addEventListener("resize",Ky),Ji.set(t,e)}function MB(t){Ji.delete(t),Ji.size||window.removeEventListener("resize",Ky)}function RB(t,e,s){const o=t.canvas,n=o&&np(o);if(!n)return;const i=ky((l,c)=>{const d=n.clientWidth;s(l,c),d<n.clientWidth&&s()},window),a=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return a.observe(n),PB(t,i),a}function Id(t,e,s){s&&s.disconnect(),e==="resize"&&MB(t)}function DB(t,e,s){const o=t.canvas,n=ky(i=>{t.ctx!==null&&s(SB(i,t))},t);return $B(o,e,n),n}class OB extends Wy{acquireContext(e,s){const o=e&&e.getContext&&e.getContext("2d");return o&&o.canvas===e?(CB(e,s),o):null}releaseContext(e){const s=e.canvas;if(!s[xl])return!1;const o=s[xl].initial;["height","width"].forEach(i=>{const a=o[i];Ke(a)?s.removeAttribute(i):s.setAttribute(i,a)});const n=o.style||{};return Object.keys(n).forEach(i=>{s.style[i]=n[i]}),s.width=s.width,delete s[xl],!0}addEventListener(e,s,o){this.removeEventListener(e,s);const n=e.$proxies||(e.$proxies={}),a={attach:AB,detach:TB,resize:RB}[s]||DB;n[s]=a(e,s,o)}removeEventListener(e,s){const o=e.$proxies||(e.$proxies={}),n=o[s];if(!n)return;({attach:Id,detach:Id,resize:Id}[s]||EB)(e,s,n),o[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,o,n){return CL(e,s,o,n)}isAttached(e){const s=e&&np(e);return!!(s&&s.isConnected)}}function IB(t){return!op()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?_B:OB}var Za;let Jo=(Za=class{constructor(){_e(this,"x");_e(this,"y");_e(this,"active",!1);_e(this,"options");_e(this,"$animations")}tooltipPosition(e){const{x:s,y:o}=this.getProps(["x","y"],e);return{x:s,y:o}}hasValue(){return Dr(this.x)&&Dr(this.y)}getProps(e,s){const o=this.$animations;if(!s||!o)return this;const n={};return e.forEach(i=>{n[i]=o[i]&&o[i].active()?o[i]._to:this[i]}),n}},_e(Za,"defaults",{}),_e(Za,"defaultRoutes"),Za);function LB(t,e){const s=t.options.ticks,o=BB(t),n=Math.min(s.maxTicksLimit||o,o),i=s.major.enabled?jB(e):[],a=i.length,l=i[0],c=i[a-1],d=[];if(a>n)return FB(e,d,i,a/n),d;const u=NB(i,e,n);if(a>0){let f,p;const g=a>1?Math.round((c-l)/(a-1)):null;for(Ga(e,d,u,Ke(g)?0:l-g,l),f=0,p=a-1;f<p;f++)Ga(e,d,u,i[f],i[f+1]);return Ga(e,d,u,c,Ke(g)?e.length:c+g),d}return Ga(e,d,u),d}function BB(t){const e=t.options.offset,s=t._tickSize(),o=t._length/s+(e?0:1),n=t._maxLength/s;return Math.floor(Math.min(o,n))}function NB(t,e,s){const o=UB(t),n=e.length/s;if(!o)return Math.max(n,1);const i=SI(o);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>n)return c}return Math.max(n,1)}function jB(t){const e=[];let s,o;for(s=0,o=t.length;s<o;s++)t[s].major&&e.push(s);return e}function FB(t,e,s,o){let n=0,i=s[0],a;for(o=Math.ceil(o),a=0;a<t.length;a++)a===i&&(e.push(t[a]),n++,i=s[n*o])}function Ga(t,e,s,o,n){const i=Ve(o,0),a=Math.min(Ve(n,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),n&&(c=n-o,s=c/Math.floor(c/s)),u=i;u<0;)l++,u=Math.round(i+l*s);for(d=Math.max(i,0);d<a;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*s))}function UB(t){const e=t.length;let s,o;if(e<2)return!1;for(o=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==o)return!1;return o}const zB=t=>t==="left"?"right":t==="right"?"left":t,Z0=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,eg=(t,e)=>Math.min(e||t,t);function tg(t,e){const s=[],o=t.length/e,n=t.length;let i=0;for(;i<n;i+=o)s.push(t[Math.floor(i)]);return s}function VB(t,e,s){const o=t.ticks.length,n=Math.min(e,o-1),i=t._startPixel,a=t._endPixel,l=1e-6;let c=t.getPixelForTick(n),d;if(!(s&&(o===1?d=Math.max(c-i,a-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(n-1))/2,c+=n<e?d:-d,c<i-l||c>a+l)))return c}function HB(t,e){ft(t,s=>{const o=s.gc,n=o.length/2;let i;if(n>e){for(i=0;i<n;++i)delete s.data[o[i]];o.splice(0,n)}})}function ii(t){return t.drawTicks?t.tickLength:0}function sg(t,e){if(!t.display)return 0;const s=jt(t.font,e),o=cs(t.padding);return(wt(t.text)?t.text.length:1)*s.lineHeight+o.height}function qB(t,e){return kn(t,{scale:e,type:"scale"})}function WB(t,e,s){return kn(t,{tick:s,index:e,type:"tick"})}function GB(t,e,s){let o=Xf(t);return(s&&e!=="right"||!s&&e==="right")&&(o=zB(o)),o}function KB(t,e,s,o){const{top:n,left:i,bottom:a,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let f=0,p,g,m;const v=a-n,x=l-i;if(t.isHorizontal()){if(g=es(o,i,l),Xe(s)){const _=Object.keys(s)[0],k=s[_];m=u[_].getPixelForValue(k)+v-e}else s==="center"?m=(d.bottom+d.top)/2+v-e:m=Z0(t,s,e);p=l-i}else{if(Xe(s)){const _=Object.keys(s)[0],k=s[_];g=u[_].getPixelForValue(k)-x+e}else s==="center"?g=(d.left+d.right)/2-x+e:g=Z0(t,s,e);m=es(o,a,n),f=s==="left"?-Pt:Pt}return{titleX:g,titleY:m,maxWidth:p,rotation:f}}class rr extends Jo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:o,_suggestedMax:n}=this;return e=Ps(e,Number.POSITIVE_INFINITY),s=Ps(s,Number.NEGATIVE_INFINITY),o=Ps(o,Number.POSITIVE_INFINITY),n=Ps(n,Number.NEGATIVE_INFINITY),{min:Ps(e,o),max:Ps(s,n),minDefined:$t(e),maxDefined:$t(s)}}getMinMax(e){let{min:s,max:o,minDefined:n,maxDefined:i}=this.getUserBounds(),a;if(n&&i)return{min:s,max:o};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)a=l[c].controller.getMinMax(this,e),n||(s=Math.min(s,a.min)),i||(o=Math.max(o,a.max));return s=i&&s>o?o:s,o=n&&s>o?s:o,{min:Ps(s,Ps(o,s)),max:Ps(o,Ps(s,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mt(this.options.beforeUpdate,[this])}update(e,s,o){const{beginAtZero:n,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=o=Object.assign({left:0,right:0,top:0,bottom:0},o),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+o.left+o.right:this.height+o.top+o.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=sL(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?tg(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=LB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,o;this.isHorizontal()?(s=this.left,o=this.right):(s=this.top,o=this.bottom,e=!e),this._startPixel=s,this._endPixel=o,this._reversePixels=e,this._length=o-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mt(this.options.afterUpdate,[this])}beforeSetDimensions(){mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),mt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let o,n,i;for(o=0,n=e.length;o<n;o++)i=e[o],i.label=mt(s.callback,[i.value,o,e],this)}afterTickToLabelConversion(){mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,o=eg(this.ticks.length,e.ticks.maxTicksLimit),n=s.minRotation||0,i=s.maxRotation;let a=n,l,c,d;if(!this._isVisible()||!s.display||n>=i||o<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,g=Vt(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/o:g/(o-1),f+6>l&&(l=g/(o-(e.offset?.5:1)),c=this.maxHeight-ii(e.grid)-s.padding-sg(e.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),a=Yf(Math.min(Math.asin(Vt((u.highest.height+6)/l,-1,1)),Math.asin(Vt(c/d,-1,1))-Math.asin(Vt(p/d,-1,1)))),a=Math.max(n,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:o,title:n,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=sg(n,s.options.font);if(l?(e.width=this.maxWidth,e.height=ii(i)+c):(e.height=this.maxHeight,e.width=ii(i)+c),o.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:p}=this._getLabelSizes(),g=o.padding*2,m=Js(this.labelRotation),v=Math.cos(m),x=Math.sin(m);if(l){const _=o.mirror?0:x*f.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+_+g)}else{const _=o.mirror?0:v*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+_+g)}this._calculatePadding(d,u,x,v)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,o,n){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;c?d?(p=n*e.width,g=o*s.height):(p=o*e.height,g=n*s.width):i==="start"?g=s.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,g=s.width/2),this.paddingLeft=Math.max((p-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-f+a)*this.width/(this.width-f),0)}else{let u=s.height/2,f=e.height/2;i==="start"?(u=0,f=e.height):i==="end"&&(u=s.height,f=0),this.paddingTop=u+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,o;for(s=0,o=e.length;s<o;s++)Ke(e[s].label)&&(e.splice(s,1),o--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let o=this.ticks;s<o.length&&(o=tg(o,s)),this._labelSizes=e=this._computeLabelSizes(o,o.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,o){const{ctx:n,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(s/eg(s,o));let d=0,u=0,f,p,g,m,v,x,_,k,C,P,$;for(f=0;f<s;f+=c){if(m=e[f].label,v=this._resolveTickFontOptions(f),n.font=x=v.string,_=i[x]=i[x]||{data:{},gc:[]},k=v.lineHeight,C=P=0,!Ke(m)&&!wt(m))C=sc(n,_.data,_.gc,C,m),P=k;else if(wt(m))for(p=0,g=m.length;p<g;++p)$=m[p],!Ke($)&&!wt($)&&(C=sc(n,_.data,_.gc,C,$),P+=k);a.push(C),l.push(P),d=Math.max(C,d),u=Math.max(P,u)}HB(i,s);const R=a.indexOf(d),V=l.indexOf(u),B=E=>({width:a[E]||0,height:l[E]||0});return{first:B(0),last:B(s-1),widest:B(R),highest:B(V),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return MI(this._alignToPixels?Rn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const o=s[e];return o.$context||(o.$context=WB(this.getContext(),e,o))}return this.$context||(this.$context=qB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Js(this.labelRotation),o=Math.abs(Math.cos(s)),n=Math.abs(Math.sin(s)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*o>l*n?l/o:c/n:c*n<l*o?c/o:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,o=this.chart,n=this.options,{grid:i,position:a,border:l}=n,c=i.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=ii(i),g=[],m=l.setContext(this.getContext()),v=m.display?m.width:0,x=v/2,_=function(F){return Rn(o,F,v)};let k,C,P,$,R,V,B,E,S,O,T,L;if(a==="top")k=_(this.bottom),V=this.bottom-p,E=k-x,O=_(e.top)+x,L=e.bottom;else if(a==="bottom")k=_(this.top),O=e.top,L=_(e.bottom)-x,V=k+x,E=this.top+p;else if(a==="left")k=_(this.right),R=this.right-p,B=k-x,S=_(e.left)+x,T=e.right;else if(a==="right")k=_(this.left),S=e.left,T=_(e.right)-x,R=k+x,B=this.left+p;else if(s==="x"){if(a==="center")k=_((e.top+e.bottom)/2+.5);else if(Xe(a)){const F=Object.keys(a)[0],W=a[F];k=_(this.chart.scales[F].getPixelForValue(W))}O=e.top,L=e.bottom,V=k+x,E=V+p}else if(s==="y"){if(a==="center")k=_((e.left+e.right)/2);else if(Xe(a)){const F=Object.keys(a)[0],W=a[F];k=_(this.chart.scales[F].getPixelForValue(W))}R=k-x,B=R-p,S=e.left,T=e.right}const K=Ve(n.ticks.maxTicksLimit,f),z=Math.max(1,Math.ceil(f/K));for(C=0;C<f;C+=z){const F=this.getContext(C),W=i.setContext(F),Z=l.setContext(F),le=W.lineWidth,J=W.color,Pe=Z.dash||[],me=Z.dashOffset,Y=W.tickWidth,j=W.tickColor,Q=W.tickBorderDash||[],se=W.tickBorderDashOffset;P=VB(this,C,c),P!==void 0&&($=Rn(o,P,le),d?R=B=S=T=$:V=E=O=L=$,g.push({tx1:R,ty1:V,tx2:B,ty2:E,x1:S,y1:O,x2:T,y2:L,width:le,color:J,borderDash:Pe,borderDashOffset:me,tickWidth:Y,tickColor:j,tickBorderDash:Q,tickBorderDashOffset:se}))}return this._ticksLength=f,this._borderValue=k,g}_computeLabelItems(e){const s=this.axis,o=this.options,{position:n,ticks:i}=o,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=i,p=ii(o.grid),g=p+u,m=f?-u:g,v=-Js(this.labelRotation),x=[];let _,k,C,P,$,R,V,B,E,S,O,T,L="middle";if(n==="top")R=this.bottom-m,V=this._getXAxisLabelAlignment();else if(n==="bottom")R=this.top+m,V=this._getXAxisLabelAlignment();else if(n==="left"){const z=this._getYAxisLabelAlignment(p);V=z.textAlign,$=z.x}else if(n==="right"){const z=this._getYAxisLabelAlignment(p);V=z.textAlign,$=z.x}else if(s==="x"){if(n==="center")R=(e.top+e.bottom)/2+g;else if(Xe(n)){const z=Object.keys(n)[0],F=n[z];R=this.chart.scales[z].getPixelForValue(F)+g}V=this._getXAxisLabelAlignment()}else if(s==="y"){if(n==="center")$=(e.left+e.right)/2-g;else if(Xe(n)){const z=Object.keys(n)[0],F=n[z];$=this.chart.scales[z].getPixelForValue(F)}V=this._getYAxisLabelAlignment(p).textAlign}s==="y"&&(c==="start"?L="top":c==="end"&&(L="bottom"));const K=this._getLabelSizes();for(_=0,k=l.length;_<k;++_){C=l[_],P=C.label;const z=i.setContext(this.getContext(_));B=this.getPixelForTick(_)+i.labelOffset,E=this._resolveTickFontOptions(_),S=E.lineHeight,O=wt(P)?P.length:1;const F=O/2,W=z.color,Z=z.textStrokeColor,le=z.textStrokeWidth;let J=V;a?($=B,V==="inner"&&(_===k-1?J=this.options.reverse?"left":"right":_===0?J=this.options.reverse?"right":"left":J="center"),n==="top"?d==="near"||v!==0?T=-O*S+S/2:d==="center"?T=-K.highest.height/2-F*S+S:T=-K.highest.height+S/2:d==="near"||v!==0?T=S/2:d==="center"?T=K.highest.height/2-F*S:T=K.highest.height-O*S,f&&(T*=-1),v!==0&&!z.showLabelBackdrop&&($+=S/2*Math.sin(v))):(R=B,T=(1-O)*S/2);let Pe;if(z.showLabelBackdrop){const me=cs(z.backdropPadding),Y=K.heights[_],j=K.widths[_];let Q=T-me.top,se=0-me.left;switch(L){case"middle":Q-=Y/2;break;case"bottom":Q-=Y;break}switch(V){case"center":se-=j/2;break;case"right":se-=j;break;case"inner":_===k-1?se-=j:_>0&&(se-=j/2);break}Pe={left:se,top:Q,width:j+me.width,height:Y+me.height,color:z.backdropColor}}x.push({label:P,font:E,textOffset:T,options:{rotation:v,color:W,strokeColor:Z,strokeWidth:le,textAlign:J,textBaseline:L,translation:[$,R],backdrop:Pe}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Js(this.labelRotation))return e==="top"?"left":"right";let n="center";return s.align==="start"?n="left":s.align==="end"?n="right":s.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:o,mirror:n,padding:i}}=this.options,a=this._getLabelSizes(),l=e+i,c=a.widest.width;let d,u;return s==="left"?n?(u=this.right+i,o==="near"?d="left":o==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,o==="near"?d="right":o==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?n?(u=this.left+i,o==="near"?d="right":o==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,o==="near"?d="left":o==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:o,top:n,width:i,height:a}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(o,n,i,a),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?s.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const s=this.options.grid,o=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const l=(c,d,u)=>{!u.width||!u.color||(o.save(),o.lineWidth=u.width,o.strokeStyle=u.color,o.setLineDash(u.borderDash||[]),o.lineDashOffset=u.borderDashOffset,o.beginPath(),o.moveTo(c.x,c.y),o.lineTo(d.x,d.y),o.stroke(),o.restore())};if(s.display)for(i=0,a=n.length;i<a;++i){const c=n[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:o,grid:n}}=this,i=o.setContext(this.getContext()),a=o.display?i.width:0;if(!a)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,p;this.isHorizontal()?(d=Rn(e,this.left,a)-a/2,u=Rn(e,this.right,l)+l/2,f=p=c):(f=Rn(e,this.top,a)-a/2,p=Rn(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,f),s.lineTo(u,p),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const o=this.ctx,n=this._computeLabelArea();n&&Hc(o,n);const i=this.getLabelItems(e);for(const a of i){const l=a.options,c=a.font,d=a.label,u=a.textOffset;tr(o,d,0,u,c,l)}n&&qc(o)}drawTitle(){const{ctx:e,options:{position:s,title:o,reverse:n}}=this;if(!o.display)return;const i=jt(o.font),a=cs(o.padding),l=o.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||Xe(s)?(c+=a.bottom,wt(o.text)&&(c+=i.lineHeight*(o.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:f,rotation:p}=KB(this,c,s,l);tr(e,o.text,0,0,i,{color:o.color,maxWidth:f,rotation:p,textAlign:GB(l,s,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,o=Ve(e.grid&&e.grid.z,-1),n=Ve(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==rr.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:o,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),o=this.axis+"AxisID",n=[];let i,a;for(i=0,a=s.length;i<a;++i){const l=s[i];l[o]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return jt(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ka{constructor(e,s,o){this.type=e,this.scope=s,this.override=o,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let o;XB(s)&&(o=this.register(s));const n=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,YB(e,a,o),this.override&&_t.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const s=this.items,o=e.id,n=this.scope;o in s&&delete s[o],n&&o in _t[n]&&(delete _t[n][o],this.override&&delete er[o])}}function YB(t,e,s){const o=Wi(Object.create(null),[s?_t.get(s):{},_t.get(e),t.defaults]);_t.set(e,o),t.defaultRoutes&&JB(e,t.defaultRoutes),t.descriptors&&_t.describe(e,t.descriptors)}function JB(t,e){Object.keys(e).forEach(s=>{const o=s.split("."),n=o.pop(),i=[t].concat(o).join("."),a=e[s].split("."),l=a.pop(),c=a.join(".");_t.route(i,n,c,l)})}function XB(t){return"id"in t&&"defaults"in t}class QB{constructor(){this.controllers=new Ka(Qs,"datasets",!0),this.elements=new Ka(Jo,"elements"),this.plugins=new Ka(Object,"plugins"),this.scales=new Ka(rr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,o){[...s].forEach(n=>{const i=o||this._getRegistryForType(n);o||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):ft(n,a=>{const l=o||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,s,o){const n=Kf(e);mt(o["before"+n],[],o),s[e](o),mt(o["after"+n],[],o)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const o=this._typedRegistries[s];if(o.isForType(e))return o}return this.plugins}_get(e,s,o){const n=s.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+o+".");return n}}var uo=new QB;class ZB{constructor(){this._init=[]}notify(e,s,o,n){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=n?this._descriptors(e).filter(n):this._descriptors(e),a=this._notify(i,e,s,o);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,s,o,n){n=n||{};for(const i of e){const a=i.plugin,l=a[o],c=[s,n,i.options];if(mt(l,c,a)===!1&&n.cancelable)return!1}return!0}invalidate(){Ke(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const o=e&&e.config,n=Ve(o.options&&o.options.plugins,{}),i=eN(o);return n===!1&&!s?[]:sN(e,i,n,s)}_notifyStateChanges(e){const s=this._oldCache||[],o=this._cache,n=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(n(s,o),e,"stop"),this._notify(n(o,s),e,"start")}}function eN(t){const e={},s=[],o=Object.keys(uo.plugins.items);for(let i=0;i<o.length;i++)s.push(uo.getPlugin(o[i]));const n=t.plugins||[];for(let i=0;i<n.length;i++){const a=n[i];s.indexOf(a)===-1&&(s.push(a),e[a.id]=!0)}return{plugins:s,localIds:e}}function tN(t,e){return!e&&t===!1?null:t===!0?{}:t}function sN(t,{plugins:e,localIds:s},o,n){const i=[],a=t.getContext();for(const l of e){const c=l.id,d=tN(o[c],n);d!==null&&i.push({plugin:l,options:oN(t.config,{plugin:l,local:s[c]},d,a)})}return i}function oN(t,{plugin:e,local:s},o,n){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(o,i);return s&&e.defaults&&a.push(e.defaults),t.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Su(t,e){const s=_t.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function nN(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function rN(t,e){return t===e?"_index_":"_value_"}function og(t){if(t==="x"||t==="y"||t==="r")return t}function iN(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Au(t,...e){if(og(t))return t;for(const s of e){const o=s.axis||iN(s.position)||t.length>1&&og(t[0].toLowerCase());if(o)return o}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ng(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function aN(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(o=>o.xAxisID===t||o.yAxisID===t);if(s.length)return ng(t,"x",s[0])||ng(t,"y",s[0])}return{}}function lN(t,e){const s=er[t.type]||{scales:{}},o=e.scales||{},n=Su(t.type,e),i=Object.create(null);return Object.keys(o).forEach(a=>{const l=o[a];if(!Xe(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Au(a,l,aN(a,t),_t.scales[l.type]),d=rN(c,n),u=s.scales||{};i[a]=Ai(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||Su(l,e),u=(er[l]||{}).scales||{};Object.keys(u).forEach(f=>{const p=nN(f,c),g=a[p+"AxisID"]||p;i[g]=i[g]||Object.create(null),Ai(i[g],[{axis:p},o[g],u[f]])})}),Object.keys(i).forEach(a=>{const l=i[a];Ai(l,[_t.scales[l.type],_t.scale])}),i}function Yy(t){const e=t.options||(t.options={});e.plugins=Ve(e.plugins,{}),e.scales=lN(t,e)}function Jy(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function cN(t){return t=t||{},t.data=Jy(t.data),Yy(t),t}const rg=new Map,Xy=new Set;function Ya(t,e){let s=rg.get(t);return s||(s=e(),rg.set(t,s),Xy.add(s)),s}const ai=(t,e,s)=>{const o=xn(e,s);o!==void 0&&t.add(o)};class dN{constructor(e){this._config=cN(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Jy(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yy(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ya(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Ya(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Ya(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,o=this.type;return Ya(`${o}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const o=this._scopeCache;let n=o.get(e);return(!n||s)&&(n=new Map,o.set(e,n)),n}getOptionScopes(e,s,o){const{options:n,type:i}=this,a=this._cachedScopes(e,o),l=a.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(f=>ai(c,e,f))),u.forEach(f=>ai(c,n,f)),u.forEach(f=>ai(c,er[i]||{},f)),u.forEach(f=>ai(c,_t,f)),u.forEach(f=>ai(c,Cu,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Xy.has(s)&&a.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,er[s]||{},_t.datasets[s]||{},{type:s},_t,Cu]}resolveNamedOptions(e,s,o,n=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=ig(this._resolverCache,e,n);let c=a;if(fN(a,s)){i.$shared=!1,o=wn(o)?o():o;const d=this.createResolver(e,o,l);c=Or(a,o,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,o=[""],n){const{resolver:i}=ig(this._resolverCache,e,o);return Xe(s)?Or(i,s,void 0,n):i}}function ig(t,e,s){let o=t.get(e);o||(o=new Map,t.set(e,o));const n=s.join();let i=o.get(n);return i||(i={resolver:ep(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},o.set(n,i)),i}const uN=t=>Xe(t)&&Object.getOwnPropertyNames(t).some(e=>wn(t[e]));function fN(t,e){const{isScriptable:s,isIndexable:o}=Ty(t);for(const n of e){const i=s(n),a=o(n),l=(a||i)&&t[n];if(i&&(wn(l)||uN(l))||a&&wt(l))return!0}return!1}var pN="4.5.0";const hN=["top","bottom","left","right","chartArea"];function ag(t,e){return t==="top"||t==="bottom"||hN.indexOf(t)===-1&&e==="x"}function lg(t,e){return function(s,o){return s[t]===o[t]?s[e]-o[e]:s[t]-o[t]}}function cg(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),mt(s&&s.onComplete,[t],e)}function gN(t){const e=t.chart,s=e.options.animation;mt(s&&s.onProgress,[t],e)}function Qy(t){return op()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const wl={},dg=t=>{const e=Qy(t);return Object.values(wl).filter(s=>s.canvas===e).pop()};function mN(t,e,s){const o=Object.keys(t);for(const n of o){const i=+n;if(i>=e){const a=t[n];delete t[n],(s>0||i>e)&&(t[i+s]=a)}}}function bN(t,e,s,o){return!s||t.type==="mouseout"?null:o?e:t}class Us{static register(...e){uo.add(...e),ug()}static unregister(...e){uo.remove(...e),ug()}constructor(e,s){const o=this.config=new dN(s),n=Qy(e),i=dg(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=o.createResolver(o.chartOptionScopes(),this.getContext());this.platform=new(o.platform||IB(n)),this.platform.updateConfig(o);const l=this.platform.acquireContext(n,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=vI(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ZB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=II(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],wl[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ro.listen(this,"complete",cg),Ro.listen(this,"progress",gN),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:o,height:n,_aspectRatio:i}=this;return Ke(e)?s&&i?i:n?o/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return uo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():D0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return P0(this.canvas,this.ctx),this}stop(){return Ro.stop(this),this}resize(e,s){Ro.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const o=this.options,n=this.canvas,i=o.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,e,s,i),l=o.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,D0(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),mt(o.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ft(s,(o,n)=>{o.id=n})}buildOrUpdateScales(){const e=this.options,s=e.scales,o=this.scales,n=Object.keys(o).reduce((a,l)=>(a[l]=!1,a),{});let i=[];s&&(i=i.concat(Object.keys(s).map(a=>{const l=s[a],c=Au(a,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),ft(i,a=>{const l=a.options,c=l.id,d=Au(c,l),u=Ve(l.type,a.dtype);(l.position===void 0||ag(l.position,d)!==ag(a.dposition))&&(l.position=a.dposition),n[c]=!0;let f=null;if(c in o&&o[c].type===u)f=o[c];else{const p=uo.getScale(u);f=new p({id:c,type:u,ctx:this.ctx,chart:this}),o[f.id]=f}f.init(l,e)}),ft(n,(a,l)=>{a||delete o[l]}),ft(o,a=>{as.configure(this,a,a.options),as.addBox(this,a)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,o=e.length;if(e.sort((n,i)=>n.index-i.index),o>s){for(let n=s;n<o;++n)this._destroyDatasetMeta(n);e.splice(s,o-s)}this._sortedMetasets=e.slice(0).sort(lg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((o,n)=>{s.filter(i=>i===o._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let o,n;for(this._removeUnreferencedMetasets(),o=0,n=s.length;o<n;o++){const i=s[o];let a=this.getDatasetMeta(o);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(o),a=this.getDatasetMeta(o)),a.type=l,a.indexAxis=i.indexAxis||Su(l,this.options),a.order=i.order||0,a.index=o,a.label=""+i.label,a.visible=this.isDatasetVisible(o),a.controller)a.controller.updateIndex(o),a.controller.linkScales();else{const c=uo.getController(l),{datasetElementType:d,dataElementType:u}=_t.datasets[l];Object.assign(c,{dataElementType:uo.getElement(u),datasetElementType:d&&uo.getElement(d)}),a.controller=new c(this,o),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ft(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const o=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),p=!n&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=o.layout.autoPadding?a:0,this._updateLayout(a),n||ft(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(lg("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ft(this.scales,e=>{as.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),o=new Set(e.events);(!w0(s,o)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:o,start:n,count:i}of s){const a=o==="_removeElements"?-i:i;mN(e,n,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,o=i=>new Set(e.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),n=o(0);for(let i=1;i<s;i++)if(!w0(n,o(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;as.update(this,this.width,this.height,e);const s=this.chartArea,o=s.width<=0||s.height<=0;this._layers=[],ft(this.boxes,n=>{o&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,o=this.data.datasets.length;s<o;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,o=this.data.datasets.length;s<o;++s)this._updateDataset(s,wn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const o=this.getDatasetMeta(e),n={meta:o,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(o.controller._update(s),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ro.has(this)?this.attached&&!Ro.running(this)&&Ro.start(this):(this.draw(),cg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:o,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(o,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,o=[];let n,i;for(n=0,i=s.length;n<i;++n){const a=s[n];(!e||a.visible)&&o.push(a)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,o={meta:e,index:e.index,cancelable:!0},n=Fy(this,e);this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&Hc(s,n),e.controller.draw(),n&&qc(s),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return zo(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,o,n){const i=hB.modes[s];return typeof i=="function"?i(this,e,o,n):[]}getDatasetMeta(e){const s=this.data.datasets[e],o=this._metasets;let n=o.filter(i=>i&&i._dataset===s).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},o.push(n)),n}getContext(){return this.$context||(this.$context=kn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const o=this.getDatasetMeta(e);return typeof o.hidden=="boolean"?!o.hidden:!s.hidden}setDatasetVisibility(e,s){const o=this.getDatasetMeta(e);o.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,o){const n=o?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,n);Gi(s)?(i.data[s].hidden=!o,this.update()):(this.setDatasetVisibility(e,o),a.update(i,{visible:o}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Ro.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),P0(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete wl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,o=(i,a)=>{s.addEventListener(this,i,a),e[i]=a},n=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};ft(this.options.events,i=>o(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,o=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},n=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const l=()=>{n("attach",l),this.attached=!0,this.resize(),o("resize",i),o("detach",a)};a=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),o("attach",l)},s.isAttached(this.canvas)?l():a()}unbindEvents(){ft(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ft(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,o){const n=o?"set":"remove";let i,a,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],o=e.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!Zl(o,s)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,s))}notifyPlugins(e,s,o){return this._plugins.notify(this,e,s,o)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,o){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),a=i(s,e),l=o?e:i(e,s);a.length&&this.updateHoverStyle(a,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,s){const o={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},n=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",o,n)===!1)return;const i=this._handleEvent(e,s,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,n),(i||o.changed)&&this.render(),this}_handleEvent(e,s,o){const{_active:n=[],options:i}=this,a=s,l=this._getActiveElements(e,n,o,a),c=CI(e),d=bN(e,this._lastEvent,o,c);o&&(this._lastEvent=null,mt(i.onHover,[e,l,this],this),c&&mt(i.onClick,[e,l,this],this));const u=!Zl(l,n);return(u||s)&&(this._active=l,this._updateHoverStyles(l,n,s)),this._lastEvent=d,u}_getActiveElements(e,s,o,n){if(e.type==="mouseout")return[];if(!o)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}}_e(Us,"defaults",_t),_e(Us,"instances",wl),_e(Us,"overrides",er),_e(Us,"registry",uo),_e(Us,"version",pN),_e(Us,"getChart",dg);function ug(){return ft(Us.instances,t=>t._plugins.invalidate())}function vN(t,e,s){const{startAngle:o,x:n,y:i,outerRadius:a,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/a,ss(o-s));if(t.beginPath(),t.arc(n,i,a-d/2,o+f/2,s-f/2),l>0){const p=Math.min(d/l,ss(o-s));t.arc(n,i,l+d/2,s-p/2,o+p/2,!0)}else{const p=Math.min(d/2,a*ss(o-s));if(u==="round")t.arc(n,i,p,s-st/2,o+st/2,!0);else if(u==="bevel"){const g=2*p*p,m=-g*Math.cos(s+st/2)+n,v=-g*Math.sin(s+st/2)+i,x=g*Math.cos(o+st/2)+n,_=g*Math.sin(o+st/2)+i;t.lineTo(m,v),t.lineTo(x,_)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function yN(t,e,s){const{startAngle:o,pixelMargin:n,x:i,y:a,outerRadius:l,innerRadius:c}=e;let d=n/l;t.beginPath(),t.arc(i,a,l,o-d,s+d),c>n?(d=n/c,t.arc(i,a,c,s+d,o-d,!0)):t.arc(i,a,n,s+Pt,o-Pt),t.closePath(),t.clip()}function xN(t){return Zf(t,["outerStart","outerEnd","innerStart","innerEnd"])}function wN(t,e,s,o){const n=xN(t.options.borderRadius),i=(s-e)/2,a=Math.min(i,o*e/2),l=c=>{const d=(s-Math.min(i,c))*o/2;return Vt(c,0,Math.min(i,d))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:Vt(n.innerStart,0,a),innerEnd:Vt(n.innerEnd,0,a)}}function pr(t,e,s,o){return{x:s+t*Math.cos(e),y:o+t*Math.sin(e)}}function rc(t,e,s,o,n,i){const{x:a,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,f=Math.max(e.outerRadius+o+s-d,0),p=u>0?u+o+s+d:0;let g=0;const m=n-c;if(o){const z=u>0?u-o:0,F=f>0?f-o:0,W=(z+F)/2,Z=W!==0?m*W/(W+o):m;g=(m-Z)/2}const v=Math.max(.001,m*f-s/st)/f,x=(m-v)/2,_=c+x+g,k=n-x-g,{outerStart:C,outerEnd:P,innerStart:$,innerEnd:R}=wN(e,p,f,k-_),V=f-C,B=f-P,E=_+C/V,S=k-P/B,O=p+$,T=p+R,L=_+$/O,K=k-R/T;if(t.beginPath(),i){const z=(E+S)/2;if(t.arc(a,l,f,E,z),t.arc(a,l,f,z,S),P>0){const le=pr(B,S,a,l);t.arc(le.x,le.y,P,S,k+Pt)}const F=pr(T,k,a,l);if(t.lineTo(F.x,F.y),R>0){const le=pr(T,K,a,l);t.arc(le.x,le.y,R,k+Pt,K+Math.PI)}const W=(k-R/p+(_+$/p))/2;if(t.arc(a,l,p,k-R/p,W,!0),t.arc(a,l,p,W,_+$/p,!0),$>0){const le=pr(O,L,a,l);t.arc(le.x,le.y,$,L+Math.PI,_-Pt)}const Z=pr(V,_,a,l);if(t.lineTo(Z.x,Z.y),C>0){const le=pr(V,E,a,l);t.arc(le.x,le.y,C,_-Pt,E)}}else{t.moveTo(a,l);const z=Math.cos(E)*f+a,F=Math.sin(E)*f+l;t.lineTo(z,F);const W=Math.cos(S)*f+a,Z=Math.sin(S)*f+l;t.lineTo(W,Z)}t.closePath()}function _N(t,e,s,o,n){const{fullCircles:i,startAngle:a,circumference:l}=e;let c=e.endAngle;if(i){rc(t,e,s,o,c,n);for(let d=0;d<i;++d)t.fill();isNaN(l)||(c=a+(l%vt||vt))}return rc(t,e,s,o,c,n),t.fill(),c}function kN(t,e,s,o,n){const{fullCircles:i,startAngle:a,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:g}=c,m=c.borderAlign==="inner";if(!d)return;t.setLineDash(f||[]),t.lineDashOffset=p,m?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){rc(t,e,s,o,v,n);for(let x=0;x<i;++x)t.stroke();isNaN(l)||(v=a+(l%vt||vt))}m&&yN(t,e,v),c.selfJoin&&v-a>=st&&g===0&&u!=="miter"&&vN(t,e,v),i||(rc(t,e,s,o,v,n),t.stroke())}class pi extends Jo{constructor(s){super();_e(this,"circumference");_e(this,"endAngle");_e(this,"fullCircles");_e(this,"innerRadius");_e(this,"outerRadius");_e(this,"pixelMargin");_e(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,o,n){const i=this.getProps(["x","y"],n),{angle:a,distance:l}=yy(i,{x:s,y:o}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),g=(this.options.spacing+this.options.borderWidth)/2,m=Ve(p,d-c),v=Ki(a,c,d)&&c!==d,x=m>=vt||v,_=Fo(l,u+g,f+g);return x&&_}getCenterPoint(s){const{x:o,y:n,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:d,spacing:u}=this.options,f=(i+a)/2,p=(l+c+u+d)/2;return{x:o+Math.cos(f)*p,y:n+Math.sin(f)*p}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:o,circumference:n}=this,i=(o.offset||0)/4,a=(o.spacing||0)/2,l=o.circular;if(this.pixelMargin=o.borderAlign==="inner"?.33:0,this.fullCircles=n>vt?Math.floor(n/vt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const c=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(st,n||0)),u=i*d;s.fillStyle=o.backgroundColor,s.strokeStyle=o.borderColor,_N(s,this,u,a,l),kN(s,this,u,a,l),s.restore()}}_e(pi,"id","arc"),_e(pi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),_e(pi,"defaultRoutes",{backgroundColor:"backgroundColor"}),_e(pi,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function Zy(t,e,s=e){t.lineCap=Ve(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Ve(s.borderDash,e.borderDash)),t.lineDashOffset=Ve(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Ve(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ve(s.borderWidth,e.borderWidth),t.strokeStyle=Ve(s.borderColor,e.borderColor)}function CN(t,e,s){t.lineTo(s.x,s.y)}function $N(t){return t.stepped?GI:t.tension||t.cubicInterpolationMode==="monotone"?KI:CN}function ex(t,e,s={}){const o=t.length,{start:n=0,end:i=o-1}=s,{start:a,end:l}=e,c=Math.max(n,a),d=Math.min(i,l),u=n<a&&i<a||n>l&&i>l;return{count:o,start:c,loop:e.loop,ilen:d<c&&!u?o+d-c:d-c}}function EN(t,e,s,o){const{points:n,options:i}=e,{count:a,start:l,loop:c,ilen:d}=ex(n,s,o),u=$N(i);let{move:f=!0,reverse:p}=o||{},g,m,v;for(g=0;g<=d;++g)m=n[(l+(p?d-g:g))%a],!m.skip&&(f?(t.moveTo(m.x,m.y),f=!1):u(t,v,m,p,i.stepped),v=m);return c&&(m=n[(l+(p?d:0))%a],u(t,v,m,p,i.stepped)),!!c}function SN(t,e,s,o){const n=e.points,{count:i,start:a,ilen:l}=ex(n,s,o),{move:c=!0,reverse:d}=o||{};let u=0,f=0,p,g,m,v,x,_;const k=P=>(a+(d?l-P:P))%i,C=()=>{v!==x&&(t.lineTo(u,x),t.lineTo(u,v),t.lineTo(u,_))};for(c&&(g=n[k(0)],t.moveTo(g.x,g.y)),p=0;p<=l;++p){if(g=n[k(p)],g.skip)continue;const P=g.x,$=g.y,R=P|0;R===m?($<v?v=$:$>x&&(x=$),u=(f*u+P)/++f):(C(),t.lineTo(P,$),m=R,f=0,v=x=$),_=$}C()}function Tu(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?SN:EN}function AN(t){return t.stepped?EL:t.tension||t.cubicInterpolationMode==="monotone"?SL:Bn}function TN(t,e,s,o){let n=e._path;n||(n=e._path=new Path2D,e.path(n,s,o)&&n.closePath()),Zy(t,e.options),t.stroke(n)}function PN(t,e,s,o){const{segments:n,options:i}=e,a=Tu(e);for(const l of n)Zy(t,i,l.style),t.beginPath(),a(t,e,l,{start:s,end:s+o-1})&&t.closePath(),t.stroke()}const MN=typeof Path2D=="function";function RN(t,e,s,o){MN&&!e.options.segment?TN(t,e,s,o):PN(t,e,s,o)}class un extends Jo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const o=this.options;if((o.tension||o.cubicInterpolationMode==="monotone")&&!o.stepped&&!this._pointsUpdated){const n=o.spanGaps?this._loop:this._fullLoop;vL(this._points,o,e,n,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=DL(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,o=e.length;return o&&s[e[o-1].end]}interpolate(e,s){const o=this.options,n=e[s],i=this.points,a=jy(this,{property:s,start:n,end:n});if(!a.length)return;const l=[],c=AN(o);let d,u;for(d=0,u=a.length;d<u;++d){const{start:f,end:p}=a[d],g=i[f],m=i[p];if(g===m){l.push(g);continue}const v=Math.abs((n-g[s])/(m[s]-g[s])),x=c(g,m,v,o.stepped);x[s]=e[s],l.push(x)}return l.length===1?l[0]:l}pathSegment(e,s,o){return Tu(this)(e,this,s,o)}path(e,s,o){const n=this.segments,i=Tu(this);let a=this._loop;s=s||0,o=o||this.points.length-s;for(const l of n)a&=i(e,this,l,{start:s,end:s+o-1});return!!a}draw(e,s,o,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),RN(e,this,o,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}_e(un,"id","line"),_e(un,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),_e(un,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),_e(un,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function fg(t,e,s,o){const n=t.options,{[s]:i}=t.getProps([s],o);return Math.abs(e-i)<n.radius+n.hitRadius}class _l extends Jo{constructor(s){super();_e(this,"parsed");_e(this,"skip");_e(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,o,n){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],n);return Math.pow(s-a,2)+Math.pow(o-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,o){return fg(this,s,"x",o)}inYRange(s,o){return fg(this,s,"y",o)}getCenterPoint(s){const{x:o,y:n}=this.getProps(["x","y"],s);return{x:o,y:n}}size(s){s=s||this.options||{};let o=s.radius||0;o=Math.max(o,o&&s.hoverRadius||0);const n=o&&s.borderWidth||0;return(o+n)*2}draw(s,o){const n=this.options;this.skip||n.radius<.1||!zo(this,o,this.size(n)/2)||(s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.fillStyle=n.backgroundColor,$u(s,n,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}_e(_l,"id","point"),_e(_l,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),_e(_l,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function tx(t,e){const{x:s,y:o,base:n,width:i,height:a}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,f;return t.horizontal?(f=a/2,l=Math.min(s,n),c=Math.max(s,n),d=o-f,u=o+f):(f=i/2,l=s-f,c=s+f,d=Math.min(o,n),u=Math.max(o,n)),{left:l,top:d,right:c,bottom:u}}function fn(t,e,s,o){return t?0:Vt(e,s,o)}function DN(t,e,s){const o=t.options.borderWidth,n=t.borderSkipped,i=Ay(o);return{t:fn(n.top,i.top,0,s),r:fn(n.right,i.right,0,e),b:fn(n.bottom,i.bottom,0,s),l:fn(n.left,i.left,0,e)}}function ON(t,e,s){const{enableBorderRadius:o}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,i=Gn(n),a=Math.min(e,s),l=t.borderSkipped,c=o||Xe(n);return{topLeft:fn(!c||l.top||l.left,i.topLeft,0,a),topRight:fn(!c||l.top||l.right,i.topRight,0,a),bottomLeft:fn(!c||l.bottom||l.left,i.bottomLeft,0,a),bottomRight:fn(!c||l.bottom||l.right,i.bottomRight,0,a)}}function IN(t){const e=tx(t),s=e.right-e.left,o=e.bottom-e.top,n=DN(t,s/2,o/2),i=ON(t,s/2,o/2);return{outer:{x:e.left,y:e.top,w:s,h:o,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:s-n.l-n.r,h:o-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Ld(t,e,s,o){const n=e===null,i=s===null,l=t&&!(n&&i)&&tx(t,o);return l&&(n||Fo(e,l.left,l.right))&&(i||Fo(s,l.top,l.bottom))}function LN(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function BN(t,e){t.rect(e.x,e.y,e.w,e.h)}function Bd(t,e,s={}){const o=t.x!==s.x?-e:0,n=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-o,a=(t.y+t.h!==s.y+s.h?e:0)-n;return{x:t.x+o,y:t.y+n,w:t.w+i,h:t.h+a,radius:t.radius}}class kl extends Jo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:o,backgroundColor:n}}=this,{inner:i,outer:a}=IN(this),l=LN(a.radius)?Yi:BN;e.save(),(a.w!==i.w||a.h!==i.h)&&(e.beginPath(),l(e,Bd(a,s,i)),e.clip(),l(e,Bd(i,-s,a)),e.fillStyle=o,e.fill("evenodd")),e.beginPath(),l(e,Bd(i,s)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,s,o){return Ld(this,e,s,o)}inXRange(e,s){return Ld(this,e,null,s)}inYRange(e,s){return Ld(this,null,e,s)}getCenterPoint(e){const{x:s,y:o,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+n)/2:s,y:i?o:(o+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}_e(kl,"id","bar"),_e(kl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),_e(kl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var NN=Object.freeze({__proto__:null,ArcElement:pi,BarElement:kl,LineElement:un,PointElement:_l});const Pu=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],pg=Pu.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function sx(t){return Pu[t%Pu.length]}function ox(t){return pg[t%pg.length]}function jN(t,e){return t.borderColor=sx(e),t.backgroundColor=ox(e),++e}function FN(t,e){return t.backgroundColor=t.data.map(()=>sx(e++)),e}function UN(t,e){return t.backgroundColor=t.data.map(()=>ox(e++)),e}function zN(t){let e=0;return(s,o)=>{const n=t.getDatasetMeta(o).controller;n instanceof Fn?e=FN(s,e):n instanceof Ri?e=UN(s,e):n&&(e=jN(s,e))}}function hg(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function VN(t){return t&&(t.borderColor||t.backgroundColor)}function HN(){return _t.borderColor!=="rgba(0,0,0,0.1)"||_t.backgroundColor!=="rgba(0,0,0,0.1)"}var qN={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:o},options:n}=t.config,{elements:i}=n,a=hg(o)||VN(n)||i&&hg(i)||HN();if(!s.forceOverride&&a)return;const l=zN(t);o.forEach(l)}};function WN(t,e,s,o,n){const i=n.samples||o;if(i>=s)return t.slice(e,e+s);const a=[],l=(s-2)/(i-2);let c=0;const d=e+s-1;let u=e,f,p,g,m,v;for(a[c++]=t[u],f=0;f<i-2;f++){let x=0,_=0,k;const C=Math.floor((f+1)*l)+1+e,P=Math.min(Math.floor((f+2)*l)+1,s)+e,$=P-C;for(k=C;k<P;k++)x+=t[k].x,_+=t[k].y;x/=$,_/=$;const R=Math.floor(f*l)+1+e,V=Math.min(Math.floor((f+1)*l)+1,s)+e,{x:B,y:E}=t[u];for(g=m=-1,k=R;k<V;k++)m=.5*Math.abs((B-x)*(t[k].y-E)-(B-t[k].x)*(_-E)),m>g&&(g=m,p=t[k],v=k);a[c++]=p,u=v}return a[c++]=t[d],a}function GN(t,e,s,o){let n=0,i=0,a,l,c,d,u,f,p,g,m,v;const x=[],_=e+s-1,k=t[e].x,P=t[_].x-k;for(a=e;a<e+s;++a){l=t[a],c=(l.x-k)/P*o,d=l.y;const $=c|0;if($===u)d<m?(m=d,f=a):d>v&&(v=d,p=a),n=(i*n+l.x)/++i;else{const R=a-1;if(!Ke(f)&&!Ke(p)){const V=Math.min(f,p),B=Math.max(f,p);V!==g&&V!==R&&x.push({...t[V],x:n}),B!==g&&B!==R&&x.push({...t[B],x:n})}a>0&&R!==g&&x.push(t[R]),x.push(l),u=$,i=0,m=v=d,f=p=g=a}}return x}function nx(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function gg(t){t.data.datasets.forEach(e=>{nx(e)})}function KN(t,e){const s=e.length;let o=0,n;const{iScale:i}=t,{min:a,max:l,minDefined:c,maxDefined:d}=i.getUserBounds();return c&&(o=Vt(Uo(e,i.axis,a).lo,0,s-1)),d?n=Vt(Uo(e,i.axis,l).hi+1,o,s)-o:n=s-o,{start:o,count:n}}var YN={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){gg(t);return}const o=t.width;t.data.datasets.forEach((n,i)=>{const{_data:a,indexAxis:l}=n,c=t.getDatasetMeta(i),d=a||n.data;if(ui([l,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=t.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:f,count:p}=KN(c,d);const g=s.threshold||4*o;if(p<=g){nx(n);return}Ke(a)&&(n._data=d,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let m;switch(s.algorithm){case"lttb":m=WN(d,f,p,o,s);break;case"min-max":m=GN(d,f,p,o);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}n._decimated=m})},destroy(t){gg(t)}};function JN(t,e,s){const o=t.segments,n=t.points,i=e.points,a=[];for(const l of o){let{start:c,end:d}=l;d=Kc(c,d,n);const u=Mu(s,n[c],n[d],l.loop);if(!e.segments){a.push({source:l,target:u,start:n[c],end:n[d]});continue}const f=jy(e,u);for(const p of f){const g=Mu(s,i[p.start],i[p.end],p.loop),m=Ny(l,n,g);for(const v of m)a.push({source:v,target:p,start:{[s]:mg(u,g,"start",Math.max)},end:{[s]:mg(u,g,"end",Math.min)}})}}return a}function Mu(t,e,s,o){if(o)return;let n=e[t],i=s[t];return t==="angle"&&(n=ss(n),i=ss(i)),{property:t,start:n,end:i}}function XN(t,e){const{x:s=null,y:o=null}=t||{},n=e.points,i=[];return e.segments.forEach(({start:a,end:l})=>{l=Kc(a,l,n);const c=n[a],d=n[l];o!==null?(i.push({x:c.x,y:o}),i.push({x:d.x,y:o})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function Kc(t,e,s){for(;e>t;e--){const o=s[e];if(!isNaN(o.x)&&!isNaN(o.y))break}return e}function mg(t,e,s,o){return t&&e?o(t[s],e[s]):t?t[s]:e?e[s]:0}function rx(t,e){let s=[],o=!1;return wt(t)?(o=!0,s=t):s=XN(t,e),s.length?new un({points:s,options:{tension:0},_loop:o,_fullLoop:o}):null}function bg(t){return t&&t.fill!==!1}function QN(t,e,s){let n=t[e].fill;const i=[e];let a;if(!s)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!$t(n))return n;if(a=t[n],!a)return!1;if(a.visible)return n;i.push(n),n=a.fill}return!1}function ZN(t,e,s){const o=oj(t);if(Xe(o))return isNaN(o.value)?!1:o;let n=parseFloat(o);return $t(n)&&Math.floor(n)===n?ej(o[0],e,n,s):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}function ej(t,e,s,o){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=o?!1:s}function tj(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:Xe(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function sj(t,e,s){let o;return t==="start"?o=s:t==="end"?o=e.options.reverse?e.min:e.max:Xe(t)?o=t.value:o=e.getBaseValue(),o}function oj(t){const e=t.options,s=e.fill;let o=Ve(s&&s.target,s);return o===void 0&&(o=!!e.backgroundColor),o===!1||o===null?!1:o===!0?"origin":o}function nj(t){const{scale:e,index:s,line:o}=t,n=[],i=o.segments,a=o.points,l=rj(e,s);l.push(rx({x:null,y:e.bottom},o));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)ij(n,a[u],l)}return new un({points:n,options:{}})}function rj(t,e){const s=[],o=t.getMatchingVisibleMetas("line");for(let n=0;n<o.length;n++){const i=o[n];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function ij(t,e,s){const o=[];for(let n=0;n<s.length;n++){const i=s[n],{first:a,last:l,point:c}=aj(i,e,"x");if(!(!c||a&&l)){if(a)o.unshift(c);else if(t.push(c),!l)break}}t.push(...o)}function aj(t,e,s){const o=t.interpolate(e,s);if(!o)return{};const n=o[s],i=t.segments,a=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],f=a[u.start][s],p=a[u.end][s];if(Fo(n,f,p)){l=n===f,c=n===p;break}}return{first:l,last:c,point:o}}class ix{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,o){const{x:n,y:i,radius:a}=this;return s=s||{start:0,end:vt},e.arc(n,i,a,s.end,s.start,!0),!o.bounds}interpolate(e){const{x:s,y:o,radius:n}=this,i=e.angle;return{x:s+Math.cos(i)*n,y:o+Math.sin(i)*n,angle:i}}}function lj(t){const{chart:e,fill:s,line:o}=t;if($t(s))return cj(e,s);if(s==="stack")return nj(t);if(s==="shape")return!0;const n=dj(t);return n instanceof ix?n:rx(n,o)}function cj(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function dj(t){return(t.scale||{}).getPointPositionForValue?fj(t):uj(t)}function uj(t){const{scale:e={},fill:s}=t,o=tj(s,e);if($t(o)){const n=e.isHorizontal();return{x:n?o:null,y:n?null:o}}return null}function fj(t){const{scale:e,fill:s}=t,o=e.options,n=e.getLabels().length,i=o.reverse?e.max:e.min,a=sj(s,e,i),l=[];if(o.grid.circular){const c=e.getPointPositionForValue(0,i);return new ix({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<n;++c)l.push(e.getPointPositionForValue(c,a));return l}function Nd(t,e,s){const o=lj(e),{chart:n,index:i,line:a,scale:l,axis:c}=e,d=a.options,u=d.fill,f=d.backgroundColor,{above:p=f,below:g=f}=u||{},m=n.getDatasetMeta(i),v=Fy(n,m);o&&a.points.length&&(Hc(t,s),pj(t,{line:a,target:o,above:p,below:g,area:s,scale:l,axis:c,clip:v}),qc(t))}function pj(t,e){const{line:s,target:o,above:n,below:i,area:a,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=i;i!==n&&(d==="x"?(vg(t,o,a.top),jd(t,{line:s,target:o,color:n,scale:l,property:d,clip:c}),t.restore(),t.save(),vg(t,o,a.bottom)):d==="y"&&(yg(t,o,a.left),jd(t,{line:s,target:o,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),yg(t,o,a.right),u=n)),jd(t,{line:s,target:o,color:u,scale:l,property:d,clip:c}),t.restore()}function vg(t,e,s){const{segments:o,points:n}=e;let i=!0,a=!1;t.beginPath();for(const l of o){const{start:c,end:d}=l,u=n[c],f=n[Kc(c,d,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(f.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function yg(t,e,s){const{segments:o,points:n}=e;let i=!0,a=!1;t.beginPath();for(const l of o){const{start:c,end:d}=l,u=n[c],f=n[Kc(c,d,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(s,f.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function jd(t,e){const{line:s,target:o,property:n,color:i,scale:a,clip:l}=e,c=JN(s,o,n);for(const{source:d,target:u,start:f,end:p}of c){const{style:{backgroundColor:g=i}={}}=d,m=o!==!0;t.save(),t.fillStyle=g,hj(t,a,l,m&&Mu(n,f,p)),t.beginPath();const v=!!s.pathSegment(t,d);let x;if(m){v?t.closePath():xg(t,o,p,n);const _=!!o.pathSegment(t,u,{move:v,reverse:!0});x=v&&_,x||xg(t,o,f,n)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function hj(t,e,s,o){const n=e.chart.chartArea,{property:i,start:a,end:l}=o||{};if(i==="x"||i==="y"){let c,d,u,f;i==="x"?(c=a,d=n.top,u=l,f=n.bottom):(c=n.left,d=a,u=n.right,f=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),f=Math.min(f,s.bottom)),t.rect(c,d,u-c,f-d),t.clip()}}function xg(t,e,s,o){const n=e.interpolate(s,o);n&&t.lineTo(n.x,n.y)}var gj={id:"filler",afterDatasetsUpdate(t,e,s){const o=(t.data.datasets||[]).length,n=[];let i,a,l,c;for(a=0;a<o;++a)i=t.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof un&&(c={visible:t.isDatasetVisible(a),index:a,fill:ZN(l,a,o),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,n.push(c);for(a=0;a<o;++a)c=n[a],!(!c||c.fill===!1)&&(c.fill=QN(n,a,s.propagate))},beforeDraw(t,e,s){const o=s.drawTime==="beforeDraw",n=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let a=n.length-1;a>=0;--a){const l=n[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),o&&l.fill&&Nd(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const o=t.getSortedVisibleDatasetMetas();for(let n=o.length-1;n>=0;--n){const i=o[n].$filler;bg(i)&&Nd(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const o=e.meta.$filler;!bg(o)||s.drawTime!=="beforeDatasetDraw"||Nd(t.ctx,o,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const wg=(t,e)=>{let{boxHeight:s=e,boxWidth:o=e}=t;return t.usePointStyle&&(s=Math.min(s,e),o=t.pointStyleWidth||Math.min(o,e)),{boxWidth:o,boxHeight:s,itemHeight:Math.max(e,s)}},mj=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class _g extends Jo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,o){this.maxWidth=e,this.maxHeight=s,this._margins=o,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=mt(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(o=>e.filter(o,this.chart.data))),e.sort&&(s=s.sort((o,n)=>e.sort(o,n,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const o=e.labels,n=jt(o.font),i=n.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=wg(o,i);let d,u;s.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(a,n,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,o,n){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+l;let f=e;i.textAlign="left",i.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((m,v)=>{const x=o+s/2+i.measureText(m.text).width;(v===0||d[d.length-1]+x+2*l>a)&&(f+=u,d[d.length-(v>0?0:1)]=0,g+=u,p++),c[v]={left:0,top:g,row:p,width:x,height:n},d[d.length-1]+=x+l}),f}_fitCols(e,s,o,n){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let f=l,p=0,g=0,m=0,v=0;return this.legendItems.forEach((x,_)=>{const{itemWidth:k,itemHeight:C}=bj(o,s,i,x,n);_>0&&g+C+2*l>u&&(f+=p+l,d.push({width:p,height:g}),m+=p+l,v++,p=g=0),c[_]={left:m,top:g,col:v,width:k,height:C},p=Math.max(p,k),g+=C+l}),f+=p,d.push({width:p,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:o,labels:{padding:n},rtl:i}}=this,a=Er(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=es(o,this.left+n,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=es(o,this.left+n,this.right-this.lineWidths[l])),d.top+=this.top+e+n,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+n}else{let l=0,c=es(o,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=es(o,this.top+e+n,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+n,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Hc(e,this),this._draw(),qc(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:o,ctx:n}=this,{align:i,labels:a}=e,l=_t.color,c=Er(e.rtl,this.left,this.width),d=jt(a.font),{padding:u}=a,f=d.size,p=f/2;let g;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:m,boxHeight:v,itemHeight:x}=wg(a,f),_=function(R,V,B){if(isNaN(m)||m<=0||isNaN(v)||v<0)return;n.save();const E=Ve(B.lineWidth,1);if(n.fillStyle=Ve(B.fillStyle,l),n.lineCap=Ve(B.lineCap,"butt"),n.lineDashOffset=Ve(B.lineDashOffset,0),n.lineJoin=Ve(B.lineJoin,"miter"),n.lineWidth=E,n.strokeStyle=Ve(B.strokeStyle,l),n.setLineDash(Ve(B.lineDash,[])),a.usePointStyle){const S={radius:v*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:E},O=c.xPlus(R,m/2),T=V+p;Sy(n,S,O,T,a.pointStyleWidth&&m)}else{const S=V+Math.max((f-v)/2,0),O=c.leftForLtr(R,m),T=Gn(B.borderRadius);n.beginPath(),Object.values(T).some(L=>L!==0)?Yi(n,{x:O,y:S,w:m,h:v,radius:T}):n.rect(O,S,m,v),n.fill(),E!==0&&n.stroke()}n.restore()},k=function(R,V,B){tr(n,B.text,R,V+x/2,d,{strikethrough:B.hidden,textAlign:c.textAlign(B.textAlign)})},C=this.isHorizontal(),P=this._computeTitleHeight();C?g={x:es(i,this.left+u,this.right-o[0]),y:this.top+u+P,line:0}:g={x:this.left+u,y:es(i,this.top+P+u,this.bottom-s[0].height),line:0},Iy(this.ctx,e.textDirection);const $=x+u;this.legendItems.forEach((R,V)=>{n.strokeStyle=R.fontColor,n.fillStyle=R.fontColor;const B=n.measureText(R.text).width,E=c.textAlign(R.textAlign||(R.textAlign=a.textAlign)),S=m+p+B;let O=g.x,T=g.y;c.setWidth(this.width),C?V>0&&O+S+u>this.right&&(T=g.y+=$,g.line++,O=g.x=es(i,this.left+u,this.right-o[g.line])):V>0&&T+$>this.bottom&&(O=g.x=O+s[g.line].width+u,g.line++,T=g.y=es(i,this.top+P+u,this.bottom-s[g.line].height));const L=c.x(O);if(_(L,T,R),O=LI(E,O+m+p,C?O+S:this.right,e.rtl),k(c.x(O),T,R),C)g.x+=S+u;else if(typeof R.text!="string"){const K=d.lineHeight;g.y+=ax(R,K)+u}else g.y+=$}),Ly(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,o=jt(s.font),n=cs(s.padding);if(!s.display)return;const i=Er(e.rtl,this.left,this.width),a=this.ctx,l=s.position,c=o.size/2,d=n.top+c;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,f=es(e.align,f,this.right-p);else{const m=this.columnSizes.reduce((v,x)=>Math.max(v,x.height),0);u=d+es(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const g=es(l,f,f+p);a.textAlign=i.textAlign(Xf(l)),a.textBaseline="middle",a.strokeStyle=s.color,a.fillStyle=s.color,a.font=o.string,tr(a,s.text,g,u,o)}_computeTitleHeight(){const e=this.options.title,s=jt(e.font),o=cs(e.padding);return e.display?s.lineHeight+o.height:0}_getLegendItemAt(e,s){let o,n,i;if(Fo(e,this.left,this.right)&&Fo(s,this.top,this.bottom)){for(i=this.legendHitBoxes,o=0;o<i.length;++o)if(n=i[o],Fo(e,n.left,n.left+n.width)&&Fo(s,n.top,n.top+n.height))return this.legendItems[o]}return null}handleEvent(e){const s=this.options;if(!xj(e.type,s))return;const o=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=mj(n,o);n&&!i&&mt(s.onLeave,[e,n,this],this),this._hoveredItem=o,o&&!i&&mt(s.onHover,[e,o,this],this)}else o&&mt(s.onClick,[e,o,this],this)}}function bj(t,e,s,o,n){const i=vj(o,t,e,s),a=yj(n,o,e.lineHeight);return{itemWidth:i,itemHeight:a}}function vj(t,e,s,o){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((i,a)=>i.length>a.length?i:a)),e+s.size/2+o.measureText(n).width}function yj(t,e,s){let o=t;return typeof e.text!="string"&&(o=ax(e,s)),o}function ax(t,e){const s=t.text?t.text.length:0;return e*s}function xj(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var wj={id:"legend",_element:_g,start(t,e,s){const o=t.legend=new _g({ctx:t.ctx,options:s,chart:t});as.configure(t,o,s),as.addBox(t,o)},stop(t){as.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const o=t.legend;as.configure(t,o,s),o.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const o=e.datasetIndex,n=s.chart;n.isDatasetVisible(o)?(n.hide(o),e.hidden=!0):(n.show(o),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:o,textAlign:n,color:i,useBorderRadius:a,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=cs(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:o||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:a&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ip extends Jo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const o=this.options;if(this.left=0,this.top=0,!o.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const n=wt(o.text)?o.text.length:1;this._padding=cs(o.padding);const i=n*jt(o.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:o,bottom:n,right:i,options:a}=this,l=a.align;let c=0,d,u,f;return this.isHorizontal()?(u=es(l,o,i),f=s+e,d=i-o):(a.position==="left"?(u=o+e,f=es(l,n,s),c=st*-.5):(u=i-e,f=es(l,s,n),c=st*.5),d=n-s),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const o=jt(s.font),i=o.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);tr(e,s.text,0,0,o,{color:s.color,maxWidth:c,rotation:d,textAlign:Xf(s.align),textBaseline:"middle",translation:[a,l]})}}function _j(t,e){const s=new ip({ctx:t.ctx,options:e,chart:t});as.configure(t,s,e),as.addBox(t,s),t.titleBlock=s}var kj={id:"title",_element:ip,start(t,e,s){_j(t,s)},stop(t){const e=t.titleBlock;as.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const o=t.titleBlock;as.configure(t,o,s),o.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ja=new WeakMap;var Cj={id:"subtitle",start(t,e,s){const o=new ip({ctx:t.ctx,options:s,chart:t});as.configure(t,o,s),as.addBox(t,o),Ja.set(t,o)},stop(t){as.removeBox(t,Ja.get(t)),Ja.delete(t)},beforeUpdate(t,e,s){const o=Ja.get(t);as.configure(t,o,s),o.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hi={average(t){if(!t.length)return!1;let e,s,o=new Set,n=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();o.add(c.x),n+=c.y,++i}}return i===0||o.size===0?!1:{x:[...o].reduce((l,c)=>l+c)/o.size,y:n/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,o=e.y,n=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=t.length;i<a;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=ku(e,d);u<n&&(n=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,o=c.y}return{x:s,y:o}}};function ao(t,e){return e&&(wt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Do(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function $j(t,e){const{element:s,datasetIndex:o,index:n}=e,i=t.getDatasetMeta(o).controller,{label:a,value:l}=i.getLabelAndValue(n);return{chart:t,label:a,parsed:i.getParsed(n),raw:t.data.datasets[o].data[n],formattedValue:l,dataset:i.getDataset(),dataIndex:n,datasetIndex:o,element:s}}function kg(t,e){const s=t.chart.ctx,{body:o,footer:n,title:i}=t,{boxWidth:a,boxHeight:l}=e,c=jt(e.bodyFont),d=jt(e.titleFont),u=jt(e.footerFont),f=i.length,p=n.length,g=o.length,m=cs(e.padding);let v=m.height,x=0,_=o.reduce((P,$)=>P+$.before.length+$.lines.length+$.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,f&&(v+=f*d.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),_){const P=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;v+=g*P+(_-g)*c.lineHeight+(_-1)*e.bodySpacing}p&&(v+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let k=0;const C=function(P){x=Math.max(x,s.measureText(P).width+k)};return s.save(),s.font=d.string,ft(t.title,C),s.font=c.string,ft(t.beforeBody.concat(t.afterBody),C),k=e.displayColors?a+2+e.boxPadding:0,ft(o,P=>{ft(P.before,C),ft(P.lines,C),ft(P.after,C)}),k=0,s.font=u.string,ft(t.footer,C),s.restore(),x+=m.width,{width:x,height:v}}function Ej(t,e){const{y:s,height:o}=e;return s<o/2?"top":s>t.height-o/2?"bottom":"center"}function Sj(t,e,s,o){const{x:n,width:i}=o,a=s.caretSize+s.caretPadding;if(t==="left"&&n+i+a>e.width||t==="right"&&n-i-a<0)return!0}function Aj(t,e,s,o){const{x:n,width:i}=s,{width:a,chartArea:{left:l,right:c}}=t;let d="center";return o==="center"?d=n<=(l+c)/2?"left":"right":n<=i/2?d="left":n>=a-i/2&&(d="right"),Sj(d,t,e,s)&&(d="center"),d}function Cg(t,e,s){const o=s.yAlign||e.yAlign||Ej(t,s);return{xAlign:s.xAlign||e.xAlign||Aj(t,e,s,o),yAlign:o}}function Tj(t,e){let{x:s,width:o}=t;return e==="right"?s-=o:e==="center"&&(s-=o/2),s}function Pj(t,e,s){let{y:o,height:n}=t;return e==="top"?o+=s:e==="bottom"?o-=n+s:o-=n/2,o}function $g(t,e,s,o){const{caretSize:n,caretPadding:i,cornerRadius:a}=t,{xAlign:l,yAlign:c}=s,d=n+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:g}=Gn(a);let m=Tj(e,l);const v=Pj(e,c,d);return c==="center"?l==="left"?m+=d:l==="right"&&(m-=d):l==="left"?m-=Math.max(u,p)+n:l==="right"&&(m+=Math.max(f,g)+n),{x:Vt(m,0,o.width-e.width),y:Vt(v,0,o.height-e.height)}}function Xa(t,e,s){const o=cs(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-o.right:t.x+o.left}function Eg(t){return ao([],Do(t))}function Mj(t,e,s){return kn(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Sg(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const lx={beforeTitle:Po,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,o=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(o>0&&e.dataIndex<o)return s[e.dataIndex]}return""},afterTitle:Po,beforeBody:Po,beforeLabel:Po,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Ke(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Po,afterBody:Po,beforeFooter:Po,footer:Po,afterFooter:Po};function xs(t,e,s,o){const n=t[e].call(s,o);return typeof n>"u"?lx[e].call(s,o):n}class Ru extends Jo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,o=this.options.setContext(this.getContext()),n=o.enabled&&s.options.animation&&o.animations,i=new Uy(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Mj(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:o}=s,n=xs(o,"beforeTitle",this,e),i=xs(o,"title",this,e),a=xs(o,"afterTitle",this,e);let l=[];return l=ao(l,Do(n)),l=ao(l,Do(i)),l=ao(l,Do(a)),l}getBeforeBody(e,s){return Eg(xs(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:o}=s,n=[];return ft(e,i=>{const a={before:[],lines:[],after:[]},l=Sg(o,i);ao(a.before,Do(xs(l,"beforeLabel",this,i))),ao(a.lines,xs(l,"label",this,i)),ao(a.after,Do(xs(l,"afterLabel",this,i))),n.push(a)}),n}getAfterBody(e,s){return Eg(xs(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:o}=s,n=xs(o,"beforeFooter",this,e),i=xs(o,"footer",this,e),a=xs(o,"afterFooter",this,e);let l=[];return l=ao(l,Do(n)),l=ao(l,Do(i)),l=ao(l,Do(a)),l}_createItems(e){const s=this._active,o=this.chart.data,n=[],i=[],a=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push($j(this.chart,s[c]));return e.filter&&(l=l.filter((u,f,p)=>e.filter(u,f,p,o))),e.itemSort&&(l=l.sort((u,f)=>e.itemSort(u,f,o))),ft(l,u=>{const f=Sg(e.callbacks,u);n.push(xs(f,"labelColor",this,u)),i.push(xs(f,"labelPointStyle",this,u)),a.push(xs(f,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,s){const o=this.options.setContext(this.getContext()),n=this._active;let i,a=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const l=hi[o.position].call(this,n,this._eventPosition);a=this._createItems(o),this.title=this.getTitle(a,o),this.beforeBody=this.getBeforeBody(a,o),this.body=this.getBody(a,o),this.afterBody=this.getAfterBody(a,o),this.footer=this.getFooter(a,o);const c=this._size=kg(this,o),d=Object.assign({},l,c),u=Cg(this.chart,o,d),f=$g(o,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&o.external&&o.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,o,n){const i=this.getCaretPosition(e,o,n);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,o){const{xAlign:n,yAlign:i}=this,{caretSize:a,cornerRadius:l}=o,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=Gn(l),{x:p,y:g}=e,{width:m,height:v}=s;let x,_,k,C,P,$;return i==="center"?(P=g+v/2,n==="left"?(x=p,_=x-a,C=P+a,$=P-a):(x=p+m,_=x+a,C=P-a,$=P+a),k=x):(n==="left"?_=p+Math.max(c,u)+a:n==="right"?_=p+m-Math.max(d,f)-a:_=this.caretX,i==="top"?(C=g,P=C-a,x=_-a,k=_+a):(C=g+v,P=C+a,x=_+a,k=_-a),$=C),{x1:x,x2:_,x3:k,y1:C,y2:P,y3:$}}drawTitle(e,s,o){const n=this.title,i=n.length;let a,l,c;if(i){const d=Er(o.rtl,this.x,this.width);for(e.x=Xa(this,o.titleAlign,o),s.textAlign=d.textAlign(o.titleAlign),s.textBaseline="middle",a=jt(o.titleFont),l=o.titleSpacing,s.fillStyle=o.titleColor,s.font=a.string,c=0;c<i;++c)s.fillText(n[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===i&&(e.y+=o.titleMarginBottom-l)}}_drawColorBox(e,s,o,n,i){const a=this.labelColors[o],l=this.labelPointStyles[o],{boxHeight:c,boxWidth:d}=i,u=jt(i.bodyFont),f=Xa(this,"left",i),p=n.x(f),g=c<u.lineHeight?(u.lineHeight-c)/2:0,m=s.y+g;if(i.usePointStyle){const v={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},x=n.leftForLtr(p,d)+d/2,_=m+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,$u(e,v,x,_),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,$u(e,v,x,_)}else{e.lineWidth=Xe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const v=n.leftForLtr(p,d),x=n.leftForLtr(n.xPlus(p,1),d-2),_=Gn(a.borderRadius);Object.values(_).some(k=>k!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Yi(e,{x:v,y:m,w:d,h:c,radius:_}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Yi(e,{x,y:m+1,w:d-2,h:c-2,radius:_}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,m,d,c),e.strokeRect(v,m,d,c),e.fillStyle=a.backgroundColor,e.fillRect(x,m+1,d-2,c-2))}e.fillStyle=this.labelTextColors[o]}drawBody(e,s,o){const{body:n}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=o,f=jt(o.bodyFont);let p=f.lineHeight,g=0;const m=Er(o.rtl,this.x,this.width),v=function(B){s.fillText(B,m.x(e.x+g),e.y+p/2),e.y+=p+i},x=m.textAlign(a);let _,k,C,P,$,R,V;for(s.textAlign=a,s.textBaseline="middle",s.font=f.string,e.x=Xa(this,x,o),s.fillStyle=o.bodyColor,ft(this.beforeBody,v),g=l&&x!=="right"?a==="center"?d/2+u:d+2+u:0,P=0,R=n.length;P<R;++P){for(_=n[P],k=this.labelTextColors[P],s.fillStyle=k,ft(_.before,v),C=_.lines,l&&C.length&&(this._drawColorBox(s,e,P,m,o),p=Math.max(f.lineHeight,c)),$=0,V=C.length;$<V;++$)v(C[$]),p=f.lineHeight;ft(_.after,v)}g=0,p=f.lineHeight,ft(this.afterBody,v),e.y-=i}drawFooter(e,s,o){const n=this.footer,i=n.length;let a,l;if(i){const c=Er(o.rtl,this.x,this.width);for(e.x=Xa(this,o.footerAlign,o),e.y+=o.footerMarginTop,s.textAlign=c.textAlign(o.footerAlign),s.textBaseline="middle",a=jt(o.footerFont),s.fillStyle=o.footerColor,s.font=a.string,l=0;l<i;++l)s.fillText(n[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o.footerSpacing}}drawBackground(e,s,o,n){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=o,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:m}=Gn(n.cornerRadius);s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.beginPath(),s.moveTo(l+f,c),a==="top"&&this.drawCaret(e,s,o,n),s.lineTo(l+d-p,c),s.quadraticCurveTo(l+d,c,l+d,c+p),a==="center"&&i==="right"&&this.drawCaret(e,s,o,n),s.lineTo(l+d,c+u-m),s.quadraticCurveTo(l+d,c+u,l+d-m,c+u),a==="bottom"&&this.drawCaret(e,s,o,n),s.lineTo(l+g,c+u),s.quadraticCurveTo(l,c+u,l,c+u-g),a==="center"&&i==="left"&&this.drawCaret(e,s,o,n),s.lineTo(l,c+f),s.quadraticCurveTo(l,c,l+f,c),s.closePath(),s.fill(),n.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,o=this.$animations,n=o&&o.x,i=o&&o.y;if(n||i){const a=hi[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=kg(this,e),c=Object.assign({},a,this._size),d=Cg(s,e,c),u=$g(e,c,d,s);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let o=this.opacity;if(!o)return;this._updateAnimationTarget(s);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};o=Math.abs(o)<.001?0:o;const a=cs(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=o,this.drawBackground(i,e,n,s),Iy(e,s.textDirection),i.y+=a.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),Ly(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const o=this._active,n=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Zl(o,n),a=this._positionChanged(n,s);(i||a)&&(this._active=n,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,o=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],a=this._getActiveElements(e,i,s,o),l=this._positionChanged(a,e),c=s||!Zl(a,i)||l;return c&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,o,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,o);return i.reverse&&a.reverse(),a}_positionChanged(e,s){const{caretX:o,caretY:n,options:i}=this,a=hi[i.position].call(this,e,s);return a!==!1&&(o!==a.x||n!==a.y)}}_e(Ru,"positioners",hi);var Rj={id:"tooltip",_element:Ru,positioners:hi,afterInit(t,e,s){s&&(t.tooltip=new Ru({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Dj=Object.freeze({__proto__:null,Colors:qN,Decimation:YN,Filler:gj,Legend:wj,SubTitle:Cj,Title:kj,Tooltip:Rj});const Oj=(t,e,s,o)=>(typeof e=="string"?(s=t.push(e)-1,o.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function Ij(t,e,s,o){const n=t.indexOf(e);if(n===-1)return Oj(t,e,s,o);const i=t.lastIndexOf(e);return n!==i?s:n}const Lj=(t,e)=>t===null?null:Vt(Math.round(t),0,e);function Ag(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Du extends rr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const o=this.getLabels();for(const{index:n,label:i}of s)o[n]===i&&o.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(Ke(e))return null;const o=this.getLabels();return s=isFinite(s)&&o[s]===e?s:Ij(o,e,Ve(s,e),this._addedLabels),Lj(s,o.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:o,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(o=0),s||(n=this.getLabels().length-1)),this.min=o,this.max=n}buildTicks(){const e=this.min,s=this.max,o=this.options.offset,n=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let a=e;a<=s;a++)n.push({value:a});return n}getLabelForValue(e){return Ag.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}_e(Du,"id","category"),_e(Du,"defaults",{ticks:{callback:Ag}});function Bj(t,e){const s=[],{bounds:n,step:i,min:a,max:l,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:p}=t,g=i||1,m=u-1,{min:v,max:x}=e,_=!Ke(a),k=!Ke(l),C=!Ke(d),P=(x-v)/(f+1);let $=k0((x-v)/m/g)*g,R,V,B,E;if($<1e-14&&!_&&!k)return[{value:v},{value:x}];E=Math.ceil(x/$)-Math.floor(v/$),E>m&&($=k0(E*$/m/g)*g),Ke(c)||(R=Math.pow(10,c),$=Math.ceil($*R)/R),n==="ticks"?(V=Math.floor(v/$)*$,B=Math.ceil(x/$)*$):(V=v,B=x),_&&k&&i&&TI((l-a)/i,$/1e3)?(E=Math.round(Math.min((l-a)/$,u)),$=(l-a)/E,V=a,B=l):C?(V=_?a:V,B=k?l:B,E=d-1,$=(B-V)/E):(E=(B-V)/$,Ti(E,Math.round(E),$/1e3)?E=Math.round(E):E=Math.ceil(E));const S=Math.max(C0($),C0(V));R=Math.pow(10,Ke(c)?S:c),V=Math.round(V*R)/R,B=Math.round(B*R)/R;let O=0;for(_&&(p&&V!==a?(s.push({value:a}),V<a&&O++,Ti(Math.round((V+O*$)*R)/R,a,Tg(a,P,t))&&O++):V<a&&O++);O<E;++O){const T=Math.round((V+O*$)*R)/R;if(k&&T>l)break;s.push({value:T})}return k&&p&&B!==l?s.length&&Ti(s[s.length-1].value,l,Tg(l,P,t))?s[s.length-1].value=l:s.push({value:l}):(!k||B===l)&&s.push({value:B}),s}function Tg(t,e,{horizontal:s,minRotation:o}){const n=Js(o),i=(s?Math.sin(n):Math.cos(n))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class ic extends rr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Ke(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:o}=this.getUserBounds();let{min:n,max:i}=this;const a=c=>n=s?n:c,l=c=>i=o?i:c;if(e){const c=vo(n),d=vo(i);c<0&&d<0?l(0):c>0&&d>0&&a(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||a(n-c)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:o}=e,n;return o?(n=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),s=s||11),s&&(n=Math.min(s,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let o=this.getTickLimit();o=Math.max(2,o);const n={maxTicks:o,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,a=Bj(n,i);return e.bounds==="ticks"&&vy(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let s=this.min,o=this.max;if(super.configure(),this.options.offset&&e.length){const n=(o-s)/Math.max(e.length-1,1)/2;s-=n,o+=n}this._startValue=s,this._endValue=o,this._valueRange=o-s}getLabelForValue(e){return ha(e,this.chart.options.locale,this.options.ticks.format)}}class Ou extends ic{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=$t(e)?e:0,this.max=$t(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,o=Js(this.options.ticks.minRotation),n=(e?Math.sin(o):Math.cos(o))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}_e(Ou,"id","linear"),_e(Ou,"defaults",{ticks:{callback:Vc.formatters.numeric}});const Xi=t=>Math.floor(dn(t)),On=(t,e)=>Math.pow(10,Xi(t)+e);function Pg(t){return t/Math.pow(10,Xi(t))===1}function Mg(t,e,s){const o=Math.pow(10,s),n=Math.floor(t/o);return Math.ceil(e/o)-n}function Nj(t,e){const s=e-t;let o=Xi(s);for(;Mg(t,e,o)>10;)o++;for(;Mg(t,e,o)<10;)o--;return Math.min(o,Xi(t))}function jj(t,{min:e,max:s}){e=Ps(t.min,e);const o=[],n=Xi(e);let i=Nj(e,s),a=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((e-c)*a)/a,u=Math.floor((e-c)/l/10)*l*10;let f=Math.floor((d-u)/Math.pow(10,i)),p=Ps(t.min,Math.round((c+u+f*Math.pow(10,i))*a)/a);for(;p<s;)o.push({value:p,major:Pg(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(i++,f=2,a=i>=0?1:a),p=Math.round((c+u+f*Math.pow(10,i))*a)/a;const g=Ps(t.max,p);return o.push({value:g,major:Pg(g),significand:f}),o}class Iu extends rr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const o=ic.prototype.parse.apply(this,[e,s]);if(o===0){this._zero=!0;return}return $t(o)&&o>0?o:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=$t(e)?Math.max(0,e):null,this.max=$t(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$t(this._userMin)&&(this.min=e===On(this.min,0)?On(this.min,-1):On(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let o=this.min,n=this.max;const i=l=>o=e?o:l,a=l=>n=s?n:l;o===n&&(o<=0?(i(1),a(10)):(i(On(o,-1)),a(On(n,1)))),o<=0&&i(On(n,-1)),n<=0&&a(On(o,1)),this.min=o,this.max=n}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},o=jj(s,this);return e.bounds==="ticks"&&vy(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}getLabelForValue(e){return e===void 0?"0":ha(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=dn(e),this._valueRange=dn(this.max)-dn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(dn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}_e(Iu,"id","logarithmic"),_e(Iu,"defaults",{ticks:{callback:Vc.formatters.logarithmic,major:{enabled:!0}}});function Lu(t){const e=t.ticks;if(e.display&&t.display){const s=cs(e.backdropPadding);return Ve(e.font&&e.font.size,_t.font.size)+s.height}return 0}function Fj(t,e,s){return s=wt(s)?s:[s],{w:WI(t,e.string,s),h:s.length*e.lineHeight}}function Rg(t,e,s,o,n){return t===o||t===n?{start:e-s/2,end:e+s/2}:t<o||t>n?{start:e-s,end:e}:{start:e,end:e+s}}function Uj(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),o=[],n=[],i=t._pointLabels.length,a=t.options.pointLabels,l=a.centerPointLabels?st/i:0;for(let c=0;c<i;c++){const d=a.setContext(t.getPointLabelContext(c));n[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+n[c],l),f=jt(d.font),p=Fj(t.ctx,f,t._pointLabels[c]);o[c]=p;const g=ss(t.getIndexAngle(c)+l),m=Math.round(Yf(g)),v=Rg(m,u.x,p.w,0,180),x=Rg(m,u.y,p.h,90,270);zj(s,e,g,v,x)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=qj(t,o,n)}function zj(t,e,s,o,n){const i=Math.abs(Math.sin(s)),a=Math.abs(Math.cos(s));let l=0,c=0;o.start<e.l?(l=(e.l-o.start)/i,t.l=Math.min(t.l,e.l-l)):o.end>e.r&&(l=(o.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),n.start<e.t?(c=(e.t-n.start)/a,t.t=Math.min(t.t,e.t-c)):n.end>e.b&&(c=(n.end-e.b)/a,t.b=Math.max(t.b,e.b+c))}function Vj(t,e,s){const o=t.drawingArea,{extra:n,additionalAngle:i,padding:a,size:l}=s,c=t.getPointPosition(e,o+n+a,i),d=Math.round(Yf(ss(c.angle+Pt))),u=Kj(c.y,l.h,d),f=Wj(d),p=Gj(c.x,l.w,f);return{visible:!0,x:c.x,y:u,textAlign:f,left:p,top:u,right:p+l.w,bottom:u+l.h}}function Hj(t,e){if(!e)return!0;const{left:s,top:o,right:n,bottom:i}=t;return!(zo({x:s,y:o},e)||zo({x:s,y:i},e)||zo({x:n,y:o},e)||zo({x:n,y:i},e))}function qj(t,e,s){const o=[],n=t._pointLabels.length,i=t.options,{centerPointLabels:a,display:l}=i.pointLabels,c={extra:Lu(i)/2,additionalAngle:a?st/n:0};let d;for(let u=0;u<n;u++){c.padding=s[u],c.size=e[u];const f=Vj(t,u,c);o.push(f),l==="auto"&&(f.visible=Hj(f,d),f.visible&&(d=f))}return o}function Wj(t){return t===0||t===180?"center":t<180?"left":"right"}function Gj(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function Kj(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function Yj(t,e,s){const{left:o,top:n,right:i,bottom:a}=s,{backdropColor:l}=e;if(!Ke(l)){const c=Gn(e.borderRadius),d=cs(e.backdropPadding);t.fillStyle=l;const u=o-d.left,f=n-d.top,p=i-o+d.width,g=a-n+d.height;Object.values(c).some(m=>m!==0)?(t.beginPath(),Yi(t,{x:u,y:f,w:p,h:g,radius:c}),t.fill()):t.fillRect(u,f,p,g)}}function Jj(t,e){const{ctx:s,options:{pointLabels:o}}=t;for(let n=e-1;n>=0;n--){const i=t._pointLabelItems[n];if(!i.visible)continue;const a=o.setContext(t.getPointLabelContext(n));Yj(s,a,i);const l=jt(a.font),{x:c,y:d,textAlign:u}=i;tr(s,t._pointLabels[n],c,d+l.lineHeight/2,l,{color:a.color,textAlign:u,textBaseline:"middle"})}}function cx(t,e,s,o){const{ctx:n}=t;if(s)n.arc(t.xCenter,t.yCenter,e,0,vt);else{let i=t.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let a=1;a<o;a++)i=t.getPointPosition(a,e),n.lineTo(i.x,i.y)}}function Xj(t,e,s,o,n){const i=t.ctx,a=e.circular,{color:l,lineWidth:c}=e;!a&&!o||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(n.dash||[]),i.lineDashOffset=n.dashOffset,i.beginPath(),cx(t,s,a,o),i.closePath(),i.stroke(),i.restore())}function Qj(t,e,s){return kn(t,{label:s,index:e,type:"pointLabel"})}class gi extends ic{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=cs(Lu(this.options)/2),s=this.width=this.maxWidth-e.width,o=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+o/2+e.top),this.drawingArea=Math.floor(Math.min(s,o)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=$t(e)&&!isNaN(e)?e:0,this.max=$t(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Lu(this.options))}generateTickLabels(e){ic.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,o)=>{const n=mt(this.options.pointLabels.callback,[s,o],this);return n||n===0?n:""}).filter((s,o)=>this.chart.getDataVisibility(o))}fit(){const e=this.options;e.display&&e.pointLabels.display?Uj(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,o,n){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((o-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,o,n))}getIndexAngle(e){const s=vt/(this._pointLabels.length||1),o=this.options.startAngle||0;return ss(e*s+Js(o))}getDistanceFromCenterForValue(e){if(Ke(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(Ke(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const o=s[e];return Qj(this.getContext(),e,o)}}getPointPosition(e,s,o=0){const n=this.getIndexAngle(e)-Pt+o;return{x:Math.cos(n)*s+this.xCenter,y:Math.sin(n)*s+this.yCenter,angle:n}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:o,right:n,bottom:i}=this._pointLabelItems[e];return{left:s,top:o,right:n,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const o=this.ctx;o.save(),o.beginPath(),cx(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),o.closePath(),o.fillStyle=e,o.fill(),o.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:o,grid:n,border:i}=s,a=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&Jj(this,a),n.display&&this.ticks.forEach((u,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const p=this.getContext(f),g=n.setContext(p),m=i.setContext(p);Xj(this,g,c,a,m)}}),o.display){for(e.save(),l=a-1;l>=0;l--){const u=o.setContext(this.getPointLabelContext(l)),{color:f,lineWidth:p}=u;!p||!f||(e.lineWidth=p,e.strokeStyle=f,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,o=s.ticks;if(!o.display)return;const n=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=o.setContext(this.getContext(c)),u=jt(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const f=cs(d.backdropPadding);e.fillRect(-a/2-f.left,-i-u.size/2-f.top,a+f.width,u.size+f.height)}tr(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}_e(gi,"id","radialLinear"),_e(gi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Vc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),_e(gi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),_e(gi,"descriptors",{angleLines:{_fallback:"grid"}});const Yc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ws=Object.keys(Yc);function Dg(t,e){return t-e}function Og(t,e){if(Ke(e))return null;const s=t._adapter,{parser:o,round:n,isoWeekday:i}=t._parseOpts;let a=e;return typeof o=="function"&&(a=o(a)),$t(a)||(a=typeof o=="string"?s.parse(a,o):s.parse(a)),a===null?null:(n&&(a=n==="week"&&(Dr(i)||i===!0)?s.startOf(a,"isoWeek",i):s.startOf(a,n)),+a)}function Ig(t,e,s,o){const n=ws.length;for(let i=ws.indexOf(t);i<n-1;++i){const a=Yc[ws[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((s-e)/(l*a.size))<=o)return ws[i]}return ws[n-1]}function Zj(t,e,s,o,n){for(let i=ws.length-1;i>=ws.indexOf(s);i--){const a=ws[i];if(Yc[a].common&&t._adapter.diff(n,o,a)>=e-1)return a}return ws[s?ws.indexOf(s):0]}function eF(t){for(let e=ws.indexOf(t)+1,s=ws.length;e<s;++e)if(Yc[ws[e]].common)return ws[e]}function Lg(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:o,hi:n}=Jf(s,e),i=s[o]>=e?s[o]:s[n];t[i]=!0}}function tF(t,e,s,o){const n=t._adapter,i=+n.startOf(e[0].value,o),a=e[e.length-1].value;let l,c;for(l=i;l<=a;l=+n.add(l,1,o))c=s[l],c>=0&&(e[c].major=!0);return e}function Bg(t,e,s){const o=[],n={},i=e.length;let a,l;for(a=0;a<i;++a)l=e[a],n[l]=a,o.push({value:l,major:!1});return i===0||!s?o:tF(t,o,n,s)}class Qi extends rr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const o=e.time||(e.time={}),n=this._adapter=new cB._date(e.adapters.date);n.init(s),Ai(o.displayFormats,n.formats()),this._parseOpts={parser:o.parser,round:o.round,isoWeekday:o.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Og(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,o=e.time.unit||"day";let{min:n,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=$t(n)&&!isNaN(n)?n:+s.startOf(Date.now(),o),i=$t(i)&&!isNaN(i)?i:+s.endOf(Date.now(),o)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],o=e[e.length-1]),{min:s,max:o}}buildTicks(){const e=this.options,s=e.time,o=e.ticks,n=o.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,a=this.max,l=DI(n,i,a);return this._unit=s.unit||(o.autoSkip?Ig(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):Zj(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!o.major.enabled||this._unit==="year"?void 0:eF(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),Bg(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,o=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?s=1-n:s=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?o=i:o=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;s=Vt(s,0,a),o=Vt(o,0,a),this._offsets={start:s,end:o,factor:1/(s+1+o)}}_generate(){const e=this._adapter,s=this.min,o=this.max,n=this.options,i=n.time,a=i.unit||Ig(i.minUnit,s,o,this._getLabelCapacity(s)),l=Ve(n.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,d=Dr(c)||c===!0,u={};let f=s,p,g;if(d&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,d?"day":a),e.diff(o,s,a)>1e5*l)throw new Error(s+" and "+o+" are too far apart with stepSize of "+l+" "+a);const m=n.ticks.source==="data"&&this.getDataTimestamps();for(p=f,g=0;p<o;p=+e.add(p,l,a),g++)Lg(u,p,m);return(p===o||n.bounds==="ticks"||g===1)&&Lg(u,p,m),Object.keys(u).sort(Dg).map(v=>+v)}getLabelForValue(e){const s=this._adapter,o=this.options.time;return o.tooltipFormat?s.format(e,o.tooltipFormat):s.format(e,o.displayFormats.datetime)}format(e,s){const n=this.options.time.displayFormats,i=this._unit,a=s||n[i];return this._adapter.format(e,a)}_tickFormatFunction(e,s,o,n){const i=this.options,a=i.ticks.callback;if(a)return mt(a,[e,s,o],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],f=d&&l[d],p=o[s],g=d&&f&&p&&p.major;return this._adapter.format(e,n||(g?f:u))}generateTickLabels(e){let s,o,n;for(s=0,o=e.length;s<o;++s)n=e[s],n.label=this._tickFormatFunction(n.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,o=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+o)*s.factor)}getValueForPixel(e){const s=this._offsets,o=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+o*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,o=this.ctx.measureText(e).width,n=Js(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(n),a=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:o*i+l*a,h:o*a+l*i}}_getLabelCapacity(e){const s=this.options.time,o=s.displayFormats,n=o[s.unit]||o.millisecond,i=this._tickFormatFunction(e,0,Bg(this,[e],this._majorUnit),n),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,o;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(s=0,o=n.length;s<o;++s)e=e.concat(n[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,o;if(e.length)return e;const n=this.getLabels();for(s=0,o=n.length;s<o;++s)e.push(Og(this,n[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wy(e.sort(Dg))}}_e(Qi,"id","time"),_e(Qi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qa(t,e,s){let o=0,n=t.length-1,i,a,l,c;s?(e>=t[o].pos&&e<=t[n].pos&&({lo:o,hi:n}=Uo(t,"pos",e)),{pos:i,time:l}=t[o],{pos:a,time:c}=t[n]):(e>=t[o].time&&e<=t[n].time&&({lo:o,hi:n}=Uo(t,"time",e)),{time:i,pos:l}=t[o],{time:a,pos:c}=t[n]);const d=a-i;return d?l+(c-l)*(e-i)/d:l}class Bu extends Qi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Qa(s,this.min),this._tableRange=Qa(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:o}=this,n=[],i=[];let a,l,c,d,u;for(a=0,l=e.length;a<l;++a)d=e[a],d>=s&&d<=o&&n.push(d);if(n.length<2)return[{time:s,pos:0},{time:o,pos:1}];for(a=0,l=n.length;a<l;++a)u=n[a+1],c=n[a-1],d=n[a],Math.round((u+c)/2)!==d&&i.push({time:d,pos:a/(l-1)});return i}_generate(){const e=this.min,s=this.max;let o=super.getDataTimestamps();return(!o.includes(e)||!o.length)&&o.splice(0,0,e),(!o.includes(s)||o.length===1)&&o.push(s),o.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),o=this.getLabelTimestamps();return s.length&&o.length?e=this.normalize(s.concat(o)):e=s.length?s:o,e=this._cache.all=e,e}getDecimalForValue(e){return(Qa(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,o=this.getDecimalForPixel(e)/s.factor-s.end;return Qa(this._table,o*this._tableRange+this._minPos,!0)}}_e(Bu,"id","timeseries"),_e(Bu,"defaults",Qi.defaults);var sF=Object.freeze({__proto__:null,CategoryScale:Du,LinearScale:Ou,LogarithmicScale:Iu,RadialLinearScale:gi,TimeScale:Qi,TimeSeriesScale:Bu});const oF=[lB,NN,Dj,sF];class nF{constructor(){_e(this,"baseUrl",et.BASE_URL);_e(this,"endpoint","/reports")}async getDashboardStats(){console.log("Fetching dashboard stats from:",`${this.baseUrl}${this.endpoint}/dashboard`);const e=await fetch(`${this.baseUrl}${this.endpoint}/dashboard`,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("Dashboard response status:",e.status),!e.ok){const o=await e.text();throw console.error("Dashboard API error:",o),new Error(`HTTP error! status: ${e.status} - ${o}`)}const s=await e.json();return console.log("Dashboard result:",s),s.success&&s.data?s.data:s.data||s}async getFinancialData(e){console.log("Fetching financial data for period:",e);const s=await fetch(`${this.baseUrl}${this.endpoint}/financial/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){const n=await s.text();throw console.error("Financial API error:",n),new Error(`HTTP error! status: ${s.status} - ${n}`)}const o=await s.json();return console.log("Financial result:",o),o.data||o}async getActivityStats(){const e=await fetch(`${this.baseUrl}${this.endpoint}/activities/stats`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).data}async getClientStats(){const e=await fetch(`${this.baseUrl}${this.endpoint}/clients/stats`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).data}async getTeamPerformance(){const e=await fetch(`${this.baseUrl}${this.endpoint}/team/performance`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).data}async getExecutiveSummary(){const e=await fetch(`${this.baseUrl}${this.endpoint}/executive-summary`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).data}formatChartData(e,s,o,n){return{labels:e.map(i=>n?i[n]:i[s]),datasets:[{data:e.map(i=>i[o]),backgroundColor:["rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)","rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)","rgba(14, 165, 233, 0.8)"],borderColor:["rgba(139, 92, 246, 1)","rgba(236, 72, 153, 1)","rgba(34, 197, 94, 1)","rgba(251, 191, 36, 1)","rgba(239, 68, 68, 1)","rgba(59, 130, 246, 1)","rgba(168, 85, 247, 1)","rgba(14, 165, 233, 1)"],borderWidth:2}]}}formatTimeSeriesData(e,s,o){return{labels:e.map(n=>new Date(n._id.year,n._id.month-1,n._id.day||1).toLocaleDateString("es-ES",{year:"numeric",month:"short",...n._id.day&&{day:"numeric"}})),datasets:[{label:o,data:e.map(n=>n[s]),borderColor:"rgba(139, 92, 246, 1)",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:3,fill:!0,tension:.4}]}}formatComparisonData(e,s){const o=new Set([...e.map(i=>`${i._id.year}-${i._id.month}`),...s.map(i=>`${i._id.year}-${i._id.month}`)]),n=Array.from(o).sort().map(i=>{const[a,l]=i.split("-");return new Date(parseInt(a),parseInt(l)-1).toLocaleDateString("es-ES",{year:"numeric",month:"short"})});return{labels:n,datasets:[{label:"Ingresos",data:n.map(i=>{const a=e.find(l=>new Date(l._id.year,l._id.month-1).toLocaleDateString("es-ES",{year:"numeric",month:"short"})===i);return a?a.total:0}),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2},{label:"Egresos",data:n.map(i=>{const a=s.find(l=>new Date(l._id.year,l._id.month-1).toLocaleDateString("es-ES",{year:"numeric",month:"short"})===i);return a?a.total:0}),backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2}]}}calculateGrowthRate(e,s){return s===0?e>0?100:0:(e-s)/s*100}formatCurrency(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}formatPercentage(e){return`${e>=0?"+":""}${e.toFixed(1)}%`}}const hr=new nF,rF={class:"p-6 space-y-6 bg-gray-900/50 backdrop-blur-sm rounded-xl"},iF={class:"flex space-x-4 justify-end"},aF=["disabled"],lF={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},cF={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},dF={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-blue-500/30"},uF={class:"flex items-center justify-between"},fF={class:"text-2xl font-bold text-blue-400"},pF={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-green-500/30"},hF={class:"flex items-center justify-between"},gF={class:"text-2xl font-bold text-green-400"},mF={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-purple-500/30"},bF={class:"flex items-center justify-between"},vF={class:"text-2xl font-bold text-purple-400"},yF={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-orange-500/30"},xF={class:"flex items-center justify-between"},wF={class:"text-2xl font-bold text-orange-400"},_F={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},kF={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},CF={class:"h-64"},$F={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},EF={class:"h-64"},SF={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},AF={class:"h-64"},TF={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},PF={class:"h-64"},MF={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},RF={key:0,class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},DF={class:"space-y-4"},OF={class:"flex justify-between items-center"},IF={class:"text-blue-400 font-semibold"},LF={class:"flex justify-between items-center"},BF={class:"text-green-400 font-semibold"},NF={class:"flex justify-between items-center"},jF={class:"text-red-400 font-semibold"},FF={key:1,class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},UF={class:"space-y-3"},zF={class:"text-white font-medium"},VF={class:"text-gray-400 text-sm"},HF={class:"text-right"},qF={class:"text-green-400 font-semibold"},WF={key:2,class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},GF={class:"space-y-3"},KF={class:"text-white font-medium"},YF={class:"text-right"},JF={key:3,class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},XF={class:"space-y-4"},QF={class:"flex justify-between items-center"},ZF={class:"text-right"},eU={class:"text-white font-semibold"},tU={class:"flex justify-between items-center"},sU={class:"text-right"},oU={class:"text-white font-semibold"},nU={class:"flex justify-between items-center"},rU={class:"text-right"},iU={class:"text-white font-semibold"},aU={key:1,class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-md border border-gray-700/50"},lU={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},cU={class:"text-center p-4 bg-gray-700/50 rounded-lg border border-gray-600/50"},dU={class:"text-2xl font-bold text-green-400"},uU={class:"text-center p-4 bg-gray-700/50 rounded-lg border border-gray-600/50"},fU={class:"text-2xl font-bold text-blue-400"},pU={class:"text-center p-4 bg-gray-700/50 rounded-lg border border-gray-600/50"},hU={class:"text-2xl font-bold text-purple-400"},gU={class:"space-y-4"},mU={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bU={class:"p-3 bg-gray-700/30 rounded-lg"},vU={class:"text-xs text-gray-400"},yU={class:"p-3 bg-gray-700/30 rounded-lg"},xU={class:"text-xs text-gray-400"},wU={class:"p-3 bg-gray-700/30 rounded-lg"},_U={class:"text-xs text-gray-400"},kU={key:2,class:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-lg shadow-md border border-gray-700/50 text-center"},CU=Le({__name:"ReportsView",setup(t){Us.register(...oF);const{showError:e,showSuccess:s}=Wr(),o=I(!1),n=I("month"),i=I(null),a=I(null),l=I(null),c=I(null),d=I(null),u=I(null);I({dashboard:!1,financial:!1,activities:!1,clients:!1,team:!1,executive:!1});const f=I(),p=I(),g=I(),m=I();let v=null,x=null,_=null,k=null;const C=T=>typeof T!="number"||isNaN(T)?"0":new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(T),P=async()=>{o.value=!0;try{console.log("Loading reports data...");const[T,L,K,z,F,W]=await Promise.all([hr.getDashboardStats().catch(Z=>(console.error("Dashboard stats error:",Z),null)),hr.getFinancialData(n.value).catch(Z=>(console.error("Financial data error:",Z),null)),hr.getActivityStats().catch(Z=>(console.error("Activity stats error:",Z),null)),hr.getClientStats().catch(Z=>(console.error("Client stats error:",Z),null)),hr.getTeamPerformance().catch(Z=>(console.error("Team performance error:",Z),null)),hr.getExecutiveSummary().catch(Z=>(console.error("Executive summary error:",Z),null))]);console.log("Data loaded:",{dashboardData:T,financialResponse:L,activityResponse:K,clientResponse:z,teamResponse:F,executiveResponse:W}),i.value=T,a.value=L,l.value=K,c.value=z,d.value=F,u.value=W,await _s(),V()}catch(T){console.error("Error loading reports:",T),e(`Error al cargar los reportes: ${T instanceof Error?T.message:"Error desconocido"}`),await _s(),V()}finally{o.value=!1}},$=async()=>{await P(),s("Datos actualizados correctamente")},R=async()=>{await P(),s("Reportes actualizados")},V=()=>{setTimeout(()=>{B(),E(),S(),O()},100)},B=()=>{var z,F;if(!f.value)return;v&&v.destroy();const T=f.value.getContext("2d");if(!T)return;let L=["Ene","Feb","Mar","Abr","May","Jun"],K=[0,0,0,0,0,0];if(a.value&&a.value.transactions){const W=a.value.transactions.filter(Z=>Z._id.tipo==="ingreso").sort((Z,le)=>Z._id.month-le._id.month);W.length>0&&(L=W.map(Z=>["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][Z._id.month-1]||`Mes ${Z._id.month}`),K=W.map(Z=>Z.total))}else(F=(z=i.value)==null?void 0:z.monthly)!=null&&F.monthlyRevenue&&(L=["Este Mes"],K=[i.value.monthly.monthlyRevenue]);v=new Us(T,{type:"line",data:{labels:L,datasets:[{label:"Ingresos",data:K,borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",tension:.4,pointBackgroundColor:"rgb(147, 51, 234)",pointBorderColor:"rgb(147, 51, 234)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(209, 213, 219)"}}},scales:{x:{ticks:{color:"rgb(156, 163, 175)"},grid:{color:"rgba(156, 163, 175, 0.1)"}},y:{beginAtZero:!0,ticks:{color:"rgb(156, 163, 175)",callback:W=>"$"+C(Number(W))},grid:{color:"rgba(156, 163, 175, 0.1)"}}}}})},E=()=>{var F,W,Z,le,J,Pe;if(!p.value)return;x&&x.destroy();const T=p.value.getContext("2d");if(!T)return;let L=0,K=0,z=0;l.value&&l.value.statusDistribution?l.value.statusDistribution.forEach(me=>{switch(me._id.toLowerCase()){case"completed":case"completada":case"finalizada":L=me.count;break;case"in progress":case"en progreso":case"progreso":K=me.count;break;case"pending":case"pendiente":z=me.count;break;default:z+=me.count}}):(L=((W=(F=i.value)==null?void 0:F.monthly)==null?void 0:W.completedActivities)||0,K=Math.floor((((le=(Z=i.value)==null?void 0:Z.totals)==null?void 0:le.activities)||0)*.3),z=(((Pe=(J=i.value)==null?void 0:J.totals)==null?void 0:Pe.activities)||0)-L-K),x=new Us(T,{type:"doughnut",data:{labels:["Completadas","En Progreso","Pendientes"],datasets:[{data:[L,K,z],backgroundColor:["rgb(34, 197, 94)","rgb(147, 51, 234)","rgb(249, 115, 22)"],borderColor:["rgb(34, 197, 94)","rgb(147, 51, 234)","rgb(249, 115, 22)"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(209, 213, 219)"}}}}})},S=()=>{var z,F;if(!g.value)return;_&&_.destroy();const T=g.value.getContext("2d");if(!T)return;let L=["Ene","Feb","Mar","Abr","May","Jun"],K=[1,2,1,3,2,1];if(c.value&&c.value.growth){const W=c.value.growth.sort((Z,le)=>Z._id.month-le._id.month);if(W.length>0){const Z=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];L=W.map(le=>Z[le._id.month-1]||`Mes ${le._id.month}`),K=W.map(le=>le.newClients)}}else(F=(z=i.value)==null?void 0:z.monthly)!=null&&F.newClients&&(L=["Este Mes"],K=[i.value.monthly.newClients]);_=new Us(T,{type:"bar",data:{labels:L,datasets:[{label:"Nuevos Clientes",data:K,backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(209, 213, 219)"}}},scales:{x:{ticks:{color:"rgb(156, 163, 175)"},grid:{color:"rgba(156, 163, 175, 0.1)"}},y:{beginAtZero:!0,ticks:{color:"rgb(156, 163, 175)"},grid:{color:"rgba(156, 163, 175, 0.1)"}}}}})},O=()=>{var z,F;if(!m.value)return;k&&k.destroy();const T=m.value.getContext("2d");if(!T)return;let L=["Equipo A","Equipo B","Equipo C"],K=[15,22,18];if(d.value&&d.value.performance&&d.value.performance.length>0)L=d.value.performance.map(W=>{var Z;return((Z=W.teamMember)==null?void 0:Z.nombre)||`Miembro ${W._id}`}),K=d.value.performance.map(W=>W.completedActivities);else if((F=(z=i.value)==null?void 0:z.totals)!=null&&F.teamMembers){const W=i.value.totals.teamMembers;L=Array.from({length:W},(Z,le)=>`Miembro ${le+1}`),K=Array.from({length:W},()=>Math.floor(Math.random()*25)+10)}k=new Us(T,{type:"radar",data:{labels:L,datasets:[{label:"Actividades Completadas",data:K,borderColor:"rgb(236, 72, 153)",backgroundColor:"rgba(236, 72, 153, 0.2)",pointBackgroundColor:"rgb(236, 72, 153)",pointBorderColor:"rgb(236, 72, 153)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(209, 213, 219)"}}},scales:{r:{beginAtZero:!0,ticks:{color:"rgb(156, 163, 175)",backdropColor:"transparent"},grid:{color:"rgba(156, 163, 175, 0.3)"},angleLines:{color:"rgba(156, 163, 175, 0.3)"},pointLabels:{color:"rgb(209, 213, 219)"}}}}})};return nt(()=>{P()}),(T,L)=>{var K,z,F,W,Z,le,J,Pe,me,Y,j;return b(),y("div",rF,[r("div",iF,[ie(r("select",{"onUpdate:modelValue":L[0]||(L[0]=Q=>n.value=Q),onChange:$,class:"px-4 py-2 bg-gray-800 border border-purple-500/30 text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...L[1]||(L[1]=[r("option",{value:"month"},"Este Mes",-1),r("option",{value:"quarter"},"Este Trimestre",-1),ne(" if (clientStats.value && clientStats.value.growth) { // Procesar datos reales del backend const mo if (clientStats.value && clientStats.value.growth) { // Procesar datos reales del backend const monthlyData = clientStats.value.growth.sort((a: any, b: any) => a._id.month - b._id.month) if (monthlyData.length > 0) { const monthNames = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'] labels = monthlyData.map((item: any) => monthNames[item._id.month - 1] || `Mes ${item._id.month}`) data = monthlyData.map((item: any) => item.newClients) }a = clientStats.value.growth.sort((a, b) => a._id.month - b._id.month) if (monthlyData.length > 0) { const monthNames = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'] labels = monthlyData.map(item => monthNames[item._id.month - 1] || `Mes ${item._id.month}`) data = monthlyData.map(item => item.newClients) }",-1),r("option",{value:"year"},"Este Ao",-1)])],544),[[De,n.value]]),r("button",{onClick:R,disabled:o.value,class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[o.value?(b(),y("svg",lF,[...L[2]||(L[2]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):q("",!0),r("span",null,w(o.value?"Actualizando...":"Actualizar"),1)],8,aF)]),r("div",cF,[r("div",dF,[r("div",uF,[r("div",null,[L[3]||(L[3]=r("p",{class:"text-sm font-medium text-gray-300"},"Ingresos Totales",-1)),r("p",fF," $"+w(C(((z=(K=i.value)==null?void 0:K.monthly)==null?void 0:z.monthlyRevenue)||0)),1)]),L[4]||(L[4]=r("div",{class:"p-3 bg-blue-500/20 rounded-full"},[r("svg",{class:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),r("div",pF,[r("div",hF,[r("div",null,[L[5]||(L[5]=r("p",{class:"text-sm font-medium text-gray-300"},"Clientes Activos",-1)),r("p",gF,w(((W=(F=i.value)==null?void 0:F.totals)==null?void 0:W.clients)||0),1)]),L[6]||(L[6]=r("div",{class:"p-3 bg-green-500/20 rounded-full"},[r("svg",{class:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),r("div",mF,[r("div",bF,[r("div",null,[L[7]||(L[7]=r("p",{class:"text-sm font-medium text-gray-300"},"Actividades Completadas",-1)),r("p",vF,w(((le=(Z=i.value)==null?void 0:Z.monthly)==null?void 0:le.completedActivities)||0),1)]),L[8]||(L[8]=r("div",{class:"p-3 bg-purple-500/20 rounded-full"},[r("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),r("div",yF,[r("div",xF,[r("div",null,[L[9]||(L[9]=r("p",{class:"text-sm font-medium text-gray-300"},"Casos Activos",-1)),r("p",wF,w(((Pe=(J=i.value)==null?void 0:J.totals)==null?void 0:Pe.cases)||0),1)]),L[10]||(L[10]=r("div",{class:"p-3 bg-orange-500/20 rounded-full"},[r("svg",{class:"w-6 h-6 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1))])])]),r("div",_F,[r("div",kF,[L[11]||(L[11]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Tendencia de Ingresos",-1)),r("div",CF,[r("canvas",{ref_key:"revenueChart",ref:f},null,512)])]),r("div",$F,[L[12]||(L[12]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Actividades por Estado",-1)),r("div",EF,[r("canvas",{ref_key:"activitiesChart",ref:p},null,512)])]),r("div",SF,[L[13]||(L[13]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Crecimiento de Clientes",-1)),r("div",AF,[r("canvas",{ref_key:"clientGrowthChart",ref:g},null,512)])]),r("div",TF,[L[14]||(L[14]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Rendimiento del Equipo",-1)),r("div",PF,[r("canvas",{ref_key:"teamChart",ref:m},null,512)])])]),l.value||c.value?(b(),y("div",MF,[(me=l.value)!=null&&me.resolutionTime?(b(),y("div",RF,[L[18]||(L[18]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Tiempo de Resolucin",-1)),r("div",DF,[r("div",OF,[L[15]||(L[15]=r("span",{class:"text-gray-300"},"Promedio:",-1)),r("span",IF,w(Math.round(l.value.resolutionTime.avgResolutionTime))+" das",1)]),r("div",LF,[L[16]||(L[16]=r("span",{class:"text-gray-300"},"Mnimo:",-1)),r("span",BF,w(Math.round(l.value.resolutionTime.minResolutionTime))+" das",1)]),r("div",NF,[L[17]||(L[17]=r("span",{class:"text-gray-300"},"Mximo:",-1)),r("span",jF,w(Math.round(l.value.resolutionTime.maxResolutionTime))+" das",1)])])])):q("",!0),(Y=c.value)!=null&&Y.topActive?(b(),y("div",FF,[L[20]||(L[20]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Clientes Ms Activos",-1)),r("div",UF,[(b(!0),y(ge,null,xe(c.value.topActive.slice(0,5),Q=>(b(),y("div",{key:Q._id,class:"flex justify-between items-center"},[r("div",null,[r("p",zF,w(Q.clientName),1),r("p",VF,w(Q.totalActivities)+" actividades",1)]),r("div",HF,[r("p",qF,w(Math.round(Q.completionRate*100))+"%",1),L[19]||(L[19]=r("p",{class:"text-gray-400 text-xs"},"completadas",-1))])]))),128))])])):q("",!0),(j=d.value)!=null&&j.currentWorkload?(b(),y("div",WF,[L[21]||(L[21]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Carga de Trabajo Actual",-1)),r("div",GF,[(b(!0),y(ge,null,xe(d.value.currentWorkload.slice(0,5),Q=>{var se;return b(),y("div",{key:Q._id,class:"flex justify-between items-center"},[r("div",null,[r("p",KF,w(((se=Q.teamMember)==null?void 0:se.nombre)||`Miembro ${Q._id}`),1)]),r("div",YF,[r("span",{class:de(["px-2 py-1 rounded-full text-xs font-semibold",Q.activeWorkload>10?"bg-red-500/20 text-red-400":Q.activeWorkload>5?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"])},w(Q.activeWorkload)+" tareas ",3)])])}),128))])])):q("",!0),u.value?(b(),y("div",JF,[L[25]||(L[25]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Comparacin Mensual",-1)),r("div",XF,[r("div",QF,[L[22]||(L[22]=r("span",{class:"text-gray-300"},"Nuevos Clientes:",-1)),r("div",ZF,[r("span",eU,w(u.value.kpis.newClientsThisMonth),1),r("span",{class:de(["text-xs ml-2",u.value.growth.clients>=0?"text-green-400":"text-red-400"])},w(u.value.growth.clients>=0?"+":"")+w(u.value.growth.clients.toFixed(1))+"% ",3)])]),r("div",tU,[L[23]||(L[23]=r("span",{class:"text-gray-300"},"Actividades Completadas:",-1)),r("div",sU,[r("span",oU,w(u.value.kpis.completedThisMonth),1),r("span",{class:de(["text-xs ml-2",u.value.growth.activities>=0?"text-green-400":"text-red-400"])},w(u.value.growth.activities>=0?"+":"")+w(u.value.growth.activities.toFixed(1))+"% ",3)])]),r("div",nU,[L[24]||(L[24]=r("span",{class:"text-gray-300"},"Ingresos:",-1)),r("div",rU,[r("span",iU,"$"+w(C(u.value.kpis.revenueThisMonth)),1),r("span",{class:de(["text-xs ml-2",u.value.growth.revenue>=0?"text-green-400":"text-red-400"])},w(u.value.growth.revenue>=0?"+":"")+w(u.value.growth.revenue.toFixed(1))+"% ",3)])])])])):q("",!0)])):q("",!0),u.value?(b(),y("div",aU,[L[33]||(L[33]=r("h3",{class:"text-lg font-semibold text-white mb-4"},"Resumen Ejecutivo",-1)),r("div",lU,[r("div",cU,[L[26]||(L[26]=r("p",{class:"text-sm text-gray-300"},"Total Clientes",-1)),r("p",dU,w(u.value.kpis.totalClients),1)]),r("div",uU,[L[27]||(L[27]=r("p",{class:"text-sm text-gray-300"},"Ingresos del Ao",-1)),r("p",fU,"$"+w(C(u.value.kpis.revenueThisYear)),1)]),r("div",pU,[L[28]||(L[28]=r("p",{class:"text-sm text-gray-300"},"Actividades Totales",-1)),r("p",hU,w(u.value.kpis.totalActivities),1)])]),r("div",gU,[L[32]||(L[32]=r("h4",{class:"text-md font-semibold text-white"},"Comparativas de Crecimiento",-1)),r("div",mU,[r("div",bU,[L[29]||(L[29]=r("p",{class:"text-sm text-gray-300"},"Clientes (Mes vs Mes anterior)",-1)),r("p",{class:de(["text-lg font-semibold",u.value.growth.clients>=0?"text-green-400":"text-red-400"])},w(u.value.growth.clients>=0?"+":"")+w(u.value.growth.clients.toFixed(1))+"% ",3),r("p",vU,w(u.value.kpis.newClientsThisMonth)+" vs "+w(u.value.kpis.newClientsLastMonth),1)]),r("div",yU,[L[30]||(L[30]=r("p",{class:"text-sm text-gray-300"},"Actividades (Mes vs Mes anterior)",-1)),r("p",{class:de(["text-lg font-semibold",u.value.growth.activities>=0?"text-green-400":"text-red-400"])},w(u.value.growth.activities>=0?"+":"")+w(u.value.growth.activities.toFixed(1))+"% ",3),r("p",xU,w(u.value.kpis.completedThisMonth)+" vs "+w(u.value.kpis.completedLastMonth),1)]),r("div",wU,[L[31]||(L[31]=r("p",{class:"text-sm text-gray-300"},"Ingresos (Mes vs Mes anterior)",-1)),r("p",{class:de(["text-lg font-semibold",u.value.growth.revenue>=0?"text-green-400":"text-red-400"])},w(u.value.growth.revenue>=0?"+":"")+w(u.value.growth.revenue.toFixed(1))+"% ",3),r("p",_U,"$"+w(C(u.value.kpis.revenueThisMonth))+" vs $"+w(C(u.value.kpis.revenueLastMonth)),1)])])])])):q("",!0),!o.value&&!i.value&&!a.value&&!l.value?(b(),y("div",kU,[L[34]||(L[34]=r("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),L[35]||(L[35]=r("h3",{class:"text-xl font-semibold text-white mb-2"},"No hay datos disponibles",-1)),L[36]||(L[36]=r("p",{class:"text-gray-300 mb-4"},"Agrega algunos clientes, actividades y transacciones para ver los reportes.",-1)),r("button",{onClick:R,class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700"}," Intentar de nuevo ")])):q("",!0)])}}}),$U={class:"space-y-6"},EU={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},SU={class:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 rounded-2xl p-6 border border-blue-500/20"},AU={class:"flex items-center justify-between"},TU={class:"text-2xl font-bold text-white"},PU={class:"p-3 bg-blue-500/20 rounded-full"},MU={class:"bg-gradient-to-br from-green-500/20 to-green-600/10 rounded-2xl p-6 border border-green-500/20"},RU={class:"flex items-center justify-between"},DU={class:"text-2xl font-bold text-white"},OU={class:"p-3 bg-green-500/20 rounded-full"},IU={class:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 rounded-2xl p-6 border border-purple-500/20"},LU={class:"flex items-center justify-between"},BU={class:"text-2xl font-bold text-white"},NU={class:"p-3 bg-purple-500/20 rounded-full"},jU={class:"bg-gradient-to-br from-orange-500/20 to-orange-600/10 rounded-2xl p-6 border border-orange-500/20"},FU={class:"flex items-center justify-between"},UU={class:"text-2xl font-bold text-white"},zU={class:"p-3 bg-orange-500/20 rounded-full"},VU={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-purple-500/20"},HU={class:"flex flex-col lg:flex-row gap-4 items-center justify-between"},qU={class:"flex-1 max-w-md"},WU={class:"relative"},GU={class:"flex items-center space-x-4"},KU={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg border border-purple-500/20 overflow-hidden"},YU={class:"overflow-x-auto"},JU={class:"w-full"},XU={class:"divide-y divide-gray-700/50"},QU={class:"px-6 py-4 whitespace-nowrap"},ZU={class:"flex items-center"},ez={class:"flex-shrink-0 h-10 w-10"},tz={class:"ml-4"},sz={class:"text-sm font-medium text-white"},oz={class:"text-sm text-gray-400"},nz={class:"px-6 py-4 whitespace-nowrap"},rz={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-300"},iz={class:"px-6 py-4 whitespace-nowrap"},az={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-300"},lz={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},cz={class:"flex items-center space-x-2"},dz=["onClick","title"],uz=["onClick","title"],fz={key:0,class:"text-center py-12"},pz={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg border border-purple-500/20 p-6"},hz={class:"flex items-center justify-between mb-4"},gz={class:"flex gap-2 items-center"},mz=["disabled"],bz={key:0,class:"space-y-6"},vz={class:"text-gray-400 text-sm"},yz={class:"flex flex-wrap gap-3"},xz={class:"flex items-start justify-between"},wz={class:"flex items-center gap-3"},_z={class:"text-white font-medium"},kz={class:"text-xs text-gray-400"},Cz={class:"mt-2 text-xs text-gray-400"},$z={key:0,class:"mt-2 text-xs text-gray-400"},Ez={key:1,class:"mt-3"},Sz={class:"flex flex-wrap gap-2"},Az=["onClick"],Tz=["onClick"],Pz={class:"mt-3 flex gap-2"},Mz=["onClick"],Rz=["onClick"],Dz={key:2,class:"mt-2 flex flex-wrap gap-2"},Oz=["onClick"],Iz=["onClick"],Lz=["onClick"],Bz=["onClick"],Nz={key:1,class:"text-gray-400"},jz={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Fz={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center"},Uz={class:"relative inline-block align-middle bg-gray-800 rounded-2xl text-left overflow-hidden shadow-xl transform transition-all w-full max-w-md border border-purple-500/20"},zz={class:"px-6 py-4 border-b border-gray-700/50"},Vz={class:"text-lg font-medium text-white"},Hz={key:0},qz={key:0,value:"admin"},Wz={class:"flex items-center justify-end space-x-4 pt-4"},Gz=["disabled"],Kz={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Yz={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},Jz={class:"relative w-full max-w-lg bg-gray-800 border border-purple-500/30 rounded-2xl p-5"},Xz={class:"flex items-center justify-between mb-3"},Qz={class:"text-white font-semibold"},Zz={class:"max-h-72 overflow-auto divide-y divide-gray-700/50"},eV={class:"text-white text-sm"},tV={class:"text-gray-400 text-xs"},sV=["onClick"],oV={key:0,class:"text-gray-400 text-center py-6 text-sm"},nV={key:3,class:"fixed inset-0 z-50 flex items-center justify-center"},rV={class:"relative w-full max-w-lg bg-gray-800 border border-purple-500/30 rounded-2xl p-5"},iV={class:"flex items-center justify-between mb-3"},aV={class:"max-h-72 overflow-auto divide-y divide-gray-700/50"},lV={class:"text-white text-sm"},cV={class:"text-gray-400 text-xs"},dV=["onClick"],uV={key:0,class:"text-gray-400 text-center py-6 text-sm"},fV={class:"mt-4 text-right"},pV=Le({__name:"Team",setup(t){const e=xt(),s=Af(),o=j3(),n=I(""),i=I(""),a=I(""),l=I(!1),c=I(!1),d=I(!1),u=I(null),f=I(!1),p=Ft({nodes:[]}),g=I(!1),m=I(!1),v=I(null),x=I(""),_=re(()=>{const Q=x.value.trim().toLowerCase(),se=s.members.filter(H=>H.isActive);if(!v.value)return[];let D=se;if(m.value){const H=new Set((v.value.assignees||[]).map(ee=>ee.userId));D=D.filter(ee=>!H.has(ee._id))}return Q?D.filter(H=>H.name.toLowerCase().includes(Q)||(H.email||"").toLowerCase().includes(Q)):D}),k=Ft({name:"",email:"",password:"",role:"",department:"",position:"",phone:""}),C=re(()=>s.members.length),P=re(()=>s.members.filter(Q=>Q.isActive).length),$=re(()=>s.members.filter(Q=>Q.role==="admin"&&Q.isActive).length),R=re(()=>s.members.filter(Q=>Q.role==="manager"&&Q.isActive).length),V=re(()=>{let Q=s.members;if(n.value){const se=n.value.toLowerCase();Q=Q.filter(D=>{var H;return D.name.toLowerCase().includes(se)||D.email.toLowerCase().includes(se)||((H=D.department)==null?void 0:H.toLowerCase().includes(se))})}if(i.value&&(Q=Q.filter(se=>se.role===i.value)),a.value){const se=a.value==="true";Q=Q.filter(D=>D.isActive===se)}return Q}),B=Q=>Q?new Date(Q).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca",E=Q=>({admin:"Administrador",manager:"Gerente",employee:"Empleado",viewer:"Visualizador"})[Q]||Q,S=Q=>{const se={admin:"bg-red-500/20 text-red-400 border border-red-500/30",manager:"bg-orange-500/20 text-orange-400 border border-orange-500/30",employee:"bg-blue-500/20 text-blue-400 border border-blue-500/30",viewer:"bg-gray-500/20 text-gray-400 border border-gray-500/30"};return se[Q]||se.viewer},O=()=>{Object.assign(k,{name:"",email:"",password:"",role:"",department:"",position:"",phone:""})},T=()=>{l.value=!1,c.value=!1,u.value=null,O()},L=Q=>{u.value=Q,Object.assign(k,{name:Q.name,email:Q.email,password:"",role:Q.role,department:Q.department||"",position:Q.position||"",phone:Q.phone||""}),c.value=!0},K=async()=>{try{if(d.value=!0,l.value)await s.createMember(k);else if(u.value){const Q={...k};delete Q.password,await s.updateMember(u.value._id,Q)}T()}catch(Q){console.error("Error submitting form:",Q),alert(Q.message||"Error al guardar los datos")}finally{d.value=!1}},z=async Q=>{try{Q.isActive?await s.deleteMember(Q._id):await s.activateMember(Q._id)}catch(se){console.error("Error toggling member status:",se),alert(se.message||"Error al cambiar el estado del miembro")}};nt(async()=>{var Q,se,D;console.log(" Team component mounted"),console.log(" Can view team:",e.canViewTeam),console.log(" User role:",e.userRole),console.log(" User permissions:",(Q=e.user)==null?void 0:Q.permissions),console.log(" Team permissions specifically:",(D=(se=e.user)==null?void 0:se.permissions)==null?void 0:D.team),e.canViewTeam?(console.log(" Loading team data..."),await s.fetchTeam(),console.log(" Team members loaded:",s.members.length)):console.log(" No permission to view team"),await o.fetchChart(),Object.assign(p,o.chart)});const F=Q=>p.nodes.filter(se=>se.level===Q),W=Q=>{const se=s.members.find(D=>D._id===Q);return(se==null?void 0:se.photo)||""},Z=(Q,se)=>{v.value=Q,m.value=se,x.value="",g.value=!0},le=()=>{g.value=!1,v.value=null},J=Q=>{const se=v.value;se&&(m.value?se.assignees=[...se.assignees||[],{userId:Q._id,name:Q.name,email:Q.email}]:(se.name=Q.name,se.userId=Q._id||null,se.status="filled"),m.value||le())},Pe=Q=>{Q.userId=null,Q.status="vacant"},me=(Q,se)=>{Q.isTeam&&(Q.assignees=(Q.assignees||[]).filter(D=>D.userId!==se))},Y=Q=>{Q.parentId=null,Q.level=1},j=async()=>{var Q,se;try{f.value=!0;const D={nodes:p.nodes,updatedAt:new Date().toISOString()};await o.saveChart(D),Object.assign(p,o.chart)}catch(D){console.error("Error saving orgchart",D),alert(((se=(Q=D.response)==null?void 0:Q.data)==null?void 0:se.message)||D.message||"Error al guardar organigrama")}finally{f.value=!1}};return(Q,se)=>(b(),y("div",$U,[fe(Ut,{permissions:["create-team"],fallback:!1},{default:tt(()=>[r("button",{onClick:se[0]||(se[0]=D=>l.value=!0),class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105"},[fe(ye(lv),{class:"w-5 h-5 mr-2"}),se[16]||(se[16]=ne(" Agregar Miembro ",-1))])]),_:1}),r("div",EU,[r("div",SU,[r("div",AU,[r("div",null,[se[17]||(se[17]=r("p",{class:"text-blue-400 text-sm font-medium"},"Total Miembros",-1)),r("p",TU,w(C.value),1)]),r("div",PU,[fe(ye(mn),{class:"w-6 h-6 text-blue-400"})])])]),r("div",MU,[r("div",RU,[r("div",null,[se[18]||(se[18]=r("p",{class:"text-green-400 text-sm font-medium"},"Miembros Activos",-1)),r("p",DU,w(P.value),1)]),r("div",OU,[fe(ye(S4),{class:"w-6 h-6 text-green-400"})])])]),r("div",IU,[r("div",LU,[r("div",null,[se[19]||(se[19]=r("p",{class:"text-purple-400 text-sm font-medium"},"Administradores",-1)),r("p",BU,w($.value),1)]),r("div",NU,[fe(ye(B4),{class:"w-6 h-6 text-purple-400"})])])]),r("div",jU,[r("div",FU,[r("div",null,[se[20]||(se[20]=r("p",{class:"text-orange-400 text-sm font-medium"},"Gerentes",-1)),r("p",UU,w(R.value),1)]),r("div",zU,[fe(ye(qn),{class:"w-6 h-6 text-orange-400"})])])])]),r("div",VU,[r("div",HU,[r("div",qU,[r("div",WU,[fe(ye(av),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ie(r("input",{"onUpdate:modelValue":se[1]||(se[1]=D=>n.value=D),type:"text",placeholder:"Buscar miembros...",class:"w-full pl-10 pr-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[ke,n.value]])])]),r("div",GU,[ie(r("select",{"onUpdate:modelValue":se[2]||(se[2]=D=>i.value=D),class:"px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...se[21]||(se[21]=[Es('<option value="">Todos los roles</option><option value="admin">Administrador</option><option value="manager">Gerente</option><option value="employee">Empleado</option><option value="viewer">Visualizador</option>',5)])],512),[[De,i.value]]),ie(r("select",{"onUpdate:modelValue":se[3]||(se[3]=D=>a.value=D),class:"px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[...se[22]||(se[22]=[r("option",{value:""},"Todos los estados",-1),r("option",{value:"true"},"Activo",-1),r("option",{value:"false"},"Inactivo",-1)])],512),[[De,a.value]])])])]),r("div",KU,[r("div",YU,[r("table",JU,[se[23]||(se[23]=r("thead",{class:"bg-gray-700/50"},[r("tr",null,[r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Usuario"),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Rol"),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Departamento"),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Estado"),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"ltimo Acceso"),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Acciones")])],-1)),r("tbody",XU,[(b(!0),y(ge,null,xe(V.value,D=>(b(),y("tr",{key:D._id,class:"hover:bg-gray-700/30 transition-colors duration-200"},[r("td",QU,[r("div",ZU,[r("div",ez,[fe(Si,{name:D.name,photo:D.photo,size:"md"},null,8,["name","photo"])]),r("div",tz,[r("div",sz,w(D.name),1),r("div",oz,w(D.email),1)])])]),r("td",nz,[r("span",{class:de(["px-2 py-1 text-xs font-medium rounded-full",S(D.role)])},w(E(D.role)),3)]),r("td",rz,w(D.department||"-"),1),r("td",iz,[r("span",{class:de(["px-2 py-1 text-xs font-medium rounded-full",D.isActive?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"])},w(D.isActive?"Activo":"Inactivo"),3)]),r("td",az,w(B(D.lastLogin)),1),r("td",lz,[r("div",cz,[fe(Ut,{permissions:["edit-team"],fallback:!1},{default:tt(()=>[r("button",{onClick:H=>L(D),class:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 rounded-lg transition-all duration-200",title:"Editar "+D.name},[fe(ye(Ul),{class:"w-4 h-4"})],8,dz)]),_:2},1024),fe(Ut,{permissions:["delete-team"],fallback:!1},{default:tt(()=>[r("button",{onClick:H=>z(D),class:de(["p-2 transition-all duration-200 rounded-lg",D.isActive?"text-red-400 hover:text-red-300 hover:bg-red-500/20":"text-green-400 hover:text-green-300 hover:bg-green-500/20"]),title:D.isActive?"Desactivar":"Activar"},[(b(),Ue(vc(D.isActive?ye(kr):ye(kf)),{class:"w-4 h-4"}))],10,uz)]),_:2},1024)])])]))),128))])]),V.value.length===0?(b(),y("div",fz,[fe(ye(mn),{class:"mx-auto h-12 w-12 text-gray-500 mb-4"}),se[24]||(se[24]=r("p",{class:"text-gray-400"},"No se encontraron miembros del equipo",-1))])):q("",!0)])]),r("div",pz,[r("div",hz,[se[25]||(se[25]=r("div",null,[r("h2",{class:"text-xl font-semibold text-white"},"Organigrama"),r("p",{class:"text-gray-400 text-sm"},"Usa los botones para gestionar jerarquas y asignaciones. Solo administradores pueden guardar.")],-1)),r("div",gz,[ye(e).isAdmin?(b(),y("button",{key:0,onClick:j,disabled:f.value,class:"px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:opacity-50"},w(f.value?"Guardando...":"Guardar organigrama"),9,mz)):q("",!0)])]),p.nodes.length?(b(),y("div",bz,[(b(),y(ge,null,xe([1,2,3,4],D=>r("div",{key:D,class:"space-y-2"},[r("div",vz,"Nivel "+w(D),1),r("div",yz,[(b(!0),y(ge,null,xe(F(D),H=>{var ee;return b(),y("div",{key:H.id,class:"w-[280px]"},[r("div",{class:de(["p-3 rounded-xl",H.isTeam?"bg-gradient-to-br from-blue-900/40 to-blue-700/20 border border-blue-500/30":"bg-gray-900/60 border border-gray-700"])},[r("div",xz,[r("div",wz,[H.userId?(b(),Ue(Si,{key:0,name:H.name,photo:W(H.userId),size:"sm"},null,8,["name","photo"])):q("",!0),r("div",null,[r("div",_z,w(H.title),1),r("div",{class:de(["text-sm",H.status==="vacant"&&!((ee=H.assignees)!=null&&ee.length)?"text-yellow-300":"text-gray-300"])},w(H.name),3)])]),r("div",kz,w(H.id),1)]),r("div",Cz,"Parent: "+w(H.parentId||""),1),H.description?(b(),y("div",$z,w(H.description),1)):q("",!0),H.isTeam?(b(),y("div",Ez,[se[26]||(se[26]=r("div",{class:"text-xs text-gray-400 mb-1"},"Miembros",-1)),r("div",Sz,[(b(!0),y(ge,null,xe(H.assignees||[],he=>(b(),y("span",{key:he.userId,class:"flex items-center gap-2 px-2 py-1 text-xs rounded-full bg-blue-500/20 text-blue-200 border border-blue-500/30"},[fe(Si,{name:he.name,photo:W(he.userId),size:"xs"},null,8,["name","photo"]),r("span",null,w(he.name),1),ye(e).isAdmin?(b(),y("button",{key:0,onClick:Oe=>me(H,he.userId),class:"text-blue-300 hover:text-white"},"",8,Az)):q("",!0)]))),128)),ye(e).isAdmin?(b(),y("button",{key:0,onClick:he=>Z(H,!0),class:"px-2 py-1 text-xs rounded bg-blue-600/20 text-blue-300"},"+ Agregar",8,Tz)):q("",!0)]),r("div",Pz,[ye(e).isAdmin?(b(),y("button",{key:0,onClick:he=>Q.openParentModal(H),class:"px-2 py-1 bg-purple-600/20 text-purple-300 rounded"},"Asignar superior",8,Mz)):q("",!0),ye(e).isAdmin&&H.parentId?(b(),y("button",{key:1,onClick:he=>Y(H),class:"px-2 py-1 bg-gray-600/30 text-gray-200 rounded"},"Quitar superior",8,Rz)):q("",!0)])])):(b(),y("div",Dz,[ye(e).isAdmin?(b(),y("button",{key:0,onClick:he=>Z(H,!1),class:"px-2 py-1 bg-blue-600/20 text-blue-300 rounded"},"Asignar",8,Oz)):q("",!0),ye(e).isAdmin?(b(),y("button",{key:1,onClick:he=>Pe(H),class:"px-2 py-1 bg-orange-600/20 text-orange-300 rounded"},"Vacante",8,Iz)):q("",!0),ye(e).isAdmin?(b(),y("button",{key:2,onClick:he=>Q.openParentModal(H),class:"px-2 py-1 bg-purple-600/20 text-purple-300 rounded"},"Asignar superior",8,Lz)):q("",!0),ye(e).isAdmin&&H.parentId?(b(),y("button",{key:3,onClick:he=>Y(H),class:"px-2 py-1 bg-gray-600/30 text-gray-200 rounded"},"Quitar superior",8,Bz)):q("",!0)]))],2)])}),128))])])),64))])):(b(),y("div",Nz,"Cargando organigrama..."))]),l.value||c.value?(b(),y("div",jz,[r("div",Fz,[r("div",{class:"fixed inset-0 bg-black opacity-75",onClick:T}),r("div",Uz,[r("div",zz,[r("h3",Vz,w(l.value?"Agregar Nuevo Miembro":"Editar Miembro"),1)]),r("form",{onSubmit:Fe(K,["prevent"]),class:"p-6 space-y-4"},[r("div",null,[se[27]||(se[27]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Nombre",-1)),ie(r("input",{"onUpdate:modelValue":se[4]||(se[4]=D=>k.name=D),type:"text",required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Nombre completo"},null,512),[[ke,k.name]])]),r("div",null,[se[28]||(se[28]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Email",-1)),ie(r("input",{"onUpdate:modelValue":se[5]||(se[5]=D=>k.email=D),type:"email",required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"email@ejemplo.com"},null,512),[[ke,k.email]])]),l.value?(b(),y("div",Hz,[se[29]||(se[29]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Contrasea",-1)),ie(r("input",{"onUpdate:modelValue":se[6]||(se[6]=D=>k.password=D),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Mnimo 6 caracteres"},null,512),[[ke,k.password]])])):q("",!0),r("div",null,[se[34]||(se[34]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Rol",-1)),ie(r("select",{"onUpdate:modelValue":se[7]||(se[7]=D=>k.role=D),required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[se[30]||(se[30]=r("option",{value:""},"Seleccionar rol",-1)),ye(e).isAdmin?(b(),y("option",qz,"Administrador")):q("",!0),se[31]||(se[31]=r("option",{value:"manager"},"Gerente",-1)),se[32]||(se[32]=r("option",{value:"employee"},"Empleado",-1)),se[33]||(se[33]=r("option",{value:"viewer"},"Visualizador",-1))],512),[[De,k.role]])]),r("div",null,[se[35]||(se[35]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Departamento",-1)),ie(r("input",{"onUpdate:modelValue":se[8]||(se[8]=D=>k.department=D),type:"text",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Departamento"},null,512),[[ke,k.department]])]),r("div",null,[se[36]||(se[36]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Posicin",-1)),ie(r("input",{"onUpdate:modelValue":se[9]||(se[9]=D=>k.position=D),type:"text",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Posicin o cargo"},null,512),[[ke,k.position]])]),r("div",null,[se[37]||(se[37]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Telfono",-1)),ie(r("input",{"onUpdate:modelValue":se[10]||(se[10]=D=>k.phone=D),type:"tel",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Nmero de telfono"},null,512),[[ke,k.phone]])]),r("div",Wz,[r("button",{type:"button",onClick:T,class:"px-4 py-2 text-gray-300 hover:text-white transition-colors duration-200"}," Cancelar "),r("button",{type:"submit",disabled:d.value,class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},w(d.value?"Guardando...":l.value?"Crear":"Actualizar"),9,Gz)])],32)])])])):q("",!0),ye(s).loading?(b(),y("div",Kz,[...se[38]||(se[38]=[r("div",{class:"bg-gray-800 rounded-lg p-6 flex items-center space-x-4"},[r("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"}),r("p",{class:"text-white"},"Cargando...")],-1)])])):q("",!0),g.value?(b(),y("div",Yz,[r("div",{class:"absolute inset-0 bg-black/70",onClick:le}),r("div",Jz,[r("div",Xz,[r("h3",Qz,"Asignar "+w(m.value?"miembros":"usuario"),1),r("button",{onClick:le,class:"text-gray-300 hover:text-white"},"")]),ie(r("input",{"onUpdate:modelValue":se[11]||(se[11]=D=>x.value=D),placeholder:"Buscar por nombre o email",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white mb-3"},null,512),[[ke,x.value]]),r("div",Zz,[(b(!0),y(ge,null,xe(_.value,D=>(b(),y("div",{key:D._id,class:"flex items-center justify-between py-2"},[r("div",null,[r("div",eV,w(D.name),1),r("div",tV,w(D.email),1)]),r("button",{onClick:H=>J(D),class:"px-3 py-1 rounded bg-blue-600/20 text-blue-300 hover:bg-blue-600/30"},w(m.value?"Agregar":"Asignar"),9,sV)]))),128)),_.value.length===0?(b(),y("div",oV,"No hay usuarios que coincidan")):q("",!0)]),r("div",{class:"mt-4 text-right"},[r("button",{onClick:le,class:"px-3 py-2 rounded bg-gray-700 text-gray-200 hover:bg-gray-600"},"Cerrar")])])])):q("",!0),Q.showParentModal?(b(),y("div",nV,[r("div",{class:"absolute inset-0 bg-black/70",onClick:se[12]||(se[12]=(...D)=>Q.closeParentModal&&Q.closeParentModal(...D))}),r("div",rV,[r("div",iV,[se[39]||(se[39]=r("h3",{class:"text-white font-semibold"},"Asignar superior",-1)),r("button",{onClick:se[13]||(se[13]=(...D)=>Q.closeParentModal&&Q.closeParentModal(...D)),class:"text-gray-300 hover:text-white"},"")]),ie(r("input",{"onUpdate:modelValue":se[14]||(se[14]=D=>Q.parentSearch=D),placeholder:"Buscar por ttulo, nombre o id",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white mb-3"},null,512),[[ke,Q.parentSearch]]),r("div",aV,[(b(!0),y(ge,null,xe(Q.filteredParentNodes,D=>(b(),y("div",{key:D.id,class:"flex items-center justify-between py-2"},[r("div",null,[r("div",lV,w(D.title),1),r("div",cV,w(D.name||"")+"  Nivel "+w(D.level),1)]),r("button",{onClick:H=>Q.selectParent(D),class:"px-3 py-1 rounded bg-purple-600/20 text-purple-300 hover:bg-purple-600/30"},"Elegir",8,dV)]))),128)),Q.filteredParentNodes.length===0?(b(),y("div",uV,"No hay roles vlidos para seleccionar")):q("",!0)]),r("div",fV,[r("button",{onClick:se[15]||(se[15]=(...D)=>Q.closeParentModal&&Q.closeParentModal(...D)),class:"px-3 py-2 rounded bg-gray-700 text-gray-200 hover:bg-gray-600"},"Cerrar")])])])):q("",!0)]))}}),hV={class:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900"},gV={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},mV={class:"mb-8"},bV={class:"flex items-center justify-between"},vV={class:"flex items-center gap-4"},yV={class:"flex bg-gray-800 rounded-lg p-1"},xV={key:0,class:"flex items-center justify-center py-12"},wV={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},_V={class:"flex items-center gap-3 mb-4"},kV={class:"flex-1"},CV={class:"text-white font-semibold"},$V={class:"text-gray-400 text-sm"},EV={key:0,class:"text-gray-500 text-xs"},SV={class:"grid grid-cols-3 gap-2 mb-4"},AV={class:"bg-gray-700/30 rounded-lg p-2 text-center"},TV={class:"text-lg font-bold text-white"},PV={class:"bg-yellow-500/20 rounded-lg p-2 text-center"},MV={class:"text-lg font-bold text-yellow-300"},RV={class:"bg-green-500/20 rounded-lg p-2 text-center"},DV={class:"text-lg font-bold text-green-300"},OV={class:"space-y-2 mb-4"},IV={key:0,class:"text-center py-4"},LV={class:"flex items-start justify-between"},BV={class:"flex-1"},NV={class:"text-white text-sm font-medium break-words whitespace-normal"},jV={class:"text-gray-400 text-xs line-clamp-1 mt-1"},FV={class:"flex items-center justify-between mt-2 text-xs text-gray-400"},UV={class:"flex items-center gap-1"},zV={key:0,class:"flex items-center gap-1"},VV=["onClick"],HV={key:2,class:"bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50 overflow-hidden"},qV={class:"overflow-x-auto"},WV={class:"w-full"},GV={class:"divide-y divide-gray-700/50"},KV={class:"px-6 py-4"},YV={class:"flex flex-col"},JV={class:"text-white font-medium"},XV={class:"text-gray-400 text-sm line-clamp-1"},QV={class:"px-6 py-4"},ZV={class:"flex items-center gap-2"},eH={class:"text-white text-sm"},tH={key:0,class:"text-gray-400 text-xs"},sH={class:"px-6 py-4"},oH={class:"px-6 py-4"},nH={key:1,class:"text-gray-400 text-sm"},rH={class:"px-6 py-4 text-gray-300 text-sm"},iH={class:"px-6 py-4"},aH={class:"flex items-center gap-2"},lH=["onClick"],cH=["onClick"],dH={key:3,class:"text-center py-12"},uH={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50"},fH=Le({__name:"TeamActivities",setup(t){const e=I(!0),s=I("cards"),o=I([]),n=I([]),i=I([]),a=I(!1),l=I(!1),c=I(null),{showError:d,toast:u}=Wr(),f=re(()=>n.value.map(K=>({...K,activities:o.value.filter(z=>z.assignedTo===K._id)}))),p=re(()=>o.value.filter(K=>K.assignedTo)),g=async()=>{e.value=!0;try{const[K,z,F]=await Promise.all([Bt.getAll(),Vl.getActiveMembers(),go.getAll()]);o.value=K,n.value=z,i.value=F}catch(K){d("Error al cargar datos",K instanceof Error?K.message:"Error desconocido")}finally{e.value=!1}},m=K=>K.filter(z=>z.status==="pending").length,v=K=>K.filter(z=>z.status==="completed").length,x=K=>{const z={pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return z[K]||z.pending},_=K=>({pending:"Pendiente",completed:"Completada",cancelled:"Cancelada"})[K]||K,k=K=>{const z={low:"bg-blue-100 text-blue-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"};return z[K]||z.medium},C=K=>({low:"Baja",medium:"Media",high:"Alta",urgent:"Urgente"})[K]||"Media",P=K=>{const z={low:"text-blue-600",medium:"text-yellow-600",high:"text-orange-600",urgent:"text-red-600"};return z[K]||z.medium},$=K=>new Date(K).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),R=K=>K&&typeof K=="object"&&K.name?K.name:"Sin asignar",V=K=>{console.log("Ver actividades de:",K.name)},B=K=>{c.value=K,a.value=!0},E=K=>{c.value=K,l.value=!0},S=()=>{a.value=!1,c.value=null},O=()=>{l.value=!1,c.value=null},T=async K=>{var z,F;if((z=c.value)!=null&&z._id)try{const W=await Bt.reassignActivity(c.value._id,K),Z=o.value.findIndex(J=>J._id===c.value._id);Z!==-1&&(o.value[Z]=W);const le=K?((F=n.value.find(J=>J._id===K))==null?void 0:F.name)||"Usuario":"Nadie";u(`Actividad reasignada a ${le}`,"success"),S()}catch(W){d("Error al reasignar actividad",W instanceof Error?W.message:"Error desconocido")}},L=K=>{const z=o.value.findIndex(F=>F._id===K._id);z!==-1&&(o.value[z]=K),u("Actividad actualizada correctamente","success"),O()};return nt(()=>{g()}),(K,z)=>{const F=Wo("router-link");return b(),y("div",hV,[r("div",gV,[r("div",mV,[r("div",bV,[r("div",vV,[r("div",yV,[r("button",{onClick:z[0]||(z[0]=W=>s.value="cards"),class:de(["px-4 py-2 rounded-md text-sm font-medium transition-all",s.value==="cards"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"])},[...z[2]||(z[2]=[r("i",{class:"fas fa-th-large mr-2"},null,-1),ne(" Tarjetas ",-1)])],2),r("button",{onClick:z[1]||(z[1]=W=>s.value="table"),class:de(["px-4 py-2 rounded-md text-sm font-medium transition-all",s.value==="table"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"])},[...z[3]||(z[3]=[r("i",{class:"fas fa-table mr-2"},null,-1),ne(" Tabla ",-1)])],2)])])])]),e.value?(b(),y("div",xV,[...z[4]||(z[4]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"},null,-1)])])):s.value==="cards"?(b(),y("div",wV,[(b(!0),y(ge,null,xe(f.value,W=>(b(),y("div",{key:W._id,class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 hover:border-purple-500/50 transition-all duration-300"},[r("div",_V,[z[5]||(z[5]=r("div",{class:"w-12 h-12 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-user text-white"})],-1)),r("div",kV,[r("h3",CV,w(W.name),1),r("p",$V,w(W.role),1),W.department?(b(),y("p",EV,w(W.department),1)):q("",!0)])]),r("div",SV,[r("div",AV,[r("div",TV,w(W.activities.length),1),z[6]||(z[6]=r("div",{class:"text-xs text-gray-400"},"Total",-1))]),r("div",PV,[r("div",MV,w(m(W.activities)),1),z[7]||(z[7]=r("div",{class:"text-xs text-yellow-400"},"Pendientes",-1))]),r("div",RV,[r("div",DV,w(v(W.activities)),1),z[8]||(z[8]=r("div",{class:"text-xs text-green-400"},"Completadas",-1))])]),r("div",OV,[z[11]||(z[11]=r("h4",{class:"text-sm font-medium text-gray-300 mb-2"},"Actividades Recientes",-1)),W.activities.length===0?(b(),y("div",IV,[...z[9]||(z[9]=[r("i",{class:"fas fa-inbox text-2xl text-gray-600 mb-2"},null,-1),r("p",{class:"text-gray-400 text-sm"},"Sin actividades asignadas",-1)])])):(b(!0),y(ge,{key:1},xe(W.activities.slice(0,3),Z=>(b(),y("div",{key:Z._id,class:"bg-gray-700/30 rounded-lg p-3 border border-gray-600/50"},[r("div",LV,[r("div",BV,[r("h5",NV,w(Z.title),1),r("p",jV,w(Z.description),1)]),r("span",{class:de(["ml-2 px-2 py-1 rounded-full text-xs font-medium",x(Z.status)])},w(_(Z.status)),3)]),r("div",FV,[r("div",UV,[z[10]||(z[10]=r("i",{class:"fas fa-calendar"},null,-1)),r("span",null,w($(Z.date)),1)]),Z.priority?(b(),y("div",zV,[r("i",{class:de(["fas fa-flag",P(Z.priority)])},null,2),r("span",null,w(C(Z.priority)),1)])):q("",!0)])]))),128))]),W.activities.length>3?(b(),y("button",{key:0,onClick:Z=>V(W),class:"w-full px-4 py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 rounded-lg transition-colors text-sm"}," Ver todas las actividades ("+w(W.activities.length)+") ",9,VV)):q("",!0)]))),128))])):s.value==="table"?(b(),y("div",HV,[r("div",qV,[r("table",WV,[z[15]||(z[15]=r("thead",{class:"bg-gray-700/50"},[r("tr",null,[r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"}," Actividad "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"}," Asignado a "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"}," Estado "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"}," Prioridad "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"}," Fecha "),r("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"}," Acciones ")])],-1)),r("tbody",GV,[(b(!0),y(ge,null,xe(p.value,W=>{var Z;return b(),y("tr",{key:W._id,class:"hover:bg-gray-700/20 transition-colors"},[r("td",KV,[r("div",YV,[r("div",JV,w(W.title),1),r("div",XV,w(W.description),1)])]),r("td",QV,[r("div",ZV,[z[12]||(z[12]=r("div",{class:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center"},[r("i",{class:"fas fa-user text-white text-xs"})],-1)),r("div",null,[r("div",eH,w(R(W.assignedToUser)),1),(Z=W.assignedToUser)!=null&&Z.role?(b(),y("div",tH,w(W.assignedToUser.role),1)):q("",!0)])])]),r("td",sH,[r("span",{class:de(["px-3 py-1 rounded-full text-xs font-medium",x(W.status)])},w(_(W.status)),3)]),r("td",oH,[W.priority?(b(),y("span",{key:0,class:de(["px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",k(W.priority)])},[r("i",{class:de(["fas fa-flag",P(W.priority)])},null,2),ne(" "+w(C(W.priority)),1)],2)):(b(),y("span",nH,"-"))]),r("td",rH,w($(W.date)),1),r("td",iH,[r("div",aH,[r("button",{onClick:le=>B(W),class:"p-1 text-gray-400 hover:text-purple-400 transition-colors",title:"Reasignar"},[...z[13]||(z[13]=[r("i",{class:"fas fa-user-edit text-sm"},null,-1)])],8,lH),r("button",{onClick:le=>E(W),class:"p-1 text-gray-400 hover:text-blue-400 transition-colors",title:"Editar"},[...z[14]||(z[14]=[r("i",{class:"fas fa-edit text-sm"},null,-1)])],8,cH)])])])}),128))])])])])):q("",!0),!e.value&&f.value.length===0?(b(),y("div",dH,[r("div",uH,[z[17]||(z[17]=r("i",{class:"fas fa-users text-6xl text-gray-600 mb-4"},null,-1)),z[18]||(z[18]=r("h3",{class:"text-xl font-bold text-white mb-2"},"No hay miembros del equipo",-1)),z[19]||(z[19]=r("p",{class:"text-gray-400 mb-6"}," Agrega miembros al equipo para poder asignar actividades ",-1)),fe(F,{to:"/team",class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200"},{default:tt(()=>[...z[16]||(z[16]=[r("i",{class:"fas fa-user-plus mr-2"},null,-1),ne(" Gestionar Equipo ",-1)])]),_:1})])])):q("",!0)]),a.value?(b(),Ue(fy,{key:0,activity:c.value,"team-members":n.value,onClose:S,onAssign:T},null,8,["activity","team-members"])):q("",!0),l.value?(b(),Ue(uy,{key:1,activity:c.value,clients:i.value,onClose:O,onSaved:L},null,8,["activity","clients"])):q("",!0)])}}}),pH=Et(fH,[["__scopeId","data-v-521a79a1"]]);class hH{constructor(){_e(this,"baseUrl",`${et.BASE_URL}/accounting`)}async getAllTransactions(){try{const e=await fetch(`${this.baseUrl}/transactions`);if(!e.ok)throw new Error(`Error ${e.status}: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching transactions:",e),e}}async createTransaction(e){try{const s=await fetch(`${this.baseUrl}/transactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);return await s.json()}catch(s){throw console.error("Error creating transaction:",s),s}}async updateTransaction(e,s){try{const o=await fetch(`${this.baseUrl}/transactions/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Error ${o.status}: ${o.statusText}`);return await o.json()}catch(o){throw console.error("Error updating transaction:",o),o}}async deleteTransaction(e){try{const s=await fetch(`${this.baseUrl}/transactions/${e}`,{method:"DELETE"});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`)}catch(s){throw console.error("Error deleting transaction:",s),s}}async getAllFixedExpenses(){try{const e=await fetch(`${this.baseUrl}/fixed-expenses`);if(!e.ok)throw new Error(`Error ${e.status}: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching fixed expenses:",e),e}}async createFixedExpense(e){try{const s=await fetch(`${this.baseUrl}/fixed-expenses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);return await s.json()}catch(s){throw console.error("Error creating fixed expense:",s),s}}async updateFixedExpense(e,s){try{const o=await fetch(`${this.baseUrl}/fixed-expenses/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Error ${o.status}: ${o.statusText}`);return await o.json()}catch(o){throw console.error("Error updating fixed expense:",o),o}}async deleteFixedExpense(e){try{const s=await fetch(`${this.baseUrl}/fixed-expenses/${e}`,{method:"DELETE"});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`)}catch(s){throw console.error("Error deleting fixed expense:",s),s}}async getRecurringPayments(){try{const e=await fetch(`${this.baseUrl}/recurring-payments`);if(!e.ok)throw new Error(`Error ${e.status}: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching recurring payments:",e),e}}async markPaymentAsPaid(e){try{const s=await fetch(`${this.baseUrl}/transactions/${e}/mark-paid`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);return await s.json()}catch(s){throw console.error("Error marking payment as paid:",s),s}}async getSummary(e,s){try{let o=`${this.baseUrl}/summary`;e&&s&&(o+=`?startDate=${e}&endDate=${s}`);const n=await fetch(o);if(!n.ok)throw new Error(`Error ${n.status}: ${n.statusText}`);return await n.json()}catch(o){throw console.error("Error fetching summary:",o),o}}}const Ts=new hH,gH={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},mH={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6 border border-purple-500/20"},bH={class:"flex flex-col sm:flex-row gap-4"},vH={class:"flex-1"},yH={key:0,class:"text-center py-8"},xH={key:1,class:"text-center py-12"},wH={key:2,class:"space-y-4"},_H={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},kH={class:"flex items-center gap-4 flex-1"},CH={class:"flex-1"},$H={class:"font-bold text-white text-lg"},EH={class:"flex flex-wrap gap-4 text-sm text-gray-400 mt-1"},SH={key:0},AH={key:1},TH={class:"flex items-center gap-4"},PH={class:"text-2xl font-bold"},MH={class:"text-sm text-gray-400 capitalize"},RH={class:"flex gap-2"},DH=["onClick"],OH=["onClick"],IH=Le({__name:"TransactionsList",props:{transactions:{},loading:{type:Boolean}},setup(t){const e=I(""),s=I(""),o=I(""),n=re(()=>l.transactions.filter(c=>{const d=c.concepto.toLowerCase().includes(e.value.toLowerCase()),u=!s.value||c.tipo===s.value,f=!o.value||new Date(c.fecha).toISOString().slice(0,7)===o.value;return d&&u&&f})),i=c=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(c),a=c=>new Date(c).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),l=t;return(c,d)=>(b(),y("div",null,[r("div",gH,[d[5]||(d[5]=r("div",null,[r("h2",{class:"text-2xl font-bold text-white"},"Transacciones"),r("p",{class:"text-gray-400"},"Registra ingresos y egresos")],-1)),r("button",{onClick:d[0]||(d[0]=u=>c.$emit("create")),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center gap-2"},[...d[4]||(d[4]=[r("i",{class:"fas fa-plus"},null,-1),ne(" Nueva Transaccin ",-1)])])]),r("div",mH,[r("div",bH,[r("div",vH,[ie(r("input",{"onUpdate:modelValue":d[1]||(d[1]=u=>e.value=u),type:"text",placeholder:"Buscar por concepto...",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,e.value]])]),ie(r("select",{"onUpdate:modelValue":d[2]||(d[2]=u=>s.value=u),class:"px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},[...d[6]||(d[6]=[r("option",{value:"",class:"bg-gray-700"},"Todos los tipos",-1),r("option",{value:"ingreso",class:"bg-gray-700"},"Ingresos",-1),r("option",{value:"egreso",class:"bg-gray-700"},"Egresos",-1)])],512),[[De,s.value]]),ie(r("input",{"onUpdate:modelValue":d[3]||(d[3]=u=>o.value=u),type:"month",class:"px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,o.value]])])]),c.loading?(b(),y("div",yH,[...d[7]||(d[7]=[r("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-400"},null,-1),r("p",{class:"mt-2 text-gray-300"},"Cargando transacciones...",-1)])])):n.value.length===0?(b(),y("div",xH,[...d[8]||(d[8]=[r("i",{class:"fas fa-exchange-alt text-4xl text-gray-500 mb-4"},null,-1),r("p",{class:"text-gray-400 text-lg"},"No se encontraron transacciones",-1)])])):(b(),y("div",wH,[(b(!0),y(ge,null,xe(n.value,u=>(b(),y("div",{key:u._id,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-purple-500/20 hover:border-purple-400"},[r("div",_H,[r("div",kH,[r("div",{class:de(["p-3 rounded-full",u.tipo==="ingreso"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"])},[r("i",{class:de(["text-xl",u.tipo==="ingreso"?"fas fa-arrow-up":"fas fa-arrow-down"])},null,2)],2),r("div",CH,[r("h3",$H,w(u.concepto),1),r("div",EH,[r("span",null,[d[9]||(d[9]=r("i",{class:"fas fa-calendar mr-1"},null,-1)),ne(" "+w(a(u.fecha)),1)]),u.metodo?(b(),y("span",SH,[d[10]||(d[10]=r("i",{class:"fas fa-credit-card mr-1"},null,-1)),ne(" "+w(u.metodo),1)])):q("",!0),u.cliente_id?(b(),y("span",AH,[d[11]||(d[11]=r("i",{class:"fas fa-user mr-1"},null,-1)),ne(" Cliente: "+w(u.cliente_id),1)])):q("",!0)])])]),r("div",TH,[r("div",{class:de(["text-right",u.tipo==="ingreso"?"text-green-400":"text-red-400"])},[r("p",PH,w(u.tipo==="ingreso"?"+":"-")+"$"+w(i(u.monto)),1),r("p",MH,w(u.tipo),1)],2),r("div",RH,[r("button",{onClick:f=>c.$emit("edit",u),class:"p-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors border border-blue-500/30"},[...d[12]||(d[12]=[r("i",{class:"fas fa-edit"},null,-1)])],8,DH),r("button",{onClick:f=>c.$emit("delete",u._id),class:"p-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors border border-red-500/30"},[...d[13]||(d[13]=[r("i",{class:"fas fa-trash"},null,-1)])],8,OH)])])])]))),128))]))]))}}),LH={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},BH={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6 border border-purple-500/20"},NH={class:"flex flex-col sm:flex-row gap-4"},jH={class:"flex-1"},FH={key:0,class:"text-center py-8"},UH={key:1,class:"text-center py-12"},zH={key:2,class:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-2xl shadow-lg p-6 mb-6 border border-purple-500/30"},VH={class:"text-center"},HH={class:"text-3xl font-bold text-purple-300"},qH={class:"text-sm text-gray-400 mt-1"},WH={class:"space-y-4"},GH={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},KH={class:"flex items-center gap-4 flex-1"},YH={class:"flex-1"},JH={class:"font-bold text-white text-lg"},XH={class:"flex items-center gap-2 mt-1"},QH={class:"flex items-center gap-4"},ZH={class:"text-right"},eq={class:"text-2xl font-bold text-orange-400"},tq={class:"flex gap-2"},sq=["onClick","title"],oq=["onClick"],nq=["onClick"],rq=Le({__name:"FixedExpensesList",props:{expenses:{},loading:{type:Boolean}},emits:["create","edit","delete","refresh","toggleStatus"],setup(t,{emit:e}){const s=I(""),o=I(""),n=re(()=>d.expenses.filter(f=>{const p=f.nombre.toLowerCase().includes(s.value.toLowerCase()),g=o.value===""||f.activo.toString()===o.value;return p&&g})),i=re(()=>n.value.filter(f=>f.activo).reduce((f,p)=>f+p.monto_mensual,0)),a=re(()=>n.value.filter(f=>f.activo).length),l=f=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(f),c=f=>{u("toggleStatus",f)},d=t,u=e;return(f,p)=>(b(),y("div",null,[r("div",LH,[p[4]||(p[4]=r("div",null,[r("h2",{class:"text-2xl font-bold text-white"},"Gastos Fijos"),r("p",{class:"text-gray-400"},"Administra gastos recurrentes mensuales")],-1)),r("button",{onClick:p[0]||(p[0]=g=>f.$emit("create")),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center gap-2"},[...p[3]||(p[3]=[r("i",{class:"fas fa-plus"},null,-1),ne(" Nuevo Gasto Fijo ",-1)])])]),r("div",BH,[r("div",NH,[r("div",jH,[ie(r("input",{"onUpdate:modelValue":p[1]||(p[1]=g=>s.value=g),type:"text",placeholder:"Buscar por nombre...",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,s.value]])]),ie(r("select",{"onUpdate:modelValue":p[2]||(p[2]=g=>o.value=g),class:"px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},[...p[5]||(p[5]=[r("option",{value:"",class:"bg-gray-700"},"Todos los estados",-1),r("option",{value:"true",class:"bg-gray-700"},"Activos",-1),r("option",{value:"false",class:"bg-gray-700"},"Inactivos",-1)])],512),[[De,o.value]])])]),f.loading?(b(),y("div",FH,[...p[6]||(p[6]=[r("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-400"},null,-1),r("p",{class:"mt-2 text-gray-300"},"Cargando gastos fijos...",-1)])])):n.value.length===0?(b(),y("div",UH,[...p[7]||(p[7]=[r("i",{class:"fas fa-repeat text-4xl text-gray-500 mb-4"},null,-1),r("p",{class:"text-gray-400 text-lg"},"No se encontraron gastos fijos",-1)])])):(b(),y("div",zH,[r("div",VH,[p[8]||(p[8]=r("h3",{class:"text-xl font-bold text-white mb-2"},"Total Gastos Fijos Activos",-1)),r("p",HH," $"+w(l(i.value))+" / mes ",1),r("p",qH,w(a.value)+" gastos activos de "+w(n.value.length)+" totales ",1)])])),r("div",WH,[(b(!0),y(ge,null,xe(n.value,g=>(b(),y("div",{key:g._id,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-purple-500/20 hover:border-purple-400"},[r("div",GH,[r("div",KH,[r("div",{class:de(["p-3 rounded-full",g.activo?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"])},[r("i",{class:de(["text-xl",g.activo?"fas fa-check-circle":"fas fa-pause-circle"])},null,2)],2),r("div",YH,[r("h3",JH,w(g.nombre),1),r("div",XH,[r("span",{class:de(["px-3 py-1 rounded-full text-xs font-medium",g.activo?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"])},w(g.activo?"Activo":"Inactivo"),3),p[9]||(p[9]=r("span",{class:"text-gray-400 text-sm"},"Mensual",-1))])])]),r("div",QH,[r("div",ZH,[r("p",eq," $"+w(l(g.monto_mensual)),1),p[10]||(p[10]=r("p",{class:"text-sm text-gray-400"},"por mes",-1))]),r("div",tq,[r("button",{onClick:m=>c(g),class:de(["p-2 rounded-lg transition-colors border",g.activo?"bg-gray-600/20 text-gray-400 border-gray-500/30 hover:bg-gray-600/30":"bg-green-600/20 text-green-400 border-green-500/30 hover:bg-green-600/30"]),title:g.activo?"Desactivar":"Activar"},[r("i",{class:de(g.activo?"fas fa-pause":"fas fa-play")},null,2)],10,sq),r("button",{onClick:m=>f.$emit("edit",g),class:"p-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors border border-blue-500/30"},[...p[11]||(p[11]=[r("i",{class:"fas fa-edit"},null,-1)])],8,oq),r("button",{onClick:m=>f.$emit("delete",g._id),class:"p-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors border border-red-500/30"},[...p[12]||(p[12]=[r("i",{class:"fas fa-trash"},null,-1)])],8,nq)])])])]))),128))])]))}}),iq={key:0,class:"text-center py-8"},aq={key:1,class:"text-center py-12"},lq={key:2,class:"space-y-4"},cq={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4"},dq={class:"flex items-center gap-4 flex-1"},uq={class:"flex-1"},fq={class:"font-bold text-white text-lg"},pq={class:"flex flex-wrap gap-4 text-sm text-gray-400 mt-1"},hq={key:0},gq={key:1},mq={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4"},bq={class:"text-right"},vq={class:"text-2xl font-bold text-green-400"},yq={class:"text-sm text-gray-400"},xq={class:"flex items-center gap-2"},wq={class:"flex gap-2"},_q=["onClick","disabled"],kq={key:0,class:"fas fa-spinner fa-spin"},Cq={key:1,class:"fas fa-check"},$q=["onClick"],Eq={key:0,class:"mt-4 p-4 bg-green-500/10 rounded-xl border border-green-500/20"},Sq={class:"flex items-center gap-2 text-green-400"},Aq={class:"text-sm font-medium"},Tq=Le({__name:"RecurringPaymentsList",emits:["edit","refresh"],setup(t,{expose:e}){const s=I([]),o=I(!1),n=I(null),i=async()=>{try{o.value=!0,s.value=await Ts.getRecurringPayments()}catch(m){console.error("Error loading recurring payments:",m)}finally{o.value=!1}},a=()=>{i()},l=async m=>{if(m._id)try{n.value=m._id,await Ts.markPaymentAsPaid(m._id),await i()}catch(v){console.error("Error marking payment as paid:",v)}finally{n.value=null}},c=m=>typeof m=="object"&&m!==null?`${m.nombre||""} ${m.apellido||""}`.trim():"Cliente no especificado",d=m=>m?{mensual:"Mensual",trimestral:"Trimestral",semestral:"Semestral",anual:"Anual"}[m]||m:"No especificado",u=m=>new Date(m).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),f=m=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(m),p=m=>{if(!m.proximo_pago)return"bg-gray-500/20 text-gray-400";const v=new Date(m.proximo_pago),x=new Date,_=Math.ceil((v.getTime()-x.getTime())/(1e3*60*60*24));return _<0?"bg-red-500/20 text-red-400":_<=7?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"},g=m=>{if(!m.proximo_pago)return"Sin fecha";const v=new Date(m.proximo_pago),x=new Date,_=Math.ceil((v.getTime()-x.getTime())/(1e3*60*60*24));return _<0?`Vencido (${Math.abs(_)} das)`:_<=7?`Vence en ${_} das`:"Al da"};return nt(()=>{i()}),e({loadPayments:i,refreshPayments:a}),(m,v)=>(b(),y("div",null,[r("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},[v[1]||(v[1]=r("div",null,[r("h2",{class:"text-2xl font-bold text-white"},"Pagos Recurrentes"),r("p",{class:"text-gray-400"},"Gestiona pagos mensuales de clientes")],-1)),r("button",{onClick:a,class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center gap-2"},[...v[0]||(v[0]=[r("i",{class:"fas fa-sync-alt"},null,-1),ne(" Actualizar ",-1)])])]),o.value?(b(),y("div",iq,[...v[2]||(v[2]=[r("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-400"},null,-1),r("p",{class:"mt-2 text-gray-300"},"Cargando pagos recurrentes...",-1)])])):s.value.length===0?(b(),y("div",aq,[...v[3]||(v[3]=[r("i",{class:"fas fa-calendar-check text-4xl text-gray-500 mb-4"},null,-1),r("p",{class:"text-gray-400 text-lg"},"No hay pagos recurrentes pendientes",-1)])])):(b(),y("div",lq,[(b(!0),y(ge,null,xe(s.value,x=>(b(),y("div",{key:x._id,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-purple-500/20 hover:border-purple-400"},[r("div",cq,[r("div",dq,[v[7]||(v[7]=r("div",{class:"p-3 bg-green-500/20 text-green-400 rounded-full"},[r("i",{class:"fas fa-calendar-alt text-xl"})],-1)),r("div",uq,[r("h3",fq,w(x.concepto),1),r("div",pq,[x.cliente_id?(b(),y("span",hq,[v[4]||(v[4]=r("i",{class:"fas fa-user mr-1"},null,-1)),ne(" "+w(c(x.cliente_id)),1)])):q("",!0),r("span",null,[v[5]||(v[5]=r("i",{class:"fas fa-repeat mr-1"},null,-1)),ne(" "+w(d(x.frecuencia)),1)]),x.proximo_pago?(b(),y("span",gq,[v[6]||(v[6]=r("i",{class:"fas fa-clock mr-1"},null,-1)),ne(" Prximo: "+w(u(x.proximo_pago)),1)])):q("",!0)])])]),r("div",mq,[r("div",bq,[r("p",vq," $"+w(f(x.monto)),1),r("p",yq,w(d(x.frecuencia)),1)]),r("div",xq,[r("span",{class:de(["px-3 py-1 rounded-full text-xs font-medium",p(x)])},w(g(x)),3)]),r("div",wq,[r("button",{onClick:_=>l(x),disabled:n.value===x._id,class:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors border border-green-500/30 disabled:opacity-50 flex items-center gap-2"},[n.value===x._id?(b(),y("i",kq)):(b(),y("i",Cq)),v[8]||(v[8]=ne(" Marcar Pagado ",-1))],8,_q),r("button",{onClick:_=>m.$emit("edit",x),class:"p-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors border border-blue-500/30"},[...v[9]||(v[9]=[r("i",{class:"fas fa-edit"},null,-1)])],8,$q)])])]),x.estado_pago==="pagado"?(b(),y("div",Eq,[r("div",Sq,[v[10]||(v[10]=r("i",{class:"fas fa-check-circle"},null,-1)),r("span",Aq,"ltimo pago registrado: "+w(u(x.fecha)),1)])])):q("",!0)]))),128))]))]))}}),Pq={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Mq={class:"lg:col-span-2"},Rq={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-purple-500/20"},Dq={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oq={class:"bg-gradient-to-br from-green-500/10 to-red-500/10 rounded-xl p-4 border border-purple-500/20"},Iq={class:"space-y-3"},Lq={class:"flex justify-between items-center"},Bq={class:"text-green-400 font-bold"},Nq={class:"flex justify-between items-center"},jq={class:"text-red-400 font-bold"},Fq={class:"flex justify-between items-center"},Uq={class:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-xl p-4 border border-purple-500/20"},zq={class:"space-y-3"},Vq={class:"flex justify-between items-center"},Hq={class:"text-yellow-400 font-bold"},qq={class:"flex justify-between items-center"},Wq={class:"text-orange-400 font-bold"},Gq={class:"flex justify-between items-center"},Kq={class:"text-gray-400 font-bold"},Yq={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-purple-500/20"},Jq={class:"flex justify-between items-center mb-6"},Xq={class:"px-3 py-1 bg-red-500/20 text-red-400 rounded-full text-sm font-medium"},Qq={key:0,class:"text-center py-8"},Zq={key:1,class:"space-y-3 max-h-96 overflow-y-auto"},eW={class:"flex justify-between items-start"},tW={class:"flex-1"},sW={class:"font-semibold text-white"},oW={key:0,class:"text-sm text-gray-400"},nW={key:1,class:"text-sm text-red-400"},rW={class:"text-right"},iW={class:"font-bold text-red-400"},aW=["onClick"],lW=Le({__name:"AccountingSummary",props:{summary:{}},emits:["markAsPaid"],setup(t){const e=t,s=a=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a),o=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),n=a=>typeof a=="object"&&a!==null?`${a.nombre||""} ${a.apellido||""}`.trim():"Cliente no especificado",i=()=>e.summary.balance<=0?"0":(e.summary.gastos_fijos_mensuales/Math.abs(e.summary.balance)*100).toFixed(1);return(a,l)=>(b(),y("div",Pq,[r("div",Mq,[r("div",Rq,[l[9]||(l[9]=r("h3",{class:"text-xl font-bold text-white mb-6"},"Resumen Financiero",-1)),r("div",Dq,[r("div",Oq,[l[4]||(l[4]=r("h4",{class:"text-lg font-semibold text-white mb-4"},"Flujo de Efectivo",-1)),r("div",Iq,[r("div",Lq,[l[0]||(l[0]=r("span",{class:"text-green-400 flex items-center"},[r("i",{class:"fas fa-arrow-up mr-2"}),ne(" Ingresos ")],-1)),r("span",Bq," $"+w(s(a.summary.ingresos)),1)]),r("div",Nq,[l[1]||(l[1]=r("span",{class:"text-red-400 flex items-center"},[r("i",{class:"fas fa-arrow-down mr-2"}),ne(" Egresos ")],-1)),r("span",jq," $"+w(s(a.summary.egresos)),1)]),l[3]||(l[3]=r("hr",{class:"border-gray-600"},null,-1)),r("div",Fq,[l[2]||(l[2]=r("span",{class:"text-white font-semibold"},"Balance",-1)),r("span",{class:de(["font-bold text-lg",a.summary.balance>=0?"text-green-400":"text-red-400"])}," $"+w(s(a.summary.balance)),3)])])]),r("div",Uq,[l[8]||(l[8]=r("h4",{class:"text-lg font-semibold text-white mb-4"},"Gastos Fijos",-1)),r("div",zq,[r("div",Vq,[l[5]||(l[5]=r("span",{class:"text-yellow-400 flex items-center"},[r("i",{class:"fas fa-calendar-alt mr-2"}),ne(" Mensuales ")],-1)),r("span",Hq," $"+w(s(a.summary.gastos_fijos_mensuales)),1)]),r("div",qq,[l[6]||(l[6]=r("span",{class:"text-orange-400 flex items-center"},[r("i",{class:"fas fa-calendar mr-2"}),ne(" Proyeccin Anual ")],-1)),r("span",Wq," $"+w(s(a.summary.gastos_fijos_mensuales*12)),1)]),r("div",Gq,[l[7]||(l[7]=r("span",{class:"text-gray-400 flex items-center"},[r("i",{class:"fas fa-percentage mr-2"}),ne(" % del Balance ")],-1)),r("span",Kq,w(i())+"% ",1)])])])])])]),r("div",null,[r("div",Yq,[r("div",Jq,[l[10]||(l[10]=r("h3",{class:"text-xl font-bold text-white"},"Pagos Pendientes",-1)),r("span",Xq,w(a.summary.pagos_pendientes.length),1)]),a.summary.pagos_pendientes.length===0?(b(),y("div",Qq,[...l[11]||(l[11]=[r("i",{class:"fas fa-check-circle text-4xl text-green-500 mb-3"},null,-1),r("p",{class:"text-gray-400"},"Todos los pagos al da!",-1)])])):(b(),y("div",Zq,[(b(!0),y(ge,null,xe(a.summary.pagos_pendientes,c=>(b(),y("div",{key:c._id,class:"p-4 bg-gradient-to-r from-red-500/10 to-pink-500/10 rounded-xl border border-red-500/20"},[r("div",eW,[r("div",tW,[r("h4",sW,w(c.concepto),1),c.cliente_id?(b(),y("p",oW,[l[12]||(l[12]=r("i",{class:"fas fa-user mr-1"},null,-1)),ne(" "+w(n(c.cliente_id)),1)])):q("",!0),c.proximo_pago?(b(),y("p",nW,[l[13]||(l[13]=r("i",{class:"fas fa-clock mr-1"},null,-1)),ne(" Vence: "+w(o(c.proximo_pago)),1)])):q("",!0)]),r("div",rW,[r("p",iW," $"+w(s(c.monto)),1),r("button",{onClick:d=>a.$emit("markAsPaid",c),class:"mt-2 px-3 py-1 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors border border-green-500/30 text-xs"},[...l[14]||(l[14]=[r("i",{class:"fas fa-check mr-1"},null,-1),ne(" Marcar Pagado ",-1)])],8,aW)])])]))),128))]))])])]))}}),cW={class:"p-6 border-b border-gray-700"},dW={class:"flex justify-between items-center"},uW={class:"text-xl font-bold text-white"},fW={key:0},pW=["value"],hW={key:1},gW={class:"flex items-center mb-4"},mW={key:0},bW={class:"flex gap-3 pt-4"},vW=["disabled"],yW={key:0},xW={key:1},wW=Le({__name:"TransactionForm",props:{show:{type:Boolean},editingTransaction:{},loading:{type:Boolean}},emits:["close","submit"],setup(t,{emit:e}){const s=t,o=e,n=I([]),i=I({tipo:"",concepto:"",monto:0,fecha:"",metodo:"",cliente_id:"",es_recurrente:!1,frecuencia:"",estado_pago:"pendiente"}),a=()=>{i.value={tipo:"",concepto:"",monto:0,fecha:new Date().toISOString().split("T")[0],metodo:"",cliente_id:"",es_recurrente:!1,frecuencia:"",estado_pago:"pendiente"}},l=()=>{o("close")},c=()=>{const u={tipo:i.value.tipo,concepto:i.value.concepto,monto:i.value.monto,fecha:i.value.fecha,metodo:i.value.metodo||void 0,cliente_id:i.value.cliente_id||void 0,es_recurrente:i.value.es_recurrente,frecuencia:i.value.es_recurrente?i.value.frecuencia:void 0,estado_pago:i.value.estado_pago};o("submit",u)},d=async()=>{try{n.value=await go.getClients()}catch(u){console.error("Error loading clients:",u),n.value=[]}};return Rt(()=>s.editingTransaction,u=>{u?i.value={tipo:u.tipo,concepto:u.concepto,monto:u.monto,fecha:u.fecha,metodo:u.metodo||"",cliente_id:u.cliente_id||"",es_recurrente:u.es_recurrente||!1,frecuencia:u.frecuencia||"",estado_pago:u.estado_pago||"pendiente"}:a()},{immediate:!0}),Rt(()=>s.show,u=>{u&&!s.editingTransaction&&a()}),nt(()=>{d(),a()}),(u,f)=>u.show?(b(),y("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:l},[r("div",{class:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto border border-purple-500/20",onClick:f[8]||(f[8]=Fe(()=>{},["stop"]))},[r("div",cW,[r("div",dW,[r("h2",uW,w(u.editingTransaction?"Editar Transaccin":"Nueva Transaccin"),1),r("button",{onClick:l,class:"text-gray-400 hover:text-white transition-colors"},[...f[9]||(f[9]=[r("i",{class:"fas fa-times text-xl"},null,-1)])])])]),r("form",{onSubmit:Fe(c,["prevent"]),class:"p-6 space-y-6"},[r("div",null,[f[11]||(f[11]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Tipo de Transaccin * ",-1)),ie(r("select",{"onUpdate:modelValue":f[0]||(f[0]=p=>i.value.tipo=p),required:"",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},[...f[10]||(f[10]=[r("option",{value:"",class:"bg-gray-700"},"Seleccionar tipo",-1),r("option",{value:"ingreso",class:"bg-gray-700"},"Ingreso",-1),r("option",{value:"egreso",class:"bg-gray-700"},"Egreso",-1)])],512),[[De,i.value.tipo]])]),r("div",null,[f[12]||(f[12]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Concepto * ",-1)),ie(r("input",{"onUpdate:modelValue":f[1]||(f[1]=p=>i.value.concepto=p),type:"text",required:"",placeholder:"Descripcin de la transaccin",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,i.value.concepto]])]),r("div",null,[f[13]||(f[13]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Monto * ",-1)),ie(r("input",{"onUpdate:modelValue":f[2]||(f[2]=p=>i.value.monto=p),type:"number",required:"",min:"0",step:"0.01",placeholder:"0.00",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,i.value.monto,void 0,{number:!0}]])]),r("div",null,[f[14]||(f[14]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Fecha * ",-1)),ie(r("input",{"onUpdate:modelValue":f[3]||(f[3]=p=>i.value.fecha=p),type:"date",required:"",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,i.value.fecha]])]),r("div",null,[f[16]||(f[16]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Mtodo de Pago ",-1)),ie(r("select",{"onUpdate:modelValue":f[4]||(f[4]=p=>i.value.metodo=p),class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},[...f[15]||(f[15]=[Es('<option value="" class="bg-gray-700">Seleccionar mtodo</option><option value="efectivo" class="bg-gray-700">Efectivo</option><option value="transferencia" class="bg-gray-700">Transferencia</option><option value="tarjeta_credito" class="bg-gray-700">Tarjeta de Crdito</option><option value="tarjeta_debito" class="bg-gray-700">Tarjeta de Dbito</option><option value="cheque" class="bg-gray-700">Cheque</option><option value="pse" class="bg-gray-700">PSE</option><option value="nequi" class="bg-gray-700">Nequi</option><option value="daviplata" class="bg-gray-700">Daviplata</option>',9)])],512),[[De,i.value.metodo]])]),n.value.length>0?(b(),y("div",fW,[f[18]||(f[18]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Cliente (opcional) ",-1)),ie(r("select",{"onUpdate:modelValue":f[5]||(f[5]=p=>i.value.cliente_id=p),class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},[f[17]||(f[17]=r("option",{value:"",class:"bg-gray-700"},"Sin cliente asignado",-1)),(b(!0),y(ge,null,xe(n.value,p=>(b(),y("option",{key:p._id,value:p._id,class:"bg-gray-700"},w(p.nombre)+" "+w(p.apellido),9,pW))),128))],512),[[De,i.value.cliente_id]])])):q("",!0),i.value.tipo==="ingreso"?(b(),y("div",hW,[r("div",gW,[ie(r("input",{"onUpdate:modelValue":f[6]||(f[6]=p=>i.value.es_recurrente=p),type:"checkbox",id:"es_recurrente",class:"h-4 w-4 text-purple-600 focus:ring-purple-500 bg-gray-700 border-gray-600 rounded"},null,512),[[_c,i.value.es_recurrente]]),f[19]||(f[19]=r("label",{for:"es_recurrente",class:"ml-3 text-white"}," Es un pago recurrente ",-1))]),i.value.es_recurrente?(b(),y("div",mW,[f[21]||(f[21]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Frecuencia de Pago * ",-1)),ie(r("select",{"onUpdate:modelValue":f[7]||(f[7]=p=>i.value.frecuencia=p),required:"",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},[...f[20]||(f[20]=[Es('<option value="" class="bg-gray-700">Seleccionar frecuencia</option><option value="mensual" class="bg-gray-700">Mensual</option><option value="trimestral" class="bg-gray-700">Trimestral</option><option value="semestral" class="bg-gray-700">Semestral</option><option value="anual" class="bg-gray-700">Anual</option>',5)])],512),[[De,i.value.frecuencia]])])):q("",!0)])):q("",!0),r("div",bW,[r("button",{type:"button",onClick:l,class:"flex-1 px-4 py-3 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:u.loading,class:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 disabled:opacity-50"},[u.loading?(b(),y("span",yW,[...f[22]||(f[22]=[r("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),ne(" Guardando... ",-1)])])):(b(),y("span",xW,w(u.editingTransaction?"Actualizar":"Crear"),1))],8,vW)])],32)])])):q("",!0)}}),_W={class:"p-6 border-b border-gray-700"},kW={class:"flex justify-between items-center"},CW={class:"text-xl font-bold text-white"},$W={class:"relative"},EW={class:"space-y-3"},SW={class:"flex items-center"},AW={class:"flex items-center"},TW={key:0,class:"bg-gradient-to-r from-purple-600/10 to-pink-600/10 rounded-xl p-4 border border-purple-500/20"},PW={class:"flex items-center justify-between"},MW={class:"flex items-center gap-3"},RW={class:"font-medium text-white"},DW={class:"text-right"},OW={class:"text-lg font-bold text-orange-400"},IW={class:"flex gap-3 pt-4"},LW=["disabled"],BW={key:0},NW={key:1},jW=Le({__name:"FixedExpenseForm",props:{show:{type:Boolean},editingExpense:{},loading:{type:Boolean}},emits:["close","submit"],setup(t,{emit:e}){const s=t,o=e,n=I({nombre:"",monto_mensual:0,activo:!0}),i=()=>{n.value={nombre:"",monto_mensual:0,activo:!0}},a=()=>{o("close")},l=()=>{const d={nombre:n.value.nombre,monto_mensual:n.value.monto_mensual,activo:n.value.activo};o("submit",d)},c=d=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(d);return Rt(()=>s.editingExpense,d=>{d?n.value={nombre:d.nombre,monto_mensual:d.monto_mensual,activo:d.activo}:i()},{immediate:!0}),Rt(()=>s.show,d=>{d&&!s.editingExpense&&i()}),(d,u)=>d.show?(b(),y("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:a},[r("div",{class:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto border border-purple-500/20",onClick:u[4]||(u[4]=Fe(()=>{},["stop"]))},[r("div",_W,[r("div",kW,[r("h2",CW,w(d.editingExpense?"Editar Gasto Fijo":"Nuevo Gasto Fijo"),1),r("button",{onClick:a,class:"text-gray-400 hover:text-white transition-colors"},[...u[5]||(u[5]=[r("i",{class:"fas fa-times text-xl"},null,-1)])])])]),r("form",{onSubmit:Fe(l,["prevent"]),class:"p-6 space-y-6"},[r("div",null,[u[6]||(u[6]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Nombre del Gasto * ",-1)),ie(r("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>n.value.nombre=f),type:"text",required:"",placeholder:"Ej: Arriendo oficina, Servicios pblicos, etc.",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,n.value.nombre]])]),r("div",null,[u[8]||(u[8]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Monto Mensual * ",-1)),r("div",$W,[ie(r("input",{"onUpdate:modelValue":u[1]||(u[1]=f=>n.value.monto_mensual=f),type:"number",required:"",min:"0",step:"0.01",placeholder:"0.00",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"},null,512),[[ke,n.value.monto_mensual,void 0,{number:!0}]]),u[7]||(u[7]=r("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[r("span",{class:"text-gray-400 text-sm"},"/ mes")],-1))])]),r("div",null,[u[11]||(u[11]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Estado ",-1)),r("div",EW,[r("div",SW,[ie(r("input",{"onUpdate:modelValue":u[2]||(u[2]=f=>n.value.activo=f),value:!0,type:"radio",id:"activo",name:"estado",class:"h-4 w-4 text-purple-600 focus:ring-purple-500 bg-gray-700 border-gray-600"},null,512),[[Ui,n.value.activo]]),u[9]||(u[9]=r("label",{for:"activo",class:"ml-3 flex items-center"},[r("span",{class:"text-white font-medium"},"Activo"),r("span",{class:"ml-2 px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full"}," Se incluye en clculos ")],-1))]),r("div",AW,[ie(r("input",{"onUpdate:modelValue":u[3]||(u[3]=f=>n.value.activo=f),value:!1,type:"radio",id:"inactivo",name:"estado",class:"h-4 w-4 text-purple-600 focus:ring-purple-500 bg-gray-700 border-gray-600"},null,512),[[Ui,n.value.activo]]),u[10]||(u[10]=r("label",{for:"inactivo",class:"ml-3 flex items-center"},[r("span",{class:"text-white font-medium"},"Inactivo"),r("span",{class:"ml-2 px-2 py-1 bg-gray-500/20 text-gray-400 text-xs rounded-full"}," No se incluye en clculos ")],-1))])])]),n.value.nombre&&n.value.monto_mensual>0?(b(),y("div",TW,[u[13]||(u[13]=r("h3",{class:"text-sm font-medium text-gray-300 mb-2"},"Vista Previa:",-1)),r("div",PW,[r("div",MW,[r("div",{class:de(["p-2 rounded-full",n.value.activo?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"])},[r("i",{class:de([n.value.activo?"fas fa-check-circle":"fas fa-pause-circle"])},null,2)],2),r("div",null,[r("p",RW,w(n.value.nombre),1),r("span",{class:de(["px-2 py-1 rounded-full text-xs font-medium",n.value.activo?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"])},w(n.value.activo?"Activo":"Inactivo"),3)])]),r("div",DW,[r("p",OW," $"+w(c(n.value.monto_mensual)),1),u[12]||(u[12]=r("p",{class:"text-xs text-gray-400"},"por mes",-1))])])])):q("",!0),r("div",IW,[r("button",{type:"button",onClick:a,class:"flex-1 px-4 py-3 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:d.loading,class:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 disabled:opacity-50"},[d.loading?(b(),y("span",BW,[...u[14]||(u[14]=[r("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),ne(" Guardando... ",-1)])])):(b(),y("span",NW,w(d.editingExpense?"Actualizar":"Crear"),1))],8,LW)])],32)])])):q("",!0)}}),FW={class:"p-6"},UW={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6 border border-purple-500/20"},zW={class:"flex flex-wrap gap-2"},VW=["onClick"],HW={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},qW={class:"bg-gradient-to-br from-green-500/20 to-green-600/10 rounded-2xl p-6 border border-green-500/20"},WW={class:"flex items-center justify-between"},GW={class:"text-2xl font-bold text-white"},KW={class:"bg-gradient-to-br from-red-500/20 to-red-600/10 rounded-2xl p-6 border border-red-500/20"},YW={class:"flex items-center justify-between"},JW={class:"text-2xl font-bold text-white"},XW={class:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 rounded-2xl p-6 border border-blue-500/20"},QW={class:"flex items-center justify-between"},ZW={class:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 rounded-2xl p-6 border border-yellow-500/20"},eG={class:"flex items-center justify-between"},tG={class:"text-2xl font-bold text-white"},sG={key:0,class:"animate-fade-in"},oG={key:1,class:"animate-fade-in"},nG={key:2,class:"animate-fade-in"},rG={key:3,class:"animate-fade-in"},iG=Le({__name:"AccountingView",setup(t,{expose:e}){const{showSuccess:s,showError:o,confirmDelete:n,showLoading:i,closeLoading:a}=Wr(),l=I("summary"),c=I(!1),d=I(!1),u=I([]),f=I([]),p=I({ingresos:0,egresos:0,balance:0,gastos_fijos_mensuales:0,pagos_pendientes:[]}),g=I(!1),m=I(!1),v=I(null),x=I(null),_=I(null),k=[{id:"summary",name:"Resumen",icon:"fas fa-chart-pie"},{id:"transactions",name:"Transacciones",icon:"fas fa-exchange-alt"},{id:"fixed-expenses",name:"Gastos Fijos",icon:"fas fa-calendar-check"},{id:"recurring-payments",name:"Pagos Recurrentes",icon:"fas fa-repeat"}],C=re(()=>p.value.ingresos),P=re(()=>p.value.egresos),$=re(()=>p.value.balance);re(()=>p.value.gastos_fijos_mensuales);const R=j=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(j),V=async()=>{try{c.value=!0,u.value=await Ts.getAllTransactions()}catch(j){console.error("Error loading transactions:",j)}finally{c.value=!1}},B=async()=>{try{c.value=!0,f.value=await Ts.getAllFixedExpenses()}catch(j){console.error("Error loading fixed expenses:",j)}finally{c.value=!1}},E=async()=>{try{p.value=await Ts.getSummary()}catch(j){console.error("Error loading summary:",j)}},S=async()=>{await Promise.all([V(),B(),E()])},O=()=>{v.value=null,g.value=!0},T=j=>{v.value=j,g.value=!0},L=()=>{g.value=!1,v.value=null},K=async j=>{try{d.value=!0,v.value?(await Ts.updateTransaction(v.value._id,j),s("Transaccin actualizada!","La transaccin ha sido actualizada exitosamente")):(await Ts.createTransaction(j),s("Transaccin creada!","La transaccin ha sido creada exitosamente")),L(),S()}catch(Q){o("Error al guardar transaccin",Q instanceof Error?Q.message:"Error desconocido")}finally{d.value=!1}},z=async j=>{const Q=u.value.find(H=>H._id===j),se=(Q==null?void 0:Q.concepto)||"esta transaccin";if((await n(se,"transaccin")).isConfirmed)try{i("Eliminando transaccin..."),await Ts.deleteTransaction(j),S(),a(),s("Transaccin eliminada!","La transaccin ha sido eliminada exitosamente")}catch(H){a(),o("Error al eliminar transaccin",H instanceof Error?H.message:"Error desconocido")}},F=()=>{x.value=null,m.value=!0},W=j=>{x.value=j,m.value=!0},Z=()=>{m.value=!1,x.value=null},le=async j=>{try{d.value=!0,x.value?(await Ts.updateFixedExpense(x.value._id,j),s("Gasto fijo actualizado!","El gasto fijo ha sido actualizado exitosamente")):(await Ts.createFixedExpense(j),s("Gasto fijo creado!","El gasto fijo ha sido creado exitosamente")),Z(),S()}catch(Q){o("Error al guardar gasto fijo",Q instanceof Error?Q.message:"Error desconocido")}finally{d.value=!1}},J=async j=>{const Q=f.value.find(H=>H._id===j),se=(Q==null?void 0:Q.concepto)||"este gasto fijo";if((await n(se,"gasto fijo")).isConfirmed)try{i("Eliminando gasto fijo..."),await Ts.deleteFixedExpense(j),S(),a(),s("Gasto fijo eliminado!","El gasto fijo ha sido eliminado exitosamente")}catch(H){a(),o("Error al eliminar gasto fijo",H instanceof Error?H.message:"Error desconocido")}},Pe=async j=>{try{const Q={...j,activo:!j.activo};await Ts.updateFixedExpense(j._id,Q),S()}catch(Q){console.error("Error toggling expense status:",Q)}},me=j=>{v.value=j,g.value=!0},Y=async j=>{if(j._id)try{await Ts.markPaymentAsPaid(j._id),S()}catch(Q){console.error("Error marking payment as paid:",Q)}};return nt(()=>{S()}),e({loadData:S,loadTransactions:V,loadFixedExpenses:B,loadSummary:E}),(j,Q)=>(b(),y("div",FW,[r("div",UW,[r("div",zW,[(b(),y(ge,null,xe(k,se=>r("button",{key:se.id,onClick:D=>l.value=se.id,class:de(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",l.value===se.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"])},[r("i",{class:de([se.icon,"mr-2"])},null,2),ne(" "+w(se.name),1)],10,VW)),64))])]),r("div",HW,[r("div",qW,[r("div",WW,[r("div",null,[Q[0]||(Q[0]=r("p",{class:"text-green-400 text-sm font-medium"},"Ingresos Totales",-1)),r("p",GW,"$"+w(R(C.value)),1)]),Q[1]||(Q[1]=r("div",{class:"p-3 bg-green-500/20 rounded-full"},[r("i",{class:"fas fa-arrow-up text-green-400 text-xl"})],-1))])]),r("div",KW,[r("div",YW,[r("div",null,[Q[2]||(Q[2]=r("p",{class:"text-red-400 text-sm font-medium"},"Egresos Totales",-1)),r("p",JW,"$"+w(R(P.value)),1)]),Q[3]||(Q[3]=r("div",{class:"p-3 bg-red-500/20 rounded-full"},[r("i",{class:"fas fa-arrow-down text-red-400 text-xl"})],-1))])]),r("div",XW,[r("div",QW,[r("div",null,[Q[4]||(Q[4]=r("p",{class:"text-blue-400 text-sm font-medium"},"Balance Neto",-1)),r("p",{class:de(["text-2xl font-bold",$.value>=0?"text-white":"text-red-400"])},"$"+w(R($.value)),3)]),Q[5]||(Q[5]=r("div",{class:"p-3 bg-blue-500/20 rounded-full"},[r("i",{class:"fas fa-balance-scale text-blue-400 text-xl"})],-1))])]),r("div",ZW,[r("div",eG,[r("div",null,[Q[6]||(Q[6]=r("p",{class:"text-yellow-400 text-sm font-medium"},"Pagos Pendientes",-1)),r("p",tG,w(p.value.pagos_pendientes.length),1)]),Q[7]||(Q[7]=r("div",{class:"p-3 bg-yellow-500/20 rounded-full"},[r("i",{class:"fas fa-clock text-yellow-400 text-xl"})],-1))])])]),l.value==="summary"?(b(),y("div",sG,[fe(lW,{summary:p.value,onMarkAsPaid:Y},null,8,["summary"])])):l.value==="transactions"?(b(),y("div",oG,[fe(IH,{transactions:u.value,loading:c.value,onCreate:O,onEdit:T,onDelete:z,onRefresh:V},null,8,["transactions","loading"])])):l.value==="fixed-expenses"?(b(),y("div",nG,[fe(rq,{expenses:f.value,loading:c.value,onCreate:F,onEdit:W,onDelete:J,onRefresh:B,onToggleStatus:Pe},null,8,["expenses","loading"])])):l.value==="recurring-payments"?(b(),y("div",rG,[fe(Tq,{ref_key:"recurringPaymentsRef",ref:_,onEdit:me,onRefresh:S},null,512)])):q("",!0),fe(wW,{show:g.value,editingTransaction:v.value,loading:d.value,onClose:L,onSubmit:K},null,8,["show","editingTransaction","loading"]),fe(jW,{show:m.value,editingExpense:x.value,loading:d.value,onClose:Z,onSubmit:le},null,8,["show","editingExpense","loading"])]))}});class aG{constructor(){_e(this,"apiUrl",`${et.BASE_URL}/cases`)}async getAllCases(e={}){const s=new URLSearchParams;Object.entries(e).forEach(([i,a])=>{a!=null&&a!==""&&s.append(i,a.toString())});const o=s.toString()?`${this.apiUrl}?${s}`:this.apiUrl,n=await fetch(o);if(!n.ok)throw new Error("Error al obtener los casos");return await n.json()}async getAll(e={}){return(await this.getAllCases(e)).cases||[]}async getCaseById(e){const s=await fetch(`${this.apiUrl}/${e}`);if(!s.ok)throw new Error("Error al obtener el caso");return await s.json()}async createCase(e){const s=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al crear el caso");return await s.json()}async updateCase(e,s){const o=await fetch(`${this.apiUrl}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error("Error al actualizar el caso");return await o.json()}async deleteCase(e){if(!(await fetch(`${this.apiUrl}/${e}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar el caso")}async create(e){const s=await fetch(this.apiUrl,{method:"POST",body:e});if(!s.ok)throw new Error("Error al crear el caso");return await s.json()}async update(e,s){const o=await fetch(`${this.apiUrl}/${e}`,{method:"PUT",body:s});if(!o.ok)throw new Error("Error al actualizar el caso");return await o.json()}async uploadFiles(e,s){const o=new FormData;for(let i=0;i<s.length;i++)o.append("files",s[i]);const n=await fetch(`${this.apiUrl}/${e}/upload`,{method:"POST",body:o});if(!n.ok)throw new Error("Error al subir los archivos");return await n.json()}async deleteFile(e,s){if(!(await fetch(`${this.apiUrl}/${e}/files/${s}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar el archivo")}async addComment(e,s){const o=await fetch(`${this.apiUrl}/${e}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error("Error al agregar el comentario");return await o.json()}async updateProgress(e,s){const o=await fetch(`${this.apiUrl}/${e}/progress`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({progreso:s})});if(!o.ok)throw new Error("Error al actualizar el progreso");return await o.json()}async addMilestone(e,s){const o=await fetch(`${this.apiUrl}/${e}/milestones`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error("Error al agregar el hito");return await o.json()}async completeMilestone(e,s){const o=await fetch(`${this.apiUrl}/${e}/milestones/${s}/complete`,{method:"PUT"});if(!o.ok)throw new Error("Error al completar el hito");return await o.json()}async getStats(){const e=await fetch(`${this.apiUrl}/stats/summary`);if(!e.ok)throw new Error("Error al obtener las estadsticas");return await e.json()}getFileIcon(e){var o;switch((o=e.split(".").pop())==null?void 0:o.toLowerCase()){case"pdf":return"fas fa-file-pdf text-red-500";case"doc":case"docx":return"fas fa-file-word text-blue-500";case"xls":case"xlsx":return"fas fa-file-excel text-green-500";case"jpg":case"jpeg":case"png":case"gif":return"fas fa-file-image text-purple-500";case"zip":case"rar":return"fas fa-file-archive text-yellow-500";case"txt":return"fas fa-file-alt text-gray-500";default:return"fas fa-file text-gray-400"}}formatFileSize(e){if(e===0)return"0 Bytes";const s=1024,o=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,n)).toFixed(2))+" "+o[n]}getPriorityColor(e){switch(e){case"baja":return"text-green-600 bg-green-100";case"media":return"text-yellow-600 bg-yellow-100";case"alta":return"text-orange-600 bg-orange-100";case"critica":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}}getStatusColor(e){switch(e){case"abierto":return"text-blue-600 bg-blue-100";case"en_progreso":return"text-yellow-600 bg-yellow-100";case"resuelto":return"text-green-600 bg-green-100";case"cerrado":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}}}const ac=new aG,lG={class:"grid grid-cols-1 gap-6"},cG={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},dG={key:0},uG={class:"space-y-3"},fG={class:"flex justify-between text-sm text-gray-400"},pG={class:"text-purple-400 font-medium"},hG={key:0,class:"mt-4 space-y-2"},gG={class:"flex items-center gap-3"},mG={class:"text-white text-sm"},bG={class:"text-gray-400 text-xs"},vG=["onClick"],yG={key:1,class:"mt-4 space-y-2"},xG={class:"flex items-center gap-3"},wG={class:"text-white text-sm"},_G={class:"text-gray-400 text-xs"},kG={class:"flex items-center gap-2"},CG=["onClick"],$G=["onClick"],EG={key:1,class:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg"},SG={class:"flex items-center gap-3"},AG={class:"text-red-400 text-sm"},TG={class:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700"},PG=["disabled"],MG={key:0,class:"flex items-center"},RG={key:1},DG=Le({__name:"CaseForm",props:{case:{}},emits:["save","cancel"],setup(t,{emit:e}){const{showError:s,toast:o}=Wr(),n=t,i=e,a=I(!1),l=I(""),c=I(!1),d=I([]),u=I([]),f=Ft({titulo:"",descripcion:"",tipo:"documento",estado:"abierto",prioridad:"media",progreso:0}),p=I("create"),g=async()=>{var B;a.value=!0,l.value="";try{const E=new FormData;E.append("titulo",f.titulo),E.append("descripcion",f.descripcion),E.append("tipo",f.tipo),E.append("estado",f.estado),E.append("prioridad",f.prioridad),f.progreso!==void 0&&E.append("progreso",f.progreso.toString()),d.value.forEach(S=>{E.append("archivos",S)}),p.value==="create"?await ac.create(E):(B=n.case)!=null&&B._id&&await ac.update(n.case._id,E),i("save")}catch(E){s("Error al guardar caso",E.message||"Error desconocido al guardar el caso")}finally{a.value=!1}},m=B=>{const E=B.target;E.files&&x(Array.from(E.files))},v=B=>{var E;B.preventDefault(),c.value=!1,(E=B.dataTransfer)!=null&&E.files&&x(Array.from(B.dataTransfer.files))},x=B=>{const E=B.filter(S=>S.size>10485760?(s("Archivo demasiado grande",`El archivo ${S.name} es demasiado grande (mximo 10MB)`),!1):d.value.find(O=>O.name===S.name)?(o(`El archivo ${S.name} ya est seleccionado`,"warning"),!1):!0);d.value.push(...E)},_=B=>{d.value.splice(B,1)},k=B=>{u.value.splice(B,1)},C=B=>{try{const S=`${et.BASE_URL.replace("/api","")}${B.url}`;console.log("Downloading file:",B.nombre,"from URL:",S);const O=document.createElement("a");O.href=S,O.download=B.nombre,O.target="_blank",document.body.appendChild(O),O.click(),document.body.removeChild(O)}catch(E){console.error("Error downloading file:",E);const O=`${et.BASE_URL.replace("/api","")}${B.url}`;window.open(O,"_blank")}},P=B=>{var S;switch((S=B.split(".").pop())==null?void 0:S.toLowerCase()){case"pdf":return"fas fa-file-pdf";case"doc":case"docx":return"fas fa-file-word";case"txt":return"fas fa-file-alt";case"jpg":case"jpeg":case"png":case"gif":return"fas fa-file-image";case"zip":case"rar":return"fas fa-file-archive";default:return"fas fa-file"}},$=B=>{if(B===0)return"0 Bytes";const E=1024,S=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(B)/Math.log(E));return parseFloat((B/Math.pow(E,O)).toFixed(2))+" "+S[O]},R=()=>{Object.assign(f,{titulo:"",descripcion:"",tipo:"documento",estado:"abierto",prioridad:"media",progreso:0}),d.value=[],u.value=[]},V=()=>{n.case?(p.value="edit",Object.assign(f,{titulo:n.case.titulo||"",descripcion:n.case.descripcion||"",tipo:n.case.tipo||"documento",estado:n.case.estado||"abierto",prioridad:n.case.prioridad||"media",progreso:n.case.progreso||0}),u.value=n.case.archivos||[]):(p.value="create",R())};return nt(()=>{V()}),Rt(()=>n.case,()=>{V()}),(B,E)=>(b(),y("form",{onSubmit:Fe(g,["prevent"]),class:"space-y-6"},[r("div",lG,[r("div",null,[E[10]||(E[10]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-heading mr-2 text-purple-400"}),ne("Ttulo del Caso * ")],-1)),ie(r("input",{"onUpdate:modelValue":E[0]||(E[0]=S=>f.titulo=S),type:"text",required:"",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"Ej: Actualizacin de documentos contractuales"},null,512),[[ke,f.titulo]])]),r("div",cG,[r("div",null,[E[12]||(E[12]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-tag mr-2 text-purple-400"}),ne("Tipo * ")],-1)),ie(r("select",{"onUpdate:modelValue":E[1]||(E[1]=S=>f.tipo=S),required:"",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[...E[11]||(E[11]=[r("option",{value:"",disabled:""},"Selecciona un tipo",-1),r("option",{value:"documento"},"Documento",-1),r("option",{value:"incidencia"},"Incidencia",-1),r("option",{value:"seguimiento"},"Seguimiento",-1)])],512),[[De,f.tipo]])]),r("div",null,[E[14]||(E[14]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-flag mr-2 text-purple-400"}),ne("Estado ")],-1)),ie(r("select",{"onUpdate:modelValue":E[2]||(E[2]=S=>f.estado=S),class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[...E[13]||(E[13]=[r("option",{value:"abierto"},"Abierto",-1),r("option",{value:"en_progreso"},"En Progreso",-1),r("option",{value:"resuelto"},"Resuelto",-1),r("option",{value:"cerrado"},"Cerrado",-1)])],512),[[De,f.estado]])]),r("div",null,[E[16]||(E[16]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-star mr-2 text-purple-400"}),ne("Prioridad ")],-1)),ie(r("select",{"onUpdate:modelValue":E[3]||(E[3]=S=>f.prioridad=S),class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[...E[15]||(E[15]=[r("option",{value:"baja"},"Baja",-1),r("option",{value:"media"},"Media",-1),r("option",{value:"alta"},"Alta",-1),r("option",{value:"critica"},"Crtica",-1)])],512),[[De,f.prioridad]])])])]),r("div",null,[E[17]||(E[17]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-align-left mr-2 text-purple-400"}),ne("Descripcin * ")],-1)),ie(r("textarea",{"onUpdate:modelValue":E[4]||(E[4]=S=>f.descripcion=S),rows:"4",required:"",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors resize-none",placeholder:"Describe los detalles del caso..."},null,512),[[ke,f.descripcion]])]),f.estado==="en_progreso"?(b(),y("div",dG,[E[20]||(E[20]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-tasks mr-2 text-purple-400"}),ne("Progreso ")],-1)),r("div",uG,[ie(r("input",{"onUpdate:modelValue":E[5]||(E[5]=S=>f.progreso=S),type:"range",min:"0",max:"100",step:"5",class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"},null,512),[[ke,f.progreso,void 0,{number:!0}]]),r("div",fG,[E[18]||(E[18]=r("span",null,"0%",-1)),r("span",pG,w(f.progreso||0)+"%",1),E[19]||(E[19]=r("span",null,"100%",-1))])])])):q("",!0),r("div",null,[E[27]||(E[27]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-paperclip mr-2 text-purple-400"}),ne("Archivos Adjuntos ")],-1)),r("div",{onDrop:v,onDragover:E[7]||(E[7]=Fe(()=>{},["prevent"])),onDragenter:E[8]||(E[8]=Fe(()=>{},["prevent"])),class:de(["border-2 border-dashed border-gray-600 rounded-lg p-8 text-center hover:border-purple-500 transition-colors cursor-pointer",{"border-purple-500 bg-purple-500/5":c.value}])},[r("input",{ref:"fileInput",type:"file",multiple:"",onChange:m,class:"hidden",accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.zip,.rar"},null,544),r("div",{onClick:E[6]||(E[6]=S=>{var O;return(O=B.$refs.fileInput)==null?void 0:O.click()})},[...E[21]||(E[21]=[r("i",{class:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"},null,-1),r("p",{class:"text-gray-300 mb-2"},"Arrastra archivos aqu o haz clic para seleccionar",-1),r("p",{class:"text-gray-500 text-sm"},"PDF, DOC, TXT, imgenes, ZIP hasta 10MB cada uno",-1)])])],34),d.value.length>0?(b(),y("div",hG,[E[23]||(E[23]=r("h4",{class:"text-white font-medium"},"Archivos seleccionados:",-1)),(b(!0),y(ge,null,xe(d.value,(S,O)=>(b(),y("div",{key:O,class:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg"},[r("div",gG,[r("i",{class:de([P(S.name),"text-purple-400"])},null,2),r("div",null,[r("p",mG,w(S.name),1),r("p",bG,w($(S.size)),1)])]),r("button",{onClick:T=>_(O),type:"button",class:"text-red-400 hover:text-red-300 transition-colors"},[...E[22]||(E[22]=[r("i",{class:"fas fa-times"},null,-1)])],8,vG)]))),128))])):q("",!0),u.value.length>0?(b(),y("div",yG,[E[26]||(E[26]=r("h4",{class:"text-white font-medium"},"Archivos actuales:",-1)),(b(!0),y(ge,null,xe(u.value,(S,O)=>(b(),y("div",{key:`existing-${O}`,class:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg"},[r("div",xG,[r("i",{class:de([P(S.nombre),"text-purple-400"])},null,2),r("div",null,[r("p",wG,w(S.nombre),1),r("p",_G,w($(S.tamao)),1)])]),r("div",kG,[r("button",{onClick:T=>C(S),type:"button",class:"text-purple-400 hover:text-purple-300 transition-colors"},[...E[24]||(E[24]=[r("i",{class:"fas fa-download"},null,-1)])],8,CG),r("button",{onClick:T=>k(O),type:"button",class:"text-red-400 hover:text-red-300 transition-colors"},[...E[25]||(E[25]=[r("i",{class:"fas fa-times"},null,-1)])],8,$G)])]))),128))])):q("",!0)]),l.value?(b(),y("div",EG,[r("div",SG,[E[28]||(E[28]=r("i",{class:"fas fa-exclamation-triangle text-red-400"},null,-1)),r("p",AG,w(l.value),1)])])):q("",!0),r("div",TG,[r("button",{type:"button",onClick:E[9]||(E[9]=S=>B.$emit("cancel")),class:"px-6 py-3 text-gray-400 hover:text-white transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:a.value,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg shadow-purple-500/25"},[a.value?(b(),y("span",MG,[...E[29]||(E[29]=[r("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ne(" Guardando... ",-1)])])):(b(),y("span",RG,w(p.value==="create"?"Crear Caso":"Actualizar Caso"),1))],8,PG)])],32))}}),OG=Et(DG,[["__scopeId","data-v-cecbfebf"]]),IG={class:"space-y-6"},LG={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},BG={class:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 rounded-2xl p-6 border border-blue-500/20"},NG={class:"flex items-center justify-between"},jG={class:"text-2xl font-bold text-white"},FG={class:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 rounded-2xl p-6 border border-yellow-500/20"},UG={class:"flex items-center justify-between"},zG={class:"text-2xl font-bold text-white"},VG={class:"bg-gradient-to-br from-green-500/20 to-green-600/10 rounded-2xl p-6 border border-green-500/20"},HG={class:"flex items-center justify-between"},qG={class:"text-2xl font-bold text-white"},WG={class:"bg-gradient-to-br from-red-500/20 to-red-600/10 rounded-2xl p-6 border border-red-500/20"},GG={class:"flex items-center justify-between"},KG={class:"text-2xl font-bold text-white"},YG={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-purple-500/20"},JG={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},XG={key:0,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-12 border border-purple-500/20 text-center"},QG={key:1,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-red-500/20"},ZG={class:"bg-red-500/20 border border-red-500/50 rounded-lg p-6"},eK={class:"text-red-400 mb-4"},tK={key:2,class:"space-y-4"},sK={key:0,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-12 border border-purple-500/20 text-center"},oK={class:"text-xl font-medium text-gray-300 mb-2"},nK={class:"text-gray-400 mb-6"},rK={key:1,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6"},iK={class:"p-6"},aK={class:"flex items-start justify-between mb-4"},lK=["onClick"],cK={class:"flex items-center gap-2 mb-2"},dK={class:"text-white font-semibold text-lg mb-2 line-clamp-2"},uK={class:"text-gray-400 text-sm line-clamp-3"},fK={class:"flex flex-col gap-2 ml-4"},pK=["onClick"],hK=["onClick"],gK={class:"flex items-center justify-between"},mK={class:"flex items-center gap-2"},bK={key:0,class:"flex items-center gap-1 text-gray-400"},vK={class:"text-xs"},yK={class:"text-gray-500 text-xs"},xK={key:0,class:"mt-4"},wK={class:"flex justify-between text-xs text-gray-400 mb-1"},_K={class:"w-full bg-gray-700 rounded-full h-2"},kK={key:2,class:"flex justify-center items-center gap-2 mt-8"},CK=["disabled"],$K={class:"flex gap-1"},EK=["onClick"],SK=["disabled"],AK={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},TK={class:"bg-gray-900 rounded-2xl shadow-2xl border border-purple-500/20 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},PK={class:"flex items-center justify-between p-6 border-b border-purple-500/20"},MK={class:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"},RK={class:"p-6"},DK={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},OK={class:"bg-gray-900 rounded-2xl shadow-2xl border border-purple-500/20 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},IK={class:"flex items-center justify-between p-6 border-b border-purple-500/20"},LK={class:"text-xl font-bold text-white"},BK={class:"p-6"},NK={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},jK={class:"space-y-3"},FK={class:"flex items-center gap-2"},UK={class:"flex items-center gap-2"},zK={class:"flex items-center gap-2"},VK={class:"flex items-center gap-2"},HK={class:"text-white"},qK={class:"text-gray-300"},WK={key:0,class:"mt-6"},GK={class:"space-y-2"},KK={class:"flex-1"},YK={class:"text-white text-sm"},JK={class:"text-gray-400 text-xs"},Fd=9,XK=Le({__name:"CasesView",setup(t){const{showSuccess:e,showError:s,confirmDelete:o,showLoading:n,closeLoading:i}=Wr(),a=I([]),l=I(!1),c=I(""),d=I(""),u=I(!1),f=I(!1),p=I(null),g=I(1),m=I({tipo:"",estado:"",prioridad:""}),v=re(()=>a.value.length),x=re(()=>a.value.filter(me=>me.estado==="resuelto").length),_=re(()=>a.value.filter(me=>me.estado==="en_progreso").length),k=re(()=>a.value.filter(me=>me.prioridad==="critica").length),C=re(()=>m.value.tipo||m.value.estado||m.value.prioridad),P=re(()=>{let me=a.value;if(d.value){const Y=d.value.toLowerCase();me=me.filter(j=>j.titulo.toLowerCase().includes(Y)||j.descripcion.toLowerCase().includes(Y))}return m.value.tipo&&(me=me.filter(Y=>Y.tipo===m.value.tipo)),m.value.estado&&(me=me.filter(Y=>Y.estado===m.value.estado)),m.value.prioridad&&(me=me.filter(Y=>Y.prioridad===m.value.prioridad)),me}),$=re(()=>Math.ceil(P.value.length/Fd)),R=re(()=>{const me=(g.value-1)*Fd,Y=me+Fd;return P.value.slice(me,Y)}),V=re(()=>{const me=[],Y=Math.max(1,g.value-2),j=Math.min($.value,Y+4);for(let Q=Y;Q<=j;Q++)me.push(Q);return me}),B=async()=>{l.value=!0,c.value="";try{a.value=await ac.getAll()}catch(me){c.value=me.message||"Error al cargar los casos",console.error("Error loading cases:",me)}finally{l.value=!1}},E=me=>{p.value=me,f.value=!0},S=me=>{p.value=me,u.value=!0},O=async me=>{if((await o(me.titulo,"caso")).isConfirmed)try{n("Eliminando caso..."),await ac.deleteCase(me._id),a.value=a.value.filter(j=>j._id!==me._id),i(),e("Caso eliminado!","El caso ha sido eliminado exitosamente")}catch(j){i(),s("Error al eliminar caso",j.message||"Error desconocido al eliminar el caso")}},T=()=>{u.value=!1,f.value=!1,p.value=null},L=()=>{T(),B(),e("Caso guardado!","El caso ha sido guardado exitosamente")},K=()=>{g.value=1},z=me=>new Date(me).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),F=me=>{if(me===0)return"0 Bytes";const Y=1024,j=["Bytes","KB","MB","GB"],Q=Math.floor(Math.log(me)/Math.log(Y));return parseFloat((me/Math.pow(Y,Q)).toFixed(2))+" "+j[Q]},W=me=>({documento:"bg-blue-500/20 text-blue-400 border border-blue-500/30",incidencia:"bg-red-500/20 text-red-400 border border-red-500/30",seguimiento:"bg-green-500/20 text-green-400 border border-green-500/30"})[me]||"bg-gray-500/20 text-gray-400 border border-gray-500/30",Z=me=>({documento:"fas fa-file-alt",incidencia:"fas fa-exclamation-triangle",seguimiento:"fas fa-eye"})[me]||"fas fa-folder",le=me=>({baja:"bg-gray-500/20 text-gray-400 border border-gray-500/30",media:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",alta:"bg-orange-500/20 text-orange-400 border border-orange-500/30",critica:"bg-red-500/20 text-red-400 border border-red-500/30"})[me]||"bg-gray-500/20 text-gray-400 border border-gray-500/30",J=me=>({abierto:"bg-blue-500/20 text-blue-400 border border-blue-500/30",en_progreso:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",resuelto:"bg-green-500/20 text-green-400 border border-green-500/30",cerrado:"bg-gray-500/20 text-gray-400 border border-gray-500/30"})[me]||"bg-gray-500/20 text-gray-400 border border-gray-500/30",Pe=me=>({abierto:"fas fa-folder-open",en_progreso:"fas fa-spinner",resuelto:"fas fa-check-circle",cerrado:"fas fa-lock"})[me]||"fas fa-question";return nt(()=>{B()}),(me,Y)=>(b(),y("div",IG,[r("button",{onClick:Y[0]||(Y[0]=j=>u.value=!0),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2 font-medium transform hover:scale-105 shadow-lg shadow-purple-500/25"},[...Y[9]||(Y[9]=[r("i",{class:"fas fa-plus"},null,-1),r("span",null,"Nuevo Caso",-1)])]),r("div",LG,[r("div",BG,[r("div",NG,[r("div",null,[Y[10]||(Y[10]=r("p",{class:"text-blue-400 text-sm font-medium"},"Total Casos",-1)),r("p",jG,w(v.value),1)]),Y[11]||(Y[11]=r("div",{class:"p-3 bg-blue-500/20 rounded-full"},[r("i",{class:"fas fa-folder text-blue-400 text-xl"})],-1))])]),r("div",FG,[r("div",UG,[r("div",null,[Y[12]||(Y[12]=r("p",{class:"text-yellow-400 text-sm font-medium"},"En Progreso",-1)),r("p",zG,w(_.value),1)]),Y[13]||(Y[13]=r("div",{class:"p-3 bg-yellow-500/20 rounded-full"},[r("i",{class:"fas fa-clock text-yellow-400 text-xl"})],-1))])]),r("div",VG,[r("div",HG,[r("div",null,[Y[14]||(Y[14]=r("p",{class:"text-green-400 text-sm font-medium"},"Resueltos",-1)),r("p",qG,w(x.value),1)]),Y[15]||(Y[15]=r("div",{class:"p-3 bg-green-500/20 rounded-full"},[r("i",{class:"fas fa-check-circle text-green-400 text-xl"})],-1))])]),r("div",WG,[r("div",GG,[r("div",null,[Y[16]||(Y[16]=r("p",{class:"text-red-400 text-sm font-medium"},"Crticos",-1)),r("p",KG,w(k.value),1)]),Y[17]||(Y[17]=r("div",{class:"p-3 bg-red-500/20 rounded-full"},[r("i",{class:"fas fa-exclamation-triangle text-red-400 text-xl"})],-1))])])]),r("div",YG,[r("div",JG,[r("div",null,[Y[19]||(Y[19]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-tag mr-2 text-purple-400"}),ne("Tipo ")],-1)),ie(r("select",{"onUpdate:modelValue":Y[1]||(Y[1]=j=>m.value.tipo=j),onChange:B,class:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[...Y[18]||(Y[18]=[r("option",{value:""},"Todos los tipos",-1),r("option",{value:"documento"},"Documentos",-1),r("option",{value:"incidencia"},"Incidencias",-1),r("option",{value:"seguimiento"},"Seguimientos",-1)])],544),[[De,m.value.tipo]])]),r("div",null,[Y[21]||(Y[21]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-flag mr-2 text-purple-400"}),ne("Estado ")],-1)),ie(r("select",{"onUpdate:modelValue":Y[2]||(Y[2]=j=>m.value.estado=j),onChange:B,class:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[...Y[20]||(Y[20]=[Es('<option value="" data-v-58010978>Todos los estados</option><option value="abierto" data-v-58010978>Abierto</option><option value="en_progreso" data-v-58010978>En Progreso</option><option value="resuelto" data-v-58010978>Resuelto</option><option value="cerrado" data-v-58010978>Cerrado</option>',5)])],544),[[De,m.value.estado]])]),r("div",null,[Y[23]||(Y[23]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-star mr-2 text-purple-400"}),ne("Prioridad ")],-1)),ie(r("select",{"onUpdate:modelValue":Y[3]||(Y[3]=j=>m.value.prioridad=j),onChange:B,class:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[...Y[22]||(Y[22]=[Es('<option value="" data-v-58010978>Todas las prioridades</option><option value="baja" data-v-58010978>Baja</option><option value="media" data-v-58010978>Media</option><option value="alta" data-v-58010978>Alta</option><option value="critica" data-v-58010978>Crtica</option>',5)])],544),[[De,m.value.prioridad]])]),r("div",null,[Y[24]||(Y[24]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-search mr-2 text-purple-400"}),ne("Buscar ")],-1)),ie(r("input",{"onUpdate:modelValue":Y[4]||(Y[4]=j=>d.value=j),type:"text",placeholder:"Buscar casos...",class:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",onInput:K},null,544),[[ke,d.value]])])])]),l.value?(b(),y("div",XG,[...Y[25]||(Y[25]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"},null,-1),r("p",{class:"text-gray-400"},"Cargando casos...",-1)])])):c.value?(b(),y("div",QG,[r("div",ZG,[Y[26]||(Y[26]=r("div",{class:"flex items-center gap-3 mb-4"},[r("i",{class:"fas fa-exclamation-triangle text-red-400 text-xl"}),r("h3",{class:"text-red-300 font-medium text-lg"},"Error al cargar casos")],-1)),r("p",eK,w(c.value),1),r("button",{onClick:B,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Reintentar ")])])):(b(),y("div",tK,[P.value.length===0?(b(),y("div",sK,[Y[28]||(Y[28]=r("i",{class:"fas fa-folder text-6xl text-gray-500 mb-4"},null,-1)),r("h3",oK,w(d.value||C.value?"No se encontraron casos":"No hay casos registrados"),1),r("p",nK,w(d.value||C.value?"Intenta ajustar los filtros de bsqueda":"Comienza creando tu primer caso"),1),!d.value&&!C.value?(b(),y("button",{key:0,onClick:Y[5]||(Y[5]=j=>u.value=!0),class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2 mx-auto font-medium transform hover:scale-105 shadow-lg shadow-purple-500/25"},[...Y[27]||(Y[27]=[r("i",{class:"fas fa-plus"},null,-1),ne(" Crear Primer Caso ",-1)])])):q("",!0)])):(b(),y("div",rK,[(b(!0),y(ge,null,xe(R.value,j=>(b(),y("div",{key:j._id,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg border border-purple-500/20 hover:shadow-xl hover:border-purple-400/40 transition-all duration-300 transform hover:scale-105"},[r("div",iK,[r("div",aK,[r("div",{class:"flex-1 cursor-pointer",onClick:Q=>E(j)},[r("div",cK,[r("span",{class:de(["px-3 py-1 rounded-full text-xs font-medium",W(j.tipo)])},[r("i",{class:de([Z(j.tipo),"mr-1"])},null,2),ne(" "+w(j.tipo.charAt(0).toUpperCase()+j.tipo.slice(1)),1)],2),r("span",{class:de(["px-3 py-1 rounded-full text-xs font-medium",le(j.prioridad)])},w(j.prioridad.charAt(0).toUpperCase()+j.prioridad.slice(1)),3)]),r("h3",dK,w(j.titulo),1),r("p",uK,w(j.descripcion),1)],8,lK),r("div",fK,[r("button",{onClick:Q=>S(j),class:"p-2 text-gray-400 hover:text-purple-400 hover:bg-purple-500/20 rounded-lg transition-all duration-200",title:"Editar caso"},[...Y[29]||(Y[29]=[r("i",{class:"fas fa-edit"},null,-1)])],8,pK),r("button",{onClick:Q=>O(j),class:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/20 rounded-lg transition-all duration-200",title:"Eliminar caso"},[...Y[30]||(Y[30]=[r("i",{class:"fas fa-trash"},null,-1)])],8,hK)])]),r("div",gK,[r("span",{class:de(["px-3 py-1 rounded-full text-xs font-medium",J(j.estado)])},[r("i",{class:de([Pe(j.estado),"mr-1"])},null,2),ne(" "+w(j.estado.replace("_"," ").charAt(0).toUpperCase()+j.estado.replace("_"," ").slice(1)),1)],2),r("div",mK,[j.archivos&&j.archivos.length>0?(b(),y("div",bK,[Y[31]||(Y[31]=r("i",{class:"fas fa-paperclip text-xs"},null,-1)),r("span",vK,w(j.archivos.length),1)])):q("",!0),r("span",yK,w(z(j.fechaCreacion)),1)])]),j.estado==="en_progreso"&&j.progreso!==void 0?(b(),y("div",xK,[r("div",wK,[Y[32]||(Y[32]=r("span",null,"Progreso",-1)),r("span",null,w(j.progreso)+"%",1)]),r("div",_K,[r("div",{class:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full transition-all duration-300",style:yo({width:`${j.progreso}%`})},null,4)])])):q("",!0)])]))),128))])),$.value>1?(b(),y("div",kK,[r("button",{onClick:Y[6]||(Y[6]=j=>g.value=g.value-1),disabled:g.value===1,class:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...Y[33]||(Y[33]=[r("i",{class:"fas fa-chevron-left"},null,-1)])],8,CK),r("div",$K,[(b(!0),y(ge,null,xe(V.value,j=>(b(),y("button",{key:j,onClick:Q=>g.value=j,class:de(["px-4 py-2 rounded-lg transition-colors",j===g.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},w(j),11,EK))),128))]),r("button",{onClick:Y[7]||(Y[7]=j=>g.value=g.value+1),disabled:g.value===$.value,class:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...Y[34]||(Y[34]=[r("i",{class:"fas fa-chevron-right"},null,-1)])],8,SK)])):q("",!0)])),u.value?(b(),y("div",AK,[r("div",TK,[r("div",PK,[r("h3",MK,w(p.value?"Editar Caso":"Crear Nuevo Caso"),1),r("button",{onClick:T,class:"text-gray-400 hover:text-white transition-colors"},[...Y[35]||(Y[35]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("div",RK,[fe(OG,{case:p.value,onSave:L,onCancel:T},null,8,["case"])])])])):q("",!0),f.value&&p.value?(b(),y("div",DK,[r("div",OK,[r("div",IK,[r("h3",LK,w(p.value.titulo),1),r("button",{onClick:Y[8]||(Y[8]=j=>f.value=!1),class:"text-gray-400 hover:text-white transition-colors"},[...Y[36]||(Y[36]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("div",BK,[r("div",NK,[r("div",null,[Y[41]||(Y[41]=r("h4",{class:"text-white font-medium mb-4"},"Informacin del Caso",-1)),r("div",jK,[r("div",FK,[Y[37]||(Y[37]=r("span",{class:"text-gray-400"},"Tipo:",-1)),r("span",{class:de([W(p.value.tipo),"px-3 py-1 rounded-full text-xs font-medium"])},w(p.value.tipo.charAt(0).toUpperCase()+p.value.tipo.slice(1)),3)]),r("div",UK,[Y[38]||(Y[38]=r("span",{class:"text-gray-400"},"Estado:",-1)),r("span",{class:de([J(p.value.estado),"px-3 py-1 rounded-full text-xs font-medium"])},w(p.value.estado.replace("_"," ").charAt(0).toUpperCase()+p.value.estado.replace("_"," ").slice(1)),3)]),r("div",zK,[Y[39]||(Y[39]=r("span",{class:"text-gray-400"},"Prioridad:",-1)),r("span",{class:de([le(p.value.prioridad),"px-3 py-1 rounded-full text-xs font-medium"])},w(p.value.prioridad.charAt(0).toUpperCase()+p.value.prioridad.slice(1)),3)]),r("div",VK,[Y[40]||(Y[40]=r("span",{class:"text-gray-400"},"Fecha:",-1)),r("span",HK,w(z(p.value.fechaCreacion)),1)])])]),r("div",null,[Y[42]||(Y[42]=r("h4",{class:"text-white font-medium mb-4"},"Descripcin",-1)),r("p",qK,w(p.value.descripcion),1)])]),p.value.archivos&&p.value.archivos.length>0?(b(),y("div",WK,[Y[45]||(Y[45]=r("h4",{class:"text-white font-medium mb-4"},"Archivos Adjuntos",-1)),r("div",GK,[(b(!0),y(ge,null,xe(p.value.archivos,j=>(b(),y("div",{key:j.nombre,class:"flex items-center gap-3 p-3 bg-gray-800/50 rounded-lg"},[Y[43]||(Y[43]=r("i",{class:"fas fa-file text-purple-400"},null,-1)),r("div",KK,[r("p",YK,w(j.nombre),1),r("p",JK,w(F(j.tamao)),1)]),Y[44]||(Y[44]=r("button",{class:"text-purple-400 hover:text-purple-300 transition-colors"},[r("i",{class:"fas fa-download"})],-1))]))),128))])])):q("",!0)])])])):q("",!0)]))}}),QK=Et(XK,[["__scopeId","data-v-58010978"]]);class ZK{constructor(){_e(this,"baseUrl",et.BASE_URL);_e(this,"endpoint","/auth");_e(this,"toAbsoluteUrl",e=>{if(!e)return"";if(/^https?:\/\//i.test(e))return e;let s=this.baseUrl;return s=s.replace(/\/?api\/?$/i,""),`${s.replace(/\/$/,"")}/${e.replace(/^\//,"")}`})}async getProfile(){var e;try{const s=localStorage.getItem("token");if(!s)throw new Error("No hay token de autenticacin");console.log(" Llamando a API de perfil...");const o=await fetch(`${this.baseUrl}${this.endpoint}/profile`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(console.log(" Respuesta de API:",o.status),!o.ok){const a=await o.text();throw console.error(" Error en API:",a),new Error(`Error ${o.status}: ${o.statusText}`)}const n=await o.json();console.log(" Datos recibidos:",n);const i=n.user||((e=n.data)==null?void 0:e.user);if(!i)throw new Error("No se recibieron datos de usuario vlidos");return i.photo&&(i.photo=this.toAbsoluteUrl(i.photo)),i}catch(s){throw console.error(" Error getting profile:",s),s}}async updateProfile(e){try{const s=localStorage.getItem("token"),o=await fetch(`${this.baseUrl}${this.endpoint}/profile`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw new Error(`Error ${o.status}: ${o.statusText}`);return(await o.json()).user}catch(s){throw console.error("Error updating profile:",s),s}}async updatePassword(e){try{const s=localStorage.getItem("token"),o=await fetch(`${this.baseUrl}${this.endpoint}/change-password`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok){const n=await o.json();throw new Error(n.error||`Error ${o.status}: ${o.statusText}`)}}catch(s){throw console.error("Error updating password:",s),s}}async uploadPhoto(e){try{const s=localStorage.getItem("token");if(!s)throw new Error("No hay token de autenticacin");console.log(" Subiendo foto:",e.name,"Tamao:",e.size);const o=new FormData;o.append("photo",e);const n=await fetch(`${this.baseUrl}${this.endpoint}/upload-photo`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:o});if(console.log(" Respuesta de subida:",n.status),!n.ok){const a=await n.text();throw console.error(" Error en subida:",a),new Error(`Error ${n.status}: ${n.statusText}`)}const i=await n.json();return console.log(" Respuesta de foto:",i),this.toAbsoluteUrl(i.photoUrl)}catch(s){throw console.error(" Error uploading photo:",s),s}}}const Ng=new ZK,fo=Ae.create({baseURL:et.BASE_URL,timeout:1e4,headers:{"Content-Type":"application/json"}});fo.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});fo.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)});class lc{static async getAvailableAvatars(){var e;try{const s=await fo.get("/avatars");if(s.data.success&&((e=s.data.data)!=null&&e.avatars))return s.data.data.avatars;throw new Error("Error obteniendo avatares disponibles")}catch(s){throw console.error("Error getting available avatars:",s),s}}static async getDefaultAvatar(){var e;try{const s=await fo.get("/avatars");return s.data.success&&((e=s.data.data)!=null&&e.default)?s.data.data.default:"ruby"}catch(s){return console.error("Error getting default avatar:",s),"ruby"}}static async getUserAvatar(){var e,s;try{const o=await fo.get("/avatars/user");return o.data.success?{avatar:((e=o.data.data)==null?void 0:e.avatar)||null,photo:((s=o.data.data)==null?void 0:s.photo)||null}:{avatar:null,photo:null}}catch(o){return console.error("Error getting user avatar:",o),{avatar:null,photo:null}}}static async updateUserAvatar(e){try{return(await fo.put("/avatars/user",{avatar:e})).data}catch(s){throw console.error("Error updating user avatar:",s),s}}static async removeUserAvatar(){try{return(await fo.delete("/avatars/user")).data}catch(e){throw console.error("Error removing user avatar:",e),e}}static async uploadProfilePhoto(e){try{const s=new FormData;return s.append("photo",e),(await fo.post("/avatars/upload-photo",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error uploading profile photo:",s),s}}static async removeProfilePhoto(){try{return(await fo.delete("/avatars/photo")).data}catch(e){throw console.error("Error removing profile photo:",e),e}}static async getAvatarStats(){var e;try{const s=await fo.get("/avatars/stats");return s.data.success&&((e=s.data.data)!=null&&e.stats)?s.data.data.stats:{}}catch(s){return console.error("Error getting avatar stats:",s),{}}}}const ga={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Lr={LIGHT:"light",DARK:"dark",COLORED:"colored",AUTO:"auto"},gs={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},eY={BOUNCE:"bounce",SLIDE:"slide",FLIP:"flip",ZOOM:"zoom",NONE:"none"},tY={dangerouslyHTMLString:!1,multiple:!0,position:ga.TOP_RIGHT,autoClose:5e3,transition:"bounce",hideProgressBar:!1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,className:"",bodyClassName:"",style:{},progressClassName:"",progressStyle:{},role:"alert",theme:"light"},sY={rtl:!1,newestOnTop:!1,toastClassName:""},dx={...tY,...sY};gs.DEFAULT;var dt=(t=>(t[t.COLLAPSE_DURATION=300]="COLLAPSE_DURATION",t[t.DEBOUNCE_DURATION=50]="DEBOUNCE_DURATION",t.CSS_NAMESPACE="Toastify",t))(dt||{}),Nu=(t=>(t.ENTRANCE_ANIMATION_END="d",t))(Nu||{});const oY={enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0},nY={enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0},rY={enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"},iY={enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"},jg="Toastify--animate Toastify__none-enter";function ux(t,e=!1){var s;let o=oY;if(!t||typeof t=="string")switch(t){case"flip":o=iY;break;case"zoom":o=rY;break;case"slide":o=nY;break}else o=t;if(e)o.enter=jg;else if(o.enter===jg){const n=(s=o.exit.split("__")[1])==null?void 0:s.split("-")[0];o.enter=`Toastify--animate Toastify__${n}-enter`}return o}function aY(t){return t.containerId||String(t.position)}const Jc="will-unmount";function lY(t=ga.TOP_RIGHT){return!!document.querySelector(`.${dt.CSS_NAMESPACE}__toast-container--${t}`)}function cY(t=ga.TOP_RIGHT){return`${dt.CSS_NAMESPACE}__toast-container--${t}`}function dY(t,e,s=!1){const o=[`${dt.CSS_NAMESPACE}__toast-container`,`${dt.CSS_NAMESPACE}__toast-container--${t}`,s?`${dt.CSS_NAMESPACE}__toast-container--rtl`:null].filter(Boolean).join(" ");return Sr(e)?e({position:t,rtl:s,defaultClassName:o}):`${o} ${e||""}`}function uY(t){var e;const{position:s,containerClassName:o,rtl:n=!1,style:i={}}=t,a=dt.CSS_NAMESPACE,l=cY(s),c=document.querySelector(`.${a}`),d=document.querySelector(`.${l}`),u=!!d&&!((e=d.className)!=null&&e.includes(Jc)),f=c||document.createElement("div"),p=document.createElement("div");p.className=dY(s,o,n),p.dataset.testid=`${dt.CSS_NAMESPACE}__toast-container--${s}`,p.id=aY(t);for(const g in i)if(Object.prototype.hasOwnProperty.call(i,g)){const m=i[g];p.style[g]=m}return c||(f.className=dt.CSS_NAMESPACE,document.body.appendChild(f)),u||f.appendChild(p),p}function ju(t){var e,s,o;const n=typeof t=="string"?t:((e=t.currentTarget)==null?void 0:e.id)||((s=t.target)==null?void 0:s.id),i=document.getElementById(n);i&&i.removeEventListener("animationend",ju,!1);try{Zi[n].unmount(),(o=document.getElementById(n))==null||o.remove(),delete Zi[n],delete Gt[n]}catch{}}const Zi=Ft({});function fY(t,e){const s=document.getElementById(String(e));s&&(Zi[s.id]=t)}function Fu(t,e=!0){const s=String(t);if(!Zi[s])return;const o=document.getElementById(s);o&&o.classList.add(Jc),e?(hY(t),o&&o.addEventListener("animationend",ju,!1)):ju(s),_o.items=_o.items.filter(n=>n.containerId!==t)}function pY(t){for(const e in Zi)Fu(e,t);_o.items=[]}function fx(t,e){const s=document.getElementById(t.toastId);if(s){let o=t;o={...o,...ux(o.transition)};const n=o.appendPosition?`${o.exit}--${o.position}`:o.exit;s.className+=` ${n}`,e&&e(s)}}function hY(t){for(const e in Gt)if(e===t)for(const s of Gt[e]||[])fx(s)}function gY(t){const e=Br().find(s=>s.toastId===t);return e==null?void 0:e.containerId}function ap(t){return document.getElementById(t)}function mY(t){const e=ap(t.containerId);return e&&e.classList.contains(Jc)}function Fg(t){var e;const s=Jn(t.content)?ze(t.content.props):null;return s??ze((e=t.data)!=null?e:{})}function bY(t){return t?_o.items.filter(e=>e.containerId===t).length>0:_o.items.length>0}function vY(){if(_o.items.length>0){const t=_o.items.shift();Cl(t==null?void 0:t.toastContent,t==null?void 0:t.toastProps)}}const Gt=Ft({}),_o=Ft({items:[]});function Br(){const t=ze(Gt);return Object.values(t).reduce((e,s)=>[...e,...s],[])}function yY(t){return Br().find(e=>e.toastId===t)}function Cl(t,e={}){if(mY(e)){const s=ap(e.containerId);s&&s.addEventListener("animationend",Uu.bind(null,t,e),!1)}else Uu(t,e)}function Uu(t,e={}){const s=ap(e.containerId);s&&s.removeEventListener("animationend",Uu.bind(null,t,e),!1);const o=Gt[e.containerId]||[],n=o.length>0;if(!n&&!lY(e.position)){const i=uY(e),a=rb(jY,e);e.useHandler&&e.useHandler(a),a.mount(i),fY(a,i.id)}n&&!e.updateId&&(e.position=o[0].position),_s(()=>{e.updateId?Ms.update(e):Ms.add(t,e)})}const Ms={add(t,e){const{containerId:s=""}=e;s&&(Gt[s]=Gt[s]||[],Gt[s].find(o=>o.toastId===e.toastId)||setTimeout(()=>{var o,n;e.newestOnTop?(o=Gt[s])==null||o.unshift(e):(n=Gt[s])==null||n.push(e),e.onOpen&&e.onOpen(Fg(e))},e.delay||0))},remove(t){if(t){const e=gY(t);if(e){const s=Gt[e];let o=s.find(n=>n.toastId===t);Gt[e]=s.filter(n=>n.toastId!==t),!Gt[e].length&&!bY(e)&&Fu(e,!1),vY(),_s(()=>{o!=null&&o.onClose&&(o.onClose(Fg(o)),o=void 0)})}}},update(t={}){const{containerId:e=""}=t;if(e&&t.updateId){Gt[e]=Gt[e]||[];const s=Gt[e].find(i=>i.toastId===t.toastId),o=(s==null?void 0:s.position)!==t.position||(s==null?void 0:s.transition)!==t.transition,n={...t,disabledEnterTransition:!o,updateId:void 0};Ms.dismissForce(t==null?void 0:t.toastId),setTimeout(()=>{Ge(n.content,n)},t.delay||0)}},clear(t,e=!0){t?Fu(t,e):pY(e)},dismissCallback(t){var e;const s=(e=t.currentTarget)==null?void 0:e.id,o=document.getElementById(s);o&&(o.removeEventListener("animationend",Ms.dismissCallback,!1),setTimeout(()=>{Ms.remove(s)}))},dismiss(t){if(t){const e=Br();for(const s of e)if(s.toastId===t){fx(s,o=>{o.addEventListener("animationend",Ms.dismissCallback,!1)});break}}},dismissForce(t){if(t){const e=Br();for(const s of e)if(s.toastId===t){const o=document.getElementById(t);o&&(o.remove(),o.removeEventListener("animationend",Ms.dismissCallback,!1),Ms.remove(t));break}}}},xY=Ft({useHandler:void 0}),px=Ft({}),cc=Ft({});function hx(){return Math.random().toString(36).substring(2,9)}function wY(t){return typeof t=="number"&&!isNaN(t)}function zu(t){return typeof t=="string"}function Sr(t){return typeof t=="function"}function Xc(...t){return Yo(...t)}function $l(t){return typeof t=="object"&&(!!(t!=null&&t.render)||!!(t!=null&&t.setup)||typeof(t==null?void 0:t.type)=="object")}function _Y(t={}){px[`${dt.CSS_NAMESPACE}-default-options`]=t}function kY(){return px[`${dt.CSS_NAMESPACE}-default-options`]||dx}function CY(){const t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return document.documentElement.classList.contains("dark")||t?"dark":"light"}var El=(t=>(t[t.Enter=0]="Enter",t[t.Exit=1]="Exit",t))(El||{});const gx={containerId:{type:[String,Number],required:!1,default:""},clearOnUrlChange:{type:Boolean,required:!1,default:!0},disabledEnterTransition:{type:Boolean,required:!1,default:!1},dangerouslyHTMLString:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!0},limit:{type:Number,required:!1,default:void 0},position:{type:String,required:!1,default:ga.TOP_LEFT},bodyClassName:{type:String,required:!1,default:""},autoClose:{type:[Number,Boolean],required:!1,default:!1},closeButton:{type:[Boolean,Function,Object],required:!1,default:void 0},transition:{type:[String,Object],required:!1,default:"bounce"},hideProgressBar:{type:Boolean,required:!1,default:!1},pauseOnHover:{type:Boolean,required:!1,default:!0},pauseOnFocusLoss:{type:Boolean,required:!1,default:!0},closeOnClick:{type:Boolean,required:!1,default:!0},progress:{type:Number,required:!1,default:void 0},progressClassName:{type:String,required:!1,default:""},toastStyle:{type:Object,required:!1,default(){return{}}},progressStyle:{type:Object,required:!1,default(){return{}}},role:{type:String,required:!1,default:"alert"},theme:{type:String,required:!1,default:Lr.AUTO},content:{type:[String,Object,Function],required:!1,default:""},toastId:{type:[String,Number],required:!1,default:""},data:{type:[Object,String],required:!1,default(){return{}}},type:{type:String,required:!1,default:gs.DEFAULT},icon:{type:[Boolean,String,Number,Object,Function],required:!1,default:void 0},delay:{type:Number,required:!1,default:void 0},onOpen:{type:Function,required:!1,default:void 0},onClose:{type:Function,required:!1,default:void 0},onClick:{type:Function,required:!1,default:void 0},isLoading:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},toastClassName:{type:String,required:!1,default:""},updateId:{type:[String,Number],required:!1,default:""},contentProps:{type:Object,required:!1,default:null},expandCustomProps:{type:Boolean,required:!1,default:!1}},$Y={autoClose:{type:[Number,Boolean],required:!0},isRunning:{type:Boolean,required:!1,default:void 0},type:{type:String,required:!1,default:gs.DEFAULT},theme:{type:String,required:!1,default:Lr.AUTO},hide:{type:Boolean,required:!1,default:void 0},className:{type:[String,Function],required:!1,default:""},controlledProgress:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:void 0},isIn:{type:Boolean,required:!1,default:void 0},progress:{type:Number,required:!1,default:void 0},closeToast:{type:Function,required:!1,default:void 0}},EY=Le({name:"ProgressBar",props:$Y,setup(t,{attrs:e}){const s=I(),o=re(()=>t.hide?"true":"false"),n=re(()=>({...e.style||{},animationDuration:`${t.autoClose===!0?5e3:t.autoClose}ms`,animationPlayState:t.isRunning?"running":"paused",opacity:t.hide||t.autoClose===!1?0:1,transform:t.controlledProgress?`scaleX(${t.progress})`:"none"})),i=re(()=>[`${dt.CSS_NAMESPACE}__progress-bar`,t.controlledProgress?`${dt.CSS_NAMESPACE}__progress-bar--controlled`:`${dt.CSS_NAMESPACE}__progress-bar--animated`,`${dt.CSS_NAMESPACE}__progress-bar-theme--${t.theme}`,`${dt.CSS_NAMESPACE}__progress-bar--${t.type}`,t.rtl?`${dt.CSS_NAMESPACE}__progress-bar--rtl`:null].filter(Boolean).join(" ")),a=re(()=>`${i.value} ${(e==null?void 0:e.class)||""}`),l=()=>{s.value&&(s.value.onanimationend=null,s.value.ontransitionend=null)},c=()=>{t.isIn&&t.closeToast&&t.autoClose!==!1&&(t.closeToast(),l())},d=re(()=>t.controlledProgress?null:c),u=re(()=>t.controlledProgress?c:null);return _i(()=>{s.value&&(l(),s.value.onanimationend=d.value,s.value.ontransitionend=u.value)}),()=>fe("div",{ref:s,role:"progressbar","aria-hidden":o.value,"aria-label":"notification timer",class:a.value,style:n.value},null)}}),SY=Le({name:"CloseButton",inheritAttrs:!1,props:{theme:{type:String,required:!1,default:Lr.AUTO},type:{type:String,required:!1,default:Lr.LIGHT},ariaLabel:{type:String,required:!1,default:"close"},closeToast:{type:Function,required:!1,default:void 0}},setup(t){return()=>fe("button",{class:`${dt.CSS_NAMESPACE}__close-button ${dt.CSS_NAMESPACE}__close-button--${t.theme}`,type:"button",onClick:e=>{e.stopPropagation(),t.closeToast&&t.closeToast(e)},"aria-label":t.ariaLabel},[fe("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},[fe("path",{"fill-rule":"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"},null)])])}}),Qc=({theme:t,type:e,path:s,...o})=>fe("svg",Yo({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`},o),[fe("path",{d:s},null)]);function AY(t){return fe(Qc,Yo(t,{path:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}),null)}function TY(t){return fe(Qc,Yo(t,{path:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}),null)}function PY(t){return fe(Qc,Yo(t,{path:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}),null)}function MY(t){return fe(Qc,Yo(t,{path:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}),null)}function RY(){return fe("div",{class:`${dt.CSS_NAMESPACE}__spinner`},null)}const Sl={info:TY,warning:AY,success:PY,error:MY,spinner:RY},DY=t=>t in Sl;function OY({theme:t,type:e,isLoading:s,icon:o}){let n;const i=!!s||e==="loading",a={theme:t,type:e};if(i&&(o===void 0||typeof o=="boolean"))return Sl.spinner();if(o!==!1){if($l(o))n=ze(o);else if(Sr(o)){const l=o;a.type=i?"loading":e,n=l(a),n=!n&&i?Sl.spinner():n}else Jn(o)?n=Go(o,a):zu(o)||wY(o)?n=o:DY(e)&&(n=Sl[e](a));return n}}const IY=()=>{};function LY(t,e,s=dt.COLLAPSE_DURATION){const{scrollHeight:o,style:n}=t,i=s;requestAnimationFrame(()=>{n.minHeight="initial",n.height=o+"px",n.transition=`all ${i}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(e,i)})})}function BY(t){const e=I(!1),s=I(!1),o=I(!1),n=I(El.Enter),i=Ft({...t,appendPosition:t.appendPosition||!1,collapse:typeof t.collapse>"u"?!0:t.collapse,collapseDuration:t.collapseDuration||dt.COLLAPSE_DURATION}),a=i.done||IY,l=re(()=>i.appendPosition?`${i.enter}--${i.position}`:i.enter),c=re(()=>i.appendPosition?`${i.exit}--${i.position}`:i.exit),d=re(()=>t.pauseOnHover?{onMouseenter:x,onMouseleave:v}:{});function u(){const k=l.value.split(" ");p().addEventListener(Nu.ENTRANCE_ANIMATION_END,v,{once:!0});const C=$=>{const R=p();$.target===R&&(R.dispatchEvent(new Event(Nu.ENTRANCE_ANIMATION_END)),R.removeEventListener("animationend",C),R.removeEventListener("animationcancel",C),n.value===El.Enter&&$.type!=="animationcancel"&&R.classList.remove(...k))},P=()=>{const $=p();$.classList.add(...k),$.addEventListener("animationend",C),$.addEventListener("animationcancel",C)};t.pauseOnFocusLoss&&g(),P()}function f(){if(!p())return;const k=()=>{const P=p();P.removeEventListener("animationend",k),i.collapse?LY(P,a,i.collapseDuration):a()},C=()=>{const P=p();n.value=El.Exit,P&&(P.className+=` ${c.value}`,P.addEventListener("animationend",k))};s.value||(o.value?k():setTimeout(C))}function p(){return t.toastRef.value}function g(){document.hasFocus()||x(),window.addEventListener("focus",v),window.addEventListener("blur",x)}function m(){window.removeEventListener("focus",v),window.removeEventListener("blur",x)}function v(){(!t.loading.value||t.isLoading===void 0)&&(e.value=!0)}function x(){e.value=!1}function _(k){k&&(k.stopPropagation(),k.preventDefault()),s.value=!1}return _i(f),_i(()=>{const k=Br();s.value=k.findIndex(C=>C.toastId===i.toastId)>-1}),_i(()=>{t.isLoading!==void 0&&(t.loading.value?x():v())}),nt(u),sr(()=>{t.pauseOnFocusLoss&&m()}),{isIn:s,isRunning:e,hideToast:_,eventHandlers:d}}const NY=Le({name:"ToastItem",inheritAttrs:!1,props:gx,setup(t){const e=I(),s=re(()=>!!t.isLoading),o=re(()=>t.progress!==void 0&&t.progress!==null),n=re(()=>OY(t)),i=re(()=>[`${dt.CSS_NAMESPACE}__toast`,`${dt.CSS_NAMESPACE}__toast-theme--${t.theme}`,`${dt.CSS_NAMESPACE}__toast--${t.type}`,t.rtl?`${dt.CSS_NAMESPACE}__toast--rtl`:void 0,t.toastClassName||""].filter(Boolean).join(" ")),{isRunning:a,isIn:l,hideToast:c,eventHandlers:d}=BY({toastRef:e,loading:s,done:()=>{Ms.remove(t.toastId)},...ux(t.transition,t.disabledEnterTransition),...t});return()=>fe("div",Yo({id:t.toastId,class:i.value,style:t.toastStyle||{},ref:e,"data-testid":`toast-item-${t.toastId}`,onClick:u=>{t.closeOnClick&&c(),t.onClick&&t.onClick(u)}},d.value),[fe("div",{role:t.role,"data-testid":"toast-body",class:`${dt.CSS_NAMESPACE}__toast-body ${t.bodyClassName||""}`},[n.value!=null&&fe("div",{"data-testid":`toast-icon-${t.type}`,class:[`${dt.CSS_NAMESPACE}__toast-icon`,t.isLoading?"":`${dt.CSS_NAMESPACE}--animate-icon ${dt.CSS_NAMESPACE}__zoom-enter`].join(" ")},[$l(n.value)?Nt(ze(n.value),{theme:t.theme,type:t.type}):Sr(n.value)?n.value({theme:t.theme,type:t.type}):n.value]),fe("div",{"data-testid":"toast-content"},[$l(t.content)?Nt(ze(t.content),{toastProps:ze(t),closeToast:c,data:t.data,...t.expandCustomProps?t.contentProps:{contentProps:t.contentProps||{}}}):Sr(t.content)?t.content({toastProps:ze(t),closeToast:c,data:t.data}):t.dangerouslyHTMLString?Nt("div",{innerHTML:t.content}):t.content])]),(t.closeButton===void 0||t.closeButton===!0)&&fe(SY,{theme:t.theme,closeToast:u=>{u.stopPropagation(),u.preventDefault(),c()}},null),$l(t.closeButton)?Nt(ze(t.closeButton),{closeToast:c,type:t.type,theme:t.theme}):Sr(t.closeButton)?t.closeButton({closeToast:c,type:t.type,theme:t.theme}):null,fe(EY,{className:t.progressClassName,style:t.progressStyle,rtl:t.rtl,theme:t.theme,isIn:l.value,type:t.type,hide:t.hideProgressBar,isRunning:a.value,autoClose:t.autoClose,controlledProgress:o.value,progress:t.progress,closeToast:t.isLoading?void 0:c},null)])}});let Di=0;function mx(){typeof window>"u"||(Di&&window.cancelAnimationFrame(Di),Di=window.requestAnimationFrame(mx),cc.lastUrl!==window.location.href&&(cc.lastUrl=window.location.href,Ms.clear()))}const jY=Le({name:"ToastifyContainer",inheritAttrs:!1,props:gx,setup(t){const e=re(()=>t.containerId),s=re(()=>Gt[e.value]||[]),o=re(()=>s.value.filter(n=>n.position===t.position));return nt(()=>{typeof window<"u"&&t.clearOnUrlChange&&window.requestAnimationFrame(mx)}),sr(()=>{typeof window<"u"&&Di&&(window.cancelAnimationFrame(Di),cc.lastUrl="")}),()=>fe(ge,null,[o.value.map(n=>{const{toastId:i=""}=n;return fe(NY,Yo({key:i},n),null)})])}});let Ud=!1;const bx={isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1};function vx(){const t=[];return Br().forEach(e=>{const s=document.getElementById(e.containerId);s&&!s.classList.contains(Jc)&&t.push(e)}),t}function FY(t){const e=vx().length,s=t??0;return s>0&&e+_o.items.length>=s}function UY(t){FY(t.limit)&&!t.updateId&&_o.items.push({toastId:t.toastId,containerId:t.containerId,toastContent:t.content,toastProps:t})}function Cn(t,e,s={}){if(Ud)return;s=Xc(kY(),{type:e},ze(s)),(!s.toastId||typeof s.toastId!="string"&&typeof s.toastId!="number")&&(s.toastId=hx()),s={...s,...s.type==="loading"?bx:{},content:t,containerId:s.containerId||String(s.position)};const o=Number(s==null?void 0:s.progress);return!isNaN(o)&&o<0&&(s.progress=0),o>1&&(s.progress=1),s.theme==="auto"&&(s.theme=CY()),UY(s),cc.lastUrl=window.location.href,s.multiple?_o.items.length?s.updateId&&Cl(t,s):Cl(t,s):(Ud=!0,Ge.clearAll(void 0,!1),setTimeout(()=>{Cl(t,s)},0),setTimeout(()=>{Ud=!1},390)),s.toastId}const Ge=(t,e)=>Cn(t,gs.DEFAULT,e);Ge.info=(t,e)=>Cn(t,gs.DEFAULT,{...e,type:gs.INFO});Ge.error=(t,e)=>Cn(t,gs.DEFAULT,{...e,type:gs.ERROR});Ge.warning=(t,e)=>Cn(t,gs.DEFAULT,{...e,type:gs.WARNING});Ge.warn=Ge.warning;Ge.success=(t,e)=>Cn(t,gs.DEFAULT,{...e,type:gs.SUCCESS});Ge.loading=(t,e)=>Cn(t,gs.DEFAULT,Xc(e,bx));Ge.dark=(t,e)=>Cn(t,gs.DEFAULT,Xc(e,{theme:Lr.DARK}));Ge.remove=t=>{t?Ms.dismiss(t):Ms.clear()};Ge.clearAll=(t,e)=>{_s(()=>{Ms.clear(t,e)})};Ge.isActive=t=>{let e=!1;return e=vx().findIndex(s=>s.toastId===t)>-1,e};Ge.update=(t,e={})=>{setTimeout(()=>{const s=yY(t);if(s){const o=ze(s),{content:n}=o,i={...o,...e,toastId:e.toastId||t,updateId:hx()},a=i.render||n;delete i.render,Cn(a,i.type,i)}},0)};Ge.done=t=>{Ge.update(t,{isLoading:!1,progress:1})};Ge.promise=zY;function zY(t,{pending:e,error:s,success:o},n){var i,a,l;let c;const d={...n||{},autoClose:!1};e&&(c=zu(e)?Ge.loading(e,d):Ge.loading(e.render,{...d,...e}));const u={autoClose:(i=n==null?void 0:n.autoClose)!=null?i:!0,closeOnClick:(a=n==null?void 0:n.closeOnClick)!=null?a:!0,closeButton:(l=n==null?void 0:n.autoClose)!=null?l:null,isLoading:void 0,draggable:null,delay:100},f=(g,m,v)=>{if(m==null){Ge.remove(c);return}const x={type:g,...u,...n,data:v},_=zu(m)?{render:m}:m;return c?Ge.update(c,{...x,..._,isLoading:!1}):Ge(_.render,{...x,..._,isLoading:!1}),v},p=Sr(t)?t():t;return p.then(g=>{f("success",o,g)}).catch(g=>{f("error",s,g)}),p}Ge.POSITION=ga;Ge.THEME=Lr;Ge.TYPE=gs;Ge.TRANSITIONS=eY;const yx={install(t,e={}){xY.useHandler=e.useHandler||(()=>{}),VY(e)}};typeof window<"u"&&(window.Vue3Toastify=yx);function VY(t={}){const e=Xc(dx,t);_Y(e)}const HY={class:"avatar-selector"},qY={key:0,class:"mb-6 p-4 bg-gray-700/50 rounded-xl border border-gray-600"},WY={class:"flex items-center space-x-4"},GY={class:"text-center"},KY={class:"w-16 h-16 rounded-full overflow-hidden border-4 border-purple-500/50 shadow-lg mx-auto"},YY=["src","alt"],JY={class:"flex-1"},XY={class:"text-white font-medium text-lg"},QY={class:"grid grid-cols-3 gap-4"},ZY=["onClick"],eJ={key:0,class:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center z-10"},tJ={class:"avatar-container"},sJ=["src","alt"],oJ={class:"mt-6 text-center"},nJ=["disabled"],rJ=Le({__name:"AvatarSelector",props:{selectedAvatar:{}},emits:["select","confirm"],setup(t){const e=t,s=()=>e.selectedAvatar?Lc(e.selectedAvatar):null;return(o,n)=>{var i,a,l;return b(),y("div",HY,[n[5]||(n[5]=r("h3",{class:"text-lg font-semibold text-white mb-4 flex items-center"},[r("i",{class:"fas fa-gem mr-2 text-purple-400"}),ne(" Elige tu Gema ")],-1)),o.selectedAvatar?(b(),y("div",qY,[r("div",WY,[r("div",GY,[r("div",KY,[r("img",{src:(i=s())==null?void 0:i.path,alt:(a=s())==null?void 0:a.name,class:"w-full h-full object-cover"},null,8,YY)])]),r("div",JY,[r("h4",XY,w((l=s())==null?void 0:l.name),1),n[1]||(n[1]=r("p",{class:"text-gray-300 text-sm"},"Avatar seleccionado",-1))]),n[2]||(n[2]=r("div",{class:"text-green-400"},[r("i",{class:"fas fa-check-circle text-2xl"})],-1))])])):q("",!0),r("div",QY,[(b(!0),y(ge,null,xe(ye(_f),c=>(b(),y("div",{key:c.id,onClick:d=>o.$emit("select",c.id),class:de(["avatar-option cursor-pointer transition-all duration-200 transform hover:scale-105 relative",{"ring-4 ring-yellow-400 ring-offset-2 ring-offset-gray-800 bg-yellow-400/10":o.selectedAvatar===c.id,"hover:ring-2 hover:ring-gray-400 hover:ring-offset-1":o.selectedAvatar!==c.id}])},[o.selectedAvatar===c.id?(b(),y("div",eJ,[...n[3]||(n[3]=[r("i",{class:"fas fa-check text-xs text-gray-900"},null,-1)])])):q("",!0),r("div",tJ,[r("img",{src:c.path,alt:c.name,class:de(["w-16 h-16 rounded-full object-cover border-2 transition-all duration-200",o.selectedAvatar===c.id?"border-yellow-400":"border-white/20"])},null,10,sJ)]),r("p",{class:de(["text-xs text-center mt-2 transition-colors duration-200",o.selectedAvatar===c.id?"text-yellow-400 font-semibold":"text-gray-300"])},w(c.name),3)],10,ZY))),128))]),r("div",oJ,[r("button",{onClick:n[0]||(n[0]=c=>o.$emit("confirm")),disabled:!o.selectedAvatar,class:de(["px-6 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",o.selectedAvatar?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white":"bg-gray-600 text-gray-400"])},[...n[4]||(n[4]=[r("i",{class:"fas fa-check mr-2"},null,-1),ne(" Confirmar Gema ",-1)])],10,nJ)])])}}}),iJ=Et(rJ,[["__scopeId","data-v-3cc67855"]]),aJ={class:"space-y-4"},lJ={key:0,class:"relative mx-auto"},cJ={class:"w-32 h-32 rounded-full overflow-hidden border-4 border-purple-500/50 mx-auto"},dJ=["src"],uJ={key:1,class:"text-center text-sm text-blue-400"},fJ={class:"flex flex-wrap gap-2 justify-center"},pJ={key:2,class:"text-center text-xs text-gray-400 mt-2"},hJ={key:3,class:"text-center text-sm text-red-400"},gJ=Le({__name:"ProfilePhotoUploader",props:{currentPhoto:{}},emits:["update"],setup(t,{emit:e}){const s=e,o=I(null),n=I(""),i=I(null),a=I(!1),l=I(""),c=()=>{var m;(m=o.value)==null||m.click()},d=m=>{const x=m.target.files;if(x&&x.length>0){const _=x[0];if(!_.type.match("image.*")){l.value="Por favor selecciona una imagen vlida";return}if(_.size>2*1024*1024){l.value="La imagen debe ser menor a 2MB";return}l.value="",n.value=URL.createObjectURL(_),i.value=_}},u=async()=>{var m;if(i.value)try{a.value=!0,l.value="";const v=await lc.uploadProfilePhoto(i.value);v.success?(Ge.success("Foto de perfil actualizada correctamente"),s("update",{photo:((m=v.data)==null?void 0:m.photo)||null,avatar:null}),g()):l.value=v.message||"Error al subir la imagen"}catch(v){l.value=v.message||"Error al subir la imagen",console.error("Error uploading photo:",v)}finally{a.value=!1}},f=async()=>{try{a.value=!0,l.value="";const m=await lc.removeProfilePhoto();m.success?(Ge.success("Foto de perfil eliminada correctamente"),s("update",{photo:null,avatar:null})):l.value=m.message||"Error al eliminar la imagen"}catch(m){l.value=m.message||"Error al eliminar la imagen",console.error("Error removing photo:",m)}finally{a.value=!1}},p=()=>{g()},g=()=>{n.value&&URL.revokeObjectURL(n.value),n.value="",i.value=null,o.value&&(o.value.value="")};return(m,v)=>(b(),y("div",null,[r("input",{type:"file",ref_key:"fileInput",ref:o,class:"hidden",accept:"image/*",onChange:d},null,544),r("div",aJ,[n.value?(b(),y("div",lJ,[r("div",cJ,[r("img",{src:n.value,alt:"Vista previa",class:"w-full h-full object-cover"},null,8,dJ)]),r("button",{onClick:p,class:"absolute top-0 right-0 bg-red-600 rounded-full w-8 h-8 flex items-center justify-center text-white shadow-lg",title:"Cancelar"},[...v[0]||(v[0]=[r("i",{class:"fas fa-times"},null,-1)])])])):q("",!0),a.value?(b(),y("div",uJ,[...v[1]||(v[1]=[r("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),ne(" Subiendo imagen... ",-1)])])):q("",!0),r("div",fJ,[!n.value&&!a.value?(b(),y("button",{key:0,onClick:c,class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg flex items-center gap-2"},[...v[2]||(v[2]=[r("i",{class:"fas fa-camera"},null,-1),ne(" Seleccionar Imagen ",-1)])])):q("",!0),n.value&&!a.value?(b(),y("button",{key:1,onClick:u,class:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg flex items-center gap-2"},[...v[3]||(v[3]=[r("i",{class:"fas fa-cloud-upload-alt"},null,-1),ne(" Subir Imagen ",-1)])])):q("",!0),m.currentPhoto&&!a.value&&!n.value?(b(),y("button",{key:2,onClick:f,class:"px-4 py-2 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white rounded-lg flex items-center gap-2"},[...v[4]||(v[4]=[r("i",{class:"fas fa-trash-alt"},null,-1),ne(" Eliminar Foto Actual ",-1)])])):q("",!0)]),!n.value&&!a.value?(b(),y("div",pJ,[...v[5]||(v[5]=[r("p",null,"Sube una foto de perfil personalizada",-1),r("p",null,"Tamao mximo: 2MB",-1)])])):q("",!0),l.value?(b(),y("div",hJ,[v[6]||(v[6]=r("i",{class:"fas fa-exclamation-triangle mr-2"},null,-1)),ne(" "+w(l.value),1)])):q("",!0)])]))}}),mJ={class:"space-y-6"},bJ={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"},vJ={class:"flex flex-col md:flex-row items-center gap-6"},yJ={class:"relative"},xJ={class:"w-32 h-32 rounded-full overflow-hidden border-4 border-purple-500/50 shadow-2xl"},wJ=["src","alt"],_J=["src","alt"],kJ={key:2,class:"w-full h-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-white text-4xl font-bold"},CJ={class:"text-center md:text-left flex-1"},$J={class:"text-3xl font-bold text-white mb-2"},EJ={class:"text-purple-300 text-lg mb-2"},SJ={class:"text-gray-400 mb-4"},AJ={class:"flex flex-wrap gap-2 justify-center md:justify-start"},TJ={class:"px-3 py-1 bg-blue-600/20 text-blue-300 rounded-full text-sm"},PJ={class:"flex gap-3"},MJ={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"},RJ={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},DJ={key:0},OJ={key:1},IJ={class:"text-white bg-gray-700 px-4 py-3 rounded-lg"},LJ={key:0},BJ={key:1},NJ={class:"text-white bg-gray-700 px-4 py-3 rounded-lg"},jJ={key:0},FJ={key:1},UJ={class:"text-white bg-gray-700 px-4 py-3 rounded-lg"},zJ={key:0},VJ={key:1},HJ={class:"text-white bg-gray-700 px-4 py-3 rounded-lg"},qJ={class:"text-white bg-gray-700 px-4 py-3 rounded-lg"},WJ={class:"text-white bg-gray-700 px-4 py-3 rounded-lg"},GJ={class:"text-white bg-gray-700 px-4 py-3 rounded-lg"},KJ={key:0,class:"flex gap-4 mt-6 justify-end"},YJ=["disabled"],JJ={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"},XJ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},QJ={class:"flex justify-end"},ZJ=["disabled"],eX={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},tX={class:"bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4"},sX={class:"flex justify-between items-center mb-4"},oX={key:1,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},nX={class:"bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4"},rX={class:"flex justify-between items-center mb-4"},iX=Le({__name:"ProfileView",setup(t){const e=xt(),s=I(!1),o=I(!1),n=I(!1),i=I(!1),a=I(""),l=I(!1),c=I({name:"",email:"",role:"",phone:"",department:"",avatar:null,photo:null,createdAt:"",updatedAt:""}),d=re(()=>{var O;const S=(O=c.value)==null?void 0:O.avatar;return S?Lc(S):null}),u=re(()=>{const S=c.value.photo;return!S||l.value?"":/^https?:\/\//i.test(S)?S:`${String(et.BASE_URL).replace(/\/?api\/?$/i,"").replace(/\/$/,"")}/${S.replace(/^\//,"")}`}),f=I({name:"",email:"",phone:"",department:""}),p=I({currentPassword:"",newPassword:"",confirmPassword:""}),g=S=>S.split(" ").map(O=>O.charAt(0)).join("").toUpperCase().substring(0,2),m=S=>({admin:"Administrador",manager:"Gerente",user:"Usuario",employee:"Empleado"})[S]||S||"Sin rol",v=()=>{l.value=!0,console.error("Error cargando foto de perfil")},x=()=>{i.value=!i.value,i.value&&(n.value=!1)},_=S=>{c.value.photo=S.photo,c.value.avatar=S.avatar,e.user&&(e.user.photo=S.photo,e.user.avatar=S.avatar,localStorage.setItem("user",JSON.stringify(e.user))),i.value=!1,l.value=!1},k=S=>{if(!S)return"No disponible";try{return new Date(S).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch{return"Fecha invlida"}},C=S=>{a.value=S},P=()=>{a.value=c.value.avatar||Fl().id,n.value=!0},$=async()=>{if(a.value)try{s.value=!0;const S=await lc.updateUserAvatar(a.value);S.success?(c.value.avatar=a.value,c.value.photo=null,e.user&&(e.user.avatar=a.value(e.user).photo=null,localStorage.setItem("user",JSON.stringify(e.user))),n.value=!1,a.value="",Ge.success("Avatar actualizado correctamente")):Ge.error(S.message||"Error al actualizar el avatar")}catch(S){console.error("Error al actualizar avatar:",S),Ge.error("Error al actualizar el avatar")}finally{s.value=!1}},R=()=>{c.value&&(o.value?f.value={name:c.value.name||"",email:c.value.email||"",phone:c.value.phone||"",department:c.value.department||""}:f.value={name:c.value.name||"",email:c.value.email||"",phone:c.value.phone||"",department:c.value.department||""},o.value=!o.value)},V=async()=>{try{s.value=!0;const S=await e.updateProfile(f.value);S.success?(Object.assign(c.value,f.value),o.value=!1,Ge.success("Perfil actualizado correctamente")):Ge.error(S.message||"Error al actualizar el perfil")}catch(S){console.error("Error al actualizar perfil:",S),Ge.error("Error al actualizar el perfil")}finally{s.value=!1}},B=async()=>{try{s.value=!0,await Ng.updatePassword({currentPassword:p.value.currentPassword,newPassword:p.value.newPassword}),p.value={currentPassword:"",newPassword:"",confirmPassword:""},Ge.success("Contrasea actualizada correctamente")}catch(S){console.error("Error al cambiar contrasea:",S),Ge.error("Error al cambiar la contrasea")}finally{s.value=!1}},E=async()=>{var S,O;try{s.value=!0,console.log(" Iniciando carga de perfil..."),console.log(" AuthStore user:",e.user),e.user?(console.log(" Datos encontrados en authStore, inicializando..."),c.value={name:e.user.name||"",email:e.user.email||"",role:e.user.role||"",phone:e.user.phone||"",department:e.user.department||"",avatar:e.user.avatar||null,photo:e.user.photo||null,createdAt:e.user.createdAt||"",updatedAt:e.user.updatedAt||""},console.log(" ProfileData inicial:",c.value)):console.log(" No se encontraron datos en authStore");try{console.log(" Cargando perfil del servidor...");const T=await Ng.getProfile();console.log(" Perfil cargado del servidor:",T),c.value={name:T.name||"",email:T.email||"",role:T.role||"",phone:T.phone||"",department:T.department||"",avatar:T.avatar||null,photo:T.photo||null,createdAt:T.createdAt||"",updatedAt:T.updatedAt||""},l.value=!1}catch(T){console.error(" Error al cargar perfil del servidor:",T),!c.value.name&&e.user&&(console.log(" Usando datos de respaldo del authStore..."),c.value={name:e.user.name||"",email:e.user.email||"",role:e.user.role||"",phone:e.user.phone||"",department:e.user.department||"",avatar:e.user.avatar||null,photo:e.user.photo||null,createdAt:e.user.createdAt||"",updatedAt:e.user.updatedAt||""})}try{const T=await lc.getUserAvatar();T&&(c.value.avatar=T.avatar,c.value.photo=T.photo,e.user&&(e.user.avatar=T.avatar(e.user).photo=T.photo,localStorage.setItem("user",JSON.stringify(e.user))))}catch(T){console.error("Error al cargar informacin de avatar:",T)}}catch(T){console.error(" Error general al cargar perfil:",T),Ge.error("Error al cargar el perfil: "+((T==null?void 0:T.message)||"Error desconocido"))}finally{s.value=!1,console.log(" Carga de perfil completada"),console.log(" ProfileData final:",c.value),console.log(" DEBUGGING IMGENES:"),console.log("- Avatar ID:",(S=c.value)==null?void 0:S.avatar),console.log("- Foto Path:",(O=c.value)==null?void 0:O.photo),console.log("- Avatar seleccionado:",d.value),console.log("- URL foto resuelta:",u.value)}};return nt(()=>{E()}),(S,O)=>{var T,L,K,z,F,W,Z,le,J,Pe,me,Y;return b(),y("div",mJ,[r("div",bJ,[r("div",vJ,[r("div",yJ,[r("div",xJ,[c.value.photo?(b(),y("img",{key:0,src:u.value,alt:c.value.name,class:"w-full h-full object-cover",onError:v},null,40,wJ)):d.value?(b(),y("img",{key:1,src:d.value.path,alt:d.value.name,class:"w-full h-full object-cover"},null,8,_J)):(b(),y("div",kJ,w(g(((T=c.value)==null?void 0:T.name)||"U")),1))]),r("div",{class:"absolute bottom-2 right-2 flex gap-2"},[r("button",{onClick:x,class:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-full flex items-center justify-center text-white shadow-lg transition-all duration-200 transform hover:scale-110",title:"Subir foto personalizada"},[...O[9]||(O[9]=[r("i",{class:"fas fa-camera text-sm"},null,-1)])]),r("button",{onClick:P,class:"w-10 h-10 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-full flex items-center justify-center text-white shadow-lg transition-all duration-200 transform hover:scale-110",title:"Elegir Gema"},[...O[10]||(O[10]=[r("i",{class:"fas fa-gem text-sm"},null,-1)])])])]),r("div",CJ,[r("h1",$J,w(((L=c.value)==null?void 0:L.name)||"Cargando..."),1),r("p",EJ,w(m(((K=c.value)==null?void 0:K.role)||"")),1),r("p",SJ,w(((z=c.value)==null?void 0:z.email)||""),1),r("div",AJ,[O[12]||(O[12]=r("span",{class:"px-3 py-1 bg-green-600/20 text-green-300 rounded-full text-sm"},[r("i",{class:"fas fa-check-circle mr-1"}),ne(" Activo ")],-1)),r("span",TJ,[O[11]||(O[11]=r("i",{class:"fas fa-calendar mr-1"},null,-1)),ne(" Desde "+w(k(((F=c.value)==null?void 0:F.createdAt)||"")),1)])])]),r("div",PJ,[r("button",{onClick:R,class:de(["px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105",o.value?"bg-red-600 hover:bg-red-700 text-white":"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white"])},[r("i",{class:de([o.value?"fas fa-times":"fas fa-edit","mr-2"])},null,2),ne(" "+w(o.value?"Cancelar":"Editar Perfil"),1)],2)])])]),r("div",MJ,[O[22]||(O[22]=r("h2",{class:"text-xl font-bold text-white mb-6 flex items-center"},[r("i",{class:"fas fa-user mr-3 text-purple-400"}),ne(" Informacin Personal ")],-1)),r("div",RJ,[r("div",null,[O[13]||(O[13]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-signature mr-2"}),ne(" Nombre Completo ")],-1)),o.value?(b(),y("div",DJ,[ie(r("input",{"onUpdate:modelValue":O[0]||(O[0]=j=>f.value.name=j),type:"text",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Tu nombre completo"},null,512),[[ke,f.value.name]])])):(b(),y("div",OJ,[r("p",IJ,w(((W=c.value)==null?void 0:W.name)||"No especificado"),1)]))]),r("div",null,[O[14]||(O[14]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-envelope mr-2"}),ne(" Correo Electrnico ")],-1)),o.value?(b(),y("div",LJ,[ie(r("input",{"onUpdate:modelValue":O[1]||(O[1]=j=>f.value.email=j),type:"email",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"tu@email.com"},null,512),[[ke,f.value.email]])])):(b(),y("div",BJ,[r("p",NJ,w(((Z=c.value)==null?void 0:Z.email)||"No especificado"),1)]))]),r("div",null,[O[15]||(O[15]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-phone mr-2"}),ne(" Telfono ")],-1)),o.value?(b(),y("div",jJ,[ie(r("input",{"onUpdate:modelValue":O[2]||(O[2]=j=>f.value.phone=j),type:"tel",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+57 300 000 0000"},null,512),[[ke,f.value.phone]])])):(b(),y("div",FJ,[r("p",UJ,w(((le=c.value)==null?void 0:le.phone)||"No especificado"),1)]))]),r("div",null,[O[16]||(O[16]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-building mr-2"}),ne(" Departamento ")],-1)),o.value?(b(),y("div",zJ,[ie(r("input",{"onUpdate:modelValue":O[3]||(O[3]=j=>f.value.department=j),type:"text",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Tu departamento"},null,512),[[ke,f.value.department]])])):(b(),y("div",VJ,[r("p",HJ,w(((J=c.value)==null?void 0:J.department)||"No especificado"),1)]))]),r("div",null,[O[17]||(O[17]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-user-tag mr-2"}),ne(" Rol ")],-1)),r("div",null,[r("p",qJ,w(m(((Pe=c.value)==null?void 0:Pe.role)||"")),1)])]),r("div",null,[O[18]||(O[18]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-calendar-plus mr-2"}),ne(" Fecha de Registro ")],-1)),r("div",null,[r("p",WJ,w(k(((me=c.value)==null?void 0:me.createdAt)||"")),1)])]),r("div",null,[O[19]||(O[19]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[r("i",{class:"fas fa-clock mr-2"}),ne(" ltima Actualizacin ")],-1)),r("div",null,[r("p",GJ,w(k(((Y=c.value)==null?void 0:Y.updatedAt)||"")),1)])])]),o.value?(b(),y("div",KJ,[r("button",{onClick:R,class:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium transition-all duration-300"},[...O[20]||(O[20]=[r("i",{class:"fas fa-times mr-2"},null,-1),ne(" Cancelar ",-1)])]),r("button",{onClick:V,disabled:s.value,class:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-medium transition-all duration-300 disabled:opacity-50"},[O[21]||(O[21]=r("i",{class:"fas fa-save mr-2"},null,-1)),ne(" "+w(s.value?"Guardando...":"Guardar Cambios"),1)],8,YJ)])):q("",!0)]),r("div",JJ,[O[27]||(O[27]=r("h2",{class:"text-xl font-bold text-white mb-6 flex items-center"},[r("i",{class:"fas fa-lock mr-3 text-purple-400"}),ne(" Cambiar Contrasea ")],-1)),r("form",{onSubmit:Fe(B,["prevent"]),class:"space-y-4"},[r("div",XJ,[r("div",null,[O[23]||(O[23]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Contrasea Actual ",-1)),ie(r("input",{"onUpdate:modelValue":O[4]||(O[4]=j=>p.value.currentPassword=j),type:"password",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"",autocomplete:"current-password",required:""},null,512),[[ke,p.value.currentPassword]])]),r("div",null,[O[24]||(O[24]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Nueva Contrasea ",-1)),ie(r("input",{"onUpdate:modelValue":O[5]||(O[5]=j=>p.value.newPassword=j),type:"password",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"",autocomplete:"new-password",required:""},null,512),[[ke,p.value.newPassword]])]),r("div",null,[O[25]||(O[25]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Confirmar Contrasea ",-1)),ie(r("input",{"onUpdate:modelValue":O[6]||(O[6]=j=>p.value.confirmPassword=j),type:"password",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"",autocomplete:"new-password",required:""},null,512),[[ke,p.value.confirmPassword]])])]),r("div",QJ,[r("button",{type:"submit",disabled:s.value||!p.value.currentPassword||!p.value.newPassword||p.value.newPassword!==p.value.confirmPassword,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-xl font-medium transition-all duration-300 disabled:opacity-50"},[O[26]||(O[26]=r("i",{class:"fas fa-key mr-2"},null,-1)),ne(" "+w(s.value?"Actualizando...":"Cambiar Contrasea"),1)],8,ZJ)])],32)]),n.value?(b(),y("div",eX,[r("div",tX,[r("div",sX,[O[29]||(O[29]=r("h3",{class:"text-xl font-bold text-white"},"Elige tu Gema",-1)),r("button",{onClick:O[7]||(O[7]=j=>n.value=!1),class:"text-gray-400 hover:text-white transition-colors"},[...O[28]||(O[28]=[r("i",{class:"fas fa-times text-xl"},null,-1)])])]),fe(iJ,{"selected-avatar":a.value||c.value.avatar||ye(Fl)().id,onSelect:C,onConfirm:$},null,8,["selected-avatar"])])])):q("",!0),i.value?(b(),y("div",oX,[r("div",nX,[r("div",rX,[O[31]||(O[31]=r("h3",{class:"text-xl font-bold text-white"},"Foto de Perfil",-1)),r("button",{onClick:O[8]||(O[8]=j=>i.value=!1),class:"text-gray-400 hover:text-white transition-colors"},[...O[30]||(O[30]=[r("i",{class:"fas fa-times text-xl"},null,-1)])])]),fe(gJ,{"current-photo":c.value.photo,onUpdate:_},null,8,["current-photo"])])])):q("",!0)])}}}),aX={class:"fixed inset-0 z-50 overflow-y-auto"},lX={class:"flex items-center justify-center min-h-screen px-4"},cX={class:"relative bg-transparent backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl w-full max-w-sm p-5"},dX={class:"flex items-center justify-between mb-6"},uX={class:"grid grid-cols-3 gap-2"},fX=["onClick"],pX={class:"text-xs font-medium"},hX=["placeholder"],gX={key:0},mX={class:"block text-sm font-medium text-white mb-2"},bX={key:0,class:"flex items-center justify-center py-4"},vX={key:1,class:"max-h-40 overflow-y-auto space-y-2 p-2 bg-white/5 rounded-lg border border-white/10"},yX=["onClick"],xX={class:"flex items-center flex-1"},wX={class:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center mr-3"},_X={class:"text-white text-xs font-medium"},kX={class:"flex-1 min-w-0"},CX={class:"text-sm font-medium text-white truncate"},$X={class:"text-xs text-gray-400 truncate"},EX={key:0,class:"text-center text-gray-400 py-4"},SX={key:2,class:"text-xs text-gray-400 mt-2"},AX={class:"flex space-x-3 pt-4"},TX=["disabled"],PX=Le({__name:"CreateRoomModal",emits:["close","created"],setup(t,{emit:e}){const s=e,o=Ic(),n=I(!1),i=I(!1),a=I([]),l=I([]),c=I({type:"team",name:"",description:""}),d=[{value:"direct",label:"Directo",icon:hl},{value:"team",label:"Equipo",icon:mn},{value:"group",label:"Grupo",icon:qn}],u=re(()=>c.value.name.trim()?c.value.type==="direct"?l.value.length===1:l.value.length>0:!1),f=()=>{switch(c.value.type){case"direct":return"Se generar automticamente";case"team":return"Ej: Desarrollo, Marketing, Ventas";case"group":return"Ej: Proyecto Alpha, Cliente XYZ";default:return"Nombre del chat"}},p=m=>{if(c.value.type==="direct")l.value=l.value.includes(m)?[]:[m];else{const v=l.value.indexOf(m);v>-1?l.value.splice(v,1):l.value.push(m)}},g=async()=>{if(u.value){i.value=!0;try{let m={participants:l.value,type:c.value.type};if(c.value.type==="direct"){const x=a.value.find(_=>_._id===l.value[0]);m.name=x?`Chat con ${x.name}`:"Chat directo"}else m.name=c.value.name.trim(),c.value.description.trim()&&(m.description=c.value.description.trim());const v=await o.createChatRoom(m);s("created",v)}catch(m){console.error("Error creating chat room:",m)}finally{i.value=!1}}};return nt(async()=>{n.value=!0;try{await o.loadUsers(),a.value=o.users}catch(m){console.error("Error loading users:",m)}finally{n.value=!1}}),(m,v)=>(b(),y("div",aX,[r("div",lX,[r("div",{class:"fixed inset-0 bg-transparent backdrop-blur-sm",onClick:v[0]||(v[0]=x=>m.$emit("close"))}),r("div",cX,[r("div",dX,[v[5]||(v[5]=r("h3",{class:"text-lg font-semibold text-white"},"Crear nuevo chat",-1)),r("button",{onClick:v[1]||(v[1]=x=>m.$emit("close")),class:"text-gray-400 hover:text-white transition-colors"},[fe(ye(kr),{class:"w-5 h-5"})])]),r("form",{onSubmit:Fe(g,["prevent"]),class:"space-y-4"},[r("div",null,[v[6]||(v[6]=r("label",{class:"block text-sm font-medium text-white mb-2"}," Tipo de chat ",-1)),r("div",uX,[(b(),y(ge,null,xe(d,x=>r("button",{type:"button",key:x.value,onClick:_=>c.value.type=x.value,class:de(["p-3 rounded-lg border transition-all text-center",c.value.type===x.value?"border-purple-500 bg-purple-500/20 text-white":"border-white/20 bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"])},[(b(),Ue(vc(x.icon),{class:"w-5 h-5 mx-auto mb-1"})),r("span",pX,w(x.label),1)],10,fX)),64))])]),r("div",null,[v[7]||(v[7]=r("label",{for:"chatName",class:"block text-sm font-medium text-white mb-2"}," Nombre del chat ",-1)),ie(r("input",{id:"chatName","onUpdate:modelValue":v[2]||(v[2]=x=>c.value.name=x),type:"text",required:"",placeholder:f(),class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500"},null,8,hX),[[ke,c.value.name]])]),c.value.type!=="direct"?(b(),y("div",gX,[v[8]||(v[8]=r("label",{for:"chatDescription",class:"block text-sm font-medium text-white mb-2"}," Descripcin (opcional) ",-1)),ie(r("textarea",{id:"chatDescription","onUpdate:modelValue":v[3]||(v[3]=x=>c.value.description=x),rows:"3",placeholder:"Describe el propsito de este chat...",class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 resize-none"},null,512),[[ke,c.value.description]])])):q("",!0),r("div",null,[r("label",mX,w(c.value.type==="direct"?"Seleccionar usuario":"Seleccionar participantes"),1),n.value?(b(),y("div",bX,[...v[9]||(v[9]=[r("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"},null,-1)])])):(b(),y("div",vX,[(b(!0),y(ge,null,xe(a.value,x=>(b(),y("div",{key:x._id,onClick:_=>p(x._id),class:de(["flex items-center p-2 rounded-lg cursor-pointer transition-colors",l.value.includes(x._id)?"bg-purple-500/30 border border-purple-500/50":"hover:bg-white/10"])},[r("div",xX,[r("div",wX,[r("span",_X,w(x.name.charAt(0).toUpperCase()),1)]),r("div",kX,[r("p",CX,w(x.name),1),r("p",$X,w(x.position||x.role),1)])]),r("div",{class:de(["w-4 h-4 rounded border flex items-center justify-center",l.value.includes(x._id)?"bg-purple-500 border-purple-500":"border-gray-400"])},[l.value.includes(x._id)?(b(),Ue(ye(kf),{key:0,class:"w-3 h-3 text-white"})):q("",!0)],2)],10,yX))),128)),a.value.length===0?(b(),y("div",EX," No hay usuarios disponibles ")):q("",!0)])),l.value.length>0?(b(),y("p",SX,w(l.value.length)+" usuario"+w(l.value.length!==1?"s":"")+" seleccionado"+w(l.value.length!==1?"s":""),1)):q("",!0)]),r("div",AX,[r("button",{type:"button",onClick:v[4]||(v[4]=x=>m.$emit("close")),class:"flex-1 px-4 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:!u.value,class:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors"},w(i.value?"Creando...":"Crear chat"),9,TX)])],32)])])]))}}),MX={class:"h-[100dvh] max-h-[100dvh] bg-transparent text-white"},RX={class:"h-[100dvh] p-4 sm:p-6"},DX={class:"grid grid-cols-1 lg:grid-cols-[320px,1fr] h-full rounded-2xl border border-white/15 bg-white/5 backdrop-blur-sm overflow-hidden"},OX={class:"hidden lg:flex flex-col border-r border-white/10 bg-white/5 backdrop-blur-sm"},IX={class:"px-4 py-3 border-b border-white/10"},LX={class:"flex items-center justify-between"},BX={class:"flex items-center gap-2"},NX={key:0,class:"text-xs text-yellow-300"},jX={key:1,class:"text-xs text-emerald-300"},FX={class:"flex-1 overflow-y-auto p-3 custom-scrollbar"},UX={key:0,class:"py-10 text-center text-gray-400"},zX={key:1,class:"py-10 text-center"},VX={key:2,class:"space-y-2"},HX=["onClick"],qX={class:"min-w-0 flex-1"},WX={class:"flex items-center justify-between gap-2"},GX={class:"font-medium truncate"},KX={class:"text-xs text-gray-400"},YX={class:"flex items-center justify-between gap-2"},JX={class:"text-xs text-gray-400 whitespace-nowrap"},XX={key:0,class:"text-[10px] rounded-full bg-pink-600 px-2 py-0.5 notification-pulse"},QX=["onClick"],ZX={class:"flex flex-col min-h-0 bg-white/0"},eQ={class:"px-4 sm:px-6 py-3 border-b border-white/10 bg-white/5 backdrop-blur-sm"},tQ={key:0,class:"flex items-center justify-between"},sQ={class:"flex items-center gap-3 min-w-0"},oQ={class:"min-w-0"},nQ={class:"font-semibold truncate"},rQ={class:"text-xs text-gray-400 flex items-center gap-2"},iQ={class:"whitespace-nowrap"},aQ={key:0,class:"ml-2 text-purple-300"},lQ={key:1,class:"flex items-center justify-between"},cQ={key:0,class:"h-full grid place-items-center"},dQ={class:"text-center"},uQ={key:1},fQ={key:0,class:"py-10 text-center text-gray-400"},pQ={key:1,class:"py-10 text-center text-gray-300"},hQ={key:2,class:"space-y-4"},gQ={key:0,class:"mb-1 text-xs text-purple-200 font-medium"},mQ={class:"whitespace-pre-wrap break-words"},bQ={key:1,class:"mt-3 space-y-2"},vQ=["href"],yQ={class:"truncate"},xQ={class:"text-xs text-gray-400"},wQ={class:"mt-2 flex items-center gap-2 text-xs text-white/70"},_Q=["title"],kQ={key:0,class:"text-yellow-300"},CQ=["onClick"],$Q={key:0,class:"text-sm text-purple-300"},EQ={class:"max-w-[80%] rounded-xl border px-4 py-3 bg-purple-600 border-purple-500 text-white"},SQ={class:"whitespace-pre-wrap break-words"},AQ={class:"mt-1 text-xs text-white/70"},TQ={key:2,class:"pointer-events-none absolute top-0 left-0 right-0 h-6 bg-gradient-to-b from-purple-500/15 to-transparent"},PQ={key:3,class:"pointer-events-none absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t from-pink-500/15 to-transparent"},MQ={class:"flex items-center gap-2"},RQ={class:"border-t border-white/10 bg-white/5 backdrop-blur-sm px-4 sm:px-6 py-3"},DQ={key:0,class:"mb-2 flex items-center justify-between rounded-md bg-yellow-500/10 border border-yellow-500/40 px-3 py-2 text-yellow-200"},OQ={class:"flex items-end gap-2"},IQ=["onClick"],LQ={class:"relative flex-1"},BQ=["onKeydown","placeholder"],NQ=["disabled"],jQ={key:0,class:"fixed inset-0 z-50 lg:hidden"},FQ={class:"absolute inset-y-0 left-0 w-[86%] max-w-sm bg-white/10 backdrop-blur-md border-r border-white/10 shadow-xl flex flex-col"},UQ={class:"px-4 py-3 border-b border-white/10 flex items-center justify-between"},zQ={class:"flex-1 overflow-y-auto p-3 custom-scrollbar"},VQ={class:"space-y-2"},HQ=["onClick"],qQ={class:"min-w-0 flex-1"},WQ={class:"flex items-center justify-between gap-2"},GQ={class:"font-medium truncate"},KQ={class:"text-xs text-gray-400"},YQ={class:"text-xs text-gray-400 truncate"},JQ={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},XQ={class:"relative bg-slate-900 rounded-xl border border-white/10 shadow-2xl w-full max-w-md mx-4"},QQ={class:"p-5"},ZQ={class:"flex items-center justify-between mb-3"},eZ={class:"space-y-4 text-sm"},tZ={class:"font-medium"},sZ={key:0},oZ={class:"text-gray-400"},nZ={class:"mt-2 space-y-2 max-h-56 overflow-y-auto custom-scrollbar"},rZ={class:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center"},iZ={class:"text-xs font-semibold"},aZ={class:"min-w-0"},lZ={class:"font-medium truncate"},cZ={class:"text-xs text-gray-400 truncate"},dZ={class:"text-xs text-gray-400"},uZ=Le({__name:"ChatPage",setup(t){const e=Ic(),s=xt(),o=I(null),n=I(""),i=I(!1),a=I(!1),l=I(null),c=I(null),d=I(null),u=I([]),f=I(null),p=I(!1),g=I({top:0,left:0}),m=["","","","","","","","","","","","","","","","","","",""],v=I(!1),x=I({}),_=I({}),k=I(!0),C=I(!0),P=()=>{try{const D=new(window.AudioContext||window.webkitAudioContext),H=D.createOscillator(),ee=D.createGain();H.type="sine",H.frequency.value=660,ee.gain.value=.05,H.connect(ee),ee.connect(D.destination);const he=D.currentTime;H.start(he),ee.gain.exponentialRampToValueAtTime(1e-4,he+.15),H.stop(he+.16)}catch{}},$=re(()=>o.value?e.messages[o.value._id]||[]:[]),R=async D=>{var H;((H=o.value)==null?void 0:H._id)!==D._id&&(o.value=D,await e.selectRoom(D),await e.loadMessages(D._id),_.value[D._id]||(_.value[D._id]=!0,T()))},V=async()=>{if(!n.value.trim()||!o.value)return;const D=n.value.trim(),H=o.value._id,ee=`temp_${Date.now()}`,he=new Date().toISOString();n.value="",x.value[H]||(x.value[H]=[]),x.value[H].push({id:ee,content:D,createdAt:he}),P(),T();try{await e.sendMessage(D)}catch(Oe){console.error("Error sending message:",Oe),n.value=D}finally{const Oe=x.value[H]||[];x.value[H]=Oe.filter(N=>N.id!==ee),T()}},B=D=>{d.value=D,n.value=D.content,_s(()=>{c.value&&c.value.focus()})},E=async()=>{var Oe;if(!d.value||!n.value.trim())return;const D=d.value._id,H=n.value.trim(),ee=(Oe=o.value)==null?void 0:Oe._id;let he=null;if(ee){const N=e.messages[ee]||[],G=N.findIndex(te=>te._id===D);G!==-1&&(he={...N[G]},N[G]={...N[G],content:H,edited:!0,editedAt:new Date().toISOString()})}try{await e.editMessage(D,H),S()}catch(N){if(console.error("Error editing message:",N),ee&&he){const G=e.messages[ee]||[],te=G.findIndex(X=>X._id===D);te!==-1&&(G[te]=he)}}},S=()=>{d.value=null,n.value=""},O=()=>{o.value&&(e.startTyping(),f.value&&clearTimeout(f.value),f.value=setTimeout(()=>{o.value&&e.stopTyping()},3e3))},T=()=>{_s(()=>{l.value&&(l.value.scrollTop=l.value.scrollHeight,k.value=!0,C.value=!1)})},L=()=>{const D=l.value;if(!D)return;const H=8;C.value=D.scrollTop<=H,k.value=D.scrollTop+D.clientHeight>=D.scrollHeight-H},K=D=>{i.value=!1,R(D)},z=()=>{const D=c.value;if(!D)return;const H=D.getBoundingClientRect(),ee=220,he=H.top-ee-8,Oe=H.bottom+8,N=window.innerHeight,te=he>=0?he:Math.min(Oe,N-ee-8);let X=H.left;const U=window.innerWidth,ae=224;X+ae>U-8&&(X=Math.max(8,U-ae-8)),g.value={top:te,left:X}},F=D=>{if(!p.value)return;const H=c.value,ee=D.target;document.elementFromPoint(g.value.left,g.value.top);const he=!!H&&H.contains(ee),Oe=document.querySelector("[data-emoji-picker]"),N=!!Oe&&Oe.contains(ee);!he&&!N&&(p.value=!1)},W=()=>{p.value=!p.value,p.value?_s(()=>{var D;z(),window.addEventListener("resize",z),window.addEventListener("scroll",z,!0),document.addEventListener("mousedown",F),(D=c.value)==null||D.focus()}):(window.removeEventListener("resize",z),window.removeEventListener("scroll",z,!0),document.removeEventListener("mousedown",F))},Z=D=>{const H=c.value;if(!H){n.value+=D;return}const ee=H.selectionStart??n.value.length,he=H.selectionEnd??n.value.length,Oe=n.value;n.value=Oe.slice(0,ee)+D+Oe.slice(he),_s(()=>{const N=ee+D.length;H.setSelectionRange(N,N),H.focus()})},le=async D=>{if(window.confirm("Eliminar este chat? Esta accin no se puede deshacer."))try{await e.deleteChatRoom(D)}catch(H){console.error("Error deleting room",H),alert("No se pudo eliminar el chat.")}},J=D=>{var H;return D.sender._id===((H=s.user)==null?void 0:H._id)},Pe=D=>e.unreadByRoom[D]||0,me=D=>{if(!D)return 0;const H=e.onlineUsers||[];return D.participants.filter(ee=>H.includes(ee._id)).length},Y=D=>{const H=new Date(D),he=Math.floor((new Date().getTime()-H.getTime())/(1e3*60));if(he<1)return"ahora";if(he<60)return`${he}m`;const Oe=Math.floor(he/60);if(Oe<24)return`${Oe}h`;const N=Math.floor(Oe/24);return N<7?`${N}d`:H.toLocaleDateString("es-ES",{day:"numeric",month:"short"})},j=D=>new Date(D).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),Q=D=>new Date(D).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),se=D=>{if(D===0)return"0 B";const H=1024,ee=["B","KB","MB","GB"],he=Math.floor(Math.log(D)/Math.log(H));return parseFloat((D/Math.pow(H,he)).toFixed(2))+" "+ee[he]};return Rt(()=>e.typingUsers,D=>{o.value&&(u.value=e.getTypingInRoom(o.value._id))},{deep:!0}),Rt(o,()=>{o.value&&(u.value=e.getTypingInRoom(o.value._id))}),Rt(()=>{var D;return e.messages[((D=o.value)==null?void 0:D._id)||""]},()=>{if(!o.value)return;const D=l.value;if(!D)return;D.scrollTop+D.clientHeight>=D.scrollHeight-24&&T()},{deep:!0}),nt(async()=>{e.isConnected||await e.initializeChat(),e.chatRooms.length===0&&await e.loadChatRooms(),e.chatRooms.length>0&&!o.value&&await R(e.chatRooms[0]),L()}),sr(()=>{f.value&&clearTimeout(f.value),window.removeEventListener("resize",z),window.removeEventListener("scroll",z,!0),document.removeEventListener("mousedown",F)}),(D,H)=>(b(),y("div",MX,[r("div",RX,[r("div",DX,[r("aside",OX,[r("div",IX,[r("div",LX,[H[13]||(H[13]=r("h2",{class:"font-semibold"},"Conversaciones",-1)),r("div",BX,[ye(e).isConnected?(b(),y("div",jX,"Conectado")):(b(),y("div",NX,"Conectando")),r("button",{onClick:H[0]||(H[0]=ee=>i.value=!0),class:"p-2 rounded-md border border-white/10 bg-white/5 hover:bg-white/10",title:"Nuevo chat"},[fe(ye(zl),{class:"w-4 h-4"})])])])]),r("div",FX,[ye(e).isLoading?(b(),y("div",UX," Cargando ")):ye(e).chatRooms.length===0?(b(),y("div",zX,[fe(ye(o0),{class:"w-12 h-12 text-purple-400/70 mx-auto mb-2"}),H[14]||(H[14]=r("p",{class:"text-sm text-gray-300 mb-3"},"No hay conversaciones",-1)),r("button",{onClick:H[1]||(H[1]=ee=>i.value=!0),class:"text-sm rounded-md px-3 py-1.5 bg-white/10 border border-white/10 hover:bg-white/15"},"Crear conversacin")])):(b(),y("ul",VX,[(b(!0),y(ge,null,xe(ye(e).chatRooms,ee=>{var he;return b(),y("li",{key:ee._id},[r("button",{onClick:Oe=>R(ee),class:de(["w-full text-left flex items-center gap-3 rounded-xl border px-3 py-3 transition-colors",[((he=o.value)==null?void 0:he._id)===ee._id?"bg-white/10 border-purple-400/40":"bg-white/5 border-white/10 hover:bg-white/10"]])},[r("div",{class:de(["w-10 h-10 rounded-lg flex items-center justify-center shrink-0",ee.type==="direct"?"bg-gradient-to-br from-emerald-500 to-teal-500":ee.type==="team"?"bg-gradient-to-br from-blue-500 to-indigo-500":"bg-gradient-to-br from-purple-500 to-pink-500"])},[ee.type==="direct"?(b(),Ue(ye(hl),{key:0,class:"w-5 h-5"})):ee.type==="team"?(b(),Ue(ye(mn),{key:1,class:"w-5 h-5"})):(b(),Ue(ye(qn),{key:2,class:"w-5 h-5"}))],2),r("div",qX,[r("div",WX,[r("p",GX,w(ee.name),1),r("span",KX,w(Y(ee.lastActivity)),1)]),r("div",YX,[r("p",JX,[ne(" "+w(ee.participants.length)+"  ",1),r("span",{class:de(me(ee)>0?"text-emerald-300":"text-gray-400")}," "+w(me(ee)),3)]),Pe(ee._id)>0?(b(),y("span",XX,w(Pe(ee._id)),1)):q("",!0)])]),ye(s).isAdmin?(b(),y("button",{key:0,onClick:Fe(Oe=>le(ee._id),["stop"]),class:"ml-1 p-2 rounded-md hover:bg-red-500/10 text-red-300",title:"Eliminar chat"},[fe(ye(vu),{class:"w-4 h-4"})],8,QX)):q("",!0)],10,HX)])}),128))]))])]),r("section",ZX,[r("div",eQ,[o.value?(b(),y("div",tQ,[r("div",sQ,[r("div",{class:de(["w-11 h-11 rounded-lg flex items-center justify-center shrink-0",o.value.type==="direct"?"bg-gradient-to-br from-emerald-500 to-teal-500":o.value.type==="team"?"bg-gradient-to-br from-blue-500 to-indigo-500":"bg-gradient-to-br from-purple-500 to-pink-500"])},[o.value.type==="direct"?(b(),Ue(ye(hl),{key:0,class:"w-6 h-6"})):o.value.type==="team"?(b(),Ue(ye(mn),{key:1,class:"w-6 h-6"})):(b(),Ue(ye(qn),{key:2,class:"w-6 h-6"}))],2),r("div",oQ,[r("h3",nQ,w(o.value.name),1),r("div",rQ,[r("span",iQ," "+w(o.value.participants.length),1),r("span",{class:de(["whitespace-nowrap",me(o.value)>0?"text-emerald-300":"text-gray-400"])}," "+w(me(o.value)),3),u.value.length>0?(b(),y("span",aQ," "+w(u.value.join(", "))+" escribiendo",1)):q("",!0)])])]),r("button",{class:"p-2 rounded-md hover:bg-white/10",onClick:H[2]||(H[2]=ee=>a.value=!0),title:"Informacin del chat"},[fe(ye(R4),{class:"w-6 h-6"})])])):(b(),y("div",lQ,[H[15]||(H[15]=r("div",{class:"text-sm text-gray-300"},"Selecciona una conversacin",-1)),r("button",{class:"lg:hidden p-2 rounded-md hover:bg-white/10",onClick:H[3]||(H[3]=ee=>v.value=!0),title:"Abrir conversaciones"},[fe(ye(iv),{class:"w-6 h-6"})])]))]),r("div",{class:"relative flex-1 min-h-0 overflow-y-auto p-4 sm:p-6 space-y-4 custom-scrollbar",ref_key:"messagesContainer",ref:l,onScroll:L},[o.value?(b(),y("div",uQ,[ye(e).isLoading?(b(),y("div",fQ,"Cargando mensajes")):$.value.length===0?(b(),y("div",pQ,"Sin mensajes an")):(b(),y("div",hQ,[(b(!0),y(ge,null,xe($.value,ee=>(b(),y("div",{key:ee._id,class:de(["flex",J(ee)?"justify-end":"justify-start"])},[r("div",{class:de(["max-w-[80%] rounded-xl border px-4 py-3",J(ee)?"bg-gradient-to-br from-purple-600 to-pink-600 border-pink-500 text-white":"bg-slate-800 border-slate-700 text-white"])},[J(ee)?q("",!0):(b(),y("div",gQ,w(ee.sender.name),1)),r("div",mQ,w(ee.content),1),ee.attachments&&ee.attachments.length?(b(),y("div",bQ,[(b(!0),y(ge,null,xe(ee.attachments,he=>(b(),y("a",{key:he.filename,href:he.url,target:"_blank",class:"flex items-center gap-3 rounded-lg border border-slate-600 bg-slate-900 hover:bg-slate-800 px-3 py-2 text-sm"},[fe(ye(P4),{class:"w-5 h-5"}),r("span",yQ,w(he.originalname),1),r("span",xQ,w(se(he.size)),1)],8,vQ))),128))])):q("",!0),r("div",wQ,[r("span",{title:Q(ee.createdAt)}," "+w(j(ee.createdAt)),9,_Q),ee.edited?(b(),y("span",kQ," editado")):q("",!0),J(ee)?(b(),y("button",{key:1,onClick:he=>B(ee),class:"ml-2 opacity-70 hover:opacity-100 p-1 rounded hover:bg-white/10",title:"Editar"},[fe(ye(Ul),{class:"w-4 h-4"})],8,CQ)):q("",!0)])],2)],2))),128)),u.value.length>0?(b(),y("div",$Q," "+w(u.value.join(", "))+" escribiendo",1)):q("",!0),(b(!0),y(ge,null,xe(x.value[o.value._id]||[],ee=>(b(),y("div",{key:ee.id,class:"flex justify-end"},[r("div",EQ,[r("div",SQ,w(ee.content),1),r("div",AQ," "+w(j(ee.createdAt))+"  Enviando",1)])]))),128))]))])):(b(),y("div",cQ,[r("div",dQ,[fe(ye(o0),{class:"w-16 h-16 text-purple-400/70 mx-auto mb-3"}),H[16]||(H[16]=r("p",{class:"text-gray-300"},"Elige un chat para empezar",-1))])])),C.value?q("",!0):(b(),y("div",TQ)),k.value?q("",!0):(b(),y("div",PQ)),k.value?q("",!0):(b(),y("button",{key:4,onClick:T,class:"absolute bottom-4 right-4 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 px-3 py-2 text-sm shadow",title:"Bajar al final"},[r("div",MQ,[fe(ye($4),{class:"w-5 h-5"}),H[17]||(H[17]=r("span",{class:"hidden sm:inline"},"Bajar",-1))])]))],544),r("div",RQ,[d.value?(b(),y("div",DQ,[H[18]||(H[18]=r("div",{class:"text-sm"}," Editando mensaje  Enter para guardar, Esc para cancelar",-1)),r("button",{class:"p-1 rounded hover:bg-yellow-500/20",onClick:S,title:"Cancelar"},[fe(ye(kr),{class:"w-5 h-5"})])])):q("",!0),r("div",OQ,[(b(),Ue(Mo,{to:"body"},[p.value?(b(),y("div",{key:0,style:yo({position:"fixed",top:g.value.top+"px",left:g.value.left+"px",zIndex:50}),class:"rounded-md border border-white/10 bg-slate-900/95 p-2 shadow-xl flex flex-wrap gap-1 w-56","data-emoji-picker":""},[(b(),y(ge,null,xe(m,ee=>r("button",{key:ee,class:"px-1 py-1 hover:bg-white/10 rounded",onClick:Fe(he=>Z(ee),["prevent"])},w(ee),9,IQ)),64))],4)):q("",!0)])),r("div",LQ,[ie(r("input",{ref_key:"messageInput",ref:c,"onUpdate:modelValue":H[4]||(H[4]=ee=>n.value=ee),onKeydown:[H[5]||(H[5]=Vn(Fe(ee=>d.value?E():V(),["prevent"]),["enter"])),Vn(Fe(S,["prevent"]),["escape"])],onInput:O,placeholder:d.value?"Editar mensaje":"Escribe un mensaje",class:"w-full rounded-lg bg-white/5 border border-white/10 backdrop-blur-sm px-4 py-3 outline-none focus:border-purple-400"},null,40,BQ),[[ke,n.value]])]),r("button",{onClick:W,class:"p-3 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10",title:"Emojis"},""),r("button",{onClick:H[6]||(H[6]=ee=>d.value?E():V()),disabled:!n.value.trim(),class:"inline-flex items-center justify-center rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 px-4 py-3 disabled:opacity-50"},[d.value?(b(),Ue(ye(kf),{key:1,class:"w-5 h-5"})):(b(),Ue(ye(D4),{key:0,class:"w-5 h-5"}))],8,NQ)])])])])]),v.value?(b(),y("div",jQ,[r("div",{class:"absolute inset-0 bg-black/40",onClick:H[7]||(H[7]=ee=>v.value=!1)}),r("div",FQ,[r("div",UQ,[H[19]||(H[19]=r("h2",{class:"font-semibold"},"Conversaciones",-1)),r("button",{class:"p-2 rounded hover:bg-white/10",onClick:H[8]||(H[8]=ee=>v.value=!1),title:"Cerrar"},[fe(ye(kr),{class:"w-6 h-6"})])]),r("div",zQ,[r("ul",VQ,[(b(!0),y(ge,null,xe(ye(e).chatRooms,ee=>(b(),y("li",{key:ee._id},[r("button",{onClick:he=>{R(ee),v.value=!1},class:"w-full text-left flex items-center gap-3 rounded-xl border px-3 py-3 bg-white/5 border-white/10 hover:bg-white/10"},[r("div",{class:de(["w-10 h-10 rounded-lg flex items-center justify-center",ee.type==="direct"?"bg-gradient-to-br from-emerald-500 to-teal-500":ee.type==="team"?"bg-gradient-to-br from-blue-500 to-indigo-500":"bg-gradient-to-br from-purple-500 to-pink-500"])},[ee.type==="direct"?(b(),Ue(ye(hl),{key:0,class:"w-5 h-5"})):ee.type==="team"?(b(),Ue(ye(mn),{key:1,class:"w-5 h-5"})):(b(),Ue(ye(qn),{key:2,class:"w-5 h-5"}))],2),r("div",qQ,[r("div",WQ,[r("p",GQ,w(ee.name),1),r("span",KQ,w(Y(ee.lastActivity)),1)]),r("p",YQ," "+w(ee.participants.length)+" participante"+w(ee.participants.length!==1?"s":""),1)])],8,HQ)]))),128))])])])])):q("",!0),r("button",{class:"lg:hidden fixed bottom-5 right-5 z-40 rounded-full p-4 shadow-xl bg-gradient-to-r from-purple-600 to-pink-600",title:"Nuevo chat",onClick:H[9]||(H[9]=ee=>i.value=!0)},[fe(ye(zl),{class:"w-6 h-6"})]),i.value?(b(),Ue(PX,{key:1,onClose:H[10]||(H[10]=ee=>i.value=!1),onCreated:K})):q("",!0),a.value&&o.value?(b(),y("div",JQ,[r("div",{class:"absolute inset-0 bg-black/50",onClick:H[11]||(H[11]=ee=>a.value=!1)}),r("div",XQ,[r("div",QQ,[r("div",ZQ,[H[20]||(H[20]=r("h3",{class:"text-lg font-semibold"},"Informacin del chat",-1)),r("button",{onClick:H[12]||(H[12]=ee=>a.value=!1),class:"p-2 rounded hover:bg-white/10"},[fe(ye(kr),{class:"w-6 h-6"})])]),r("div",eZ,[r("div",null,[H[21]||(H[21]=r("div",{class:"text-gray-400"},"Nombre",-1)),r("div",tZ,w(o.value.name),1)]),o.value.description?(b(),y("div",sZ,[H[22]||(H[22]=r("div",{class:"text-gray-400"},"Descripcin",-1)),r("div",null,w(o.value.description),1)])):q("",!0),r("div",null,[r("div",oZ,"Participantes ("+w(o.value.participants.length)+")",1),r("div",nZ,[(b(!0),y(ge,null,xe(o.value.participants,ee=>(b(),y("div",{key:ee._id,class:"flex items-center gap-3 rounded-md bg-white/5 border border-white/10 px-3 py-2"},[r("div",rZ,[r("span",iZ,w(ee.name.charAt(0).toUpperCase()),1)]),r("div",aZ,[r("div",lZ,w(ee.name),1),r("div",cZ,w(ee.position||ee.role),1)])]))),128))])]),r("div",dZ,"Creado: "+w(new Date(o.value.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])])])])):q("",!0)]))}}),fZ=Et(uZ,[["__scopeId","data-v-eb9f286c"]]),pZ={class:"space-y-6"},hZ={class:"flex items-start justify-between gap-4"},gZ={class:"flex items-center gap-4"},mZ={class:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-white text-2xl font-bold"},bZ={class:"text-2xl font-bold text-white"},vZ={class:"text-gray-400"},yZ={class:"flex items-center gap-2"},xZ={class:"bg-gray-800/50 rounded-2xl border border-gray-700/50"},wZ={class:"flex gap-2 p-2 border-b border-gray-700/50 overflow-x-auto"},_Z=["onClick"],kZ={class:"p-4"},CZ={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},$Z={class:"md:col-span-2 space-y-4"},EZ=["readonly"],SZ={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},AZ=["readonly"],TZ=["readonly"],PZ=["readonly"],MZ=["readonly"],RZ={class:"space-y-3"},DZ={class:"flex flex-wrap gap-2 mt-2"},OZ={class:"grid grid-cols-2 gap-3"},IZ=["readonly"],LZ=["readonly"],BZ={class:"col-span-2"},NZ=["readonly"],jZ={key:1,class:"space-y-4"},FZ={class:"flex flex-wrap gap-2 items-center bg-gray-900/60 border border-gray-700 rounded-xl p-3"},UZ={key:0,class:"grid md:grid-cols-2 gap-4"},zZ={key:0,class:"flex justify-between items-center"},VZ={class:"text-white font-medium"},HZ={class:"text-gray-400 text-sm"},qZ={class:"flex gap-2"},WZ=["onClick"],GZ=["onClick"],KZ={key:1,class:"flex flex-wrap gap-2 items-center"},YZ={key:2,class:"text-gray-300 text-sm mt-2"},JZ={key:1,class:"text-gray-400"},XZ={key:2,class:"space-y-4"},QZ={class:"flex flex-wrap gap-2 items-center bg-gray-900/60 border border-gray-700 rounded-xl p-3"},ZZ={key:0,class:"space-y-3"},eee={key:0,class:"flex justify-between items-center"},tee={class:"text-white font-medium"},see={class:"text-gray-400 text-sm"},oee={class:"flex gap-2"},nee=["onClick"],ree=["onClick"],iee={key:1,class:"flex flex-wrap gap-2 items-center"},aee={key:2,class:"text-gray-300 text-sm mt-2"},lee={key:1,class:"text-gray-400"},cee={key:3,class:"space-y-3"},dee={class:"flex gap-2 items-center"},uee={class:"grid md:grid-cols-2 gap-3"},fee={class:"text-gray-300 text-sm"},pee={class:"text-white"},hee=["onClick"],gee={key:4,class:"space-y-3"},mee={class:"flex gap-2"},bee={class:"space-y-2"},vee={class:"flex items-center justify-between"},yee={class:"text-gray-400 text-xs"},xee={class:"flex gap-2"},wee=["onClick"],_ee=["onClick"],kee={class:"text-white mt-2 whitespace-pre-wrap"},Cee={key:5,class:"space-y-3"},$ee={class:"flex gap-2 items-center"},Eee={class:"grid md:grid-cols-2 gap-3"},See={class:"text-gray-400 text-sm"},Aee={class:"text-white"},Tee=["onClick"],Pee=Le({__name:"ClientDetail",setup(t){const s=pf().params.id,o=Ft({}),n=Ft({profile:{},tags:[]}),i=I(!1),a=I(""),l=I(""),c=I(""),d=I(""),u=I(""),f=I(""),p=[{key:"overview",label:"Resumen",icon:"fas fa-user"},{key:"services",label:"Servicios",icon:"fas fa-box"},{key:"commitments",label:"Compromisos",icon:"fas fa-handshake"},{key:"preferences",label:"Preferencias",icon:"fas fa-heart"},{key:"notes",label:"Notas",icon:"fas fa-sticky-note"},{key:"custom",label:"Campos",icon:"fas fa-sliders-h"}],g=I("overview"),m=async X=>{if(!(X.headers.get("content-type")||"").includes("application/json")){const ae=await X.text();throw new Error(`Respuesta no-JSON (${X.status}): ${ae.slice(0,200)}...`)}return X.json()},v=async()=>{try{let X=await fetch(`${et.BASE_URL}/clients/${s}/detail`);if(X.status===404&&(X=await fetch(`${et.BASE_URL}/clients/${s}`)),!X.ok)throw new Error(`HTTP ${X.status}`);const U=await m(X);Object.assign(o,U),Object.assign(n,JSON.parse(JSON.stringify(U)))}catch(X){console.error("Error cargando detalle del cliente:",X),alert("No se pudo cargar el detalle del cliente. Ver consola para ms informacin.")}},x=async()=>{try{const X={email:n.email,phone:n.phone,company:n.company,tags:n.tags,profile:n.profile,preferences:n.preferences,customFields:n.customFields};let U=await fetch(`${et.BASE_URL}/clients/${s}/detail`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(U.status===404&&(U=await fetch(`${et.BASE_URL}/clients/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})),!U.ok)throw new Error(`HTTP ${U.status}`);const ae=await m(U);Object.assign(o,ae),Object.assign(n,JSON.parse(JSON.stringify(ae))),i.value=!1}catch(X){console.error("Error guardando cambios:",X),alert("No se pudieron guardar los cambios. Ver consola para ms informacin.")}},_=()=>{const X=a.value.trim();X&&(n.tags=[...n.tags||[],X],a.value="")},k=re(()=>(o.notes||[]).slice().sort((X,U)=>X.pinned&&!U.pinned?-1:!X.pinned&&U.pinned?1:new Date(U.createdAt).getTime()-new Date(X.createdAt).getTime())),C=async()=>{const X=l.value.trim();if(X)try{const U=await fetch(`${et.BASE_URL}/clients/${s}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:X})});if(!U.ok)throw new Error(`HTTP ${U.status}`);const ae=await m(U);o.notes=[ae,...o.notes||[]],l.value=""}catch(U){console.error("Error agregando nota:",U),alert("No se pudo agregar la nota. Ver consola para ms informacin.")}},P=async X=>{try{const U=await fetch(`${et.BASE_URL}/clients/${s}/notes/${X._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pinned:!X.pinned})});if(!U.ok)throw new Error(`HTTP ${U.status}`);const ae=await m(U);Object.assign(X,ae)}catch(U){console.error("Error actualizando nota:",U),alert("No se pudo actualizar la nota. Ver consola para ms informacin.")}},$=async X=>{try{const U=await fetch(`${et.BASE_URL}/clients/${s}/notes/${X}`,{method:"DELETE"});if(!U.ok)throw new Error(`HTTP ${U.status}`);o.notes=(o.notes||[]).filter(ae=>ae._id!==X)}catch(U){console.error("Error eliminando nota:",U),alert("No se pudo eliminar la nota. Ver consola para ms informacin.")}},R=I(""),V=I(""),B=I("active"),E=I(null),S=I(""),O=I(""),T=I("active"),L=async()=>{const X=R.value.trim();if(X)try{const U=await fetch(`${et.BASE_URL}/clients/${s}/services`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X,plan:V.value||void 0,status:B.value})});if(!U.ok)throw new Error(`HTTP ${U.status}`);const ae=await m(U);o.services=[...o.services||[],ae],R.value="",V.value="",B.value="active"}catch(U){console.error("Error agregando servicio:",U),alert("No se pudo agregar el servicio. Ver consola para ms informacin.")}},K=X=>{E.value=X._id,S.value=X.plan||"",O.value=X.notes||"",T.value=X.status||"active"},z=()=>{E.value=null},F=async()=>{if(E.value)try{const X=await fetch(`${et.BASE_URL}/clients/${s}/services/${E.value}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:S.value||void 0,notes:O.value||void 0,status:T.value})});if(!X.ok)throw new Error(`HTTP ${X.status}`);const U=await m(X),ae=(o.services||[]).findIndex($e=>$e._id===E.value);ae!==-1&&(o.services[ae]=U),E.value=null}catch(X){console.error("Error editando servicio:",X),alert("No se pudo editar el servicio. Ver consola para ms informacin.")}},W=async X=>{try{const U=await fetch(`${et.BASE_URL}/clients/${s}/services/${X}`,{method:"DELETE"});if(!U.ok)throw new Error(`HTTP ${U.status}`);o.services=(o.services||[]).filter(ae=>ae._id!==X)}catch(U){console.error("Error eliminando servicio:",U),alert("No se pudo eliminar el servicio. Ver consola para ms informacin.")}},Z=I(""),le=I(""),J=I("pending"),Pe=I(null),me=I(""),Y=I(""),j=I("pending"),Q=async()=>{const X=Z.value.trim();if(X)try{const U=await fetch(`${et.BASE_URL}/clients/${s}/commitments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:X,status:J.value,dueDate:le.value?new Date(le.value).toISOString():void 0})});if(!U.ok)throw new Error(`HTTP ${U.status}`);const ae=await m(U);o.commitments=[...o.commitments||[],ae],Z.value="",le.value="",J.value="pending"}catch(U){console.error("Error agregando compromiso:",U),alert("No se pudo agregar el compromiso. Ver consola para ms informacin.")}},se=X=>{Pe.value=X._id,me.value=X.description||"",j.value=X.status||"pending",Y.value=X.dueDate?new Date(X.dueDate).toISOString().slice(0,10):""},D=()=>{Pe.value=null},H=async()=>{if(Pe.value)try{const X=await fetch(`${et.BASE_URL}/clients/${s}/commitments/${Pe.value}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:me.value||void 0,status:j.value,dueDate:Y.value?new Date(Y.value).toISOString():void 0})});if(!X.ok)throw new Error(`HTTP ${X.status}`);const U=await m(X),ae=(o.commitments||[]).findIndex($e=>$e._id===Pe.value);ae!==-1&&(o.commitments[ae]=U),Pe.value=null}catch(X){console.error("Error editando compromiso:",X),alert("No se pudo editar el compromiso. Ver consola para ms informacin.")}},ee=async X=>{try{const U=await fetch(`${et.BASE_URL}/clients/${s}/commitments/${X}`,{method:"DELETE"});if(!U.ok)throw new Error(`HTTP ${U.status}`);o.commitments=(o.commitments||[]).filter(ae=>ae._id!==X)}catch(U){console.error("Error eliminando compromiso:",U),alert("No se pudo eliminar el compromiso. Ver consola para ms informacin.")}},he=async()=>{const X=c.value.trim(),U=d.value.trim();X&&(n.preferences=[...n.preferences||[],{key:X,value:U}],o.preferences=JSON.parse(JSON.stringify(n.preferences)),c.value="",d.value="",await x())},Oe=async X=>{const U=(n.preferences||[]).filter(ae=>ae._id&&X._id?ae._id!==X._id:ae.key!==X.key);n.preferences=U,o.preferences=JSON.parse(JSON.stringify(U)),await x()},N=async()=>{const X=u.value.trim(),U=f.value;X&&(n.customFields=[...n.customFields||[],{key:X,value:U}],o.customFields=JSON.parse(JSON.stringify(n.customFields)),u.value="",f.value="",await x())},G=async X=>{const U=(n.customFields||[]).filter(ae=>ae._id&&X._id?ae._id!==X._id:ae.key!==X.key);n.customFields=U,o.customFields=JSON.parse(JSON.stringify(U)),await x()},te=X=>X?new Date(X).toLocaleString("es-ES"):"";return nt(v),(X,U)=>{var $e,Ce;const ae=Wo("router-link");return b(),y("div",pZ,[r("div",hZ,[r("div",gZ,[r("div",mZ,w(((o==null?void 0:o.name)||"C").charAt(0).toUpperCase()),1),r("div",null,[r("h1",bZ,w(o==null?void 0:o.name),1),r("p",vZ,w(o==null?void 0:o.company),1)])]),r("div",yZ,[fe(ae,{to:"/clients",class:"px-4 py-2 rounded-lg bg-gray-700 text-gray-200 hover:bg-gray-600"},{default:tt(()=>[...U[27]||(U[27]=[ne("Volver",-1)])]),_:1}),r("button",{onClick:U[0]||(U[0]=oe=>i.value=!i.value),class:"px-4 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700"},w(i.value?"Cancelar":"Editar"),1),i.value?(b(),y("button",{key:0,onClick:x,class:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700"}," Guardar ")):q("",!0)])]),r("div",xZ,[r("div",wZ,[(b(),y(ge,null,xe(p,oe=>r("button",{key:oe.key,onClick:be=>g.value=oe.key,class:de(["px-4 py-2 rounded-lg whitespace-nowrap",g.value===oe.key?"bg-purple-600 text-white":"bg-gray-700 text-gray-200 hover:bg-gray-600"])},[r("i",{class:de([oe.icon,"mr-2"])},null,2),ne(w(oe.label),1)],10,_Z)),64))]),r("div",kZ,[g.value==="overview"?(b(),y("div",CZ,[r("div",$Z,[r("div",null,[U[28]||(U[28]=r("label",{class:"text-sm text-gray-400"},"Acerca de",-1)),ie(r("textarea",{"onUpdate:modelValue":U[1]||(U[1]=oe=>n.profile.about=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200 min-h-[100px]"},null,8,EZ),[[ke,n.profile.about]])]),r("div",SZ,[r("div",null,[U[29]||(U[29]=r("label",{class:"text-sm text-gray-400"},"Direccin",-1)),ie(r("input",{"onUpdate:modelValue":U[2]||(U[2]=oe=>n.profile.address=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200"},null,8,AZ),[[ke,n.profile.address]])]),r("div",null,[U[30]||(U[30]=r("label",{class:"text-sm text-gray-400"},"Sitio web",-1)),ie(r("input",{"onUpdate:modelValue":U[3]||(U[3]=oe=>n.profile.website=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200"},null,8,TZ),[[ke,n.profile.website]])]),r("div",null,[U[31]||(U[31]=r("label",{class:"text-sm text-gray-400"},"Industria",-1)),ie(r("input",{"onUpdate:modelValue":U[4]||(U[4]=oe=>n.profile.industry=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200"},null,8,PZ),[[ke,n.profile.industry]])]),r("div",null,[U[32]||(U[32]=r("label",{class:"text-sm text-gray-400"},"Tamao",-1)),ie(r("input",{"onUpdate:modelValue":U[5]||(U[5]=oe=>n.profile.size=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200"},null,8,MZ),[[ke,n.profile.size]])])])]),r("div",RZ,[r("div",null,[U[33]||(U[33]=r("label",{class:"text-sm text-gray-400"},"Etiquetas",-1)),r("div",DZ,[(b(!0),y(ge,null,xe(n.tags,(oe,be)=>(b(),y("span",{key:be,class:"px-2 py-1 rounded-full bg-purple-600/20 text-purple-300 text-xs border border-purple-500/30"},w(oe),1))),128)),i.value?ie((b(),y("input",{key:0,"onUpdate:modelValue":U[6]||(U[6]=oe=>a.value=oe),onKeyup:Vn(_,["enter"]),placeholder:"+ etiqueta",class:"bg-gray-900/60 border border-gray-700 rounded px-2 py-1 text-xs text-gray-200"},null,544)),[[ke,a.value]]):q("",!0)])]),r("div",OZ,[r("div",null,[U[34]||(U[34]=r("label",{class:"text-sm text-gray-400"},"Email",-1)),ie(r("input",{"onUpdate:modelValue":U[7]||(U[7]=oe=>n.email=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200"},null,8,IZ),[[ke,n.email]])]),r("div",null,[U[35]||(U[35]=r("label",{class:"text-sm text-gray-400"},"Telfono",-1)),ie(r("input",{"onUpdate:modelValue":U[8]||(U[8]=oe=>n.phone=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200"},null,8,LZ),[[ke,n.phone]])]),r("div",BZ,[U[36]||(U[36]=r("label",{class:"text-sm text-gray-400"},"Compaa",-1)),ie(r("input",{"onUpdate:modelValue":U[9]||(U[9]=oe=>n.company=oe),readonly:!i.value,class:"w-full mt-1 bg-gray-900/60 border border-gray-700 rounded-lg p-3 text-gray-200"},null,8,NZ),[[ke,n.company]])])])])])):g.value==="services"?(b(),y("div",jZ,[U[39]||(U[39]=r("div",{class:"flex justify-between items-center"},[r("h3",{class:"text-white font-semibold"},"Servicios")],-1)),r("div",FZ,[ie(r("input",{"onUpdate:modelValue":U[10]||(U[10]=oe=>R.value=oe),placeholder:"Nombre del servicio",class:"w-48 bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,R.value]]),ie(r("input",{"onUpdate:modelValue":U[11]||(U[11]=oe=>V.value=oe),placeholder:"Plan (opcional)",class:"w-40 bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,V.value]]),ie(r("select",{"onUpdate:modelValue":U[12]||(U[12]=oe=>B.value=oe),class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},[...U[37]||(U[37]=[r("option",{value:"active"},"Activo",-1),r("option",{value:"paused"},"Pausado",-1),r("option",{value:"cancelled"},"Cancelado",-1),r("option",{value:"trial"},"Prueba",-1)])],512),[[De,B.value]]),r("button",{onClick:L,class:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700"},"Agregar")]),($e=o.services)!=null&&$e.length?(b(),y("div",UZ,[(b(!0),y(ge,null,xe(o.services,oe=>(b(),y("div",{key:oe._id,class:"bg-gray-900/60 border border-gray-700 rounded-xl p-4"},[E.value!==oe._id?(b(),y("div",zZ,[r("div",null,[r("p",VZ,w(oe.name),1),r("p",HZ,w(oe.plan)+"  "+w(oe.status),1)]),r("div",qZ,[r("button",{onClick:be=>K(oe),class:"px-2 py-1 rounded bg-blue-600/20 text-blue-300"},"Editar",8,WZ),r("button",{onClick:be=>W(oe._id),class:"px-2 py-1 rounded bg-red-600/20 text-red-300"},"Eliminar",8,GZ)])])):(b(),y("div",KZ,[ie(r("input",{"onUpdate:modelValue":U[13]||(U[13]=be=>S.value=be),placeholder:"Plan",class:"w-40 bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,S.value]]),ie(r("input",{"onUpdate:modelValue":U[14]||(U[14]=be=>O.value=be),placeholder:"Notas",class:"flex-1 bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,O.value]]),ie(r("select",{"onUpdate:modelValue":U[15]||(U[15]=be=>T.value=be),class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},[...U[38]||(U[38]=[r("option",{value:"active"},"Activo",-1),r("option",{value:"paused"},"Pausado",-1),r("option",{value:"cancelled"},"Cancelado",-1),r("option",{value:"trial"},"Prueba",-1)])],512),[[De,T.value]]),r("button",{onClick:F,class:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700"},"Guardar"),r("button",{onClick:z,class:"px-3 py-2 rounded bg-gray-700 text-gray-200 hover:bg-gray-600"},"Cancelar")])),oe.notes&&E.value!==oe._id?(b(),y("p",YZ,w(oe.notes),1)):q("",!0)]))),128))])):(b(),y("p",JZ,"No hay servicios registrados."))])):g.value==="commitments"?(b(),y("div",XZ,[U[42]||(U[42]=r("div",{class:"flex justify-between items-center"},[r("h3",{class:"text-white font-semibold"},"Compromisos")],-1)),r("div",QZ,[ie(r("input",{"onUpdate:modelValue":U[16]||(U[16]=oe=>Z.value=oe),placeholder:"Ttulo",class:"w-48 bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,Z.value]]),ie(r("input",{"onUpdate:modelValue":U[17]||(U[17]=oe=>le.value=oe),type:"date",class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,le.value]]),ie(r("select",{"onUpdate:modelValue":U[18]||(U[18]=oe=>J.value=oe),class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},[...U[40]||(U[40]=[r("option",{value:"pending"},"Pendiente",-1),r("option",{value:"in_progress"},"En progreso",-1),r("option",{value:"completed"},"Completado",-1),r("option",{value:"cancelled"},"Cancelado",-1)])],512),[[De,J.value]]),r("button",{onClick:Q,class:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700"},"Agregar")]),(Ce=o.commitments)!=null&&Ce.length?(b(),y("div",ZZ,[(b(!0),y(ge,null,xe(o.commitments,oe=>(b(),y("div",{key:oe._id,class:"bg-gray-900/60 border border-gray-700 rounded-xl p-4"},[Pe.value!==oe._id?(b(),y("div",eee,[r("div",null,[r("p",tee,w(oe.title),1),r("p",see,w(oe.status)+"  "+w(te(oe.dueDate)),1)]),r("div",oee,[r("button",{onClick:be=>se(oe),class:"px-2 py-1 rounded bg-blue-600/20 text-blue-300"},"Editar",8,nee),r("button",{onClick:be=>ee(oe._id),class:"px-2 py-1 rounded bg-red-600/20 text-red-300"},"Eliminar",8,ree)])])):(b(),y("div",iee,[ie(r("input",{"onUpdate:modelValue":U[19]||(U[19]=be=>me.value=be),placeholder:"Descripcin",class:"flex-1 bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,me.value]]),ie(r("input",{"onUpdate:modelValue":U[20]||(U[20]=be=>Y.value=be),type:"date",class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,Y.value]]),ie(r("select",{"onUpdate:modelValue":U[21]||(U[21]=be=>j.value=be),class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},[...U[41]||(U[41]=[r("option",{value:"pending"},"Pendiente",-1),r("option",{value:"in_progress"},"En progreso",-1),r("option",{value:"completed"},"Completado",-1),r("option",{value:"cancelled"},"Cancelado",-1)])],512),[[De,j.value]]),r("button",{onClick:H,class:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700"},"Guardar"),r("button",{onClick:D,class:"px-3 py-2 rounded bg-gray-700 text-gray-200 hover:bg-gray-600"},"Cancelar")])),oe.description&&Pe.value!==oe._id?(b(),y("p",aee,w(oe.description),1)):q("",!0)]))),128))])):(b(),y("p",lee,"No hay compromisos registrados."))])):g.value==="preferences"?(b(),y("div",cee,[r("div",dee,[ie(r("input",{"onUpdate:modelValue":U[22]||(U[22]=oe=>c.value=oe),placeholder:"Clave (ej. tono, horario)",class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,c.value]]),ie(r("input",{"onUpdate:modelValue":U[23]||(U[23]=oe=>d.value=oe),placeholder:"Valor",class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,d.value]]),r("button",{onClick:he,class:"px-3 py-2 rounded bg-purple-600 text-white"},"Agregar")]),r("div",uee,[(b(!0),y(ge,null,xe(o.preferences||[],oe=>(b(),y("div",{key:oe._id||oe.key,class:"bg-gray-900/60 border border-gray-700 rounded-xl p-3 flex items-center justify-between"},[r("div",null,[r("p",fee,w(oe.key),1),r("p",pee,w(oe.value),1)]),r("button",{onClick:be=>Oe(oe),class:"px-2 py-1 rounded bg-red-600/20 text-red-300"},"Quitar",8,hee)]))),128))])])):g.value==="notes"?(b(),y("div",gee,[r("div",mee,[ie(r("input",{"onUpdate:modelValue":U[24]||(U[24]=oe=>l.value=oe),placeholder:"Agregar nota (Enter para guardar)",onKeyup:Vn(C,["enter"]),class:"flex-1 bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,544),[[ke,l.value]]),r("button",{onClick:C,class:"px-3 py-2 rounded bg-purple-600 text-white"},"Guardar")]),r("div",bee,[(b(!0),y(ge,null,xe(k.value,oe=>(b(),y("div",{key:oe._id,class:"bg-gray-900/60 border border-gray-700 rounded-xl p-3"},[r("div",vee,[r("span",yee,w(te(oe.createdAt)),1),r("div",xee,[r("button",{onClick:be=>P(oe),class:"px-2 py-1 rounded bg-yellow-600/20 text-yellow-300"},w(oe.pinned?"Desfijar":"Fijar"),9,wee),r("button",{onClick:be=>$(oe._id),class:"px-2 py-1 rounded bg-red-600/20 text-red-300"},"Eliminar",8,_ee)])]),r("p",kee,w(oe.content),1)]))),128))])])):g.value==="custom"?(b(),y("div",Cee,[r("div",$ee,[ie(r("input",{"onUpdate:modelValue":U[25]||(U[25]=oe=>u.value=oe),placeholder:"Clave",class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,u.value]]),ie(r("input",{"onUpdate:modelValue":U[26]||(U[26]=oe=>f.value=oe),placeholder:"Valor",class:"bg-gray-900/60 border border-gray-700 rounded px-3 py-2 text-gray-200"},null,512),[[ke,f.value]]),r("button",{onClick:N,class:"px-3 py-2 rounded bg-purple-600 text-white"},"Agregar")]),r("div",Eee,[(b(!0),y(ge,null,xe(o.customFields||[],oe=>(b(),y("div",{key:oe._id||oe.key,class:"bg-gray-900/60 border border-gray-700 rounded-xl p-3 flex items-center justify-between"},[r("div",null,[r("p",See,w(oe.key),1),r("p",Aee,w(oe.value),1)]),r("button",{onClick:be=>G(oe),class:"px-2 py-1 rounded bg-red-600/20 text-red-300"},"Quitar",8,Tee)]))),128))])])):q("",!0)])])])}}}),Mee={class:"boards-page h-full"},Ree={class:"container mx-auto px-6 py-8"},Dee={key:0,class:"flex items-center justify-center py-12"},Oee={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Iee=["onClick"],Lee={class:"flex items-center justify-between mb-4"},Bee=["onClick"],Nee={class:"text-lg font-semibold text-white mb-2"},jee={class:"text-sm text-gray-400 mb-4 line-clamp-2"},Fee={class:"grid grid-cols-3 gap-4 mb-4"},Uee={class:"text-center"},zee={class:"text-2xl font-bold text-blue-600"},Vee={class:"text-center"},Hee={class:"text-2xl font-bold text-purple-600"},qee={class:"text-center"},Wee={class:"text-2xl font-bold text-green-600"},Gee={class:"flex items-center space-x-2"},Kee={class:"flex -space-x-2"},Yee=["title"],Jee={key:0,class:"w-8 h-8 rounded-full bg-gray-300 text-gray-700 flex items-center justify-center text-xs font-medium border-2 border-white"},Xee={key:0,class:"ml-auto flex items-center space-x-1 text-xs text-gray-600"},Qee={key:2,class:"text-center py-12"},Zee={class:"bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-purple-500/20"},ete={class:"mb-4"},tte={class:"mb-4"},ste={class:"mb-6"},ote={class:"grid grid-cols-2 gap-3"},nte={class:"flex justify-end space-x-3"},rte=["disabled"],ite=Le({__name:"BoardsPage",setup(t){const e=Ec(),s=zc(),o=I(!1),n=I({name:"",description:"",type:"kanban"}),i=re(()=>s.myBoards),a=re(()=>s.loading);function l(){console.log("Opening create modal..."),o.value=!0,console.log("Modal state:",o.value)}function c(v){return{kanban:"bg-blue-100 text-blue-800",scrum:"bg-purple-100 text-purple-800",custom:"bg-gray-100 text-gray-800"}[v]||"bg-gray-100 text-gray-800"}function d(v){return{kanban:"Kanban",scrum:"Scrum",custom:"Personalizado"}[v]||v}function u(v){return v.split(" ").map(x=>x[0]).join("").toUpperCase().substring(0,2)}function f(v){return 0}function p(v){e.push(`/boards/${v}`)}function g(v){console.log("Open board settings:",v)}async function m(){var v,x;try{console.log("Creating board with data:",n.value);const _=await s.createBoard(n.value);console.log("Board created successfully:",_),o.value=!1,n.value={name:"",description:"",type:"kanban"},e.push(`/boards/${_._id}`)}catch(_){console.error("Error creating board:",_),alert(`Error al crear tablero: ${((x=(v=_.response)==null?void 0:v.data)==null?void 0:x.message)||_.message||"Error desconocido"}`)}}return nt(async()=>{console.log("BoardsPage mounted, fetching boards...");try{await s.fetchBoards(),console.log("Boards fetched:",s.boards),console.log("My boards:",s.myBoards)}catch(v){console.error("Error fetching boards:",v)}}),(v,x)=>(b(),y("div",Mee,[r("div",Ree,[r("div",{class:"flex items-center justify-between mb-8"},[x[7]||(x[7]=r("div",null,[r("h1",{class:"text-3xl font-bold text-white"},"Tableros"),r("p",{class:"mt-2 text-gray-400"},"Gestiona tus proyectos con tableros Kanban y Scrum")],-1)),r("button",{onClick:l,class:"px-6 py-3 text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 flex items-center space-x-2 shadow-lg"},[...x[6]||(x[6]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),r("span",null,"Nuevo Tablero",-1)])])]),a.value?(b(),y("div",Dee,[...x[8]||(x[8]=[r("div",{class:"text-center"},[r("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),r("p",{class:"mt-4 text-gray-400"},"Cargando tableros...")],-1)])])):i.value.length>0?(b(),y("div",Oee,[(b(!0),y(ge,null,xe(i.value,_=>{var k;return b(),y("div",{key:_._id,onClick:C=>p(_._id),class:"board-card bg-gray-800/50 backdrop-blur-sm rounded-xl shadow-lg hover:shadow-xl transition-all cursor-pointer border border-purple-500/20 p-6 hover:border-purple-500/50"},[r("div",Lee,[r("span",{class:de(["px-3 py-1 text-xs font-medium rounded-full",c(_.type)])},w(d(_.type)),3),r("button",{onClick:Fe(C=>g(_),["stop"]),class:"p-1 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded"},[...x[9]||(x[9]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)])],8,Bee)]),r("h3",Nee,w(_.name),1),r("p",jee,w(_.description||"Sin descripcin"),1),r("div",Fee,[r("div",Uee,[r("div",zee,w(f(_._id)),1),x[10]||(x[10]=r("div",{class:"text-xs text-gray-500"},"Tareas",-1))]),r("div",Vee,[r("div",Hee,w(_.members.length),1),x[11]||(x[11]=r("div",{class:"text-xs text-gray-500"},"Miembros",-1))]),r("div",qee,[r("div",Wee,w(((k=_.sprints)==null?void 0:k.length)||0),1),x[12]||(x[12]=r("div",{class:"text-xs text-gray-500"},"Sprints",-1))])]),r("div",Gee,[r("div",Kee,[(b(!0),y(ge,null,xe(_.members.slice(0,5),C=>(b(),y("div",{key:C.user._id,class:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs font-medium border-2 border-white",title:C.user.name},w(u(C.user.name)),9,Yee))),128)),_.members.length>5?(b(),y("div",Jee," +"+w(_.members.length-5),1)):q("",!0)]),_.github?(b(),y("div",Xee,[...x[13]||(x[13]=[r("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z","clip-rule":"evenodd"})],-1),r("span",null,"Conectado",-1)])])):q("",!0)])],8,Iee)}),128))])):(b(),y("div",Qee,[x[14]||(x[14]=r("svg",{class:"w-24 h-24 mx-auto text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),x[15]||(x[15]=r("h3",{class:"text-lg font-medium text-white mb-2"},"No hay tableros",-1)),x[16]||(x[16]=r("p",{class:"text-gray-400 mb-6"},"Crea tu primer tablero para comenzar a gestionar tareas",-1)),r("button",{onClick:l,class:"px-6 py-3 text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 shadow-lg"}," Crear Tablero ")]))]),o.value?(b(),y("div",{key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9999]",onClick:x[5]||(x[5]=Fe(_=>o.value=!1,["self"]))},[r("div",Zee,[x[22]||(x[22]=r("h2",{class:"text-xl font-bold text-white mb-4"},"Crear Nuevo Tablero",-1)),r("form",{onSubmit:Fe(m,["prevent"])},[r("div",ete,[x[17]||(x[17]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Nombre",-1)),ie(r("input",{"onUpdate:modelValue":x[0]||(x[0]=_=>n.value.name=_),type:"text",required:"",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Mi Proyecto"},null,512),[[ke,n.value.name]])]),r("div",tte,[x[18]||(x[18]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Descripcin",-1)),ie(r("textarea",{"onUpdate:modelValue":x[1]||(x[1]=_=>n.value.description=_),rows:"3",class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Descripcin del proyecto..."},null,512),[[ke,n.value.description]])]),r("div",ste,[x[21]||(x[21]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Tipo de Tablero",-1)),r("div",ote,[r("label",{class:de(["relative flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors",n.value.type==="kanban"?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-500 bg-gray-700/30"])},[ie(r("input",{"onUpdate:modelValue":x[2]||(x[2]=_=>n.value.type=_),type:"radio",value:"kanban",class:"sr-only"},null,512),[[Ui,n.value.type]]),x[19]||(x[19]=r("div",{class:"flex-1"},[r("div",{class:"font-medium text-white"},"Kanban"),r("div",{class:"text-xs text-gray-400"},"Flujo continuo")],-1))],2),r("label",{class:de(["relative flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors",n.value.type==="scrum"?"border-purple-500 bg-purple-500/10":"border-gray-600 hover:border-gray-500 bg-gray-700/30"])},[ie(r("input",{"onUpdate:modelValue":x[3]||(x[3]=_=>n.value.type=_),type:"radio",value:"scrum",class:"sr-only"},null,512),[[Ui,n.value.type]]),x[20]||(x[20]=r("div",{class:"flex-1"},[r("div",{class:"font-medium text-white"},"Scrum"),r("div",{class:"text-xs text-gray-400"},"Con sprints")],-1))],2)])]),r("div",nte,[r("button",{type:"button",onClick:x[4]||(x[4]=_=>o.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 border border-gray-600 rounded-lg hover:bg-gray-600"}," Cancelar "),r("button",{type:"submit",disabled:!n.value.name,class:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Crear Tablero ",8,rte)])],32)])])):q("",!0)]))}}),ate=Et(ite,[["__scopeId","data-v-816a3fda"]]),lte={class:"flex items-start justify-between mb-2"},cte={class:"flex items-center space-x-2 flex-1 min-w-0"},dte={class:"text-sm font-semibold text-gray-900 truncate"},ute={key:0,class:"text-xs text-gray-600 mb-3 line-clamp-2"},fte={key:1,class:"flex flex-wrap gap-1 mb-3"},pte={key:0,class:"px-2 py-1 text-xs text-gray-500"},hte={key:2,class:"flex items-center space-x-2 mb-3 text-xs text-gray-600"},gte={class:"truncate"},mte={class:"flex items-center justify-between"},bte={key:0,class:"flex items-center space-x-2"},vte={class:"w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs font-medium"},yte={class:"text-xs text-gray-600 truncate max-w-[100px]"},xte={key:1,class:"text-xs text-gray-400"},wte={class:"flex items-center space-x-3 text-xs text-gray-500"},_te={key:0,class:"flex items-center space-x-1"},kte={key:1,class:"flex items-center space-x-1"},Cte={key:2,class:"flex items-center space-x-1"},$te={key:3,class:"mt-2 flex items-center space-x-1 text-xs text-red-600"},Ete=Le({__name:"TaskCard",props:{task:{}},emits:["click"],setup(t){const e=t,s=re(()=>{switch(e.task.type){case"bug":return"svg";case"feature":return"svg";case"user-story":return"svg";case"epic":return"svg";default:return"svg"}}),o=re(()=>({task:"text-blue-600",bug:"text-red-600",feature:"text-purple-600","user-story":"text-green-600",epic:"text-orange-600"})[e.task.type]||"text-gray-600"),n=re(()=>({low:"bg-gray-100 text-gray-700",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"})[e.task.priority]||"bg-gray-100 text-gray-700"),i=re(()=>({low:"Baja",medium:"Media",high:"Alta",critical:"Crtica"})[e.task.priority]||e.task.priority),a=re(()=>e.task.status==="blocked"?"border-red-300 bg-red-50":e.task.priority==="critical"?"border-red-200":""),l=re(()=>{var f,p;const d=(p=(f=e.task.github)==null?void 0:f.pullRequest)==null?void 0:p.status;return{open:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800",merged:"bg-purple-100 text-purple-800"}[d||"open"]});function c(d){return d.split(" ").map(u=>u[0]).join("").toUpperCase().substring(0,2)}return(d,u)=>{var f;return b(),y("div",{class:de(["task-card bg-white rounded-lg shadow-sm border border-gray-200 p-4 cursor-pointer hover:shadow-md transition-shadow",a.value]),onClick:u[0]||(u[0]=p=>d.$emit("click",d.task))},[r("div",lte,[r("div",cte,[r("span",{class:de(["task-type-icon flex-shrink-0",o.value])},[(b(),Ue(vc(s.value),{class:"w-4 h-4"}))],2),r("h3",dte,w(d.task.title),1)]),r("span",{class:de(["priority-badge flex-shrink-0 ml-2 px-2 py-1 text-xs font-medium rounded",n.value])},w(i.value),3)]),d.task.description?(b(),y("p",ute,w(d.task.description),1)):q("",!0),d.task.tags&&d.task.tags.length>0?(b(),y("div",fte,[(b(!0),y(ge,null,xe(d.task.tags.slice(0,3),p=>(b(),y("span",{key:p,class:"px-2 py-1 text-xs bg-blue-50 text-blue-700 rounded"},w(p),1))),128)),d.task.tags.length>3?(b(),y("span",pte," +"+w(d.task.tags.length-3),1)):q("",!0)])):q("",!0),(f=d.task.github)!=null&&f.branch?(b(),y("div",hte,[u[1]||(u[1]=r("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z","clip-rule":"evenodd"})],-1)),r("span",gte,w(d.task.github.branch),1),d.task.github.pullRequest?(b(),y("span",{key:0,class:de(["px-2 py-0.5 rounded text-xs font-medium",l.value])}," PR #"+w(d.task.github.pullRequest.number),3)):q("",!0)])):q("",!0),r("div",mte,[d.task.assignedTo?(b(),y("div",bte,[r("div",vte,w(c(d.task.assignedTo.name)),1),r("span",yte,w(d.task.assignedTo.name),1)])):(b(),y("div",xte,"Sin asignar")),r("div",wte,[d.task.comments&&d.task.comments.length>0?(b(),y("div",_te,[u[2]||(u[2]=r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),r("span",null,w(d.task.comments.length),1)])):q("",!0),d.task.attachments&&d.task.attachments.length>0?(b(),y("div",kte,[u[3]||(u[3]=r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),r("span",null,w(d.task.attachments.length),1)])):q("",!0),d.task.estimatedHours?(b(),y("div",Cte,[u[4]||(u[4]=r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),r("span",null,w(d.task.estimatedHours)+"h",1)])):q("",!0)])]),d.task.status==="blocked"?(b(),y("div",$te,[...u[5]||(u[5]=[r("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z","clip-rule":"evenodd"})],-1),r("span",null,"Bloqueada",-1)])])):q("",!0)],2)}}}),Ste=Et(Ete,[["__scopeId","data-v-c8d2eab4"]]),Ate={class:"board-column bg-gray-50 rounded-lg p-4 min-w-[300px] max-w-[350px]"},Tte={class:"flex items-center justify-between mb-4"},Pte={class:"flex items-center space-x-2"},Mte={class:"text-sm font-semibold text-gray-900"},Rte={class:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-200 text-gray-700"},Dte={key:0,class:"text-xs text-gray-500"},Ote={key:0,class:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800"},Ite=["onDragstart"],Lte={key:0,class:"text-center py-8 text-gray-400 text-sm"},Bte=Le({__name:"BoardColumn",props:{column:{},tasks:{},canAddTask:{type:Boolean}},emits:["add-task","task-click","task-moved"],setup(t,{emit:e}){const s=t,o=e,n=I(!1);let i=null;function a(f,p){i=f,p.dataTransfer&&(p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/plain",f._id))}function l(f){f.preventDefault(),n.value=!0,f.dataTransfer&&(f.dataTransfer.dropEffect="move")}function c(){n.value=!1}function d(f){f.preventDefault(),n.value=!1,i&&o("task-moved",i,s.column.id,s.tasks.length)}function u(){i=null}return(f,p)=>(b(),y("div",Ate,[r("div",Tte,[r("div",Pte,[r("h3",Mte,w(f.column.name),1),r("span",Rte,w(f.tasks.length),1),f.column.wipLimit?(b(),y("span",Dte," / "+w(f.column.wipLimit),1)):q("",!0)]),f.canAddTask?(b(),y("button",{key:0,onClick:p[0]||(p[0]=g=>f.$emit("add-task",f.column.id)),class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors",title:"Agregar tarea"},[...p[1]||(p[1]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])):q("",!0)]),f.column.wipLimit&&f.tasks.length>=f.column.wipLimit?(b(),y("div",Ote,[...p[2]||(p[2]=[r("div",{class:"flex items-center space-x-1"},[r("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),r("span",null,"Lmite WIP alcanzado")],-1)])])):q("",!0),r("div",{ref:"dropZone",class:de(["tasks-container space-y-3 min-h-[200px]",{"drop-zone-active":n.value}]),onDragover:Fe(l,["prevent"]),onDragleave:c,onDrop:d},[(b(!0),y(ge,null,xe(f.tasks,g=>(b(),y("div",{key:g._id,draggable:"true",onDragstart:m=>a(g,m),onDragend:u},[fe(Ste,{task:g,onClick:m=>f.$emit("task-click",g)},null,8,["task","onClick"])],40,Ite))),128)),f.tasks.length===0?(b(),y("div",Lte,[...p[3]||(p[3]=[r("svg",{class:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),r("p",null,"Sin tareas",-1)])])):q("",!0)],34)]))}}),Nte=Et(Bte,[["__scopeId","data-v-924e47c6"]]),jte={class:"kanban-board h-full flex flex-col"},Fte={class:"board-header bg-white border-b border-gray-200 p-4"},Ute={class:"flex items-center justify-between"},zte={class:"flex items-center space-x-4"},Vte={class:"text-2xl font-bold text-gray-900"},Hte={class:"flex items-center space-x-3"},qte=["value"],Wte={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg"},Gte={class:"grid grid-cols-4 gap-4"},Kte={key:0,class:"flex-1 flex items-center justify-center"},Yte={key:1,class:"flex-1 overflow-x-auto"},Jte={class:"flex space-x-4 p-6 h-full"},Xte=Le({__name:"KanbanBoard",setup(t){const e=pf(),s=zc(),o=Hf(),n=I(!1),i=I(null),a=I({type:"",priority:"",status:""}),l=re(()=>s.currentBoard),c=re(()=>s.currentBoardSprints),d=re(()=>s.loading||o.loading),u=re(()=>l.value?l.value.columns.sort((P,$)=>P.order-$.order):[]),f=re(()=>{var $;return{kanban:"bg-blue-100 text-blue-800",scrum:"bg-purple-100 text-purple-800",custom:"bg-gray-100 text-gray-800"}[(($=l.value)==null?void 0:$.type)||"kanban"]}),p=re(()=>{var $;return{kanban:"Kanban",scrum:"Scrum",custom:"Personalizado"}[(($=l.value)==null?void 0:$.type)||"kanban"]});function g(P){return{planned:"Planeado",active:"Activo",completed:"Completado"}[P.status]||P.status}function m(P){return o.tasks.filter($=>$.boardStatus===P)}async function v(){const P=e.params.id,$={...a.value,sprint:i.value||void 0};Object.keys($).forEach(R=>{$[R]||delete $[R]}),await o.fetchTasks(P,$)}function x(){a.value={type:"",priority:"",status:""},v()}async function _(P,$,R){try{await o.moveTask(P._id,$,R)}catch(V){console.error("Error moving task:",V)}}function k(P){console.log("Open task modal for column:",P)}function C(P){console.log("Open task detail:",P)}return nt(async()=>{const P=e.params.id;await s.fetchBoardById(P),await v()}),Rt(a,()=>{v()},{deep:!0}),(P,$)=>{var R,V;return b(),y("div",jte,[r("div",Fte,[r("div",Ute,[r("div",zte,[r("h1",Vte,w((R=l.value)==null?void 0:R.name),1),r("span",{class:de(["px-3 py-1 text-sm font-medium rounded-full",f.value])},w(p.value),3)]),r("div",Hte,[r("button",{onClick:$[0]||($[0]=B=>n.value=!n.value),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"},[...$[6]||($[6]=[r("svg",{class:"w-5 h-5 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),ne(" Filtros ",-1)])]),((V=l.value)==null?void 0:V.type)==="scrum"&&c.value.length>0?ie((b(),y("select",{key:0,"onUpdate:modelValue":$[1]||($[1]=B=>i.value=B),onChange:v,class:"px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[$[7]||($[7]=r("option",{value:null},"Backlog",-1)),(b(!0),y(ge,null,xe(c.value,B=>(b(),y("option",{key:B._id,value:B._id},w(B.name)+" ("+w(g(B))+") ",9,qte))),128))],544)),[[De,i.value]]):q("",!0),r("button",{onClick:$[2]||($[2]=B=>k()),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"},[...$[8]||($[8]=[r("svg",{class:"w-5 h-5 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ne(" Nueva Tarea ",-1)])])])]),n.value?(b(),y("div",Wte,[r("div",Gte,[r("div",null,[$[10]||($[10]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo",-1)),ie(r("select",{"onUpdate:modelValue":$[3]||($[3]=B=>a.value.type=B),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg"},[...$[9]||($[9]=[Es('<option value="" data-v-aceea5b5>Todos</option><option value="task" data-v-aceea5b5>Task</option><option value="bug" data-v-aceea5b5>Bug</option><option value="feature" data-v-aceea5b5>Feature</option><option value="user-story" data-v-aceea5b5>User Story</option><option value="epic" data-v-aceea5b5>Epic</option>',6)])],512),[[De,a.value.type]])]),r("div",null,[$[12]||($[12]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prioridad",-1)),ie(r("select",{"onUpdate:modelValue":$[4]||($[4]=B=>a.value.priority=B),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg"},[...$[11]||($[11]=[Es('<option value="" data-v-aceea5b5>Todas</option><option value="low" data-v-aceea5b5>Baja</option><option value="medium" data-v-aceea5b5>Media</option><option value="high" data-v-aceea5b5>Alta</option><option value="critical" data-v-aceea5b5>Crtica</option>',5)])],512),[[De,a.value.priority]])]),r("div",null,[$[14]||($[14]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Estado",-1)),ie(r("select",{"onUpdate:modelValue":$[5]||($[5]=B=>a.value.status=B),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg"},[...$[13]||($[13]=[r("option",{value:""},"Todos",-1),r("option",{value:"active"},"Activo",-1),r("option",{value:"blocked"},"Bloqueado",-1),r("option",{value:"completed"},"Completado",-1)])],512),[[De,a.value.status]])]),r("div",{class:"flex items-end"},[r("button",{onClick:x,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Limpiar Filtros ")])])])):q("",!0)]),d.value?(b(),y("div",Kte,[...$[15]||($[15]=[r("div",{class:"text-center"},[r("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),r("p",{class:"mt-4 text-gray-600"},"Cargando tablero...")],-1)])])):(b(),y("div",Yte,[r("div",Jte,[(b(!0),y(ge,null,xe(u.value,B=>(b(),Ue(Nte,{key:B.id,column:B,tasks:m(B.id),"can-add-task":!0,onAddTask:E=>k(B.id),onTaskClick:C,onTaskMoved:_},null,8,["column","tasks","onAddTask"]))),128))])]))])}}}),Qte=Et(Xte,[["__scopeId","data-v-aceea5b5"]]),Zte={class:"board-view-page h-full"},ese=Le({__name:"BoardView",setup(t){return(e,s)=>(b(),y("div",Zte,[fe(Qte)]))}}),tse={class:"space-y-6"},sse={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-purple-500/20"},ose={class:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between"},nse={class:"flex items-center gap-4"},rse=["value"],ise={class:"flex bg-gray-700 rounded-lg p-1"},ase={class:"flex items-center gap-3"},lse=["value"],cse={key:0,class:"mt-4 grid grid-cols-4 gap-4"},dse={key:0,class:"flex justify-center py-12"},use={key:1,class:"overflow-x-auto"},fse={class:"flex space-x-4 pb-4 min-w-max"},pse={class:"flex items-center justify-between mb-4"},hse={class:"flex items-center gap-2"},gse={class:"text-white font-semibold"},mse={class:"bg-gray-700 text-gray-300 px-2 py-0.5 rounded-full text-xs"},bse={key:0,class:"text-gray-500 text-xs"},vse=["onClick"],yse={key:0,class:"mb-3 p-2 bg-yellow-500/10 border border-yellow-500/30 rounded text-xs text-yellow-400"},xse=["onDrop"],wse=["onDragstart","onClick"],_se={class:"flex items-start justify-between mb-2"},kse={class:"flex items-center gap-2 flex-1"},Cse={class:"text-white text-sm font-medium flex-1 line-clamp-2"},$se={key:0,class:"text-gray-400 text-xs mb-2 line-clamp-2"},Ese={key:1,class:"flex flex-wrap gap-1 mb-2"},Sse={key:2,class:"flex items-center gap-2 mb-2 text-xs text-gray-400"},Ase={class:"truncate"},Tse={class:"flex items-center justify-between pt-2 border-t border-gray-700/50"},Pse={key:0,class:"flex items-center gap-2"},Mse={class:"w-6 h-6 rounded-full bg-purple-600 text-white flex items-center justify-center text-[10px]"},Rse={class:"text-xs text-gray-400 truncate max-w-[100px]"},Dse={key:1,class:"text-xs text-gray-500"},Ose={class:"flex items-center gap-2 text-xs text-gray-500"},Ise={key:0,class:"flex items-center gap-1"},Lse={key:1,class:"flex items-center gap-1"},Bse={key:2,class:"flex items-center gap-1"},Nse={key:3,class:"mt-2 flex items-center gap-1 text-xs text-red-400"},jse={key:0,class:"text-center py-8 text-gray-500 text-sm"},Fse={key:2,class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-lg border border-purple-500/20 overflow-hidden"},Use={class:"overflow-x-auto"},zse={class:"w-full"},Vse={class:"divide-y divide-gray-700"},Hse=["onClick"],qse={class:"px-4 py-3"},Wse={class:"text-white font-medium"},Gse={class:"text-gray-400 text-xs line-clamp-1"},Kse={class:"px-4 py-3"},Yse={class:"px-4 py-3"},Jse={class:"px-4 py-3"},Xse={class:"px-4 py-3"},Qse={key:0,class:"flex items-center gap-2"},Zse={class:"w-6 h-6 rounded-full bg-purple-600 text-white flex items-center justify-center text-[10px]"},eoe={class:"text-white text-sm"},toe={key:1,class:"text-gray-500 text-sm"},soe={class:"px-4 py-3 text-white text-sm"},ooe={class:"px-4 py-3"},noe={key:0,class:"flex items-center gap-2"},roe={class:"text-gray-400 text-xs"},ioe={key:3,class:"text-center py-12"},aoe=Le({__name:"TasksBoard",setup(t){const e=zc(),s=Hf(),o=I("kanban"),n=I(""),i=I(null),a=I(!1),l=I(!1),c=I({type:"",priority:"",status:""}),d=re(()=>e.myBoards),u=re(()=>e.currentBoard),f=re(()=>e.currentBoardSprints),p=re(()=>s.tasks),g=re(()=>e.loading||s.loading),m=re(()=>u.value?u.value.columns.sort((le,J)=>le.order-J.order):[]);function v(le){return p.value.filter(J=>J.boardStatus===le)}function x(le){return{backlog:"bg-gray-500",todo:"bg-blue-500","in-progress":"bg-yellow-500",review:"bg-purple-500",testing:"bg-orange-500",done:"bg-green-500"}[le]||"bg-gray-500"}function _(le){return{task:"fas fa-tasks",bug:"fas fa-bug",feature:"fas fa-star","user-story":"fas fa-user",epic:"fas fa-mountain"}[le]||"fas fa-circle"}function k(le){return{task:"#3B82F6",bug:"#EF4444",feature:"#A855F7","user-story":"#10B981",epic:"#F59E0B"}[le]||"#6B7280"}function C(le){return{task:"Task",bug:"Bug",feature:"Feature","user-story":"User Story",epic:"Epic"}[le]||le}function P(le){return{low:"bg-gray-500/20 text-gray-400",medium:"bg-yellow-500/20 text-yellow-400",high:"bg-orange-500/20 text-orange-400",critical:"bg-red-500/20 text-red-400"}[le]||"bg-gray-500/20 text-gray-400"}function $(le){return{low:"Baja",medium:"Media",high:"Alta",critical:"Crtica"}[le]||le}function R(le){return{backlog:"bg-gray-500/20 text-gray-400",todo:"bg-blue-500/20 text-blue-400","in-progress":"bg-yellow-500/20 text-yellow-400",review:"bg-purple-500/20 text-purple-400",testing:"bg-orange-500/20 text-orange-400",done:"bg-green-500/20 text-green-400"}[le]||"bg-gray-500/20 text-gray-400"}function V(le){return{backlog:"Backlog",todo:"Por Hacer","in-progress":"En Progreso",review:"Revisin",testing:"Pruebas",done:"Completado"}[le]||le}function B(le){return{open:"bg-green-500/20 text-green-400",closed:"bg-gray-500/20 text-gray-400",merged:"bg-purple-500/20 text-purple-400"}[le]||"bg-gray-500/20 text-gray-400"}function E(le){return le.split(" ").map(J=>J[0]).join("").toUpperCase().substring(0,2)}let S=null;function O(le,J){S=J,le.dataTransfer&&(le.dataTransfer.effectAllowed="move")}function T(){S=null}async function L(le,J){if(le.preventDefault(),S&&S.boardStatus!==J)try{await s.moveTask(S._id,J)}catch(Pe){console.error("Error moving task:",Pe)}}async function K(){n.value&&(await e.fetchBoardById(n.value),await z())}async function z(){if(!n.value)return;const le={...c.value,sprint:i.value||void 0};Object.keys(le).forEach(J=>{le[J]||delete le[J]}),await s.fetchTasks(n.value,le)}function F(){c.value={type:"",priority:"",status:""},z()}function W(le){console.log("Open task modal for column:",le)}function Z(le){console.log("Open task detail:",le)}return nt(async()=>{await e.fetchBoards(),d.value.length>0&&(n.value=d.value[0]._id,await K())}),(le,J)=>{var Pe,me;return b(),y("div",tse,[r("div",sse,[r("div",ose,[r("div",nse,[ie(r("select",{"onUpdate:modelValue":J[0]||(J[0]=Y=>n.value=Y),onChange:K,class:"px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"},[J[12]||(J[12]=r("option",{value:""},"Seleccionar Tablero",-1)),(b(!0),y(ge,null,xe(d.value,Y=>(b(),y("option",{key:Y._id,value:Y._id},w(Y.name),9,rse))),128))],544),[[De,n.value]]),r("div",ise,[r("button",{onClick:J[1]||(J[1]=Y=>o.value="kanban"),class:de([o.value==="kanban"?"bg-purple-600 text-white":"text-gray-400 hover:text-white","px-3 py-1 rounded-md text-sm font-medium transition-colors"])},[...J[13]||(J[13]=[r("i",{class:"fas fa-columns mr-2"},null,-1),ne(" Kanban ",-1)])],2),r("button",{onClick:J[2]||(J[2]=Y=>o.value="list"),class:de([o.value==="list"?"bg-purple-600 text-white":"text-gray-400 hover:text-white","px-3 py-1 rounded-md text-sm font-medium transition-colors"])},[...J[14]||(J[14]=[r("i",{class:"fas fa-list mr-2"},null,-1),ne(" Lista ",-1)])],2)])]),r("div",ase,[r("button",{onClick:J[3]||(J[3]=Y=>a.value=!a.value),class:"px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white hover:bg-gray-600/50 transition-colors"},[...J[15]||(J[15]=[r("i",{class:"fas fa-filter mr-2"},null,-1),ne(" Filtros ",-1)])]),((Pe=u.value)==null?void 0:Pe.type)==="scrum"?ie((b(),y("select",{key:0,"onUpdate:modelValue":J[4]||(J[4]=Y=>i.value=Y),onChange:z,class:"px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500"},[J[16]||(J[16]=r("option",{value:null},"Backlog",-1)),(b(!0),y(ge,null,xe(f.value,Y=>(b(),y("option",{key:Y._id,value:Y._id},w(Y.name),9,lse))),128))],544)),[[De,i.value]]):q("",!0),r("button",{onClick:J[5]||(J[5]=Y=>W()),class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all flex items-center gap-2"},[...J[17]||(J[17]=[r("i",{class:"fas fa-plus"},null,-1),ne(" Nueva Tarea ",-1)])]),(me=u.value)!=null&&me.github?(b(),y("button",{key:1,onClick:J[6]||(J[6]=Y=>l.value=!l.value),class:"px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white hover:bg-gray-600/50 transition-colors",title:"GitHub Integration"},[...J[18]||(J[18]=[r("i",{class:"fab fa-github"},null,-1)])])):q("",!0)])]),a.value?(b(),y("div",cse,[r("div",null,[J[20]||(J[20]=r("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Tipo",-1)),ie(r("select",{"onUpdate:modelValue":J[7]||(J[7]=Y=>c.value.type=Y),onChange:z,class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white"},[...J[19]||(J[19]=[Es('<option value="" data-v-e306eb22>Todos</option><option value="task" data-v-e306eb22>Task</option><option value="bug" data-v-e306eb22>Bug</option><option value="feature" data-v-e306eb22>Feature</option><option value="user-story" data-v-e306eb22>User Story</option><option value="epic" data-v-e306eb22>Epic</option>',6)])],544),[[De,c.value.type]])]),r("div",null,[J[22]||(J[22]=r("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Prioridad",-1)),ie(r("select",{"onUpdate:modelValue":J[8]||(J[8]=Y=>c.value.priority=Y),onChange:z,class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white"},[...J[21]||(J[21]=[Es('<option value="" data-v-e306eb22>Todas</option><option value="low" data-v-e306eb22>Baja</option><option value="medium" data-v-e306eb22>Media</option><option value="high" data-v-e306eb22>Alta</option><option value="critical" data-v-e306eb22>Crtica</option>',5)])],544),[[De,c.value.priority]])]),r("div",null,[J[24]||(J[24]=r("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Estado",-1)),ie(r("select",{"onUpdate:modelValue":J[9]||(J[9]=Y=>c.value.status=Y),onChange:z,class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white"},[...J[23]||(J[23]=[r("option",{value:""},"Todos",-1),r("option",{value:"active"},"Activo",-1),r("option",{value:"blocked"},"Bloqueado",-1),r("option",{value:"completed"},"Completado",-1)])],544),[[De,c.value.status]])]),r("div",{class:"flex items-end"},[r("button",{onClick:F,class:"w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white hover:bg-gray-600/50"}," Limpiar ")])])):q("",!0)]),g.value?(b(),y("div",dse,[...J[25]||(J[25]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"},null,-1)])])):o.value==="kanban"&&n.value?(b(),y("div",use,[r("div",fse,[(b(!0),y(ge,null,xe(m.value,Y=>(b(),y("div",{key:Y.id,class:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-4 border border-gray-700 w-80 flex-shrink-0"},[r("div",pse,[r("div",hse,[r("div",{class:de(["w-3 h-3 rounded-full",x(Y.id)])},null,2),r("h3",gse,w(Y.name),1),r("span",mse,w(v(Y.id).length),1),Y.wipLimit?(b(),y("span",bse," / "+w(Y.wipLimit),1)):q("",!0)]),r("button",{onClick:j=>W(Y.id),class:"text-gray-400 hover:text-white transition-colors"},[...J[26]||(J[26]=[r("i",{class:"fas fa-plus"},null,-1)])],8,vse)]),Y.wipLimit&&v(Y.id).length>=Y.wipLimit?(b(),y("div",yse,[...J[27]||(J[27]=[r("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),ne(" Lmite WIP alcanzado ",-1)])])):q("",!0),r("div",{class:"space-y-3 min-h-[200px] max-h-[calc(100vh-400px)] overflow-y-auto",onDrop:j=>L(j,Y.id),onDragover:J[10]||(J[10]=Fe(()=>{},["prevent"])),onDragenter:J[11]||(J[11]=Fe(()=>{},["prevent"]))},[(b(!0),y(ge,null,xe(v(Y.id),j=>{var Q,se,D;return b(),y("div",{key:j._id,draggable:"true",onDragstart:H=>O(H,j),onDragend:T,onClick:H=>Z(j),class:"bg-gray-900/50 rounded-lg p-3 border border-gray-700 hover:border-purple-500/50 transition-all cursor-move group"},[r("div",_se,[r("div",kse,[r("i",{class:de([_(j.type),"text-xs"]),style:yo({color:k(j.type)})},null,6),r("h4",Cse,w(j.title),1)]),r("span",{class:de(["px-2 py-0.5 rounded text-[10px] font-medium flex-shrink-0",P(j.priority)])},w($(j.priority)),3)]),j.description?(b(),y("p",$se,w(j.description),1)):q("",!0),j.tags&&j.tags.length?(b(),y("div",Ese,[(b(!0),y(ge,null,xe(j.tags.slice(0,3),H=>(b(),y("span",{key:H,class:"px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded text-[10px]"},w(H),1))),128))])):q("",!0),(Q=j.github)!=null&&Q.branch?(b(),y("div",Sse,[J[28]||(J[28]=r("i",{class:"fab fa-github"},null,-1)),r("span",Ase,w(j.github.branch),1),j.github.pullRequest?(b(),y("span",{key:0,class:de(["px-2 py-0.5 rounded text-[10px] font-medium",B(j.github.pullRequest.status)])}," PR #"+w(j.github.pullRequest.number),3)):q("",!0)])):q("",!0),r("div",Tse,[j.assignedTo?(b(),y("div",Pse,[r("div",Mse,w(E(j.assignedTo.name)),1),r("span",Rse,w(j.assignedTo.name),1)])):(b(),y("div",Dse,"Sin asignar")),r("div",Ose,[(se=j.comments)!=null&&se.length?(b(),y("div",Ise,[J[29]||(J[29]=r("i",{class:"fas fa-comment"},null,-1)),r("span",null,w(j.comments.length),1)])):q("",!0),(D=j.attachments)!=null&&D.length?(b(),y("div",Lse,[J[30]||(J[30]=r("i",{class:"fas fa-paperclip"},null,-1)),r("span",null,w(j.attachments.length),1)])):q("",!0),j.estimatedHours?(b(),y("div",Bse,[J[31]||(J[31]=r("i",{class:"fas fa-clock"},null,-1)),r("span",null,w(j.estimatedHours)+"h",1)])):q("",!0)])]),j.status==="blocked"?(b(),y("div",Nse,[...J[32]||(J[32]=[r("i",{class:"fas fa-ban"},null,-1),r("span",null,"Bloqueada",-1)])])):q("",!0)],40,wse)}),128)),v(Y.id).length===0?(b(),y("div",jse,[...J[33]||(J[33]=[r("i",{class:"fas fa-inbox text-2xl mb-2 opacity-50"},null,-1),r("p",null,"Sin tareas",-1)])])):q("",!0)],40,xse)]))),128))])])):o.value==="list"&&n.value?(b(),y("div",Fse,[r("div",Use,[r("table",zse,[J[35]||(J[35]=r("thead",{class:"bg-gray-900/50"},[r("tr",null,[r("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Tarea"),r("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Tipo"),r("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Estado"),r("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Prioridad"),r("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Asignado"),r("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Tiempo"),r("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"GitHub")])],-1)),r("tbody",Vse,[(b(!0),y(ge,null,xe(p.value,Y=>{var j;return b(),y("tr",{key:Y._id,onClick:Q=>Z(Y),class:"hover:bg-gray-700/30 cursor-pointer transition-colors"},[r("td",qse,[r("div",null,[r("div",Wse,w(Y.title),1),r("div",Gse,w(Y.description),1)])]),r("td",Kse,[r("span",{class:"px-2 py-1 rounded text-xs",style:yo({backgroundColor:k(Y.type)+"20",color:k(Y.type)})},w(C(Y.type)),5)]),r("td",Yse,[r("span",{class:de(["px-2 py-1 rounded text-xs",R(Y.boardStatus)])},w(V(Y.boardStatus)),3)]),r("td",Jse,[r("span",{class:de(["px-2 py-1 rounded text-xs",P(Y.priority)])},w($(Y.priority)),3)]),r("td",Xse,[Y.assignedTo?(b(),y("div",Qse,[r("div",Zse,w(E(Y.assignedTo.name)),1),r("span",eoe,w(Y.assignedTo.name),1)])):(b(),y("span",toe,"Sin asignar"))]),r("td",soe,w(Y.estimatedHours||0)+"h / "+w(Y.actualHours||0)+"h ",1),r("td",ooe,[(j=Y.github)!=null&&j.branch?(b(),y("div",noe,[J[34]||(J[34]=r("i",{class:"fab fa-github text-gray-400"},null,-1)),r("span",roe,w(Y.github.branch),1)])):q("",!0)])],8,Hse)}),128))])])])])):(b(),y("div",ioe,[...J[36]||(J[36]=[r("i",{class:"fas fa-clipboard-list text-4xl text-gray-600 mb-4"},null,-1),r("p",{class:"text-gray-400"},"Selecciona un tablero para comenzar",-1)])]))])}}}),loe=Et(aoe,[["__scopeId","data-v-e306eb22"]]),coe=[{path:"/vincular-wpp",name:"WppVinculacion",component:N3,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:E$,meta:{requiresGuest:!0}},{path:"/clients/:id",name:"ClientDetail",component:Pee,meta:{requiresAuth:!0,requiredPermissions:["view-clients"]}},{path:"/",name:"Dashboard",component:QC,meta:{requiresAuth:!0}},{path:"/clients",name:"Clients",component:U6,meta:{requiresAuth:!0,requiredPermissions:["view-clients"]}},{path:"/activities",name:"Activities",component:Y9,meta:{requiresAuth:!0,requiredPermissions:["view-activities"]}},{path:"/reports",name:"Reports",component:CU,meta:{requiresAuth:!0,requiredRoles:["admin","manager"]}},{path:"/accounting",name:"Accounting",component:iG,meta:{requiresAuth:!0,requiredRoles:["admin","manager"]}},{path:"/cases",name:"Cases",component:QK,meta:{requiresAuth:!0,requiredPermissions:["view-cases"]}},{path:"/team",name:"Team",component:pV,meta:{requiresAuth:!0,requiredPermissions:["view-team"]}},{path:"/team-activities",name:"TeamActivities",component:pH,meta:{requiresAuth:!0,requiredPermissions:["view-activities","view-team"]}},{path:"/profile",name:"Profile",component:iX,meta:{requiresAuth:!0}},{path:"/chat",name:"Chat",component:fZ,meta:{requiresAuth:!0}},{path:"/boards",name:"Boards",component:ate,meta:{requiresAuth:!0,requiredPermissions:["view-activities"]}},{path:"/boards/:id",name:"BoardView",component:ese,meta:{requiresAuth:!0,requiredPermissions:["view-activities"]}},{path:"/tasks",name:"Tasks",component:loe,meta:{requiresAuth:!0,requiredPermissions:["view-activities"]}},{path:"/:pathMatch(.*)*",redirect:"/"}],xx=H_({history:y_("/"),routes:coe});xx.beforeEach(async(t,e,s)=>{const o=xt();if(t.path==="/login"){if(o.isAuthenticated){s("/");return}s();return}if(!o.isAuthenticated&&!await o.checkAuth()){s("/login");return}if(t.meta.requiredRoles&&o.user){const n=o.user.role;if(!t.meta.requiredRoles.includes(n)){s("/");return}}if(t.meta.requiredPermissions&&o.user&&!t.meta.requiredPermissions.some(a=>{switch(a){case"view-clients":return o.canViewClients;case"view-activities":return o.canViewActivities;case"view-team":return o.canViewTeam;case"view-accounting":return o.canViewAccounting;case"view-reports":return o.canViewReports;case"view-cases":return o.canViewCases;default:return!1}})){s("/");return}s()});const Zc=rb(_3),doe=B2();DT();Zc.use(yx,{autoClose:3e3,position:"top-right",theme:"dark",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});Zc.use(doe);Zc.use(xx);Zc.mount("#app");
